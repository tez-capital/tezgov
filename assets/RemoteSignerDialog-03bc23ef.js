import{e as w,B,D as C,r as d,w as D,f as I,s as y,o as b,g as U,h as t,j as n,l as h,m as x,k as A,t as P,n as E,F as S,q as p,L,v as z,_ as F,x as N,y as H,A as K}from"./main-02e039e1.js";const u=a=>(N("data-v-d6d37f2b"),a=a(),H(),a),T={class:"center"},j={class:"card z-depth-2"},q={class:"content"},M=u(()=>t("div",{class:"icon-wrap center pv-2"},[t("i",{class:"las la-3x la-cloud"})],-1)),O=u(()=>t("div",{class:"headline pv-3"},"Connect your Remote Signer",-1)),$=u(()=>t("div",{class:"pt-1 space-1"},null,-1)),G={key:0,class:"error-text pt-2"},J=u(()=>t("div",{class:"pv-2 space-2",style:{"grid-row":"9","grid-colum":"1"}},null,-1)),Q={class:"buttons pt-0 pb-2"},W=w({__name:"RemoteSignerDialog",props:{context:{}},emits:["cancel","confirm"],setup(a,{emit:m}){const s=a,f=B("Baker Address"),g=C("Remote Signer Url"),r=d(""),c=d(""),i=d(void 0),l=d(!1);let v=!1;D(()=>s.context.active,e=>{if(e)v=!1;else{l.value=!1,i.value=void 0;return}});const k=I(()=>l.value||y(f.value,e=>e(r.value)!==!0)||y(g.value,e=>e(c.value)!==!0)),R=async()=>{try{l.value=!0;const{RemoteSession:e}=await F(()=>import("./RemoteSignerSession-c8d5388f.js"),["assets/RemoteSignerSession-c8d5388f.js","assets/main-02e039e1.js","assets/index-3694a04e.css","assets/SessionBase-46796db9.js","assets/taquito.es6-c85b4f48.js","assets/DAppClient-5fff09c6.js"]),o=await e.create(r.value,c.value,s.context.networkId,{rpc:s.context.rpc});if(v&&o){o.logout();return}typeof s.context.confirm=="function"&&s.context.confirm(o),m("confirm",o)}catch(e){i.value=`Failed to login with ledger!
Error: ${e.message}`}finally{l.value=!1}},V=()=>{v=!0,typeof s.context.cancel=="function"&&s.context.cancel(),m("cancel")};return(e,o)=>(b(),U(z,{to:"#dialog"},[t("div",{class:p(["modal",{"modal-active":e.context.active}]),key:"remoteSignerDialog"},[t("div",T,[t("div",j,[t("div",q,[M,O,n(x,{type:"text",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=_=>r.value=_),label:"Baker PKH",hint:"PKH of your baker",rules:h(f)},null,8,["modelValue","rules"]),n(x,{type:"text",modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=_=>c.value=_),label:"Remote Signer Url",hint:"Url pointing to your signer instance",rules:h(g)},null,8,["modelValue","rules"]),$,i.value?(b(),A("div",G,P(i.value),1)):E("",!0),J,t("div",Q,[n(S,{onClick:V,label:"Cancel"}),n(S,{class:p(["confirm-btn",{disabled:k.value}]),onClick:R,label:"Connect"},null,8,["class"])])]),t("div",{class:p(["loader-wrap",{"loader-hidden":!l.value}])},[n(L,{class:"loader","is-indeterminate":!0,label:"Please confirm operation on your ledger..."})],2)])])],2)]))}});const Y=K(W,[["__scopeId","data-v-d6d37f2b"]]);export{Y as default};
