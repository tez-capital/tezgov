import{d as C,r as u,w as I,c as B,s as x,o as y,a as D,b as e,e as c,u as m,I as S,f as U,t as P,g as A,F as k,n as f,L as E,T as L,_ as z,p as F,h as N,j as T}from"./main.fcc73858.js";import{a as H,b as K}from"./rules.191cbc32.js";import"./taquito-utils.es6.9e1a8ea2.js";import"./index.558d09ea.js";const _=a=>(F("data-v-d6d37f2b"),a=a(),N(),a),j={class:"center"},M={class:"card z-depth-2"},O={class:"content"},$=_(()=>e("div",{class:"icon-wrap center pv-2"},[e("i",{class:"las la-3x la-cloud"})],-1)),q=_(()=>e("div",{class:"headline pv-3"},"Connect your Remote Signer",-1)),G=_(()=>e("div",{class:"pt-1 space-1"},null,-1)),J={key:0,class:"error-text pt-2"},Q=_(()=>e("div",{class:"pv-2 space-2",style:{"grid-row":"9","grid-colum":"1"}},null,-1)),W={class:"buttons pt-0 pb-2"},X=C({__name:"RemoteSignerDialog",props:{context:null},emits:["cancel","confirm"],setup(a,{emit:g}){const s=a,b=H("Baker Address"),h=K("Remote Signer Url"),r=u(""),i=u(""),d=u(void 0),n=u(!1);let p=!1;I(()=>s.context.active,t=>{if(t)p=!1;else{n.value=!1,d.value=void 0;return}});const R=B(()=>n.value||x(b.value,t=>t(r.value)!==!0)||x(h.value,t=>t(i.value)!==!0));let l;const V=async()=>{try{n.value=!0;const{RemoteSession:t}=await z(()=>import("./RemoteSignerSession.c1f68a36.js"),["assets/RemoteSignerSession.c1f68a36.js","assets/main.fcc73858.js","assets/index.dec37447.css","assets/SessionBase.0da79371.js","assets/taquito-utils.es6.9e1a8ea2.js","assets/index.558d09ea.js","assets/DAppClient.ffc3f8ec.js","assets/taquito-http-utils.es6.491b203a.js"]),o=await t.create(r.value,i.value,s.context.networkId,{rpc:s.context.rpc});if(p&&o){o.logout();return}typeof s.context.confirm=="function"&&s.context.confirm(o),g("confirm",o)}catch(t){d.value=`Failed to login with ledger!
Error: ${t.message}`,l==null||l.close()}finally{n.value=!1}},w=()=>{p=!0,l==null||l.close(),typeof s.context.cancel=="function"&&s.context.cancel(),g("cancel")};return(t,o)=>(y(),D(L,{to:"#dialog"},[e("div",{class:f(["modal",{"modal-active":a.context.active}]),key:"remoteSignerDialog"},[e("div",j,[e("div",M,[e("div",O,[$,q,c(S,{type:"text",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=v=>r.value=v),label:"Baker PKH",hint:"PKH of your baker",rules:m(b)},null,8,["modelValue","rules"]),c(S,{type:"text",modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=v=>i.value=v),label:"Remote Signer Url",hint:"Url pointing to your signer instance",rules:m(h)},null,8,["modelValue","rules"]),G,d.value?(y(),U("div",J,P(d.value),1)):A("",!0),Q,e("div",W,[c(k,{onClick:w,label:"Cancel"}),c(k,{class:f(["confirm-btn",{disabled:m(R)}]),onClick:V,label:"Connect"},null,8,["class"])])]),e("div",{class:f(["loader-wrap",{"loader-hidden":!n.value}])},[c(E,{class:"loader","is-indeterminate":!0,label:"Please confirm operation on your ledger..."})],2)])])],2)]))}});const oe=T(X,[["__scopeId","data-v-d6d37f2b"]]);export{oe as default};
