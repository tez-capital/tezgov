import{_ as C}from"./taquito-utils.es6-82c03c39.js";import{d as I,k as B,l as D,r as u,w as U,c as P,s as x,o as y,a as A,b as e,e as c,g as m,I as S,f as E,t as L,h as z,F as k,n as f,L as F,T as N,p as T,i as H,j as K}from"./main-043506b6.js";import"./_commonjsHelpers-6dff16f2.js";const _=a=>(T("data-v-d6d37f2b"),a=a(),H(),a),j={class:"center"},M={class:"card z-depth-2"},O={class:"content"},$=_(()=>e("div",{class:"icon-wrap center pv-2"},[e("i",{class:"las la-3x la-cloud"})],-1)),q=_(()=>e("div",{class:"headline pv-3"},"Connect your Remote Signer",-1)),G=_(()=>e("div",{class:"pt-1 space-1"},null,-1)),J={key:0,class:"error-text pt-2"},Q=_(()=>e("div",{class:"pv-2 space-2",style:{"grid-row":"9","grid-colum":"1"}},null,-1)),W={class:"buttons pt-0 pb-2"},X=I({__name:"RemoteSignerDialog",props:{context:null},emits:["cancel","confirm"],setup(a,{emit:g}){const s=a,b=B("Baker Address"),h=D("Remote Signer Url"),r=u(""),i=u(""),d=u(void 0),n=u(!1);let v=!1;U(()=>s.context.active,t=>{if(t)v=!1;else{n.value=!1,d.value=void 0;return}});const R=P(()=>n.value||x(b.value,t=>t(r.value)!==!0)||x(h.value,t=>t(i.value)!==!0));let l;const V=async()=>{try{n.value=!0;const{RemoteSession:t}=await C(()=>import("./RemoteSignerSession-af796c33.js"),["assets/RemoteSignerSession-af796c33.js","assets/main-043506b6.js","assets/taquito-utils.es6-82c03c39.js","assets/_commonjsHelpers-6dff16f2.js","assets/index-bf468514.css","assets/SessionBase-d64d9027.js","assets/taquito.es6-a47a8eec.js","assets/index-9aada285.js","assets/index-6f227088.js","assets/DAppClient-8558df6f.js"]),o=await t.create(r.value,i.value,s.context.networkId,{rpc:s.context.rpc});if(v&&o){o.logout();return}typeof s.context.confirm=="function"&&s.context.confirm(o),g("confirm",o)}catch(t){d.value=`Failed to login with ledger!
Error: ${t.message}`,l==null||l.close()}finally{n.value=!1}},w=()=>{v=!0,l==null||l.close(),typeof s.context.cancel=="function"&&s.context.cancel(),g("cancel")};return(t,o)=>(y(),A(N,{to:"#dialog"},[e("div",{class:f(["modal",{"modal-active":a.context.active}]),key:"remoteSignerDialog"},[e("div",j,[e("div",M,[e("div",O,[$,q,c(S,{type:"text",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=p=>r.value=p),label:"Baker PKH",hint:"PKH of your baker",rules:m(b)},null,8,["modelValue","rules"]),c(S,{type:"text",modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=p=>i.value=p),label:"Remote Signer Url",hint:"Url pointing to your signer instance",rules:m(h)},null,8,["modelValue","rules"]),G,d.value?(y(),E("div",J,L(d.value),1)):z("",!0),Q,e("div",W,[c(k,{onClick:w,label:"Cancel"}),c(k,{class:f(["confirm-btn",{disabled:m(R)}]),onClick:V,label:"Connect"},null,8,["class"])])]),e("div",{class:f(["loader-wrap",{"loader-hidden":!n.value}])},[c(F,{class:"loader","is-indeterminate":!0,label:"Please confirm operation on your ledger..."})],2)])])],2)]))}});const te=K(X,[["__scopeId","data-v-d6d37f2b"]]);export{te as default};
