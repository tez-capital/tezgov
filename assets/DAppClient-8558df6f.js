import{B as Co,x as Po}from"./main-043506b6.js";import{H as Pn,J as Ur,K as en,L as Ot,M as Br,d as et,N as Ve}from"./taquito-utils.es6-82c03c39.js";import{c as on,a as ko}from"./_commonjsHelpers-6dff16f2.js";function Lo(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}function ki(n){return Object.keys(n)}var tt;(function(n){n.PENDING="pending",n.RESOLVED="resolved",n.REJECTED="rejected"})(tt||(tt={}));const Qi=()=>{throw new Error("ExposedPromise not initialized yet.")};class be{constructor(){this._resolve=Qi,this._reject=Qi,this._status=tt.PENDING,this._promise=new Promise((e,t)=>{this._resolve=i=>{this.isSettled()||(this._promiseResult=i,e(i),this._status=tt.RESOLVED)},this._reject=i=>{this.isSettled()||(this._promiseError=i,t(i),this._status=tt.REJECTED)}})}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}get status(){return this._status}get promiseResult(){return this._promiseResult}get promiseError(){return this._promiseError}static resolve(e){const t=new be;return t.resolve(e),t}static reject(e){const t=new be;return t.reject(e),t}isPending(){return this.status===tt.PENDING}isResolved(){return this.status===tt.RESOLVED}isRejected(){return this.status===tt.REJECTED}isSettled(){return this.isResolved()||this.isRejected()}}var sn=Pn.exports.Buffer;function Mo(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var i=0;i<n.length;i++){var r=n.charAt(i),o=r.charCodeAt(0);if(e[o]!==255)throw new TypeError(r+" is ambiguous");e[o]=i}var s=n.length,c=n.charAt(0),d=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function l(y){if((Array.isArray(y)||y instanceof Uint8Array)&&(y=sn.from(y)),!sn.isBuffer(y))throw new TypeError("Expected Buffer");if(y.length===0)return"";for(var k=0,B=0,D=0,q=y.length;D!==q&&y[D]===0;)D++,k++;for(var H=(q-D)*u+1>>>0,b=new Uint8Array(H);D!==q;){for(var R=y[D],w=0,E=H-1;(R!==0||w<B)&&E!==-1;E--,w++)R+=256*b[E]>>>0,b[E]=R%s>>>0,R=R/s>>>0;if(R!==0)throw new Error("Non-zero carry");B=w,D++}for(var a=H-B;a!==H&&b[a]===0;)a++;for(var f=c.repeat(k);a<H;++a)f+=n.charAt(b[a]);return f}function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return sn.alloc(0);for(var k=0,B=0,D=0;y[k]===c;)B++,k++;for(var q=(y.length-k)*d+1>>>0,H=new Uint8Array(q);y[k];){var b=e[y.charCodeAt(k)];if(b===255)return;for(var R=0,w=q-1;(b!==0||R<D)&&w!==-1;w--,R++)b+=s*H[w]>>>0,H[w]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");D=R,k++}for(var E=q-D;E!==q&&H[E]===0;)E++;var a=sn.allocUnsafe(B+(q-E));a.fill(0,0,B);for(var f=B;E!==q;)a[f++]=H[E++];return a}function A(y){var k=h(y);if(k)return k;throw new Error("Non-base"+s+" character")}return{encode:l,decodeUnsafe:h,decode:A}}var Uo=Mo,Bo=Uo,Do="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ko=Bo(Do),Gn=Ko,jo=Pn.exports.Buffer,Go=function(n){function e(o){var s=n(o);return Gn.encode(jo.concat([o,s],o.length+4))}function t(o){var s=o.slice(0,-4),c=o.slice(-4),d=n(s);if(!(c[0]^d[0]|c[1]^d[1]|c[2]^d[2]|c[3]^d[3]))return s}function i(o){var s=Gn.decodeUnsafe(o);if(s)return t(s)}function r(o){var s=Gn.decode(o),c=t(s);if(!c)throw new Error("Invalid checksum");return c}return{encode:e,decode:r,decodeUnsafe:i}},Vi=Ur,qo=Go;function Ho(n){var e=Vi("sha256").update(n).digest();return Vi("sha256").update(e).digest()}var mi=qo(Ho),Dt={},Dr={},Zt={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=en,t=Ot;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function i(R){const w=new Float64Array(16);if(R)for(let E=0;E<R.length;E++)w[E]=R[E];return w}const r=new Uint8Array(32);r[0]=9;const o=i([56129,1]);function s(R){let w=1;for(let E=0;E<16;E++){let a=R[E]+w+65535;w=Math.floor(a/65536),R[E]=a-w*65536}R[0]+=w-1+37*(w-1)}function c(R,w,E){const a=~(E-1);for(let f=0;f<16;f++){const g=a&(R[f]^w[f]);R[f]^=g,w[f]^=g}}function d(R,w){const E=i(),a=i();for(let f=0;f<16;f++)a[f]=w[f];s(a),s(a),s(a);for(let f=0;f<2;f++){E[0]=a[0]-65517;for(let m=1;m<15;m++)E[m]=a[m]-65535-(E[m-1]>>16&1),E[m-1]&=65535;E[15]=a[15]-32767-(E[14]>>16&1);const g=E[15]>>16&1;E[14]&=65535,c(a,E,1-g)}for(let f=0;f<16;f++)R[2*f]=a[f]&255,R[2*f+1]=a[f]>>8}function u(R,w){for(let E=0;E<16;E++)R[E]=w[2*E]+(w[2*E+1]<<8);R[15]&=32767}function l(R,w,E){for(let a=0;a<16;a++)R[a]=w[a]+E[a]}function h(R,w,E){for(let a=0;a<16;a++)R[a]=w[a]-E[a]}function A(R,w,E){let a,f,g=0,m=0,p=0,v=0,O=0,N=0,P=0,G=0,M=0,F=0,T=0,Y=0,ie=0,re=0,j=0,z=0,te=0,ee=0,se=0,S=0,x=0,_=0,I=0,C=0,U=0,V=0,Q=0,ae=0,ue=0,X=0,Be=0,ce=E[0],ye=E[1],we=E[2],Ae=E[3],me=E[4],ve=E[5],_e=E[6],Re=E[7],Te=E[8],Se=E[9],xe=E[10],Ne=E[11],Ie=E[12],Oe=E[13],Ce=E[14],Pe=E[15];a=w[0],g+=a*ce,m+=a*ye,p+=a*we,v+=a*Ae,O+=a*me,N+=a*ve,P+=a*_e,G+=a*Re,M+=a*Te,F+=a*Se,T+=a*xe,Y+=a*Ne,ie+=a*Ie,re+=a*Oe,j+=a*Ce,z+=a*Pe,a=w[1],m+=a*ce,p+=a*ye,v+=a*we,O+=a*Ae,N+=a*me,P+=a*ve,G+=a*_e,M+=a*Re,F+=a*Te,T+=a*Se,Y+=a*xe,ie+=a*Ne,re+=a*Ie,j+=a*Oe,z+=a*Ce,te+=a*Pe,a=w[2],p+=a*ce,v+=a*ye,O+=a*we,N+=a*Ae,P+=a*me,G+=a*ve,M+=a*_e,F+=a*Re,T+=a*Te,Y+=a*Se,ie+=a*xe,re+=a*Ne,j+=a*Ie,z+=a*Oe,te+=a*Ce,ee+=a*Pe,a=w[3],v+=a*ce,O+=a*ye,N+=a*we,P+=a*Ae,G+=a*me,M+=a*ve,F+=a*_e,T+=a*Re,Y+=a*Te,ie+=a*Se,re+=a*xe,j+=a*Ne,z+=a*Ie,te+=a*Oe,ee+=a*Ce,se+=a*Pe,a=w[4],O+=a*ce,N+=a*ye,P+=a*we,G+=a*Ae,M+=a*me,F+=a*ve,T+=a*_e,Y+=a*Re,ie+=a*Te,re+=a*Se,j+=a*xe,z+=a*Ne,te+=a*Ie,ee+=a*Oe,se+=a*Ce,S+=a*Pe,a=w[5],N+=a*ce,P+=a*ye,G+=a*we,M+=a*Ae,F+=a*me,T+=a*ve,Y+=a*_e,ie+=a*Re,re+=a*Te,j+=a*Se,z+=a*xe,te+=a*Ne,ee+=a*Ie,se+=a*Oe,S+=a*Ce,x+=a*Pe,a=w[6],P+=a*ce,G+=a*ye,M+=a*we,F+=a*Ae,T+=a*me,Y+=a*ve,ie+=a*_e,re+=a*Re,j+=a*Te,z+=a*Se,te+=a*xe,ee+=a*Ne,se+=a*Ie,S+=a*Oe,x+=a*Ce,_+=a*Pe,a=w[7],G+=a*ce,M+=a*ye,F+=a*we,T+=a*Ae,Y+=a*me,ie+=a*ve,re+=a*_e,j+=a*Re,z+=a*Te,te+=a*Se,ee+=a*xe,se+=a*Ne,S+=a*Ie,x+=a*Oe,_+=a*Ce,I+=a*Pe,a=w[8],M+=a*ce,F+=a*ye,T+=a*we,Y+=a*Ae,ie+=a*me,re+=a*ve,j+=a*_e,z+=a*Re,te+=a*Te,ee+=a*Se,se+=a*xe,S+=a*Ne,x+=a*Ie,_+=a*Oe,I+=a*Ce,C+=a*Pe,a=w[9],F+=a*ce,T+=a*ye,Y+=a*we,ie+=a*Ae,re+=a*me,j+=a*ve,z+=a*_e,te+=a*Re,ee+=a*Te,se+=a*Se,S+=a*xe,x+=a*Ne,_+=a*Ie,I+=a*Oe,C+=a*Ce,U+=a*Pe,a=w[10],T+=a*ce,Y+=a*ye,ie+=a*we,re+=a*Ae,j+=a*me,z+=a*ve,te+=a*_e,ee+=a*Re,se+=a*Te,S+=a*Se,x+=a*xe,_+=a*Ne,I+=a*Ie,C+=a*Oe,U+=a*Ce,V+=a*Pe,a=w[11],Y+=a*ce,ie+=a*ye,re+=a*we,j+=a*Ae,z+=a*me,te+=a*ve,ee+=a*_e,se+=a*Re,S+=a*Te,x+=a*Se,_+=a*xe,I+=a*Ne,C+=a*Ie,U+=a*Oe,V+=a*Ce,Q+=a*Pe,a=w[12],ie+=a*ce,re+=a*ye,j+=a*we,z+=a*Ae,te+=a*me,ee+=a*ve,se+=a*_e,S+=a*Re,x+=a*Te,_+=a*Se,I+=a*xe,C+=a*Ne,U+=a*Ie,V+=a*Oe,Q+=a*Ce,ae+=a*Pe,a=w[13],re+=a*ce,j+=a*ye,z+=a*we,te+=a*Ae,ee+=a*me,se+=a*ve,S+=a*_e,x+=a*Re,_+=a*Te,I+=a*Se,C+=a*xe,U+=a*Ne,V+=a*Ie,Q+=a*Oe,ae+=a*Ce,ue+=a*Pe,a=w[14],j+=a*ce,z+=a*ye,te+=a*we,ee+=a*Ae,se+=a*me,S+=a*ve,x+=a*_e,_+=a*Re,I+=a*Te,C+=a*Se,U+=a*xe,V+=a*Ne,Q+=a*Ie,ae+=a*Oe,ue+=a*Ce,X+=a*Pe,a=w[15],z+=a*ce,te+=a*ye,ee+=a*we,se+=a*Ae,S+=a*me,x+=a*ve,_+=a*_e,I+=a*Re,C+=a*Te,U+=a*Se,V+=a*xe,Q+=a*Ne,ae+=a*Ie,ue+=a*Oe,X+=a*Ce,Be+=a*Pe,g+=38*te,m+=38*ee,p+=38*se,v+=38*S,O+=38*x,N+=38*_,P+=38*I,G+=38*C,M+=38*U,F+=38*V,T+=38*Q,Y+=38*ae,ie+=38*ue,re+=38*X,j+=38*Be,f=1,a=g+f+65535,f=Math.floor(a/65536),g=a-f*65536,a=m+f+65535,f=Math.floor(a/65536),m=a-f*65536,a=p+f+65535,f=Math.floor(a/65536),p=a-f*65536,a=v+f+65535,f=Math.floor(a/65536),v=a-f*65536,a=O+f+65535,f=Math.floor(a/65536),O=a-f*65536,a=N+f+65535,f=Math.floor(a/65536),N=a-f*65536,a=P+f+65535,f=Math.floor(a/65536),P=a-f*65536,a=G+f+65535,f=Math.floor(a/65536),G=a-f*65536,a=M+f+65535,f=Math.floor(a/65536),M=a-f*65536,a=F+f+65535,f=Math.floor(a/65536),F=a-f*65536,a=T+f+65535,f=Math.floor(a/65536),T=a-f*65536,a=Y+f+65535,f=Math.floor(a/65536),Y=a-f*65536,a=ie+f+65535,f=Math.floor(a/65536),ie=a-f*65536,a=re+f+65535,f=Math.floor(a/65536),re=a-f*65536,a=j+f+65535,f=Math.floor(a/65536),j=a-f*65536,a=z+f+65535,f=Math.floor(a/65536),z=a-f*65536,g+=f-1+37*(f-1),f=1,a=g+f+65535,f=Math.floor(a/65536),g=a-f*65536,a=m+f+65535,f=Math.floor(a/65536),m=a-f*65536,a=p+f+65535,f=Math.floor(a/65536),p=a-f*65536,a=v+f+65535,f=Math.floor(a/65536),v=a-f*65536,a=O+f+65535,f=Math.floor(a/65536),O=a-f*65536,a=N+f+65535,f=Math.floor(a/65536),N=a-f*65536,a=P+f+65535,f=Math.floor(a/65536),P=a-f*65536,a=G+f+65535,f=Math.floor(a/65536),G=a-f*65536,a=M+f+65535,f=Math.floor(a/65536),M=a-f*65536,a=F+f+65535,f=Math.floor(a/65536),F=a-f*65536,a=T+f+65535,f=Math.floor(a/65536),T=a-f*65536,a=Y+f+65535,f=Math.floor(a/65536),Y=a-f*65536,a=ie+f+65535,f=Math.floor(a/65536),ie=a-f*65536,a=re+f+65535,f=Math.floor(a/65536),re=a-f*65536,a=j+f+65535,f=Math.floor(a/65536),j=a-f*65536,a=z+f+65535,f=Math.floor(a/65536),z=a-f*65536,g+=f-1+37*(f-1),R[0]=g,R[1]=m,R[2]=p,R[3]=v,R[4]=O,R[5]=N,R[6]=P,R[7]=G,R[8]=M,R[9]=F,R[10]=T,R[11]=Y,R[12]=ie,R[13]=re,R[14]=j,R[15]=z}function y(R,w){A(R,w,w)}function k(R,w){const E=i();for(let a=0;a<16;a++)E[a]=w[a];for(let a=253;a>=0;a--)y(E,E),a!==2&&a!==4&&A(E,E,w);for(let a=0;a<16;a++)R[a]=E[a]}function B(R,w){const E=new Uint8Array(32),a=new Float64Array(80),f=i(),g=i(),m=i(),p=i(),v=i(),O=i();for(let M=0;M<31;M++)E[M]=R[M];E[31]=R[31]&127|64,E[0]&=248,u(a,w);for(let M=0;M<16;M++)g[M]=a[M];f[0]=p[0]=1;for(let M=254;M>=0;--M){const F=E[M>>>3]>>>(M&7)&1;c(f,g,F),c(m,p,F),l(v,f,m),h(f,f,m),l(m,g,p),h(g,g,p),y(p,v),y(O,f),A(f,m,f),A(m,g,v),l(v,f,m),h(f,f,m),y(g,f),h(m,p,O),A(f,m,o),l(f,f,p),A(m,m,f),A(f,p,O),A(p,g,a),y(g,v),c(f,g,F),c(m,p,F)}for(let M=0;M<16;M++)a[M+16]=f[M],a[M+32]=m[M],a[M+48]=g[M],a[M+64]=p[M];const N=a.subarray(32),P=a.subarray(16);k(N,N),A(P,P,N);const G=new Uint8Array(32);return d(G,P),G}n.scalarMult=B;function D(R){return B(R,r)}n.scalarMultBase=D;function q(R){if(R.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const w=new Uint8Array(R);return{publicKey:D(w),secretKey:w}}n.generateKeyPairFromSeed=q;function H(R){const w=(0,e.randomBytes)(32,R),E=q(w);return(0,t.wipe)(w),E}n.generateKeyPair=H;function b(R,w,E=!1){if(R.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(w.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const a=B(R,w);if(E){let f=0;for(let g=0;g<a.length;g++)f|=a[g];if(f===0)throw new Error("X25519: invalid shared key")}return a}n.sharedKey=b})(Zt);var jt={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});var ke=Br,yi=Ot,Fo=20;function Qo(n,e,t){for(var i=1634760805,r=t[3]<<24|t[2]<<16|t[1]<<8|t[0],o=t[7]<<24|t[6]<<16|t[5]<<8|t[4],s=t[11]<<24|t[10]<<16|t[9]<<8|t[8],c=t[15]<<24|t[14]<<16|t[13]<<8|t[12],d=857760878,u=e[3]<<24|e[2]<<16|e[1]<<8|e[0],l=e[7]<<24|e[6]<<16|e[5]<<8|e[4],h=e[11]<<24|e[10]<<16|e[9]<<8|e[8],A=e[15]<<24|e[14]<<16|e[13]<<8|e[12],y=2036477234,k=t[19]<<24|t[18]<<16|t[17]<<8|t[16],B=t[23]<<24|t[22]<<16|t[21]<<8|t[20],D=t[27]<<24|t[26]<<16|t[25]<<8|t[24],q=t[31]<<24|t[30]<<16|t[29]<<8|t[28],H=1797285236,b=i,R=r,w=o,E=s,a=c,f=d,g=u,m=l,p=h,v=A,O=y,N=k,P=B,G=D,M=q,F=H,T,Y=0;Y<Fo;Y+=2)T=b+P|0,a^=T<<7|T>>>32-7,T=a+b|0,p^=T<<9|T>>>32-9,T=p+a|0,P^=T<<13|T>>>32-13,T=P+p|0,b^=T<<18|T>>>32-18,T=f+R|0,v^=T<<7|T>>>32-7,T=v+f|0,G^=T<<9|T>>>32-9,T=G+v|0,R^=T<<13|T>>>32-13,T=R+G|0,f^=T<<18|T>>>32-18,T=O+g|0,M^=T<<7|T>>>32-7,T=M+O|0,w^=T<<9|T>>>32-9,T=w+M|0,g^=T<<13|T>>>32-13,T=g+w|0,O^=T<<18|T>>>32-18,T=F+N|0,E^=T<<7|T>>>32-7,T=E+F|0,m^=T<<9|T>>>32-9,T=m+E|0,N^=T<<13|T>>>32-13,T=N+m|0,F^=T<<18|T>>>32-18,T=b+E|0,R^=T<<7|T>>>32-7,T=R+b|0,w^=T<<9|T>>>32-9,T=w+R|0,E^=T<<13|T>>>32-13,T=E+w|0,b^=T<<18|T>>>32-18,T=f+a|0,g^=T<<7|T>>>32-7,T=g+f|0,m^=T<<9|T>>>32-9,T=m+g|0,a^=T<<13|T>>>32-13,T=a+m|0,f^=T<<18|T>>>32-18,T=O+v|0,N^=T<<7|T>>>32-7,T=N+O|0,p^=T<<9|T>>>32-9,T=p+N|0,v^=T<<13|T>>>32-13,T=v+p|0,O^=T<<18|T>>>32-18,T=F+M|0,P^=T<<7|T>>>32-7,T=P+F|0,G^=T<<9|T>>>32-9,T=G+P|0,M^=T<<13|T>>>32-13,T=M+G|0,F^=T<<18|T>>>32-18;ke.writeUint32LE(b+i|0,n,0),ke.writeUint32LE(R+r|0,n,4),ke.writeUint32LE(w+o|0,n,8),ke.writeUint32LE(E+s|0,n,12),ke.writeUint32LE(a+c|0,n,16),ke.writeUint32LE(f+d|0,n,20),ke.writeUint32LE(g+u|0,n,24),ke.writeUint32LE(m+l|0,n,28),ke.writeUint32LE(p+h|0,n,32),ke.writeUint32LE(v+A|0,n,36),ke.writeUint32LE(O+y|0,n,40),ke.writeUint32LE(N+k|0,n,44),ke.writeUint32LE(P+B|0,n,48),ke.writeUint32LE(G+D|0,n,52),ke.writeUint32LE(M+q|0,n,56),ke.writeUint32LE(F+H|0,n,60)}function Kr(n,e,t,i,r){if(r===void 0&&(r=0),n.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(i.length<t.length)throw new Error("Salsa20: destination is shorter than source");var o,s;if(r===0){if(e.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");o=new Uint8Array(16),o.set(e),s=e.length}else{if(e.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");o=e,s=16-r}for(var c=new Uint8Array(64),d=0;d<t.length;d+=64){Qo(c,o,n);for(var u=d;u<d+64&&u<t.length;u++)i[u]=t[u]^c[u-d];Wo(o,s,o.length-s)}return yi.wipe(c),r===0&&yi.wipe(o),i}kn.streamXOR=Kr;function Vo(n,e,t,i){return i===void 0&&(i=0),yi.wipe(t),Kr(n,e,t,t,i)}kn.stream=Vo;function Wo(n,e,t){for(var i=1;t--;)i=i+(n[e]&255)|0,n[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("Salsa20: counter overflow")}Object.defineProperty(jt,"__esModule",{value:!0});var pt=Br,Jo=kn,jr=Ot;function Gr(n,e,t,i,r){if(r===void 0&&(r=0),r===0){if(e.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(e.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var o=qr(n,e.subarray(0,16),new Uint8Array(32)),s=Jo.streamXOR(o,e.subarray(16),t,i,r);return jr.wipe(o),s}jt.streamXOR=Gr;function Xo(n,e,t,i){return i===void 0&&(i=0),jr.wipe(t),Gr(n,e,t,t,i)}jt.stream=Xo;var Yo=20;function qr(n,e,t){for(var i=1634760805,r=n[3]<<24|n[2]<<16|n[1]<<8|n[0],o=n[7]<<24|n[6]<<16|n[5]<<8|n[4],s=n[11]<<24|n[10]<<16|n[9]<<8|n[8],c=n[15]<<24|n[14]<<16|n[13]<<8|n[12],d=857760878,u=e[3]<<24|e[2]<<16|e[1]<<8|e[0],l=e[7]<<24|e[6]<<16|e[5]<<8|e[4],h=e[11]<<24|e[10]<<16|e[9]<<8|e[8],A=e[15]<<24|e[14]<<16|e[13]<<8|e[12],y=2036477234,k=n[19]<<24|n[18]<<16|n[17]<<8|n[16],B=n[23]<<24|n[22]<<16|n[21]<<8|n[20],D=n[27]<<24|n[26]<<16|n[25]<<8|n[24],q=n[31]<<24|n[30]<<16|n[29]<<8|n[28],H=1797285236,b,R=0;R<Yo;R+=2)b=i+B|0,c^=b<<7|b>>>32-7,b=c+i|0,h^=b<<9|b>>>32-9,b=h+c|0,B^=b<<13|b>>>32-13,b=B+h|0,i^=b<<18|b>>>32-18,b=d+r|0,A^=b<<7|b>>>32-7,b=A+d|0,D^=b<<9|b>>>32-9,b=D+A|0,r^=b<<13|b>>>32-13,b=r+D|0,d^=b<<18|b>>>32-18,b=y+u|0,q^=b<<7|b>>>32-7,b=q+y|0,o^=b<<9|b>>>32-9,b=o+q|0,u^=b<<13|b>>>32-13,b=u+o|0,y^=b<<18|b>>>32-18,b=H+k|0,s^=b<<7|b>>>32-7,b=s+H|0,l^=b<<9|b>>>32-9,b=l+s|0,k^=b<<13|b>>>32-13,b=k+l|0,H^=b<<18|b>>>32-18,b=i+s|0,r^=b<<7|b>>>32-7,b=r+i|0,o^=b<<9|b>>>32-9,b=o+r|0,s^=b<<13|b>>>32-13,b=s+o|0,i^=b<<18|b>>>32-18,b=d+c|0,u^=b<<7|b>>>32-7,b=u+d|0,l^=b<<9|b>>>32-9,b=l+u|0,c^=b<<13|b>>>32-13,b=c+l|0,d^=b<<18|b>>>32-18,b=y+A|0,k^=b<<7|b>>>32-7,b=k+y|0,h^=b<<9|b>>>32-9,b=h+k|0,A^=b<<13|b>>>32-13,b=A+h|0,y^=b<<18|b>>>32-18,b=H+q|0,B^=b<<7|b>>>32-7,b=B+H|0,D^=b<<9|b>>>32-9,b=D+B|0,q^=b<<13|b>>>32-13,b=q+D|0,H^=b<<18|b>>>32-18;return pt.writeUint32LE(i,t,0),pt.writeUint32LE(d,t,4),pt.writeUint32LE(y,t,8),pt.writeUint32LE(H,t,12),pt.writeUint32LE(u,t,16),pt.writeUint32LE(l,t,20),pt.writeUint32LE(h,t,24),pt.writeUint32LE(A,t,28),t}jt.hsalsa=qr;var ht={},Hr={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});function zo(n,e,t){return~(n-1)&e|n-1&t}Gt.select=zo;function Zo(n,e){return(n|0)-(e|0)-1>>>31&1}Gt.lessOrEqual=Zo;function Fr(n,e){if(n.length!==e.length)return 0;for(var t=0,i=0;i<n.length;i++)t|=n[i]^e[i];return 1&t-1>>>8}Gt.compare=Fr;function $o(n,e){return n.length===0||e.length===0?!1:Fr(n,e)!==0}Gt.equal=$o;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Gt,t=Ot;n.DIGEST_LENGTH=16;var i=function(){function s(c){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var d=c[0]|c[1]<<8;this._r[0]=d&8191;var u=c[2]|c[3]<<8;this._r[1]=(d>>>13|u<<3)&8191;var l=c[4]|c[5]<<8;this._r[2]=(u>>>10|l<<6)&7939;var h=c[6]|c[7]<<8;this._r[3]=(l>>>7|h<<9)&8191;var A=c[8]|c[9]<<8;this._r[4]=(h>>>4|A<<12)&255,this._r[5]=A>>>1&8190;var y=c[10]|c[11]<<8;this._r[6]=(A>>>14|y<<2)&8191;var k=c[12]|c[13]<<8;this._r[7]=(y>>>11|k<<5)&8065;var B=c[14]|c[15]<<8;this._r[8]=(k>>>8|B<<8)&8191,this._r[9]=B>>>5&127,this._pad[0]=c[16]|c[17]<<8,this._pad[1]=c[18]|c[19]<<8,this._pad[2]=c[20]|c[21]<<8,this._pad[3]=c[22]|c[23]<<8,this._pad[4]=c[24]|c[25]<<8,this._pad[5]=c[26]|c[27]<<8,this._pad[6]=c[28]|c[29]<<8,this._pad[7]=c[30]|c[31]<<8}return s.prototype._blocks=function(c,d,u){for(var l=this._fin?0:2048,h=this._h[0],A=this._h[1],y=this._h[2],k=this._h[3],B=this._h[4],D=this._h[5],q=this._h[6],H=this._h[7],b=this._h[8],R=this._h[9],w=this._r[0],E=this._r[1],a=this._r[2],f=this._r[3],g=this._r[4],m=this._r[5],p=this._r[6],v=this._r[7],O=this._r[8],N=this._r[9];u>=16;){var P=c[d+0]|c[d+1]<<8;h+=P&8191;var G=c[d+2]|c[d+3]<<8;A+=(P>>>13|G<<3)&8191;var M=c[d+4]|c[d+5]<<8;y+=(G>>>10|M<<6)&8191;var F=c[d+6]|c[d+7]<<8;k+=(M>>>7|F<<9)&8191;var T=c[d+8]|c[d+9]<<8;B+=(F>>>4|T<<12)&8191,D+=T>>>1&8191;var Y=c[d+10]|c[d+11]<<8;q+=(T>>>14|Y<<2)&8191;var ie=c[d+12]|c[d+13]<<8;H+=(Y>>>11|ie<<5)&8191;var re=c[d+14]|c[d+15]<<8;b+=(ie>>>8|re<<8)&8191,R+=re>>>5|l;var j=0,z=j;z+=h*w,z+=A*(5*N),z+=y*(5*O),z+=k*(5*v),z+=B*(5*p),j=z>>>13,z&=8191,z+=D*(5*m),z+=q*(5*g),z+=H*(5*f),z+=b*(5*a),z+=R*(5*E),j+=z>>>13,z&=8191;var te=j;te+=h*E,te+=A*w,te+=y*(5*N),te+=k*(5*O),te+=B*(5*v),j=te>>>13,te&=8191,te+=D*(5*p),te+=q*(5*m),te+=H*(5*g),te+=b*(5*f),te+=R*(5*a),j+=te>>>13,te&=8191;var ee=j;ee+=h*a,ee+=A*E,ee+=y*w,ee+=k*(5*N),ee+=B*(5*O),j=ee>>>13,ee&=8191,ee+=D*(5*v),ee+=q*(5*p),ee+=H*(5*m),ee+=b*(5*g),ee+=R*(5*f),j+=ee>>>13,ee&=8191;var se=j;se+=h*f,se+=A*a,se+=y*E,se+=k*w,se+=B*(5*N),j=se>>>13,se&=8191,se+=D*(5*O),se+=q*(5*v),se+=H*(5*p),se+=b*(5*m),se+=R*(5*g),j+=se>>>13,se&=8191;var S=j;S+=h*g,S+=A*f,S+=y*a,S+=k*E,S+=B*w,j=S>>>13,S&=8191,S+=D*(5*N),S+=q*(5*O),S+=H*(5*v),S+=b*(5*p),S+=R*(5*m),j+=S>>>13,S&=8191;var x=j;x+=h*m,x+=A*g,x+=y*f,x+=k*a,x+=B*E,j=x>>>13,x&=8191,x+=D*w,x+=q*(5*N),x+=H*(5*O),x+=b*(5*v),x+=R*(5*p),j+=x>>>13,x&=8191;var _=j;_+=h*p,_+=A*m,_+=y*g,_+=k*f,_+=B*a,j=_>>>13,_&=8191,_+=D*E,_+=q*w,_+=H*(5*N),_+=b*(5*O),_+=R*(5*v),j+=_>>>13,_&=8191;var I=j;I+=h*v,I+=A*p,I+=y*m,I+=k*g,I+=B*f,j=I>>>13,I&=8191,I+=D*a,I+=q*E,I+=H*w,I+=b*(5*N),I+=R*(5*O),j+=I>>>13,I&=8191;var C=j;C+=h*O,C+=A*v,C+=y*p,C+=k*m,C+=B*g,j=C>>>13,C&=8191,C+=D*f,C+=q*a,C+=H*E,C+=b*w,C+=R*(5*N),j+=C>>>13,C&=8191;var U=j;U+=h*N,U+=A*O,U+=y*v,U+=k*p,U+=B*m,j=U>>>13,U&=8191,U+=D*g,U+=q*f,U+=H*a,U+=b*E,U+=R*w,j+=U>>>13,U&=8191,j=(j<<2)+j|0,j=j+z|0,z=j&8191,j=j>>>13,te+=j,h=z,A=te,y=ee,k=se,B=S,D=x,q=_,H=I,b=C,R=U,d+=16,u-=16}this._h[0]=h,this._h[1]=A,this._h[2]=y,this._h[3]=k,this._h[4]=B,this._h[5]=D,this._h[6]=q,this._h[7]=H,this._h[8]=b,this._h[9]=R},s.prototype.finish=function(c,d){d===void 0&&(d=0);var u=new Uint16Array(10),l,h,A,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(l=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=l,l=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=l*5,l=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=l,l=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=l,u[0]=this._h[0]+5,l=u[0]>>>13,u[0]&=8191,y=1;y<10;y++)u[y]=this._h[y]+l,l=u[y]>>>13,u[y]&=8191;for(u[9]-=1<<13,h=(l^1)-1,y=0;y<10;y++)u[y]&=h;for(h=~h,y=0;y<10;y++)this._h[y]=this._h[y]&h|u[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,A=this._h[0]+this._pad[0],this._h[0]=A&65535,y=1;y<8;y++)A=(this._h[y]+this._pad[y]|0)+(A>>>16)|0,this._h[y]=A&65535;return c[d+0]=this._h[0]>>>0,c[d+1]=this._h[0]>>>8,c[d+2]=this._h[1]>>>0,c[d+3]=this._h[1]>>>8,c[d+4]=this._h[2]>>>0,c[d+5]=this._h[2]>>>8,c[d+6]=this._h[3]>>>0,c[d+7]=this._h[3]>>>8,c[d+8]=this._h[4]>>>0,c[d+9]=this._h[4]>>>8,c[d+10]=this._h[5]>>>0,c[d+11]=this._h[5]>>>8,c[d+12]=this._h[6]>>>0,c[d+13]=this._h[6]>>>8,c[d+14]=this._h[7]>>>0,c[d+15]=this._h[7]>>>8,this._finished=!0,this},s.prototype.update=function(c){var d=0,u=c.length,l;if(this._leftover){l=16-this._leftover,l>u&&(l=u);for(var h=0;h<l;h++)this._buffer[this._leftover+h]=c[d+h];if(u-=l,d+=l,this._leftover+=l,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(l=u-u%16,this._blocks(c,d,l),d+=l,u-=l),u){for(var h=0;h<u;h++)this._buffer[this._leftover+h]=c[d+h];this._leftover+=u}return this},s.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var c=new Uint8Array(16);return this.finish(c),c},s.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},s}();n.Poly1305=i;function r(s,c){var d=new i(s);d.update(c);var u=d.digest();return d.clean(),u}n.oneTimeAuth=r;function o(s,c){return s.length!==n.DIGEST_LENGTH||c.length!==n.DIGEST_LENGTH?!1:e.equal(s,c)}n.equal=o})(Hr);Object.defineProperty(ht,"__esModule",{value:!0});ht.generateKey=ht.openSecretBox=ht.secretBox=void 0;const bn=jt,wi=Hr,Bt=Ot,es=en;function ts(n,e,t){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");const i=new Uint8Array(64),r=new Uint8Array(24+8);r.set(e),(0,bn.stream)(n,r,i,8);const o=new Uint8Array(16+t.length);for(let c=0;c<32&&c<t.length;c++)o[16+c]=t[c]^i[32+c];t.length>32&&(0,bn.streamXOR)(n,r,t.subarray(32),o.subarray(16+32),8);const s=(0,wi.oneTimeAuth)(i.subarray(0,32),o.subarray(16));for(let c=0;c<s.length;c++)o[c]=s[c];return(0,Bt.wipe)(s),(0,Bt.wipe)(i),(0,Bt.wipe)(r),o}ht.secretBox=ts;function ns(n,e,t){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(t.length<16)throw new Error("secretBox data must be at least 16 bytes");const i=new Uint8Array(64),r=new Uint8Array(24+8);r.set(e),(0,bn.stream)(n,r,i,8);const o=(0,wi.oneTimeAuth)(i.subarray(0,32),t.subarray(16));if(!(0,wi.equal)(o,t.subarray(0,16)))return null;const s=t.subarray(16),c=new Uint8Array(s.length);for(let d=0;d<32&&d<s.length;d++)c[d]=s[d]^i[32+d];return s.length>32&&(0,bn.streamXOR)(n,r,s.subarray(32),c.subarray(32),8),(0,Bt.wipe)(o),(0,Bt.wipe)(i),(0,Bt.wipe)(r),c}ht.openSecretBox=ns;function is(n){return(0,es.randomBytes)(32,n)}ht.generateKey=is;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.openBox=n.box=n.precomputeSharedKey=n.generateKeyPair=void 0;const e=Zt,t=jt,i=ht,r=Ot;var o=Zt;Object.defineProperty(n,"generateKeyPair",{enumerable:!0,get:function(){return o.generateKeyPair}});const s=new Uint8Array(16);function c(l,h){const A=(0,e.scalarMult)(h,l);return(0,t.hsalsa)(A,s,A),A}n.precomputeSharedKey=c;function d(l,h,A,y){const k=c(l,h),B=(0,i.secretBox)(k,A,y);return(0,r.wipe)(k),B}n.box=d;function u(l,h,A,y){const k=c(l,h),B=(0,i.openSecretBox)(k,A,y);return(0,r.wipe)(k),B}n.openBox=u})(Dr);(function(n){var e=on&&on.__createBinding||(Object.create?function(i,r,o,s){s===void 0&&(s=o);var c=Object.getOwnPropertyDescriptor(r,o);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[o]}}),Object.defineProperty(i,s,c)}:function(i,r,o,s){s===void 0&&(s=o),i[s]=r[o]}),t=on&&on.__exportStar||function(i,r){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(r,o)&&e(r,i,o)};Object.defineProperty(n,"__esModule",{value:!0}),t(Dr,n),t(ht,n)})(Dt);var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});var Wi="utf8: invalid string",st="utf8: invalid source encoding";function rs(n){for(var e=new Uint8Array(Qr(n)),t=0,i=0;i<n.length;i++){var r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=192|r>>6,e[t++]=128|r&63):r<55296?(e[t++]=224|r>>12,e[t++]=128|r>>6&63,e[t++]=128|r&63):(i++,r=(r&1023)<<10,r|=n.charCodeAt(i)&1023,r+=65536,e[t++]=240|r>>18,e[t++]=128|r>>12&63,e[t++]=128|r>>6&63,e[t++]=128|r&63)}return e}var yt=Ln.encode=rs;function Qr(n){for(var e=0,t=0;t<n.length;t++){var i=n.charCodeAt(t);if(i<128)e+=1;else if(i<2048)e+=2;else if(i<55296)e+=3;else if(i<=57343){if(t>=n.length-1)throw new Error(Wi);t++,e+=4}else throw new Error(Wi)}return e}Ln.encodedLength=Qr;function os(n){for(var e=[],t=0;t<n.length;t++){var i=n[t];if(i&128){var r=void 0;if(i<224){if(t>=n.length)throw new Error(st);var o=n[++t];if((o&192)!==128)throw new Error(st);i=(i&31)<<6|o&63,r=128}else if(i<240){if(t>=n.length-1)throw new Error(st);var o=n[++t],s=n[++t];if((o&192)!==128||(s&192)!==128)throw new Error(st);i=(i&15)<<12|(o&63)<<6|s&63,r=2048}else if(i<248){if(t>=n.length-2)throw new Error(st);var o=n[++t],s=n[++t],c=n[++t];if((o&192)!==128||(s&192)!==128||(c&192)!==128)throw new Error(st);i=(i&15)<<18|(o&63)<<12|(s&63)<<6|c&63,r=65536}else throw new Error(st);if(i<r||i>=55296&&i<=57343)throw new Error(st);if(i>=65536){if(i>1114111)throw new Error(st);i-=65536,e.push(String.fromCharCode(55296|i>>10)),i=56320|i&1023}}e.push(String.fromCharCode(i))}return e.join("")}Ln.decode=os;var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});function ss(){for(var n=0,e=0;e<arguments.length;e++)n+=arguments[e].length;for(var t=new Uint8Array(n),i=0,e=0;e<arguments.length;e++){var r=arguments[e];t.set(r,i),i+=r.length}return t}var as=Vr.concat=ss,rt=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const Ai=24;function ft(n){return Buffer.from(n).toString("hex")}function Ut(n){return rt(this,void 0,void 0,function*(){return ft(typeof n=="string"?et.hash(yt(n),32):et.hash(n,32))})}function Ji(n){return rt(this,void 0,void 0,function*(){return Ve.generateKeyPairFromSeed(et.hash(yt(n),32))})}function Wr(n,e){return rt(this,void 0,void 0,function*(){const t=Buffer.from(en.randomBytes(Ai)),i=Buffer.concat([t,Buffer.from(Dt.secretBox(e,t,Buffer.from(n,"utf8")))]);return ft(i)})}function Jr(n,e){return rt(this,void 0,void 0,function*(){const t=n.slice(0,Ai),i=n.slice(Ai),r=Dt.openSecretBox(e,t,i);if(!r)throw new Error("Decryption failed");return Buffer.from(r).toString("utf8")})}function cs(n,e){return rt(this,void 0,void 0,function*(){const t=Ve.convertPublicKeyToX25519(Buffer.from(e)),i=Dt.generateKeyPair(),o=new et.BLAKE2b(24).update(i.publicKey,32).update(t,32).digest(),s=typeof n=="string"?yt(n):n,c=Dt.box(t,i.secretKey,o,s);return ft(as(i.publicKey,c))})}function Xr(n,e,t){return rt(this,void 0,void 0,function*(){const i=Ve.convertSecretKeyToX25519(Buffer.from(t)),r=Ve.convertPublicKeyToX25519(Buffer.from(e)),o=typeof n=="string"?yt(n):n,s=o.slice(0,32),c=o.slice(32),u=new et.BLAKE2b(24).update(s,32).update(r,32).digest(),l=Dt.openBox(s,i,u,c);if(!l)throw new Error("Decryption failed");return Buffer.from(l).toString()})}function ls(n){return rt(this,void 0,void 0,function*(){const e={edpk:{length:54,prefix:Buffer.from(new Uint8Array([6,161,159]))},sppk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,161]))},p2pk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,164]))}};let t,i;if(n.length===64)t=e.edpk.prefix,i=n;else{const o=Object.entries(e);for(let s=0;s<o.length;s++){const[c,d]=o[s];if(n.startsWith(c)&&n.length===d.length){t=d.prefix;const u=mi.decode(n);i=u.slice(c.length,u.length).toString("hex");break}}}if(!t||!i)throw new Error(`invalid publicKey: ${n}`);const r=et.hash(Buffer.from(i,"hex"),20);return mi.encode(Buffer.concat([t,Buffer.from(r)]))})}function Xi(n,e){return`@${n}:${e}`}const ds=n=>rt(void 0,void 0,void 0,function*(){if(n.length%2!==0)return yt(n);let e=n;n.startsWith("0x")&&(e=n.slice(2));const t=Buffer.from(e,"hex");return t.length===e.length/2?t:yt(n)}),us=(n,e=32)=>rt(void 0,void 0,void 0,function*(){return et.hash(n,e)}),hs=(n,e)=>rt(void 0,void 0,void 0,function*(){const t=yield ds(n),i=new Uint8Array([9,245,205,134,18]),r=yield us(t),o=Ve.sign(e.secretKey,r);return mi.encode(Buffer.concat([Buffer.from(i),Buffer.from(o)]))});var fs=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};function vt(){return fs(this,void 0,void 0,function*(){const n=en.randomBytes(16);return[n.slice(0,4),n.slice(4,6),n.slice(6,8),n.slice(8,10),n.slice(10,16)].map(function(e){return Buffer.from(e).toString("hex")}).join("-")})}const _n=24,Rn=16;var $;(function(n){n.BlockchainRequest="blockchain_request",n.PermissionRequest="permission_request",n.SignPayloadRequest="sign_payload_request",n.OperationRequest="operation_request",n.BroadcastRequest="broadcast_request",n.BlockchainResponse="blockchain_response",n.PermissionResponse="permission_response",n.SignPayloadResponse="sign_payload_response",n.OperationResponse="operation_response",n.BroadcastResponse="broadcast_response",n.Acknowledge="acknowledge",n.Disconnect="disconnect",n.Error="error"})($||($={}));var nt;(function(n){n.SIGN="sign",n.OPERATION_REQUEST="operation_request",n.ENCRYPT="encrypt",n.NOTIFICATION="notification",n.THRESHOLD="threshold"})(nt||(nt={}));var Ee;(function(n){n.MAINNET="mainnet",n.GHOSTNET="ghostnet",n.MONDAYNET="mondaynet",n.DAILYNET="dailynet",n.DELPHINET="delphinet",n.EDONET="edonet",n.FLORENCENET="florencenet",n.GRANADANET="granadanet",n.HANGZHOUNET="hangzhounet",n.ITHACANET="ithacanet",n.JAKARTANET="jakartanet",n.KATHMANDUNET="kathmandunet",n.CUSTOM="custom"})(Ee||(Ee={}));var Yi;(function(n){n.ENDORSEMENT="endorsement",n.SEED_NONCE_REVELATION="seed_nonce_revelation",n.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",n.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",n.ACTIVATE_ACCOUNT="activate_account",n.PROPOSALS="proposals",n.BALLOT="ballot",n.REVEAL="reveal",n.TRANSACTION="transaction",n.ORIGINATION="origination",n.DELEGATION="delegation"})(Yi||(Yi={}));var Ze;(function(n){n.WEBSITE="website",n.EXTENSION="extension",n.P2P="p2p"})(Ze||(Ze={}));var ut;(function(n){n.BACKGROUND="toBackground",n.PAGE="toPage",n.EXTENSION="toExtension"})(ut||(ut={}));var le;(function(n){n.BROADCAST_ERROR="BROADCAST_ERROR",n.NETWORK_NOT_SUPPORTED="NETWORK_NOT_SUPPORTED",n.NO_ADDRESS_ERROR="NO_ADDRESS_ERROR",n.NO_PRIVATE_KEY_FOUND_ERROR="NO_PRIVATE_KEY_FOUND_ERROR",n.NOT_GRANTED_ERROR="NOT_GRANTED_ERROR",n.PARAMETERS_INVALID_ERROR="PARAMETERS_INVALID_ERROR",n.TOO_MANY_OPERATIONS="TOO_MANY_OPERATIONS",n.TRANSACTION_INVALID_ERROR="TRANSACTION_INVALID_ERROR",n.SIGNATURE_TYPE_NOT_SUPPORTED="SIGNATURE_TYPE_NOT_SUPPORTED",n.ABORTED_ERROR="ABORTED_ERROR",n.UNKNOWN_ERROR="UNKNOWN_ERROR"})(le||(le={}));var Je;(function(n){n.NOT_CONNECTED="NOT_CONNECTED",n.CONNECTING="CONNECTING",n.CONNECTED="CONNECTED"})(Je||(Je={}));var Nt;(function(n){n.CHROME_MESSAGE="chrome_message",n.POST_MESSAGE="post_message",n.LEDGER="ledger",n.P2P="p2p"})(Nt||(Nt={}));var Z;(function(n){n.TRANSPORT_P2P_PEERS_DAPP="beacon:communication-peers-dapp",n.TRANSPORT_P2P_PEERS_WALLET="beacon:communication-peers-wallet",n.TRANSPORT_POSTMESSAGE_PEERS_DAPP="beacon:postmessage-peers-dapp",n.TRANSPORT_POSTMESSAGE_PEERS_WALLET="beacon:postmessage-peers-wallet",n.ACCOUNTS="beacon:accounts",n.ACTIVE_ACCOUNT="beacon:active-account",n.PUSH_TOKENS="beacon:push-tokens",n.BEACON_SDK_SECRET_SEED="beacon:sdk-secret-seed",n.APP_METADATA_LIST="beacon:app-metadata-list",n.PERMISSION_LIST="beacon:permissions",n.BEACON_SDK_VERSION="beacon:sdk_version",n.MATRIX_PRESERVED_STATE="beacon:sdk-matrix-preserved-state",n.MATRIX_PEER_ROOM_IDS="beacon:matrix-peer-rooms",n.MATRIX_SELECTED_NODE="beacon:matrix-selected-node",n.MULTI_NODE_SETUP_DONE="beacon:multi-node-setup"})(Z||(Z={}));const qn={[Z.TRANSPORT_P2P_PEERS_DAPP]:[],[Z.TRANSPORT_P2P_PEERS_WALLET]:[],[Z.TRANSPORT_POSTMESSAGE_PEERS_DAPP]:[],[Z.TRANSPORT_POSTMESSAGE_PEERS_WALLET]:[],[Z.ACCOUNTS]:[],[Z.ACTIVE_ACCOUNT]:void 0,[Z.PUSH_TOKENS]:[],[Z.BEACON_SDK_SECRET_SEED]:void 0,[Z.APP_METADATA_LIST]:[],[Z.PERMISSION_LIST]:[],[Z.BEACON_SDK_VERSION]:void 0,[Z.MATRIX_PRESERVED_STATE]:{},[Z.MATRIX_PEER_ROOM_IDS]:{},[Z.MATRIX_SELECTED_NODE]:void 0,[Z.MULTI_NODE_SETUP_DONE]:void 0};var gt;(function(n){n.RAW="raw",n.OPERATION="operation",n.MICHELINE="micheline"})(gt||(gt={}));var Tn;(function(n){n.LIGHT="light",n.DARK="dark"})(Tn||(Tn={}));var bi;(function(n){n.EUROPE_EAST="europe-east",n.EUROPE_WEST="europe-west",n.NORTH_AMERICA_EAST="north-america-east",n.NORTH_AMERICA_WEST="north-america-west",n.CENTRAL_AMERICA="central-america",n.SOUTH_AMERICA="south-america",n.ASIA_EAST="asia-east",n.ASIA_WEST="asia-west",n.AFRICA="africa",n.AUSTRALIA="australia"})(bi||(bi={}));const vs="3.3.0",Yr="3",an=[n=>{}];let oe={postMessage:(n,e)=>{console.log("GOT MOCK POST MESSAGE",n),an.forEach(t=>{t({data:n})})},addEventListener:(n,e)=>{an.push(e)},removeEventListener:(n,e)=>{an.splice(an.indexOf(t=>t===e),1)},location:{origin:"*"}};try{typeof window<"u"&&(oe=window)}catch(n){console.log(`not defined: ${n}`)}var cn=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class ps{constructor(e){if(this._beaconId=new be,this._keyPair=new be,!e.name)throw new Error("Name not set");if(!e.storage)throw new Error("Storage not set");this.name=e.name,this.iconUrl=e.iconUrl,this.appUrl=e.appUrl,this.storage=e.storage,oe.beaconCreatedClientInstance?console.error("[BEACON] It looks like you created multiple Beacon SDK Client instances. This can lead to problems. Only create one instance and re-use it everywhere."):oe.beaconCreatedClientInstance=!0,this.initSDK().catch(console.error)}get beaconId(){return this._beaconId.promise}get keyPair(){return this._keyPair.promise}destroy(){return cn(this,void 0,void 0,function*(){yield this.removeBeaconEntriesFromStorage(),oe.beaconCreatedClientInstance=!1})}initSDK(){return cn(this,void 0,void 0,function*(){return this.storage.set(Z.BEACON_SDK_VERSION,vs).catch(console.error),this.loadOrCreateBeaconSecret().catch(console.error),this.keyPair.then(e=>{this._beaconId.resolve(ft(e.publicKey))})})}removeBeaconEntriesFromStorage(){return cn(this,void 0,void 0,function*(){const e=Object.values(Z);yield Promise.all(e.map(t=>this.storage.delete(t)))})}loadOrCreateBeaconSecret(){return cn(this,void 0,void 0,function*(){const e=yield this.storage.get(Z.BEACON_SDK_SECRET_SEED);if(e&&typeof e=="string")this._keyPair.resolve(yield Ji(e));else{const t=yield vt();yield this.storage.set(Z.BEACON_SDK_SECRET_SEED,t),this._keyPair.resolve(yield Ji(t))}})}}var Ht=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class Li{constructor(e,t){this.storage=e,this.storageKey=t}getAll(){return Ht(this,void 0,void 0,function*(){return this.storage.get(this.storageKey)})}getOne(e){return Ht(this,void 0,void 0,function*(){const t=yield this.storage.get(this.storageKey);return t.find(e)})}addOne(e,t,i=!0){return Ht(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey);if(!r.some(t))r.push(e);else if(i)for(let o=0;o<r.length;o++)t(r[o])&&(r[o]=e);return this.storage.set(this.storageKey,r)})}remove(e){return Ht(this,void 0,void 0,function*(){const t=yield this.storage.get(this.storageKey),i=t.filter(r=>!e(r));return this.storage.set(this.storageKey,i)})}removeAll(){return Ht(this,void 0,void 0,function*(){return this.storage.delete(this.storageKey)})}}var ln=Pn.exports.Buffer;function gs(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var i=0;i<n.length;i++){var r=n.charAt(i),o=r.charCodeAt(0);if(e[o]!==255)throw new TypeError(r+" is ambiguous");e[o]=i}var s=n.length,c=n.charAt(0),d=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function l(y){if((Array.isArray(y)||y instanceof Uint8Array)&&(y=ln.from(y)),!ln.isBuffer(y))throw new TypeError("Expected Buffer");if(y.length===0)return"";for(var k=0,B=0,D=0,q=y.length;D!==q&&y[D]===0;)D++,k++;for(var H=(q-D)*u+1>>>0,b=new Uint8Array(H);D!==q;){for(var R=y[D],w=0,E=H-1;(R!==0||w<B)&&E!==-1;E--,w++)R+=256*b[E]>>>0,b[E]=R%s>>>0,R=R/s>>>0;if(R!==0)throw new Error("Non-zero carry");B=w,D++}for(var a=H-B;a!==H&&b[a]===0;)a++;for(var f=c.repeat(k);a<H;++a)f+=n.charAt(b[a]);return f}function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return ln.alloc(0);for(var k=0,B=0,D=0;y[k]===c;)B++,k++;for(var q=(y.length-k)*d+1>>>0,H=new Uint8Array(q);y[k];){var b=e[y.charCodeAt(k)];if(b===255)return;for(var R=0,w=q-1;(b!==0||R<D)&&w!==-1;w--,R++)b+=s*H[w]>>>0,H[w]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");D=R,k++}for(var E=q-D;E!==q&&H[E]===0;)E++;var a=ln.allocUnsafe(B+(q-E));a.fill(0,0,B);for(var f=B;E!==q;)a[f++]=H[E++];return a}function A(y){var k=h(y);if(k)return k;throw new Error("Non-base"+s+" character")}return{encode:l,decodeUnsafe:h,decode:A}}var Es=gs,ms=Es,ys="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ws=ms(ys),Hn=ws,As=Pn.exports.Buffer,bs=function(n){function e(o){var s=n(o);return Hn.encode(As.concat([o,s],o.length+4))}function t(o){var s=o.slice(0,-4),c=o.slice(-4),d=n(s);if(!(c[0]^d[0]|c[1]^d[1]|c[2]^d[2]|c[3]^d[3]))return s}function i(o){var s=Hn.decodeUnsafe(o);if(s)return t(s)}function r(o){var s=Hn.decode(o),c=t(s);if(!c)throw new Error("Invalid checksum");return c}return{encode:e,decode:r,decodeUnsafe:i}},zi=Ur,_s=bs;function Rs(n){var e=zi("sha256").update(n).digest();return zi("sha256").update(e).digest()}var Sn=_s(Rs),Ts=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const _i=(n,e)=>Ts(void 0,void 0,void 0,function*(){const t=[n,e.type];e.name&&t.push(`name:${e.name}`),e.rpcUrl&&t.push(`rpc:${e.rpcUrl}`);const i=Buffer.from(et.hash(yt(t.join("-")),10));return Sn.encode(i)});var Ss=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class xs{static hasPermission(e,t,i){return Ss(this,void 0,void 0,function*(){switch(e.type){case $.PermissionRequest:case $.BroadcastRequest:return!0;case $.OperationRequest:{const r=yield _i(e.sourceAddress,e.network),o=yield t(r);return o?o.scopes.includes(nt.OPERATION_REQUEST):!1}case $.SignPayloadRequest:{const o=(yield i()).filter(s=>s.address===e.sourceAddress);return o.length===0?!1:o.some(s=>s.scopes.includes(nt.SIGN))}default:throw new Error("Message not handled")}})}}var At=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class Ns{constructor(e){this.storageManager=new Li(e,Z.ACCOUNTS)}getAccounts(){return At(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAccount(e){return At(this,void 0,void 0,function*(){return this.storageManager.getOne(t=>t.accountIdentifier===e)})}addAccount(e){return At(this,void 0,void 0,function*(){return this.storageManager.addOne(e,t=>t.accountIdentifier===e.accountIdentifier)})}removeAccount(e){return At(this,void 0,void 0,function*(){return this.storageManager.remove(t=>t.accountIdentifier===e)})}removeAccounts(e){return At(this,void 0,void 0,function*(){return this.storageManager.remove(t=>e.includes(t.accountIdentifier))})}removeAllAccounts(){return At(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}hasPermission(e){return At(this,void 0,void 0,function*(){return xs.hasPermission(e,this.getAccount.bind(this),this.getAccounts.bind(this))})}}var Is=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const Kt=n=>Is(void 0,void 0,void 0,function*(){const e=Buffer.from(et.hash(Buffer.from(n,"hex"),5));return Sn.encode(e)});let zr=!!oe.beaconSdkDebugEnabled;zr&&console.log("[BEACON]: Debug mode is ON (turned on either by the developer or a browser extension)");const Os=()=>zr;class Cs{constructor(){}debug(e,t,...i){this._log("debug",e,t,i)}log(e,t,...i){this._log("log",e,t,i)}warn(e,t,...i){this._log("warn",e,t,i)}error(e,t,...i){this._log("error",e,t,i)}_log(e,t,i,r=[]){if(!Os())return;let o=`[BEACON] ${new Date().toISOString()} [${t}](${i})`,s=r;switch(r[0]&&typeof r[0]=="string"&&(o+=` ${r[0]}`,s=r.slice(1)),e){case"error":console.group(o),console.error(...s);break;case"warn":console.group(o),console.warn(...s);break;case"debug":console.groupCollapsed(o),console.debug(...s);break;default:console.group(o),console.log(...s)}console.groupEnd()}}class je{constructor(e){this.name=e}debug(e,...t){dn.debug(this.name,e,t)}log(e,...t){dn.log(this.name,e,t)}warn(e,...t){dn.warn(this.name,e,t)}error(e,...t){dn.error(this.name,e,t)}}new je("");let dn=new Cs;var Ge=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const Ps=new je("Client");class ks extends ps{constructor(e){var t;super(e),this.rateLimit=2,this.rateLimitWindowInSeconds=5,this.requestCounter=[],this._transport=new be,this.accountManager=new Ns(e.storage),this.matrixNodes=(t=e.matrixNodes)!==null&&t!==void 0?t:{},this.handleResponse=(i,r)=>{throw new Error(`not overwritten${JSON.stringify(i)} - ${JSON.stringify(r)}`)}}get transport(){return this._transport.promise}get connectionStatus(){var e,t;return(t=(e=this._transport.promiseResult)===null||e===void 0?void 0:e.connectionStatus)!==null&&t!==void 0?t:Je.NOT_CONNECTED}get ready(){return this.transport.then(()=>{})}getAccounts(){return Ge(this,void 0,void 0,function*(){return this.accountManager.getAccounts()})}getAccount(e){return Ge(this,void 0,void 0,function*(){return this.accountManager.getAccount(e)})}removeAccount(e){return Ge(this,void 0,void 0,function*(){return this.accountManager.removeAccount(e)})}removeAllAccounts(){return Ge(this,void 0,void 0,function*(){return this.accountManager.removeAllAccounts()})}addRequestAndCheckIfRateLimited(){return Ge(this,void 0,void 0,function*(){const e=new Date().getTime();return this.requestCounter=this.requestCounter.filter(t=>t+this.rateLimitWindowInSeconds*1e3>e),this.requestCounter.push(e),this.requestCounter.length>this.rateLimit})}init(e){return Ge(this,void 0,void 0,function*(){return this._transport.status===tt.RESOLVED?(yield this.transport).type:(yield this.setTransport(e),e.type)})}getOwnAppMetadata(){return Ge(this,void 0,void 0,function*(){return{senderId:yield Kt(yield this.beaconId),name:this.name,icon:this.iconUrl}})}getPeers(){return Ge(this,void 0,void 0,function*(){return(yield this.transport).getPeers()})}addPeer(e){return Ge(this,void 0,void 0,function*(){return(yield this.transport).addPeer(e)})}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return Ge(this,void 0,void 0,function*(){this._transport.status===tt.RESOLVED&&(yield(yield this.transport).disconnect()),yield e.destroy.call(this)})}setTransport(e){return Ge(this,void 0,void 0,function*(){e?this._transport.isSettled()?this._transport=be.resolve(e):this._transport.resolve(e):this._transport.isSettled()&&(this._transport=new be)})}addListener(e){return Ge(this,void 0,void 0,function*(){e.addListener((t,i)=>Ge(this,void 0,void 0,function*(){if(typeof t=="string"){const r=yield new It().deserialize(t);this.handleResponse(r,i)}})).catch(t=>Ps.error("addListener",t))})}sendDisconnectToPeer(e,t){return Ge(this,void 0,void 0,function*(){const i={id:yield vt(),version:e.version,senderId:yield Kt(yield this.beaconId),type:$.Disconnect},r=yield new It().serialize(i);yield(t??(yield this.transport)).send(r,e)})}}class Fe{constructor(e,t){this.name="BeaconError",this.title="Error",this.message=`[${e}]:${t}`,this.description=t}get fullDescription(){return{description:this.description}}static getError(e,t){switch(e){case le.BROADCAST_ERROR:return new Ls;case le.NETWORK_NOT_SUPPORTED:return new Ms;case le.NO_ADDRESS_ERROR:return new Us;case le.NO_PRIVATE_KEY_FOUND_ERROR:return new Bs;case le.NOT_GRANTED_ERROR:return new Ds;case le.PARAMETERS_INVALID_ERROR:return new Ks;case le.TOO_MANY_OPERATIONS:return new js;case le.TRANSACTION_INVALID_ERROR:return new Gs(t);case le.SIGNATURE_TYPE_NOT_SUPPORTED:return new Ws;case le.ABORTED_ERROR:return new Fs;case le.UNKNOWN_ERROR:return new Zr}}}class Ls extends Fe{constructor(){super(le.BROADCAST_ERROR,"The transaction could not be broadcast to the network. Please try again."),this.name="BroadcastBeaconError",this.title="Broadcast Error"}}class Ms extends Fe{constructor(){super(le.NETWORK_NOT_SUPPORTED,"The wallet does not support this network. Please select another one."),this.name="NetworkNotSupportedBeaconError",this.title="Network Error"}}class Us extends Fe{constructor(){super(le.NO_ADDRESS_ERROR,"The wallet does not have an account set up. Please make sure to set up your wallet and try again."),this.name="NoAddressBeaconError",this.title="No Address"}}class Bs extends Fe{constructor(){super(le.NO_PRIVATE_KEY_FOUND_ERROR,"The account you are trying to interact with is not available. Please make sure to add the account to your wallet and try again."),this.name="NoPrivateKeyBeaconError",this.title="Account Not Found"}}class Ds extends Fe{constructor(){super(le.NOT_GRANTED_ERROR,"You do not have the necessary permissions to perform this action. Please initiate another permission request and give the necessary permissions."),this.name="NotGrantedBeaconError",this.title="Permission Not Granted"}}class Ks extends Fe{constructor(){super(le.PARAMETERS_INVALID_ERROR,"Some of the parameters you provided are invalid and the request could not be completed. Please check your inputs and try again."),this.name="ParametersInvalidBeaconError",this.title="Parameters Invalid"}}class js extends Fe{constructor(){super(le.TOO_MANY_OPERATIONS,"The request contains too many transactions. Please include fewer operations and try again."),this.name="TooManyOperationsBeaconError",this.title="Too Many Operations"}}class Gs extends Fe{constructor(e){super(le.TRANSACTION_INVALID_ERROR,"The transaction is invalid and the node did not accept it."),this.data=e,this.name="TransactionInvalidBeaconError",this.title="Transaction Invalid",this.data=e}get fullDescription(){return{description:this.description,data:JSON.stringify(this.data,void 0,2)}}}class Zr extends Fe{constructor(){super(le.UNKNOWN_ERROR,"An unknown error occured. Please try again or report it to a developer."),this.name="UnknownBeaconError",this.title="Error"}}var Xe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const at=new je("Transport");class $r{constructor(e,t,i){this.type=Nt.POST_MESSAGE,this._isConnected=Je.NOT_CONNECTED,this.listeners=[],this.name=e,this.client=t,this.peerManager=i}get connectionStatus(){return this._isConnected}static isAvailable(){return Xe(this,void 0,void 0,function*(){return Promise.resolve(!1)})}connect(){return Xe(this,void 0,void 0,function*(){at.log("connect"),this._isConnected=Je.CONNECTED})}disconnect(){return Xe(this,void 0,void 0,function*(){at.log("disconnect"),this._isConnected=Je.NOT_CONNECTED})}send(e,t){return Xe(this,void 0,void 0,function*(){if(t)return this.client.sendMessage(e,t);{const r=(yield this.getPeers()).map(o=>this.client.sendMessage(e,o));return(yield Promise.all(r))[0]}})}addListener(e){return Xe(this,void 0,void 0,function*(){at.debug("addListener"),this.listeners.push(e)})}removeListener(e){return Xe(this,void 0,void 0,function*(){at.log("removeListener"),this.listeners=this.listeners.filter(t=>t!==e)})}getPeers(){return Xe(this,void 0,void 0,function*(){return this.peerManager.getPeers()})}addPeer(e,t=!0){return Xe(this,void 0,void 0,function*(){at.log("addPeer","adding peer",e),yield this.peerManager.addPeer(e),yield this.listen(e.publicKey)})}removePeer(e){return Xe(this,void 0,void 0,function*(){at.log("removePeer","removing peer",e),yield this.peerManager.removePeer(e.publicKey),this.client&&(yield this.client.unsubscribeFromEncryptedMessage(e.publicKey))})}removeAllPeers(){return Xe(this,void 0,void 0,function*(){at.log("removeAllPeers"),yield this.peerManager.removeAllPeers(),this.client&&(yield this.client.unsubscribeFromEncryptedMessages())})}notifyListeners(e,t){return Xe(this,void 0,void 0,function*(){this.listeners.length===0?at.warn("notifyListeners","0 listeners notified!",this):at.log("notifyListeners",`Notifying ${this.listeners.length} listeners`,this),this.listeners.forEach(i=>{i(e,t)})})}}globalThis&&globalThis.__awaiter;var un=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class qs{constructor(e){this.prefix=e}static isSupported(){return un(this,void 0,void 0,function*(){return Promise.resolve(Boolean(typeof window<"u")&&Boolean(window.localStorage))})}get(e){return un(this,void 0,void 0,function*(){const t=localStorage.getItem(this.getPrefixedKey(e));if(t)try{return JSON.parse(t)}catch{return t}else return typeof qn[e]=="object"?JSON.parse(JSON.stringify(qn[e])):qn[e]})}set(e,t){return un(this,void 0,void 0,function*(){return typeof t=="string"?localStorage.setItem(this.getPrefixedKey(e),t):localStorage.setItem(this.getPrefixedKey(e),JSON.stringify(t))})}delete(e){return un(this,void 0,void 0,function*(){return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(e)))})}getPrefixedKey(e){return this.prefix?`${this.prefix}-${e}`:e}}globalThis&&globalThis.__awaiter;new je("STORAGE");var Zi=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class It{serialize(e){return Zi(this,void 0,void 0,function*(){const t=JSON.stringify(e);return Sn.encode(Buffer.from(t))})}deserialize(e){return Zi(this,void 0,void 0,function*(){if(typeof e!="string")throw new Error("Encoded payload needs to be a string");return JSON.parse(Sn.decode(e).toString())})}}var Pt=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class Hs{constructor(e){this.storageManager=new Li(e,Z.APP_METADATA_LIST)}getAppMetadataList(){return Pt(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAppMetadata(e){return Pt(this,void 0,void 0,function*(){return this.storageManager.getOne(t=>t.senderId===e)})}addAppMetadata(e){return Pt(this,void 0,void 0,function*(){return this.storageManager.addOne(e,t=>t.senderId===e.senderId)})}removeAppMetadata(e){return Pt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>t.senderId===e)})}removeAppMetadatas(e){return Pt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>e.includes(t.senderId))})}removeAllAppMetadata(){return Pt(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}globalThis&&globalThis.__awaiter;class Fs extends Fe{constructor(){super(le.ABORTED_ERROR,"The action was aborted by the user."),this.name="UnknownBeaconError",this.title="Aborted"}}var bt=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class xn{constructor(e,t){this.storageManager=new Li(e,t)}hasPeer(e){return bt(this,void 0,void 0,function*(){return!!(yield this.getPeer(e))})}getPeers(){return bt(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getPeer(e){return bt(this,void 0,void 0,function*(){return this.storageManager.getOne(t=>t.publicKey===e)})}addPeer(e){return bt(this,void 0,void 0,function*(){return this.storageManager.addOne(e,t=>t.publicKey===e.publicKey)})}removePeer(e){return bt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>t.publicKey===e)})}removePeers(e){return bt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>e.includes(t.publicKey))})}removeAllPeers(){return bt(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}var Fn={},Qn={},$i;function Qs(){return $i||($i=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.X25519Session=n.SECRET_SEED_LENGTH=n.SAVED_STATE_LENGTH=n.ACCEPT_MESSAGE_LENGTH=n.OFFER_MESSAGE_LENGTH=void 0;const e=en,t=Ot,i=Zt,r=eo();n.OFFER_MESSAGE_LENGTH=i.PUBLIC_KEY_LENGTH,n.ACCEPT_MESSAGE_LENGTH=i.PUBLIC_KEY_LENGTH,n.SAVED_STATE_LENGTH=i.SECRET_KEY_LENGTH,n.SECRET_SEED_LENGTH=i.SECRET_KEY_LENGTH;class o{constructor(c,d){this.offerMessageLength=n.OFFER_MESSAGE_LENGTH,this.acceptMessageLength=n.ACCEPT_MESSAGE_LENGTH,this.sharedKeyLength=i.SHARED_KEY_LENGTH,this.savedStateLength=n.SAVED_STATE_LENGTH,this._seed=c||(0,e.randomBytes)(i.SECRET_KEY_LENGTH,d)}saveState(){return new Uint8Array(this._seed)}restoreState(c){return this._seed=new Uint8Array(c),this}clean(){this._seed&&(0,t.wipe)(this._seed),this._keyPair&&((0,t.wipe)(this._keyPair.secretKey),(0,t.wipe)(this._keyPair.publicKey)),this._sharedKey&&(0,t.wipe)(this._sharedKey),this._sessionKeys&&((0,t.wipe)(this._sessionKeys.receive),(0,t.wipe)(this._sessionKeys.send))}offer(){return this._keyPair=(0,i.generateKeyPairFromSeed)(this._seed),new Uint8Array(this._keyPair.publicKey)}accept(c){if(this._keyPair)throw new Error("X25519Session: accept shouldn't be called by offering party");if(c.length!==this.offerMessageLength)throw new Error("X25519Session: incorrect offer message length");if(this._sharedKey)throw new Error("X25519Session: accept was already called");const d=(0,i.generateKeyPairFromSeed)(this._seed);return this._sharedKey=(0,i.sharedKey)(d.secretKey,c),this._sessionKeys=(0,r.clientSessionKeysFromSharedKey)(this._sharedKey,d.publicKey,c),(0,t.wipe)(d.secretKey),d.publicKey}finish(c){if(c.length!==this.acceptMessageLength)throw new Error("X25519Session: incorrect accept message length");if(!this._keyPair)throw new Error("X25519Session: no offer state");if(this._sharedKey)throw new Error("X25519Session: finish was already called");return this._sharedKey=(0,i.sharedKey)(this._keyPair.secretKey,c),this._sessionKeys=(0,r.serverSessionKeysFromSharedKey)(this._sharedKey,this._keyPair.publicKey,c),this}getSharedKey(){if(!this._sharedKey)throw new Error("X25519Session: no shared key established");return new Uint8Array(this._sharedKey)}getSessionKeys(){if(!this._sessionKeys)throw new Error("X25519Session: no shared key established");return{receive:new Uint8Array(this._sessionKeys.receive),send:new Uint8Array(this._sessionKeys.send)}}}n.X25519Session=o}(Qn)),Qn}var er;function eo(){return er||(er=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.clientSessionKeys=n.serverSessionKeys=n.clientSessionKeysFromSharedKey=n.serverSessionKeysFromSharedKey=n.X25519Session=void 0;const e=et,t=Zt;var i=Qs();Object.defineProperty(n,"X25519Session",{enumerable:!0,get:function(){return i.X25519Session}});const r=32;function o(u,l,h,A=e.BLAKE2b){const y=new A;if(y.digestLength!==r*2)throw new Error("X25519: incorrect digest length");const k=y.update(u).update(h).update(l).digest();return{send:k.subarray(0,r),receive:k.subarray(r)}}n.serverSessionKeysFromSharedKey=o;function s(u,l,h,A=e.BLAKE2b){const y=new A;if(y.digestLength!==r*2)throw new Error("X25519: incorrect digest length");const k=y.update(u).update(l).update(h).digest();return{receive:k.subarray(0,r),send:k.subarray(r)}}n.clientSessionKeysFromSharedKey=s;function c(u,l,h=e.BLAKE2b){const A=(0,t.sharedKey)(u.secretKey,l);return o(A,u.publicKey,l,h)}n.serverSessionKeys=c;function d(u,l,h=e.BLAKE2b){const A=(0,t.sharedKey)(u.secretKey,l);return s(A,u.publicKey,l,h)}n.clientSessionKeys=d}(Fn)),Fn}var tr=eo(),Ft=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class to{constructor(e){this.keyPair=e}getPublicKey(){return Ft(this,void 0,void 0,function*(){return ft(this.keyPair.publicKey)})}getPublicKeyHash(){return Ft(this,void 0,void 0,function*(){return Ut(this.keyPair.publicKey)})}createCryptoBoxServer(e,t){return Ft(this,void 0,void 0,function*(){return tr.serverSessionKeys({publicKey:Ve.convertPublicKeyToX25519(t.publicKey),secretKey:Ve.convertSecretKeyToX25519(t.secretKey)},Ve.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}createCryptoBoxClient(e,t){return Ft(this,void 0,void 0,function*(){return tr.clientSessionKeys({publicKey:Ve.convertPublicKeyToX25519(t.publicKey),secretKey:Ve.convertSecretKeyToX25519(t.secretKey)},Ve.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}encryptMessageAsymmetric(e,t){return Ft(this,void 0,void 0,function*(){return cs(t,Buffer.from(e,"hex"))})}}var _t=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class Vs extends to{constructor(e,t){super(t),this.name=e,this.init().catch(console.error)}start(){return _t(this,void 0,void 0,function*(){yield Promise.resolve()})}getPairingRequestInfo(){return _t(this,void 0,void 0,function*(){return{id:yield vt(),type:"postmessage-pairing-request",name:this.name,version:Yr,publicKey:yield this.getPublicKey()}})}getPairingResponseInfo(e){return _t(this,void 0,void 0,function*(){return{id:e.id,type:"postmessage-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey()}})}unsubscribeFromEncryptedMessage(e){return _t(this,void 0,void 0,function*(){this.activeListeners.get(e)&&this.activeListeners.delete(e)})}unsubscribeFromEncryptedMessages(){return _t(this,void 0,void 0,function*(){this.activeListeners.clear()})}decryptMessage(e,t){return _t(this,void 0,void 0,function*(){const i=yield this.createCryptoBoxServer(e,this.keyPair),r=Buffer.from(t,"hex");if(r.length>=_n+Rn)try{return yield Jr(r,i.receive)}catch{}throw new Error("Could not decrypt message")})}encryptMessage(e,t){return _t(this,void 0,void 0,function*(){const i=yield this.createCryptoBoxClient(e,this.keyPair);return Wr(t,i.send)})}}class Ws extends Fe{constructor(){super(le.SIGNATURE_TYPE_NOT_SUPPORTED,"The wallet is not able to sign payloads of this type."),this.name="SignatureTypeNotSupportedBeaconError",this.title="Signature Type Not Supported"}}var no={exports:{}},Mi={exports:{}},io=function(e,t){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(t,r)}},Js=io,Ct=Object.prototype.toString;function Ui(n){return Ct.call(n)==="[object Array]"}function Ri(n){return typeof n>"u"}function Xs(n){return n!==null&&!Ri(n)&&n.constructor!==null&&!Ri(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function Ys(n){return Ct.call(n)==="[object ArrayBuffer]"}function zs(n){return typeof FormData<"u"&&n instanceof FormData}function Zs(n){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&n.buffer instanceof ArrayBuffer,e}function $s(n){return typeof n=="string"}function ea(n){return typeof n=="number"}function ro(n){return n!==null&&typeof n=="object"}function yn(n){if(Ct.call(n)!=="[object Object]")return!1;var e=Object.getPrototypeOf(n);return e===null||e===Object.prototype}function ta(n){return Ct.call(n)==="[object Date]"}function na(n){return Ct.call(n)==="[object File]"}function ia(n){return Ct.call(n)==="[object Blob]"}function oo(n){return Ct.call(n)==="[object Function]"}function ra(n){return ro(n)&&oo(n.pipe)}function oa(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}function sa(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function aa(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Bi(n,e){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),Ui(n))for(var t=0,i=n.length;t<i;t++)e.call(null,n[t],t,n);else for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.call(null,n[r],r,n)}function Ti(){var n={};function e(r,o){yn(n[o])&&yn(r)?n[o]=Ti(n[o],r):yn(r)?n[o]=Ti({},r):Ui(r)?n[o]=r.slice():n[o]=r}for(var t=0,i=arguments.length;t<i;t++)Bi(arguments[t],e);return n}function ca(n,e,t){return Bi(e,function(r,o){t&&typeof r=="function"?n[o]=Js(r,t):n[o]=r}),n}function la(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}var Qe={isArray:Ui,isArrayBuffer:Ys,isBuffer:Xs,isFormData:zs,isArrayBufferView:Zs,isString:$s,isNumber:ea,isObject:ro,isPlainObject:yn,isUndefined:Ri,isDate:ta,isFile:na,isBlob:ia,isFunction:oo,isStream:ra,isURLSearchParams:oa,isStandardBrowserEnv:aa,forEach:Bi,merge:Ti,extend:ca,trim:sa,stripBOM:la},kt=Qe;function nr(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var so=function(e,t,i){if(!t)return e;var r;if(i)r=i(t);else if(kt.isURLSearchParams(t))r=t.toString();else{var o=[];kt.forEach(t,function(d,u){d===null||typeof d>"u"||(kt.isArray(d)?u=u+"[]":d=[d],kt.forEach(d,function(h){kt.isDate(h)?h=h.toISOString():kt.isObject(h)&&(h=JSON.stringify(h)),o.push(nr(u)+"="+nr(h))}))}),r=o.join("&")}if(r){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},da=Qe;function Mn(){this.handlers=[]}Mn.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};Mn.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Mn.prototype.forEach=function(e){da.forEach(this.handlers,function(i){i!==null&&e(i)})};var ua=Mn,ha=Qe,fa=function(e,t){ha.forEach(e,function(r,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[o])})},ao=function(e,t,i,r,o){return e.config=t,i&&(e.code=i),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Vn,ir;function co(){if(ir)return Vn;ir=1;var n=ao;return Vn=function(t,i,r,o,s){var c=new Error(t);return n(c,i,r,o,s)},Vn}var Wn,rr;function va(){if(rr)return Wn;rr=1;var n=co();return Wn=function(t,i,r){var o=r.config.validateStatus;!r.status||!o||o(r.status)?t(r):i(n("Request failed with status code "+r.status,r.config,null,r.request,r))},Wn}var Jn,or;function pa(){if(or)return Jn;or=1;var n=Qe;return Jn=n.isStandardBrowserEnv()?function(){return{write:function(i,r,o,s,c,d){var u=[];u.push(i+"="+encodeURIComponent(r)),n.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),n.isString(s)&&u.push("path="+s),n.isString(c)&&u.push("domain="+c),d===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(i){var r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Jn}var Xn,sr;function ga(){return sr||(sr=1,Xn=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Xn}var Yn,ar;function Ea(){return ar||(ar=1,Yn=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),Yn}var zn,cr;function ma(){if(cr)return zn;cr=1;var n=ga(),e=Ea();return zn=function(i,r){return i&&!n(r)?e(i,r):r},zn}var Zn,lr;function ya(){if(lr)return Zn;lr=1;var n=Qe,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Zn=function(i){var r={},o,s,c;return i&&n.forEach(i.split(`
`),function(u){if(c=u.indexOf(":"),o=n.trim(u.substr(0,c)).toLowerCase(),s=n.trim(u.substr(c+1)),o){if(r[o]&&e.indexOf(o)>=0)return;o==="set-cookie"?r[o]=(r[o]?r[o]:[]).concat([s]):r[o]=r[o]?r[o]+", "+s:s}}),r},Zn}var $n,dr;function wa(){if(dr)return $n;dr=1;var n=Qe;return $n=n.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r;function o(s){var c=s;return t&&(i.setAttribute("href",c),c=i.href),i.setAttribute("href",c),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=o(window.location.href),function(c){var d=n.isString(c)?o(c):c;return d.protocol===r.protocol&&d.host===r.host}}():function(){return function(){return!0}}(),$n}var ei,ur;function Un(){if(ur)return ei;ur=1;function n(e){this.message=e}return n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,ei=n,ei}var ti,hr;function fr(){if(hr)return ti;hr=1;var n=Qe,e=va(),t=pa(),i=so,r=ma(),o=ya(),s=wa(),c=co(),d=Bn(),u=Un();return ti=function(h){return new Promise(function(y,k){var B=h.data,D=h.headers,q=h.responseType,H;function b(){h.cancelToken&&h.cancelToken.unsubscribe(H),h.signal&&h.signal.removeEventListener("abort",H)}n.isFormData(B)&&delete D["Content-Type"];var R=new XMLHttpRequest;if(h.auth){var w=h.auth.username||"",E=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";D.Authorization="Basic "+btoa(w+":"+E)}var a=r(h.baseURL,h.url);R.open(h.method.toUpperCase(),i(a,h.params,h.paramsSerializer),!0),R.timeout=h.timeout;function f(){if(R){var m="getAllResponseHeaders"in R?o(R.getAllResponseHeaders()):null,p=!q||q==="text"||q==="json"?R.responseText:R.response,v={data:p,status:R.status,statusText:R.statusText,headers:m,config:h,request:R};e(function(N){y(N),b()},function(N){k(N),b()},v),R=null}}if("onloadend"in R?R.onloadend=f:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(f)},R.onabort=function(){R&&(k(c("Request aborted",h,"ECONNABORTED",R)),R=null)},R.onerror=function(){k(c("Network Error",h,null,R)),R=null},R.ontimeout=function(){var p=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",v=h.transitional||d.transitional;h.timeoutErrorMessage&&(p=h.timeoutErrorMessage),k(c(p,h,v.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",R)),R=null},n.isStandardBrowserEnv()){var g=(h.withCredentials||s(a))&&h.xsrfCookieName?t.read(h.xsrfCookieName):void 0;g&&(D[h.xsrfHeaderName]=g)}"setRequestHeader"in R&&n.forEach(D,function(p,v){typeof B>"u"&&v.toLowerCase()==="content-type"?delete D[v]:R.setRequestHeader(v,p)}),n.isUndefined(h.withCredentials)||(R.withCredentials=!!h.withCredentials),q&&q!=="json"&&(R.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&R.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&R.upload&&R.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(H=function(m){R&&(k(!m||m&&m.type?new u("canceled"):m),R.abort(),R=null)},h.cancelToken&&h.cancelToken.subscribe(H),h.signal&&(h.signal.aborted?H():h.signal.addEventListener("abort",H))),B||(B=null),R.send(B)})},ti}var ni,vr;function Bn(){if(vr)return ni;vr=1;var n=Qe,e=fa,t=ao,i={"Content-Type":"application/x-www-form-urlencoded"};function r(d,u){!n.isUndefined(d)&&n.isUndefined(d["Content-Type"])&&(d["Content-Type"]=u)}function o(){var d;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(d=fr()),d}function s(d,u,l){if(n.isString(d))try{return(u||JSON.parse)(d),n.trim(d)}catch(h){if(h.name!=="SyntaxError")throw h}return(l||JSON.stringify)(d)}var c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:o(),transformRequest:[function(u,l){return e(l,"Accept"),e(l,"Content-Type"),n.isFormData(u)||n.isArrayBuffer(u)||n.isBuffer(u)||n.isStream(u)||n.isFile(u)||n.isBlob(u)?u:n.isArrayBufferView(u)?u.buffer:n.isURLSearchParams(u)?(r(l,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):n.isObject(u)||l&&l["Content-Type"]==="application/json"?(r(l,"application/json"),s(u)):u}],transformResponse:[function(u){var l=this.transitional||c.transitional,h=l&&l.silentJSONParsing,A=l&&l.forcedJSONParsing,y=!h&&this.responseType==="json";if(y||A&&n.isString(u)&&u.length)try{return JSON.parse(u)}catch(k){if(y)throw k.name==="SyntaxError"?t(k,this,"E_JSON_PARSE"):k}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return n.forEach(["delete","get","head"],function(u){c.headers[u]={}}),n.forEach(["post","put","patch"],function(u){c.headers[u]=n.merge(i)}),ni=c,ni}var Aa=Qe,ba=Bn(),_a=function(e,t,i){var r=this||ba;return Aa.forEach(i,function(s){e=s.call(r,e,t)}),e},ii,pr;function lo(){return pr||(pr=1,ii=function(e){return!!(e&&e.__CANCEL__)}),ii}var gr=Qe,ri=_a,Ra=lo(),Ta=Bn(),Sa=Un();function oi(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Sa("canceled")}var xa=function(e){oi(e),e.headers=e.headers||{},e.data=ri.call(e,e.data,e.headers,e.transformRequest),e.headers=gr.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),gr.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var t=e.adapter||Ta.adapter;return t(e).then(function(r){return oi(e),r.data=ri.call(e,r.data,r.headers,e.transformResponse),r},function(r){return Ra(r)||(oi(e),r&&r.response&&(r.response.data=ri.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},qe=Qe,uo=function(e,t){t=t||{};var i={};function r(l,h){return qe.isPlainObject(l)&&qe.isPlainObject(h)?qe.merge(l,h):qe.isPlainObject(h)?qe.merge({},h):qe.isArray(h)?h.slice():h}function o(l){if(qe.isUndefined(t[l])){if(!qe.isUndefined(e[l]))return r(void 0,e[l])}else return r(e[l],t[l])}function s(l){if(!qe.isUndefined(t[l]))return r(void 0,t[l])}function c(l){if(qe.isUndefined(t[l])){if(!qe.isUndefined(e[l]))return r(void 0,e[l])}else return r(void 0,t[l])}function d(l){if(l in t)return r(e[l],t[l]);if(l in e)return r(void 0,e[l])}var u={url:s,method:s,data:s,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d};return qe.forEach(Object.keys(e).concat(Object.keys(t)),function(h){var A=u[h]||o,y=A(h);qe.isUndefined(y)&&A!==d||(i[h]=y)}),i},si,Er;function ho(){return Er||(Er=1,si={version:"0.24.0"}),si}var Na=ho().version,Di={};["object","boolean","number","function","string","symbol"].forEach(function(n,e){Di[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});var mr={};Di.transitional=function(e,t,i){function r(o,s){return"[Axios v"+Na+"] Transitional option '"+o+"'"+s+(i?". "+i:"")}return function(o,s,c){if(e===!1)throw new Error(r(s," has been removed"+(t?" in "+t:"")));return t&&!mr[s]&&(mr[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,s,c):!0}};function Ia(n,e,t){if(typeof n!="object")throw new TypeError("options must be an object");for(var i=Object.keys(n),r=i.length;r-- >0;){var o=i[r],s=e[o];if(s){var c=n[o],d=c===void 0||s(c,o,n);if(d!==!0)throw new TypeError("option "+o+" must be "+d);continue}if(t!==!0)throw Error("Unknown option "+o)}}var Oa={assertOptions:Ia,validators:Di},fo=Qe,Ca=so,yr=ua,wr=xa,Dn=uo,vo=Oa,Lt=vo.validators;function tn(n){this.defaults=n,this.interceptors={request:new yr,response:new yr}}tn.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Dn(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&vo.assertOptions(t,{silentJSONParsing:Lt.transitional(Lt.boolean),forcedJSONParsing:Lt.transitional(Lt.boolean),clarifyTimeoutError:Lt.transitional(Lt.boolean)},!1);var i=[],r=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(e)===!1||(r=r&&A.synchronous,i.unshift(A.fulfilled,A.rejected))});var o=[];this.interceptors.response.forEach(function(A){o.push(A.fulfilled,A.rejected)});var s;if(!r){var c=[wr,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),s=Promise.resolve(e);c.length;)s=s.then(c.shift(),c.shift());return s}for(var d=e;i.length;){var u=i.shift(),l=i.shift();try{d=u(d)}catch(h){l(h);break}}try{s=wr(d)}catch(h){return Promise.reject(h)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};tn.prototype.getUri=function(e){return e=Dn(this.defaults,e),Ca(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};fo.forEach(["delete","get","head","options"],function(e){tn.prototype[e]=function(t,i){return this.request(Dn(i||{},{method:e,url:t,data:(i||{}).data}))}});fo.forEach(["post","put","patch"],function(e){tn.prototype[e]=function(t,i,r){return this.request(Dn(r||{},{method:e,url:t,data:i}))}});var Pa=tn,ai,Ar;function ka(){if(Ar)return ai;Ar=1;var n=Un();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(s){i=s});var r=this;this.promise.then(function(o){if(r._listeners){var s,c=r._listeners.length;for(s=0;s<c;s++)r._listeners[s](o);r._listeners=null}}),this.promise.then=function(o){var s,c=new Promise(function(d){r.subscribe(d),s=d}).then(o);return c.cancel=function(){r.unsubscribe(s)},c},t(function(s){r.reason||(r.reason=new n(s),i(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var r=this._listeners.indexOf(i);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var i,r=new e(function(s){i=s});return{token:r,cancel:i}},ai=e,ai}var ci,br;function La(){return br||(br=1,ci=function(e){return function(i){return e.apply(null,i)}}),ci}var li,_r;function Ma(){return _r||(_r=1,li=function(e){return typeof e=="object"&&e.isAxiosError===!0}),li}var Rr=Qe,Ua=io,wn=Pa,Ba=uo,Da=Bn();function po(n){var e=new wn(n),t=Ua(wn.prototype.request,e);return Rr.extend(t,wn.prototype,e),Rr.extend(t,e),t.create=function(r){return po(Ba(n,r))},t}var ot=po(Da);ot.Axios=wn;ot.Cancel=Un();ot.CancelToken=ka();ot.isCancel=lo();ot.VERSION=ho().version;ot.all=function(e){return Promise.all(e)};ot.spread=La();ot.isAxiosError=Ma();Mi.exports=ot;Mi.exports.default=ot;(function(n){n.exports=Mi.exports})(no);const Si=ko(no.exports);var Nn;(function(n){n.TEXT="m.text"})(Nn||(Nn={}));class Ki{constructor(e,t,i,r){this.type=e,this.sender=t,this.content=i,this.timestamp=r}static from(e){if(Ga(e))return new Ki(e.content.msgtype,e.sender,e.content.body,e.origin_server_ts)}}const Ka=n=>n.type==="m.room.create"&&n.content instanceof Object&&"creator"in n.content,ja=n=>n.type==="m.room.member"&&n.content instanceof Object&&"membership"in n.content&&n.content.membership==="join",go=n=>n.type==="m.room.message",Ga=n=>go(n)&&n.content instanceof Object&&"msgtype"in n.content&&n.content.msgtype===Nn.TEXT;var Me;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.JOINED=1]="JOINED",n[n.INVITED=2]="INVITED",n[n.LEFT=3]="LEFT"})(Me||(Me={}));class ge{constructor(e,t=Me.UNKNOWN,i=[],r=[]){this.id=e,this.status=t,this.members=i,this.messages=r}static fromSync(e){var t,i,r;if(!e)return[];function o(s,c){return Object.entries(s).map(([d,u])=>c(d,u))}return[...o((t=e.join)!==null&&t!==void 0?t:{},ge.fromJoined),...o((i=e.invite)!==null&&i!==void 0?i:{},ge.fromInvited),...o((r=e.leave)!==null&&r!==void 0?r:{},ge.fromLeft)]}static from(e,t){return typeof e=="string"?new ge(e,t||Me.UNKNOWN):t!==void 0?new ge(e.id,t,e.members,e.messages):e}static merge(e,t){return!t||t.id!==e.id?ge.from(e):new ge(e.id,e.status,[...t.members,...e.members].filter((i,r,o)=>o.indexOf(i)===r),[...t.messages,...e.messages])}static fromJoined(e,t){const i=[...t.state.events,...t.timeline.events],r=ge.getMembersFromEvents(i),o=ge.getMessagesFromEvents(i);return new ge(e,Me.JOINED,r,o)}static fromInvited(e,t){const i=ge.getMembersFromEvents(t.invite_state.events);return new ge(e,Me.INVITED,i)}static fromLeft(e,t){const i=[...t.state.events,...t.timeline.events],r=ge.getMembersFromEvents(i),o=ge.getMessagesFromEvents(i);return new ge(e,Me.LEFT,r,o)}static getMembersFromEvents(e){return ge.getUniqueEvents(e.filter(t=>Ka(t)||ja(t))).map(t=>t.sender).filter((t,i,r)=>r.indexOf(t)===i)}static getMessagesFromEvents(e){return ge.getUniqueEvents(e.filter(go)).map(t=>Ki.from(t)).filter(Boolean)}static getUniqueEvents(e){const t={},i=[];return e.forEach((r,o)=>{const s=r.event_id;(s===void 0||!(s in t))&&(s!==void 0&&(t[s]=o),i.push(r))}),i}}var hn=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const Tr=["syncToken","rooms"];class qa{constructor(e){this.storage=e,this.state={isRunning:!1,userId:void 0,deviceId:void 0,txnNo:0,accessToken:void 0,syncToken:void 0,pollingTimeout:void 0,pollingRetries:0,rooms:{}},this.onStateChangedListeners=new Map,this.waitReadyPromise=new Promise((t,i)=>hn(this,void 0,void 0,function*(){try{yield this.initFromStorage(),t()}catch(r){i(r)}}))}get(e){return this.state[e]}getRoom(e){const t=ge.from(e,Me.UNKNOWN);return this.state.rooms[t.id]||t}update(e){return hn(this,void 0,void 0,function*(){yield this.waitReady();const t=Object.assign({},this.state);this.setState(e),this.updateStorage(e),this.notifyListeners(t,this.state,e)})}onStateChanged(e,...t){t.length>0?t.forEach(i=>{this.onStateChangedListeners.set(i,e)}):this.onStateChangedListeners.set("all",e)}waitReady(){return hn(this,void 0,void 0,function*(){return this.waitReadyPromise})}initFromStorage(){return hn(this,void 0,void 0,function*(){const e=yield this.storage.get(Z.MATRIX_PRESERVED_STATE);this.setState(e)})}prepareData(e){const i=["rooms"].some(r=>e[r]!==void 0)?JSON.parse(JSON.stringify(e)):e;return Object.values(i.rooms||{}).forEach(r=>{r.messages=[]}),i}updateStorage(e){if(Object.entries(e).filter(([i,r])=>Tr.includes(i)&&Boolean(r)).length>0){const i={};Tr.forEach(r=>{i[r]=this.state[r]}),this.storage.set(Z.MATRIX_PRESERVED_STATE,this.prepareData(i))}}setState(e){this.state={isRunning:e.isRunning||this.state.isRunning,userId:e.userId||this.state.userId,deviceId:e.deviceId||this.state.deviceId,txnNo:e.txnNo||this.state.txnNo,accessToken:e.accessToken||this.state.accessToken,syncToken:e.syncToken||this.state.syncToken,pollingTimeout:e.pollingTimeout||this.state.pollingTimeout,pollingRetries:e.pollingRetries||this.state.pollingRetries,rooms:this.mergeRooms(this.state.rooms,e.rooms)}}mergeRooms(e,t){if(!t)return e;const i=Array.isArray(t)?t:Object.values(t),r=Object.assign({},e);return i.forEach(o=>{r[o.id]=ge.merge(o,e[o.id])}),r}notifyListeners(e,t,i){const r=this.onStateChangedListeners.get("all");r&&r(e,t,i),ki(i).filter(o=>i[o]!==void 0).forEach(o=>{const s=this.onStateChangedListeners.get(o);s&&s(e,t,i)})}}var Qt=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const Ha=new je("MatrixHttpClient"),Fa="/_matrix/client/r0";class Qa{constructor(e){this.baseUrl=e,this.cancelTokenSource=Si.CancelToken.source()}get(e,t,i){return Qt(this,void 0,void 0,function*(){return this.send("GET",e,i,t)})}post(e,t,i,r){return Qt(this,void 0,void 0,function*(){return this.send("POST",e,i,r,t)})}put(e,t,i,r){return Qt(this,void 0,void 0,function*(){return this.send("PUT",e,i,r,t)})}cancelAllRequests(){return Qt(this,void 0,void 0,function*(){return this.cancelTokenSource.cancel("Manually cancelled")})}send(e,t,i,r,o){return Qt(this,void 0,void 0,function*(){const s=i?this.getHeaders(i):void 0,c=r?this.getParams(r):void 0;let d;try{d=yield Si.request({method:e,url:t,baseURL:this.apiUrl(Fa),headers:s,data:o,params:c,cancelToken:this.cancelTokenSource.token})}catch(u){const l=u;throw Ha.error("send",l.code,l.message,l.response.data),u.response.data}return d.data})}getHeaders(e){const t={},i=[];if(e.accessToken&&i.push(["Authorization",`Bearer ${e.accessToken}`]),i.length!==0){for(const[r,o]of i)t[r]=o;return t}}getParams(e){if(!e)return;const t=Object.assign(e,{});return ki(t).forEach(i=>t[i]===void 0&&delete t[i]),t}apiUrl(...e){const t=this.baseUrl.endsWith("/")?this.baseUrl.substr(0,this.baseUrl.length-1):this.baseUrl,i=e.map(r=>r.startsWith("/")?r.substr(1):r);return[t,...i].join("/")}}var fn=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class Va{constructor(e){this.httpClient=e}createRoom(e,t={}){return fn(this,void 0,void 0,function*(){return this.httpClient.post("/createRoom",t,{accessToken:e})})}inviteToRoom(e,t,i){return fn(this,void 0,void 0,function*(){return i.status!==Me.JOINED&&i.status!==Me.UNKNOWN?Promise.reject(`User is not a member of room ${i.id}.`):this.httpClient.post(`/rooms/${encodeURIComponent(i.id)}/invite`,{user_id:t},{accessToken:e})})}joinRoom(e,t){return fn(this,void 0,void 0,function*(){return t.status===Me.JOINED?Promise.resolve({room_id:t.id}):this.httpClient.post(`/rooms/${encodeURIComponent(t.id)}/join`,{},{accessToken:e})})}getJoinedRooms(e){return fn(this,void 0,void 0,function*(){return this.httpClient.get("/joined_rooms",void 0,{accessToken:e})})}}var Wa=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class Ja{constructor(e){this.httpClient=e}login(e,t,i){return Wa(this,void 0,void 0,function*(){return this.httpClient.post("/login",{type:"m.login.password",identifier:{type:"m.id.user",user:e},password:t,device_id:i})})}}var di=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class Xa{constructor(e){this.httpClient=e,this.cachedPromises=new Map}sync(e,t){return di(this,void 0,void 0,function*(){return this.withCache("sync",()=>this.httpClient.get("/sync",{timeout:t?t.pollingTimeout:void 0,since:t?t.syncToken:void 0},{accessToken:e}))})}sendMessage(e,t,i,r){return di(this,void 0,void 0,function*(){return new Promise((o,s)=>this.scheduleEvent({accessToken:e,roomId:t,type:"m.room.message",content:i,txnId:r,onSuccess:o,onError:s}))})}scheduleEvent(e){this.sendEvent(e)}sendEvent(e){return di(this,void 0,void 0,function*(){const{roomId:t,type:i,txnId:r,content:o,accessToken:s}=e;try{const c=yield this.httpClient.put(`/rooms/${encodeURIComponent(t)}/send/${i}/${encodeURIComponent(r)}`,o,{accessToken:s});e.onSuccess(c)}catch(c){e.onError(c)}})}withCache(e,t){let i=this.cachedPromises.get(e);return i||(i=t().finally(()=>{this.cachedPromises.delete(e)}),this.cachedPromises.set(e,i)),i}}class Ya{constructor(){this.events={}}on(e,t){return typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){if(typeof this.events[e]!="object")return;if(!t){this.events[e]=[];return}const i=this.events[e].indexOf(t);i>-1&&this.events[e].splice(i,1)}removeAllListeners(){Object.keys(this.events).forEach(e=>this.events[e].splice(0,this.events[e].length))}emit(e,...t){typeof this.events[e]=="object"&&[...this.events[e]].forEach(i=>i.apply(this,t))}once(e,t){const i=this.on(e,(...r)=>{i(),t.apply(this,r)});return i}}var He;(function(n){n.INVITE="invite",n.MESSAGE="message"})(He||(He={}));class za extends Ya{constructor(){super(...arguments),this.eventEmitProviders=new Map([[He.INVITE,()=>[this.isInvite,this.emitInvite.bind(this)]],[He.MESSAGE,()=>[this.isMessage,this.emitMessage.bind(this)]]])}onStateChanged(e,t,i){for(const r of ki(He))this.emitIfEvent(He[r],i)}emitIfEvent(e,t){const i=this.eventEmitProviders.get(e);if(i){const[r,o]=i();r(t)&&o(e,t)}}emitClientEvent(e,t,i){this.emit(e,{type:e,content:t,timestamp:i})}isInvite(e){return e.rooms?e.rooms.some(t=>t.status===Me.INVITED):!1}emitInvite(e,t){t.rooms.filter(i=>i.status===Me.INVITED).map(i=>[i.id,i.members]).forEach(([i,r])=>{this.emitClientEvent(e,{roomId:i,members:r})})}isMessage(e){return e.rooms?e.rooms.some(t=>t.messages.length>0):!1}emitMessage(e,t){t.rooms.filter(i=>i.messages.length>0).map(i=>i.messages.map(r=>[i.id,r,r.timestamp])).reduce((i,r)=>i.concat(r),[]).forEach(([i,r,o])=>{this.emitClientEvent(e,{roomId:i,message:r},o)})}}var fe=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const ui=new je("MatrixClient"),Za=3,$a=5e3;class ji{constructor(e,t,i,r,o,s){this.store=e,this.eventEmitter=t,this.userService=i,this.roomService=r,this.eventService=o,this.httpClient=s,this.isActive=!0,this._isReady=new be,this.store.onStateChanged((c,d,u)=>{this.eventEmitter.onStateChanged(c,d,u)},"rooms")}static create(e){const t=new qa(e.storage),i=new za,r=new Qa(e.baseUrl),o=new Ja(r),s=new Va(r),c=new Xa(r);return new ji(t,i,o,s,c,r)}get joinedRooms(){return new Promise(e=>fe(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(t=>t.status===Me.JOINED))}))}get invitedRooms(){return new Promise(e=>fe(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(t=>t.status===Me.INVITED))}))}get leftRooms(){return new Promise(e=>fe(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(t=>t.status===Me.LEFT))}))}start(e){return fe(this,void 0,void 0,function*(){const t=yield this.userService.login(e.id,e.password,e.deviceId);yield this.store.update({accessToken:t.access_token});const i=new Promise((r,o)=>fe(this,void 0,void 0,function*(){yield this.poll(0,s=>fe(this,void 0,void 0,function*(){this.store.get("isRunning")||r(),yield this.store.update({isRunning:!0,syncToken:s.next_batch,pollingTimeout:3e4,pollingRetries:0,rooms:ge.fromSync(s.rooms)})}),s=>fe(this,void 0,void 0,function*(){this.store.get("isRunning")||o(s),yield this.store.update({isRunning:!1,pollingRetries:this.store.get("pollingRetries")+1})}))}));return i.then(()=>{this._isReady.resolve()}).catch(console.error),i})}isConnected(){return fe(this,void 0,void 0,function*(){return this._isReady.promise})}stop(){return fe(this,void 0,void 0,function*(){return ui.log("MATRIX CLIENT STOPPED"),this.isActive=!1,this._isReady=new be,this.httpClient.cancelAllRequests()})}subscribe(e,t){this.eventEmitter.on(e,t)}unsubscribe(e,t){t&&this.eventEmitter.removeListener(e,t)}unsubscribeAll(e){this.eventEmitter.removeListener(e)}getRoomById(e){return fe(this,void 0,void 0,function*(){return yield this.isConnected(),this.store.getRoom(e)})}createTrustedPrivateRoom(...e){return fe(this,void 0,void 0,function*(){return yield this.isConnected(),this.requiresAuthorization("createRoom",t=>fe(this,void 0,void 0,function*(){return(yield this.roomService.createRoom(t,{room_version:"5",invite:e,preset:"public_chat",is_direct:!0})).room_id}))})}inviteToRooms(e,...t){return fe(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("invite",i=>Promise.all(t.map(r=>{const o=this.store.getRoom(r);this.roomService.inviteToRoom(i,e,o).catch(s=>ui.warn("inviteToRooms",s))})))})}joinRooms(...e){return fe(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("join",t=>Promise.all(e.map(i=>{const r=this.store.getRoom(i);return this.roomService.joinRoom(t,r)})))})}sendTextMessage(e,t){return fe(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("send",i=>fe(this,void 0,void 0,function*(){const r=yield this.createTxnId();return this.eventService.sendMessage(i,e,{msgtype:"m.text",body:t},r)}))})}poll(e,t,i){return fe(this,void 0,void 0,function*(){const r=this.store,o=this.sync.bind(this),s=(c,d)=>fe(this,void 0,void 0,function*(){let u=0;try{const l=yield o();t(l)}catch(l){i(l),u=r.get("pollingRetries"),this.isActive&&ui.log(`Retry syncing... ${u} retries so far`)}finally{this.isActive?setTimeout(()=>fe(this,void 0,void 0,function*(){yield s(c,d)}),u>Za?$a+e:e):d(new Error("Syncing stopped manually."))}});return new Promise(s)})}sync(){return fe(this,void 0,void 0,function*(){return this.requiresAuthorization("sync",e=>fe(this,void 0,void 0,function*(){return this.eventService.sync(e,{pollingTimeout:this.store.get("pollingTimeout"),syncToken:this.store.get("syncToken")})}))})}requiresAuthorization(e,t){return fe(this,void 0,void 0,function*(){const i=this.store.get("accessToken");return i?t(i):Promise.reject(`${e} requires authorization but no access token has been provided.`)})}createTxnId(){return fe(this,void 0,void 0,function*(){const e=new Date().getTime(),t=this.store.get("txnNo");return yield this.store.update({txnNo:t+1}),`m${e}.${t}`})}}var ne=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const W=new je("P2PCommunicationClient"),Sr={[bi.EUROPE_WEST]:["beacon-node-1.diamond.papers.tech","beacon-node-1.sky.papers.tech","beacon-node-2.sky.papers.tech","beacon-node-1.hope.papers.tech","beacon-node-1.hope-2.papers.tech","beacon-node-1.hope-3.papers.tech","beacon-node-1.hope-4.papers.tech","beacon-node-1.hope-5.papers.tech"]};class ec extends to{constructor(e,t,i,r,o,s,c){super(t),this.name=e,this.replicationCount=i,this.storage=r,this.iconUrl=s,this.appUrl=c,this.client=new be,this.activeListeners=new Map,this.ignoredRooms=[],this.loginCounter=0,W.log("constructor","P2PCommunicationClient created"),this.ENABLED_RELAY_SERVERS=Sr,o&&(this.ENABLED_RELAY_SERVERS=Object.assign(Object.assign({},Sr),o))}getPairingRequestInfo(){return ne(this,void 0,void 0,function*(){const e={id:yield vt(),type:"p2p-pairing-request",name:this.name,version:Yr,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(e.icon=this.iconUrl),this.appUrl&&(e.appUrl=this.appUrl),e})}getPairingResponseInfo(e){return ne(this,void 0,void 0,function*(){const t={id:e.id,type:"p2p-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(t.icon=this.iconUrl),this.appUrl&&(t.appUrl=this.appUrl),t})}findBestRegion(){return ne(this,void 0,void 0,function*(){if(this.selectedRegion)return this.selectedRegion;const e=Object.keys(this.ENABLED_RELAY_SERVERS),t=[];e.forEach(r=>{var o;const s=(o=this.ENABLED_RELAY_SERVERS[r])!==null&&o!==void 0?o:[],c=Math.floor(Math.random()*s.length);t.push(this.getBeaconInfo(s[c]).then(d=>({region:r,server:s[c],response:d})).catch(d=>new Promise((u,l)=>{setTimeout(()=>l(d),2e3)})))});const i=yield Promise.race(t);return this.selectedRegion=i.region,i.region})}getRelayServer(){return ne(this,void 0,void 0,function*(){if(this.relayServer){const o=yield this.relayServer.promise;if(Date.now()-o.localTimestamp<60*1e3)return{server:o.server,timestamp:o.timestamp};const s=yield this.getBeaconInfo(o.server);return this.relayServer.resolve({server:o.server,timestamp:s.timestamp,localTimestamp:new Date().getTime()}),{server:o.server,timestamp:s.timestamp}}else this.relayServer=new be;const e=yield this.storage.get(Z.MATRIX_SELECTED_NODE);if(e&&e.length>0){const o=yield this.getBeaconInfo(e);return this.relayServer.resolve({server:e,timestamp:o.timestamp,localTimestamp:new Date().getTime()}),{server:e,timestamp:o.timestamp}}const t=yield this.findBestRegion(),i=this.ENABLED_RELAY_SERVERS[t];if(!i)throw new Error(`No servers found for region ${t}`);const r=[...i];for(;r.length>0;){const o=Math.floor(Math.random()*r.length),s=r[o];try{const c=yield this.getBeaconInfo(s);return this.storage.set(Z.MATRIX_SELECTED_NODE,s).catch(d=>W.log(d)),this.relayServer.resolve({server:s,timestamp:c.timestamp,localTimestamp:new Date().getTime()}),{server:s,timestamp:c.timestamp}}catch{W.log(`Ignoring server "${s}", trying another one...`),r.splice(o,1)}}throw this.relayServer.reject("No matrix server reachable!"),new Error("No matrix server reachable!")})}getBeaconInfo(e){return ne(this,void 0,void 0,function*(){return Si.get(`https://${e}/_synapse/client/beacon/info`).then(t=>({region:t.data.region,known_servers:t.data.known_servers,timestamp:Math.floor(t.data.timestamp)}))})}tryJoinRooms(e,t=1){return ne(this,void 0,void 0,function*(){try{yield(yield this.client.promise).joinRooms(e)}catch(i){t<=10&&i.errcode==="M_FORBIDDEN"?(W.log("Retrying to join...",i),setTimeout(()=>ne(this,void 0,void 0,function*(){yield this.tryJoinRooms(e,t+1)}),200)):W.log(`Failed to join after ${t} tries.`,i)}})}start(){var e,t;return ne(this,void 0,void 0,function*(){W.log("start","starting client"),W.log("start","connecting to server");const i=yield this.getRelayServer(),r=ji.create({baseUrl:`https://${i.server}`,storage:this.storage});if(this.initialListener=l=>ne(this,void 0,void 0,function*(){this.initialEvent&&this.initialEvent.timestamp&&l&&l.timestamp?this.initialEvent.timestamp<l.timestamp&&(this.initialEvent=l):this.initialEvent=l}),r.subscribe(He.MESSAGE,this.initialListener),r.subscribe(He.INVITE,l=>ne(this,void 0,void 0,function*(){let h;l.content.members.length===1&&(h=l.content.members[0]),yield this.tryJoinRooms(l.content.roomId),h&&(yield this.updateRelayServer(h),yield this.updatePeerRoom(h,l.content.roomId))})),!i.timestamp)throw new Error("No timestamp received from relay server");const o=Math.floor(i.timestamp),s=`login:${Math.floor(o/(5*60))}`;W.log("start",`login ${s}, ${yield this.getPublicKeyHash()} on ${i.server}`);const c=et.hash(yt(s),32),d=(e=this.keyPair.secretKey)!==null&&e!==void 0?e:this.keyPair.privateKey,u=Ve.sign(d,c);try{yield r.start({id:yield this.getPublicKeyHash(),password:`ed:${ft(u)}:${yield this.getPublicKey()}`,deviceId:ft(this.keyPair.publicKey)})}catch{if(W.error("start","Could not log in, retrying"),yield this.reset(),!this.selectedRegion)throw new Error("No region selected.");if(this.loginCounter<=((t=this.ENABLED_RELAY_SERVERS[this.selectedRegion])!==null&&t!==void 0?t:[]).length){this.loginCounter++,this.start();return}else throw W.error("start","Tried to log in to every known beacon node, but no login was successful."),new Error("Could not connect to any beacon nodes. Try again later.")}W.log("start","login successful, client is ready"),this.client.resolve(r)})}stop(){return ne(this,void 0,void 0,function*(){W.log("stop","stopping client"),this.client.isResolved()&&(yield(yield this.client.promise).stop().catch(e=>W.error(e))),yield this.reset()})}reset(){return ne(this,void 0,void 0,function*(){W.log("reset","resetting connection"),yield this.storage.delete(Z.MATRIX_PEER_ROOM_IDS).catch(e=>W.log(e)),yield this.storage.delete(Z.MATRIX_PRESERVED_STATE).catch(e=>W.log(e)),yield this.storage.delete(Z.MATRIX_SELECTED_NODE).catch(e=>W.log(e)),this.relayServer=void 0,this.client=new be,this.initialEvent=void 0,this.initialListener=void 0})}listenForEncryptedMessage(e,t){return ne(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;W.log("listenForEncryptedMessage",`start listening for encrypted messages from publicKey ${e}`);const i=yield this.createCryptoBoxServer(e,this.keyPair),r=c=>ne(this,void 0,void 0,function*(){if(this.isTextMessage(c.content)&&(yield this.isSender(c,e))){let d;yield this.updateRelayServer(c.content.message.sender),yield this.updatePeerRoom(c.content.message.sender,c.content.roomId);try{d=Buffer.from(c.content.message.content,"hex")}catch{}if(d&&d.length>=_n+Rn)try{const u=yield Jr(d,i.receive);W.log("listenForEncryptedMessage",`received a message from ${e}`,u),t(u)}catch{}}});this.activeListeners.set(e,r),(yield this.client.promise).subscribe(He.MESSAGE,r);const o=this.initialEvent;o&&o.timestamp&&new Date().getTime()-o.timestamp<5*60*1e3?(W.log("listenForEncryptedMessage","Handling previous event"),yield r(o)):W.log("listenForEncryptedMessage","No previous event found");const s=this.initialListener;s&&(yield this.client.promise).unsubscribe(He.MESSAGE,s),this.initialListener=void 0,this.initialEvent=void 0})}unsubscribeFromEncryptedMessage(e){return ne(this,void 0,void 0,function*(){const t=this.activeListeners.get(e);t&&((yield this.client.promise).unsubscribe(He.MESSAGE,t),this.activeListeners.delete(e))})}unsubscribeFromEncryptedMessages(){return ne(this,void 0,void 0,function*(){(yield this.client.promise).unsubscribeAll(He.MESSAGE),this.activeListeners.clear()})}sendMessage(e,t){return ne(this,void 0,void 0,function*(){const i=yield this.createCryptoBoxClient(t.publicKey,this.keyPair),r=yield Ut(Buffer.from(t.publicKey,"hex")),o=Xi(r,t.relayServer),s=yield this.getRelevantRoom(o);yield this.waitForJoin(s);const c=yield Wr(e,i.send);W.log("sendMessage","sending encrypted message",t.publicKey,s,e),(yield this.client.promise).sendTextMessage(s,c).catch(d=>ne(this,void 0,void 0,function*(){if(d.errcode==="M_FORBIDDEN"){W.log("sendMessage","M_FORBIDDEN",s,d),yield this.deleteRoomIdFromRooms(s);const u=yield this.getRelevantRoom(o);W.log("sendMessage","Old room deleted, new room created",u),(yield this.client.promise).sendTextMessage(u,c).catch(l=>ne(this,void 0,void 0,function*(){W.log("sendMessage","inner error",u,l)}))}else W.log("sendMessage","unexpected error",d)}))})}updatePeerRoom(e,t){return ne(this,void 0,void 0,function*(){W.log("updatePeerRoom",e,t);const i=e.split(":");if(i.length<2||!i[0].startsWith("@"))throw new Error("Invalid sender");const r=yield this.storage.get(Z.MATRIX_PEER_ROOM_IDS),o=r[e];o===t&&W.debug("updatePeerRoom","rooms are the same, not updating"),W.debug("updatePeerRoom","current room",o,"new room",t),o&&o[1]&&(W.log("updatePeerRoom",`adding room "${o[1]}" to ignored array`),this.ignoredRooms.push(o[1])),r[e]=t,yield this.storage.set(Z.MATRIX_PEER_ROOM_IDS,r)})}deleteRoomIdFromRooms(e){return ne(this,void 0,void 0,function*(){const t=yield this.storage.get(Z.MATRIX_PEER_ROOM_IDS),i=Object.entries(t).filter(r=>r[1]!==e).reduce((r,o)=>Object.assign(Object.assign({},r),{[o[0]]:o[1]}),{});yield this.storage.set(Z.MATRIX_PEER_ROOM_IDS,i),this.ignoredRooms.push(e)})}listenForChannelOpening(e){return ne(this,void 0,void 0,function*(){W.debug("listenForChannelOpening"),(yield this.client.promise).subscribe(He.MESSAGE,t=>ne(this,void 0,void 0,function*(){if(this.isTextMessage(t.content)&&(yield this.isChannelOpenMessage(t.content))){W.log("listenForChannelOpening","channel opening received, trying to decrypt",JSON.stringify(t)),yield this.updateRelayServer(t.content.message.sender),yield this.updatePeerRoom(t.content.message.sender,t.content.roomId);const i=t.content.message.content.split(":"),r=Buffer.from(i[i.length-1],"hex");if(r.length>=_n+Rn)try{const o=JSON.parse(yield Xr(r,this.keyPair.publicKey,this.keyPair.secretKey));W.log("listenForChannelOpening","channel opening received and decrypted",JSON.stringify(o)),e(Object.assign(Object.assign({},o),{senderId:yield Kt(o.publicKey)}))}catch{}}}))})}waitForJoin(e,t=0){return ne(this,void 0,void 0,function*(){const i=yield(yield this.client.promise).getRoomById(e);if(W.log("waitForJoin",`Currently ${i.members.length} members, we need at least 2`),!(i.members.length>=2||i.members.length===0)){if(t<=200)return W.log(`Waiting for join... Try: ${t}`),new Promise(r=>{setTimeout(()=>ne(this,void 0,void 0,function*(){r(this.waitForJoin(e,t+1))}),100*(t>50?10:1))});throw new Error(`No one joined after ${t} tries.`)}})}sendPairingResponse(e){return ne(this,void 0,void 0,function*(){W.log("sendPairingResponse");const t=yield Ut(Buffer.from(e.publicKey,"hex")),i=Xi(t,e.relayServer),r=yield(yield this.client.promise).createTrustedPrivateRoom(i);W.debug("sendPairingResponse",`Connecting to room "${r}"`),yield this.updatePeerRoom(i,r),yield this.waitForJoin(r),W.debug("sendPairingResponse","Successfully joined room.");const o=typeof e.version>"u"?yield this.getPublicKey():JSON.stringify(yield this.getPairingResponseInfo(e));W.debug("sendPairingResponse","Sending pairing response",o);const s=yield this.encryptMessageAsymmetric(e.publicKey,o),c=["@channel-open",i,s].join(":");(yield this.client.promise).sendTextMessage(r,c).catch(d=>ne(this,void 0,void 0,function*(){if(d.errcode==="M_FORBIDDEN"){W.log("sendPairingResponse","M_FORBIDDEN",r,d),yield this.deleteRoomIdFromRooms(r);const u=yield this.getRelevantRoom(i);W.log("sendPairingResponse","Old room deleted, new room created",u),(yield this.client.promise).sendTextMessage(u,c).catch(l=>ne(this,void 0,void 0,function*(){W.log("sendPairingResponse","inner error",u,l)}))}else W.log("sendPairingResponse","unexpected error",d)}))})}isTextMessage(e){return e.message.type===Nn.TEXT}updateRelayServer(e){return ne(this,void 0,void 0,function*(){W.log("updateRelayServer",e);const t=e.split(":");if(t.length<2||!t[0].startsWith("@"))throw new Error("Invalid sender");const i=t.shift(),r=t.join(":"),o=localStorage.getItem("beacon:communication-peers-dapp")?new xn(this.storage,Z.TRANSPORT_P2P_PEERS_DAPP):new xn(this.storage,Z.TRANSPORT_P2P_PEERS_WALLET),c=(yield o.getPeers()).map(d=>ne(this,void 0,void 0,function*(){`@${yield Ut(Buffer.from(d.publicKey,"hex"))}`===i&&d.relayServer!==r&&(d.relayServer=r,yield o.addPeer(d))}));yield Promise.all(c)})}isChannelOpenMessage(e){return ne(this,void 0,void 0,function*(){return e.message.content.startsWith(`@channel-open:@${yield Ut(Buffer.from(yield this.getPublicKey(),"hex"))}`)})}isSender(e,t){return ne(this,void 0,void 0,function*(){return e.content.message.sender.startsWith(`@${yield Ut(Buffer.from(t,"hex"))}`)})}getRelevantRoom(e){return ne(this,void 0,void 0,function*(){const t=yield this.storage.get(Z.MATRIX_PEER_ROOM_IDS);let i=t[e];if(!i){W.log("getRelevantRoom",`No room found for peer ${e}, checking joined ones.`);const r=yield this.getRelevantJoinedRoom(e);i=r.id,t[e]=r.id,yield this.storage.set(Z.MATRIX_PEER_ROOM_IDS,t)}return W.log("getRelevantRoom",`Using room ${i}`),i})}getRelevantJoinedRoom(e){return ne(this,void 0,void 0,function*(){const t=yield(yield this.client.promise).joinedRooms;W.log("checking joined rooms",t,e);const i=t.filter(o=>!this.ignoredRooms.some(s=>o.id===s)).filter(o=>o.members.some(s=>s===e));let r;if(i.length===0||this.ignoredRooms.length>0){W.log("getRelevantJoinedRoom","no relevant rooms found, creating new one");const o=yield(yield this.client.promise).createTrustedPrivateRoom(e);r=yield(yield this.client.promise).getRoomById(o),W.log("getRelevantJoinedRoom",`waiting for other party to join room: ${r.id}`),yield this.waitForJoin(o),W.log("getRelevantJoinedRoom",`new room created and peer invited: ${r.id}`)}else r=i[0],W.log("getRelevantJoinedRoom",`channel already open, reusing room ${r.id}`);return r})}}var Rt=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const hi=new je("P2PTransport");class tc extends $r{constructor(e,t,i,r,o,s,c){super(e,new ec(e,t,1,i,r,s,c),new xn(i,o)),this.type=Nt.P2P}static isAvailable(){return Rt(this,void 0,void 0,function*(){return Promise.resolve(!0)})}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Rt(this,void 0,void 0,function*(){if(this._isConnected!==Je.NOT_CONNECTED)return;hi.log("connect"),this._isConnected=Je.CONNECTING,yield this.client.start();const t=yield this.getPeers();if(t.length>0){hi.log("connect",`connecting to ${t.length} peers`);const i=t.map(r=>Rt(this,void 0,void 0,function*(){return this.listen(r.publicKey)}));Promise.all(i).catch(r=>hi.error("connect",r))}return yield this.startOpenChannelListener(),e.connect.call(this)})}disconnect(){const e=Object.create(null,{disconnect:{get:()=>super.disconnect}});return Rt(this,void 0,void 0,function*(){return yield this.client.stop(),e.disconnect.call(this)})}startOpenChannelListener(){return Rt(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Rt(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Rt(this,void 0,void 0,function*(){yield this.client.listenForEncryptedMessage(e,t=>{const i={origin:Ze.P2P,id:e};this.notifyListeners(t,i).catch(r=>{throw r})}).catch(t=>{throw t})})}}var ct=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class nc extends Vs{constructor(){super(...arguments),this.activeListeners=new Map}init(){return ct(this,void 0,void 0,function*(){this.subscribeToMessages().catch(console.error)})}listenForEncryptedMessage(e,t){return ct(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;const i=(r,o)=>ct(this,void 0,void 0,function*(){try{const s=yield this.decryptMessage(e,r.encryptedPayload);t(s,o)}catch{}});this.activeListeners.set(e,i)})}sendMessage(e,t){var i;return ct(this,void 0,void 0,function*(){const r=yield this.encryptMessage(t.publicKey,e),o=(i=t)===null||i===void 0?void 0:i.extensionId,s={target:ut.EXTENSION,encryptedPayload:r,targetId:o};oe.postMessage(s,oe.location.origin)})}listenForChannelOpening(e){return ct(this,void 0,void 0,function*(){const t=i=>ct(this,void 0,void 0,function*(){var r,o;if(i.source!==oe||i.origin!==oe.location.origin)return;const s=(r=i==null?void 0:i.data)===null||r===void 0?void 0:r.message;if(s&&s.target===ut.PAGE&&(yield this.isChannelOpenMessage(s))){const c=Buffer.from(s.payload,"hex");if(c.length>=_n+Rn)try{const d=JSON.parse(yield Xr(c,this.keyPair.publicKey,this.keyPair.secretKey));e(Object.assign(Object.assign({},d),{senderId:yield Kt(d.publicKey),extensionId:(o=i==null?void 0:i.data)===null||o===void 0?void 0:o.sender.id}))}catch{}}});oe.addEventListener("message",t)})}sendPairingRequest(e){return ct(this,void 0,void 0,function*(){const t={target:ut.EXTENSION,payload:yield new It().serialize(yield this.getPairingRequestInfo()),targetId:e};oe.postMessage(t,oe.location.origin)})}isChannelOpenMessage(e){return ct(this,void 0,void 0,function*(){return typeof e=="object"&&e.hasOwnProperty("payload")})}subscribeToMessages(){return ct(this,void 0,void 0,function*(){oe.addEventListener("message",e=>{if(!(e.source!==oe||e.origin!==oe.location.origin)&&typeof e=="object"&&e){const t=e.data;t.message&&t.message.target===ut.PAGE&&this.activeListeners.forEach(i=>{i(t.message,{origin:Ze.EXTENSION,id:t.sender.id||""})})}})})}}var Tt=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const Vt=new je("PostMessageTransport");let xr=!1,Wt,it;const ic=n=>{it||(it=[]),it.some(e=>e.id===n.id)||(it.push(n),oe.postMessage("extensionsUpdated",oe.location.origin))};class nn extends $r{constructor(e,t,i,r){super(e,new nc(e,t),new xn(i,r)),this.type=Nt.POST_MESSAGE}static isAvailable(){return Tt(this,void 0,void 0,function*(){return new Promise(e=>{const t=r=>{const o=r.data;o&&o.payload==="pong"&&(e(!0),oe.removeEventListener("message",t))};oe.addEventListener("message",t);const i={target:ut.EXTENSION,payload:"ping"};oe.postMessage(i,oe.location.origin)})})}static getAvailableExtensions(){return Tt(this,void 0,void 0,function*(){return Wt||it||(it=[],Wt=new Promise(e=>{nn.listenForExtensions(),setTimeout(()=>{e(it??[])},1e3)}).finally(()=>{Wt=void 0}),Wt)})}static listenForExtensions(){if(xr)return;const e=i=>{if(i.source!==oe||i.origin!==oe.location.origin)return;const r=i.data,o=r.sender;r&&r.payload==="pong"&&o&&(Vt.log("getAvailableExtensions",`extension "${o.name}" is available`,o),ic(o))};oe.addEventListener("message",e);const t={target:ut.EXTENSION,payload:"ping"};oe.postMessage(t,oe.location.origin),xr=!0}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Tt(this,void 0,void 0,function*(){if(Vt.log("connect"),this._isConnected!==Je.NOT_CONNECTED)return;this._isConnected=Je.CONNECTING;const t=yield this.getPeers();if(t.length>0){Vt.log("connect",`connecting to ${t.length} peers`);const i=t.map(r=>Tt(this,void 0,void 0,function*(){return this.listen(r.publicKey)}));Promise.all(i).catch(r=>Vt.error("connect",r))}yield this.startOpenChannelListener(),yield e.connect.call(this)})}startOpenChannelListener(){return Tt(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Tt(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Tt(this,void 0,void 0,function*(){Vt.log("listen",e),yield this.client.listenForEncryptedMessage(e,(t,i)=>{const r={origin:Ze.EXTENSION,id:i.id};this.notifyListeners(t,r).catch(o=>{throw o})}).catch(t=>{throw t})})}}const Nr={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-modal__wrapper {
  position: relative;
  top: 0;
  display: inline-block;
  z-index: 2147483000;
  max-width: 500px;
  width: 80%;
  padding: 24px;
}

@media (min-height: 700px) {
  .beacon-modal__wrapper {
    top: 50%;
    transform: translateY(-50%);
  }
}

.theme__light .beacon-modal__base,
.theme__light .beacon-modal__close__wrapper {
  background: #fff;
}

.theme__dark .beacon-modal__base,
.theme__dark .beacon-modal__close__wrapper {
  background: #27334c;
}

.beacon-modal__base,
.beacon-modal__close__wrapper {
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
}

.beacon-modal__base {
  margin: 0 auto;
  border-radius: 32px;
  overflow: hidden;
}

.beacon-modal__header {
  padding: 16px 0;
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.beacon-modal__headerLogo {
  width: 100%;
  max-width: 320px;
  margin: 20px auto;
  height: 100%;
}

a,
button {
  cursor: pointer;
}

.beacon-modal__close__wrapper {
  position: absolute;
  top: 44px;
  right: 24px;
  z-index: 10000;
  cursor: pointer;
  border-radius: 100%;
}

.beacon-modal__close__icon {
  width: 16px;
  height: 16px;
  position: relative;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
  margin: 8px;
}

.beacon-modal__close__line1 {
  position: absolute;
  width: 90%;
}

.beacon-modal__close__line2 {
  position: absolute;
  width: 90%;
  transform: rotate(90deg);
}

.theme__light .beacon-modal__close__line2,
.theme__light .beacon-modal__close__line1 {
  border: 1px solid #000;
}

.theme__dark .beacon-modal__close__line2,
.theme__dark .beacon-modal__close__line1 {
  border: 1px solid #fff;
}

.beacon-alert__base {
  position: fixed;
  overflow-y: scroll;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2147482999;
  background-color: rgb(17 17 17 / 0.84);
  text-align: center;
  -ms-overflow-style: none;
  scrollbar-width: none;
  font-family: Roboto, Helvetica, sans-serif;
}

.beacon-alert__base::-webkit-scrollbar {
  display: none;
}

.beacon-alert__title {
  text-align: center;
}

.beacon-alert__text,
.beacon-alert__title {
  margin: 0 auto;
  padding: 0 0 24px;
}

.margin__bottom {
  margin-bottom: 16px;
}

.beacon-alert__title {
  font-size: 18px;
}

.theme__light .beacon-alert__title {
  color: #3b3d40;
}

.theme__dark .beacon-alert__title,
.theme__dark .beacon-alert__text {
  color: #7c99d6;
}

.beacon-alert__text {
  color: #000;
  font-size: 14px;
}

.beacon-modal__button,
.beacon-modal__button--outline {
  height: 36px;
  font-size: 14px;
  letter-spacing: 0.84px;
  margin-bottom: 4px;
  margin-inline-end: 2px;
  margin-inline-start: 2px;
  margin-left: 2px;
  margin-right: 2px;
  margin-top: 4px;
  padding-inline-end: 15.4px;
  padding-inline-start: 15.4px;
  padding-left: 15.4px;
  padding-right: 15.4px;
  overflow-wrap: break-word;
  pointer-events: auto;
  text-align: center;
  border-radius: 4px;
  border: 2px solid #3880ff;
}

.beacon-modal__button {
  background: #3880ff;
  color: #fff;
}

.beacon-modal__button--outline {
  background: #fff;
  color: #444444;
  border: 1px solid #444444;
}

.beacon-alert__image {
  width: 200px;
  height: 200px;
  box-sizing: border-box;
  box-shadow: 0 10px 20px 0 rgba(17, 17, 17, 0.12);
  border: 1px solid rgba(17, 17, 17, 0.04);
  border-radius: 16px;
}
.connect__btn {
  margin: 24px 0;
  width: 100%;
}

#beacon-modal__content {
  padding: 24px;
}

#beacon-switch {
  margin-top: 24px;
}

#beacon-title {
  margin: 0 0 24px;
}

a {
  text-decoration: none;
}

pre {
  white-space: pre-wrap; /* css-3 */
  white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
  white-space: -pre-wrap; /* Opera 4-6 */
  white-space: -o-pre-wrap; /* Opera 7 */
  word-wrap: break-word; /* Internet Explorer 5.5+ */
  padding: 16px;
  background: #ececec;
  line-height: 1.25rem;
}
`},pair:{css:`#beacon-main-text {
  display: initial;
}
.beacon-selection__container {
  padding: 16px 16px 0;
}
.beacon-selection__list {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  text-decoration: none;
  padding-bottom: 12px;
  align-items: center;
}
.beacon-list__title {
  text-align: left;
  font-size: 12px;
}
.beacon-list__wrapper:nth-child(-n + 3) {
  padding: 0 0 1rem;
}
.theme__light .beacon-list__title {
  color: #7c828b;
}
.theme__dark .beacon-list__title,
.theme__dark #beacon--disclaimer {
  color: #7c99d6;
}

.beacon-selection__name {
  font-size: 1rem;
  font-weight: 600;
  text-align: left;
}
.theme__light .beacon-selection__name,
.theme__light .beacon--selection__name__lg {
  color: #3b3d40;
}
.theme__dark .beacon-selection__name,
.theme__dark .beacon--selection__name__lg {
  color: #6183ff;
}
.beacon-selection__img {
  width: 48px;
  height: 48px;
  box-shadow: 0 4px 12px 0 rgba(17, 17, 17, 0.24);
  border-radius: 16px;
  background-color: #fff;
}
.beacon--selection__name__lg {
  font-size: 1.5rem;
  font-weight: 600;
  text-align: center;
  padding: 1rem 0;
}
.beacon--selected__container {
  padding: 2rem 0 0;
}
#beacon--qr__copy__container {
  height: 0;
}
#beacon--qr__copy {
  display: none;
  position: relative;
  margin-top: auto;
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container {
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container:hover #beacon--qr__copy {
  display: block;
}

.disabled p {
  text-align: left;
  margin: 0;
  font-size: 10px;
  font-weight: 300;
  opacity: 0.48;
}

#beacon--disclaimer {
  text-align: left;
  padding-top: 24px;
  font-size: 0.875rem;
}
.progress-line,
.progress-line:before {
  height: 3px;
  width: -webkit-fill-available;
  margin-left: -24px;
  margin-right: -24px;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}},In=(n,e)=>e.test(n.navigator.userAgent),rc=(n,e)=>n.matchMedia(e).matches,xi=n=>rc(n,"(any-pointer:coarse)"),oc=n=>!!(In(n,/iPad/i)||In(n,/Macintosh/i)&&xi(n)),Eo=n=>In(n,/iPhone|iPod/i)||oc(n),mo=n=>In(n,/android|sink/i);var Gi={exports:{}};(function(n,e){var t=function(){var i=function(w,E){var a=236,f=17,g=w,m=o[E],p=null,v=0,O=null,N=[],P={},G=function(S,x){v=g*4+17,p=function(_){for(var I=new Array(_),C=0;C<_;C+=1){I[C]=new Array(_);for(var U=0;U<_;U+=1)I[C][U]=null}return I}(v),M(0,0),M(v-7,0),M(0,v-7),Y(),T(),re(S,x),g>=7&&ie(S),O==null&&(O=te(g,m,N)),j(O,x)},M=function(S,x){for(var _=-1;_<=7;_+=1)if(!(S+_<=-1||v<=S+_))for(var I=-1;I<=7;I+=1)x+I<=-1||v<=x+I||(0<=_&&_<=6&&(I==0||I==6)||0<=I&&I<=6&&(_==0||_==6)||2<=_&&_<=4&&2<=I&&I<=4?p[S+_][x+I]=!0:p[S+_][x+I]=!1)},F=function(){for(var S=0,x=0,_=0;_<8;_+=1){G(!0,_);var I=c.getLostPoint(P);(_==0||S>I)&&(S=I,x=_)}return x},T=function(){for(var S=8;S<v-8;S+=1)p[S][6]==null&&(p[S][6]=S%2==0);for(var x=8;x<v-8;x+=1)p[6][x]==null&&(p[6][x]=x%2==0)},Y=function(){for(var S=c.getPatternPosition(g),x=0;x<S.length;x+=1)for(var _=0;_<S.length;_+=1){var I=S[x],C=S[_];if(p[I][C]==null)for(var U=-2;U<=2;U+=1)for(var V=-2;V<=2;V+=1)U==-2||U==2||V==-2||V==2||U==0&&V==0?p[I+U][C+V]=!0:p[I+U][C+V]=!1}},ie=function(S){for(var x=c.getBCHTypeNumber(g),_=0;_<18;_+=1){var I=!S&&(x>>_&1)==1;p[Math.floor(_/3)][_%3+v-8-3]=I}for(var _=0;_<18;_+=1){var I=!S&&(x>>_&1)==1;p[_%3+v-8-3][Math.floor(_/3)]=I}},re=function(S,x){for(var _=m<<3|x,I=c.getBCHTypeInfo(_),C=0;C<15;C+=1){var U=!S&&(I>>C&1)==1;C<6?p[C][8]=U:C<8?p[C+1][8]=U:p[v-15+C][8]=U}for(var C=0;C<15;C+=1){var U=!S&&(I>>C&1)==1;C<8?p[8][v-C-1]=U:C<9?p[8][15-C-1+1]=U:p[8][15-C-1]=U}p[v-8][8]=!S},j=function(S,x){for(var _=-1,I=v-1,C=7,U=0,V=c.getMaskFunction(x),Q=v-1;Q>0;Q-=2)for(Q==6&&(Q-=1);;){for(var ae=0;ae<2;ae+=1)if(p[I][Q-ae]==null){var ue=!1;U<S.length&&(ue=(S[U]>>>C&1)==1);var X=V(I,Q-ae);X&&(ue=!ue),p[I][Q-ae]=ue,C-=1,C==-1&&(U+=1,C=7)}if(I+=_,I<0||v<=I){I-=_,_=-_;break}}},z=function(S,x){for(var _=0,I=0,C=0,U=new Array(x.length),V=new Array(x.length),Q=0;Q<x.length;Q+=1){var ae=x[Q].dataCount,ue=x[Q].totalCount-ae;I=Math.max(I,ae),C=Math.max(C,ue),U[Q]=new Array(ae);for(var X=0;X<U[Q].length;X+=1)U[Q][X]=255&S.getBuffer()[X+_];_+=ae;var Be=c.getErrorCorrectPolynomial(ue),ce=u(U[Q],Be.getLength()-1),ye=ce.mod(Be);V[Q]=new Array(Be.getLength()-1);for(var X=0;X<V[Q].length;X+=1){var we=X+ye.getLength()-V[Q].length;V[Q][X]=we>=0?ye.getAt(we):0}}for(var Ae=0,X=0;X<x.length;X+=1)Ae+=x[X].totalCount;for(var me=new Array(Ae),ve=0,X=0;X<I;X+=1)for(var Q=0;Q<x.length;Q+=1)X<U[Q].length&&(me[ve]=U[Q][X],ve+=1);for(var X=0;X<C;X+=1)for(var Q=0;Q<x.length;Q+=1)X<V[Q].length&&(me[ve]=V[Q][X],ve+=1);return me},te=function(S,x,_){for(var I=l.getRSBlocks(S,x),C=h(),U=0;U<_.length;U+=1){var V=_[U];C.put(V.getMode(),4),C.put(V.getLength(),c.getLengthInBits(V.getMode(),S)),V.write(C)}for(var Q=0,U=0;U<I.length;U+=1)Q+=I[U].dataCount;if(C.getLengthInBits()>Q*8)throw"code length overflow. ("+C.getLengthInBits()+">"+Q*8+")";for(C.getLengthInBits()+4<=Q*8&&C.put(0,4);C.getLengthInBits()%8!=0;)C.putBit(!1);for(;!(C.getLengthInBits()>=Q*8||(C.put(a,8),C.getLengthInBits()>=Q*8));)C.put(f,8);return z(C,I)};P.addData=function(S,x){x=x||"Byte";var _=null;switch(x){case"Numeric":_=A(S);break;case"Alphanumeric":_=y(S);break;case"Byte":_=k(S);break;case"Kanji":_=B(S);break;default:throw"mode:"+x}N.push(_),O=null},P.isDark=function(S,x){if(S<0||v<=S||x<0||v<=x)throw S+","+x;return p[S][x]},P.getModuleCount=function(){return v},P.make=function(){if(g<1){for(var S=1;S<40;S++){for(var x=l.getRSBlocks(S,m),_=h(),I=0;I<N.length;I++){var C=N[I];_.put(C.getMode(),4),_.put(C.getLength(),c.getLengthInBits(C.getMode(),S)),C.write(_)}for(var U=0,I=0;I<x.length;I++)U+=x[I].dataCount;if(_.getLengthInBits()<=U*8)break}g=S}G(!1,F())},P.createTableTag=function(S,x){S=S||2,x=typeof x>"u"?S*4:x;var _="";_+='<table style="',_+=" border-width: 0px; border-style: none;",_+=" border-collapse: collapse;",_+=" padding: 0px; margin: "+x+"px;",_+='">',_+="<tbody>";for(var I=0;I<P.getModuleCount();I+=1){_+="<tr>";for(var C=0;C<P.getModuleCount();C+=1)_+='<td style="',_+=" border-width: 0px; border-style: none;",_+=" border-collapse: collapse;",_+=" padding: 0px; margin: 0px;",_+=" width: "+S+"px;",_+=" height: "+S+"px;",_+=" background-color: ",_+=P.isDark(I,C)?"#000000":"#ffffff",_+=";",_+='"/>';_+="</tr>"}return _+="</tbody>",_+="</table>",_},P.createSvgTag=function(S,x,_,I){var C={};typeof arguments[0]=="object"&&(C=arguments[0],S=C.cellSize,x=C.margin,_=C.alt,I=C.title),S=S||2,x=typeof x>"u"?S*4:x,_=typeof _=="string"?{text:_}:_||{},_.text=_.text||null,_.id=_.text?_.id||"qrcode-description":null,I=typeof I=="string"?{text:I}:I||{},I.text=I.text||null,I.id=I.text?I.id||"qrcode-title":null;var U=P.getModuleCount()*S+x*2,V,Q,ae,ue,X="",Be;for(Be="l"+S+",0 0,"+S+" -"+S+",0 0,-"+S+"z ",X+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',X+=C.scalable?"":' width="'+U+'px" height="'+U+'px"',X+=' viewBox="0 0 '+U+" "+U+'" ',X+=' preserveAspectRatio="xMinYMin meet"',X+=I.text||_.text?' role="img" aria-labelledby="'+ee([I.id,_.id].join(" ").trim())+'"':"",X+=">",X+=I.text?'<title id="'+ee(I.id)+'">'+ee(I.text)+"</title>":"",X+=_.text?'<description id="'+ee(_.id)+'">'+ee(_.text)+"</description>":"",X+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',X+='<path d="',ae=0;ae<P.getModuleCount();ae+=1)for(ue=ae*S+x,V=0;V<P.getModuleCount();V+=1)P.isDark(ae,V)&&(Q=V*S+x,X+="M"+Q+","+ue+Be);return X+='" stroke="transparent" fill="black"/>',X+="</svg>",X},P.createDataURL=function(S,x){S=S||2,x=typeof x>"u"?S*4:x;var _=P.getModuleCount()*S+x*2,I=x,C=_-x;return R(_,_,function(U,V){if(I<=U&&U<C&&I<=V&&V<C){var Q=Math.floor((U-I)/S),ae=Math.floor((V-I)/S);return P.isDark(ae,Q)?0:1}else return 1})},P.createImgTag=function(S,x,_){S=S||2,x=typeof x>"u"?S*4:x;var I=P.getModuleCount()*S+x*2,C="";return C+="<img",C+=' src="',C+=P.createDataURL(S,x),C+='"',C+=' width="',C+=I,C+='"',C+=' height="',C+=I,C+='"',_&&(C+=' alt="',C+=ee(_),C+='"'),C+="/>",C};var ee=function(S){for(var x="",_=0;_<S.length;_+=1){var I=S.charAt(_);switch(I){case"<":x+="&lt;";break;case">":x+="&gt;";break;case"&":x+="&amp;";break;case'"':x+="&quot;";break;default:x+=I;break}}return x},se=function(S){var x=1;S=typeof S>"u"?x*2:S;var _=P.getModuleCount()*x+S*2,I=S,C=_-S,U,V,Q,ae,ue,X={"██":"█","█ ":"▀"," █":"▄","  ":" "},Be={"██":"▀","█ ":"▀"," █":" ","  ":" "},ce="";for(U=0;U<_;U+=2){for(Q=Math.floor((U-I)/x),ae=Math.floor((U+1-I)/x),V=0;V<_;V+=1)ue="█",I<=V&&V<C&&I<=U&&U<C&&P.isDark(Q,Math.floor((V-I)/x))&&(ue=" "),I<=V&&V<C&&I<=U+1&&U+1<C&&P.isDark(ae,Math.floor((V-I)/x))?ue+=" ":ue+="█",ce+=S<1&&U+1>=C?Be[ue]:X[ue];ce+=`
`}return _%2&&S>0?ce.substring(0,ce.length-_-1)+Array(_+1).join("▀"):ce.substring(0,ce.length-1)};return P.createASCII=function(S,x){if(S=S||1,S<2)return se(x);S-=1,x=typeof x>"u"?S*2:x;var _=P.getModuleCount()*S+x*2,I=x,C=_-x,U,V,Q,ae,ue=Array(S+1).join("██"),X=Array(S+1).join("  "),Be="",ce="";for(U=0;U<_;U+=1){for(Q=Math.floor((U-I)/S),ce="",V=0;V<_;V+=1)ae=1,I<=V&&V<C&&I<=U&&U<C&&P.isDark(Q,Math.floor((V-I)/S))&&(ae=0),ce+=ae?ue:X;for(Q=0;Q<S;Q+=1)Be+=ce+`
`}return Be.substring(0,Be.length-1)},P.renderTo2dContext=function(S,x){x=x||2;for(var _=P.getModuleCount(),I=0;I<_;I++)for(var C=0;C<_;C++)S.fillStyle=P.isDark(I,C)?"black":"white",S.fillRect(I*x,C*x,x,x)},P};i.stringToBytesFuncs={default:function(w){for(var E=[],a=0;a<w.length;a+=1){var f=w.charCodeAt(a);E.push(f&255)}return E}},i.stringToBytes=i.stringToBytesFuncs.default,i.createStringToBytes=function(w,E){var a=function(){for(var g=H(w),m=function(){var T=g.read();if(T==-1)throw"eof";return T},p=0,v={};;){var O=g.read();if(O==-1)break;var N=m(),P=m(),G=m(),M=String.fromCharCode(O<<8|N),F=P<<8|G;v[M]=F,p+=1}if(p!=E)throw p+" != "+E;return v}(),f="?".charCodeAt(0);return function(g){for(var m=[],p=0;p<g.length;p+=1){var v=g.charCodeAt(p);if(v<128)m.push(v);else{var O=a[g.charAt(p)];typeof O=="number"?(O&255)==O?m.push(O):(m.push(O>>>8),m.push(O&255)):m.push(f)}}return m}};var r={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},o={L:1,M:0,Q:3,H:2},s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},c=function(){var w=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],E=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,a=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,f=1<<14|1<<12|1<<10|1<<4|1<<1,g={},m=function(p){for(var v=0;p!=0;)v+=1,p>>>=1;return v};return g.getBCHTypeInfo=function(p){for(var v=p<<10;m(v)-m(E)>=0;)v^=E<<m(v)-m(E);return(p<<10|v)^f},g.getBCHTypeNumber=function(p){for(var v=p<<12;m(v)-m(a)>=0;)v^=a<<m(v)-m(a);return p<<12|v},g.getPatternPosition=function(p){return w[p-1]},g.getMaskFunction=function(p){switch(p){case s.PATTERN000:return function(v,O){return(v+O)%2==0};case s.PATTERN001:return function(v,O){return v%2==0};case s.PATTERN010:return function(v,O){return O%3==0};case s.PATTERN011:return function(v,O){return(v+O)%3==0};case s.PATTERN100:return function(v,O){return(Math.floor(v/2)+Math.floor(O/3))%2==0};case s.PATTERN101:return function(v,O){return v*O%2+v*O%3==0};case s.PATTERN110:return function(v,O){return(v*O%2+v*O%3)%2==0};case s.PATTERN111:return function(v,O){return(v*O%3+(v+O)%2)%2==0};default:throw"bad maskPattern:"+p}},g.getErrorCorrectPolynomial=function(p){for(var v=u([1],0),O=0;O<p;O+=1)v=v.multiply(u([1,d.gexp(O)],0));return v},g.getLengthInBits=function(p,v){if(1<=v&&v<10)switch(p){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw"mode:"+p}else if(v<27)switch(p){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw"mode:"+p}else if(v<41)switch(p){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw"mode:"+p}else throw"type:"+v},g.getLostPoint=function(p){for(var v=p.getModuleCount(),O=0,N=0;N<v;N+=1)for(var P=0;P<v;P+=1){for(var G=0,M=p.isDark(N,P),F=-1;F<=1;F+=1)if(!(N+F<0||v<=N+F))for(var T=-1;T<=1;T+=1)P+T<0||v<=P+T||F==0&&T==0||M==p.isDark(N+F,P+T)&&(G+=1);G>5&&(O+=3+G-5)}for(var N=0;N<v-1;N+=1)for(var P=0;P<v-1;P+=1){var Y=0;p.isDark(N,P)&&(Y+=1),p.isDark(N+1,P)&&(Y+=1),p.isDark(N,P+1)&&(Y+=1),p.isDark(N+1,P+1)&&(Y+=1),(Y==0||Y==4)&&(O+=3)}for(var N=0;N<v;N+=1)for(var P=0;P<v-6;P+=1)p.isDark(N,P)&&!p.isDark(N,P+1)&&p.isDark(N,P+2)&&p.isDark(N,P+3)&&p.isDark(N,P+4)&&!p.isDark(N,P+5)&&p.isDark(N,P+6)&&(O+=40);for(var P=0;P<v;P+=1)for(var N=0;N<v-6;N+=1)p.isDark(N,P)&&!p.isDark(N+1,P)&&p.isDark(N+2,P)&&p.isDark(N+3,P)&&p.isDark(N+4,P)&&!p.isDark(N+5,P)&&p.isDark(N+6,P)&&(O+=40);for(var ie=0,P=0;P<v;P+=1)for(var N=0;N<v;N+=1)p.isDark(N,P)&&(ie+=1);var re=Math.abs(100*ie/v/v-50)/5;return O+=re*10,O},g}(),d=function(){for(var w=new Array(256),E=new Array(256),a=0;a<8;a+=1)w[a]=1<<a;for(var a=8;a<256;a+=1)w[a]=w[a-4]^w[a-5]^w[a-6]^w[a-8];for(var a=0;a<255;a+=1)E[w[a]]=a;var f={};return f.glog=function(g){if(g<1)throw"glog("+g+")";return E[g]},f.gexp=function(g){for(;g<0;)g+=255;for(;g>=256;)g-=255;return w[g]},f}();function u(w,E){if(typeof w.length>"u")throw w.length+"/"+E;var a=function(){for(var g=0;g<w.length&&w[g]==0;)g+=1;for(var m=new Array(w.length-g+E),p=0;p<w.length-g;p+=1)m[p]=w[p+g];return m}(),f={};return f.getAt=function(g){return a[g]},f.getLength=function(){return a.length},f.multiply=function(g){for(var m=new Array(f.getLength()+g.getLength()-1),p=0;p<f.getLength();p+=1)for(var v=0;v<g.getLength();v+=1)m[p+v]^=d.gexp(d.glog(f.getAt(p))+d.glog(g.getAt(v)));return u(m,0)},f.mod=function(g){if(f.getLength()-g.getLength()<0)return f;for(var m=d.glog(f.getAt(0))-d.glog(g.getAt(0)),p=new Array(f.getLength()),v=0;v<f.getLength();v+=1)p[v]=f.getAt(v);for(var v=0;v<g.getLength();v+=1)p[v]^=d.gexp(d.glog(g.getAt(v))+m);return u(p,0).mod(g)},f}var l=function(){var w=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],E=function(g,m){var p={};return p.totalCount=g,p.dataCount=m,p},a={},f=function(g,m){switch(m){case o.L:return w[(g-1)*4+0];case o.M:return w[(g-1)*4+1];case o.Q:return w[(g-1)*4+2];case o.H:return w[(g-1)*4+3];default:return}};return a.getRSBlocks=function(g,m){var p=f(g,m);if(typeof p>"u")throw"bad rs block @ typeNumber:"+g+"/errorCorrectionLevel:"+m;for(var v=p.length/3,O=[],N=0;N<v;N+=1)for(var P=p[N*3+0],G=p[N*3+1],M=p[N*3+2],F=0;F<P;F+=1)O.push(E(G,M));return O},a}(),h=function(){var w=[],E=0,a={};return a.getBuffer=function(){return w},a.getAt=function(f){var g=Math.floor(f/8);return(w[g]>>>7-f%8&1)==1},a.put=function(f,g){for(var m=0;m<g;m+=1)a.putBit((f>>>g-m-1&1)==1)},a.getLengthInBits=function(){return E},a.putBit=function(f){var g=Math.floor(E/8);w.length<=g&&w.push(0),f&&(w[g]|=128>>>E%8),E+=1},a},A=function(w){var E=r.MODE_NUMBER,a=w,f={};f.getMode=function(){return E},f.getLength=function(p){return a.length},f.write=function(p){for(var v=a,O=0;O+2<v.length;)p.put(g(v.substring(O,O+3)),10),O+=3;O<v.length&&(v.length-O==1?p.put(g(v.substring(O,O+1)),4):v.length-O==2&&p.put(g(v.substring(O,O+2)),7))};var g=function(p){for(var v=0,O=0;O<p.length;O+=1)v=v*10+m(p.charAt(O));return v},m=function(p){if("0"<=p&&p<="9")return p.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+p};return f},y=function(w){var E=r.MODE_ALPHA_NUM,a=w,f={};f.getMode=function(){return E},f.getLength=function(m){return a.length},f.write=function(m){for(var p=a,v=0;v+1<p.length;)m.put(g(p.charAt(v))*45+g(p.charAt(v+1)),11),v+=2;v<p.length&&m.put(g(p.charAt(v)),6)};var g=function(m){if("0"<=m&&m<="9")return m.charCodeAt(0)-"0".charCodeAt(0);if("A"<=m&&m<="Z")return m.charCodeAt(0)-"A".charCodeAt(0)+10;switch(m){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+m}};return f},k=function(w){var E=r.MODE_8BIT_BYTE,a=i.stringToBytes(w),f={};return f.getMode=function(){return E},f.getLength=function(g){return a.length},f.write=function(g){for(var m=0;m<a.length;m+=1)g.put(a[m],8)},f},B=function(w){var E=r.MODE_KANJI,a=i.stringToBytesFuncs.SJIS;if(!a)throw"sjis not supported.";(function(m,p){var v=a(m);if(v.length!=2||(v[0]<<8|v[1])!=p)throw"sjis not supported."})("友",38726);var f=a(w),g={};return g.getMode=function(){return E},g.getLength=function(m){return~~(f.length/2)},g.write=function(m){for(var p=f,v=0;v+1<p.length;){var O=(255&p[v])<<8|255&p[v+1];if(33088<=O&&O<=40956)O-=33088;else if(57408<=O&&O<=60351)O-=49472;else throw"illegal char at "+(v+1)+"/"+O;O=(O>>>8&255)*192+(O&255),m.put(O,13),v+=2}if(v<p.length)throw"illegal char at "+(v+1)},g},D=function(){var w=[],E={};return E.writeByte=function(a){w.push(a&255)},E.writeShort=function(a){E.writeByte(a),E.writeByte(a>>>8)},E.writeBytes=function(a,f,g){f=f||0,g=g||a.length;for(var m=0;m<g;m+=1)E.writeByte(a[m+f])},E.writeString=function(a){for(var f=0;f<a.length;f+=1)E.writeByte(a.charCodeAt(f))},E.toByteArray=function(){return w},E.toString=function(){var a="";a+="[";for(var f=0;f<w.length;f+=1)f>0&&(a+=","),a+=w[f];return a+="]",a},E},q=function(){var w=0,E=0,a=0,f="",g={},m=function(v){f+=String.fromCharCode(p(v&63))},p=function(v){if(!(v<0)){if(v<26)return 65+v;if(v<52)return 97+(v-26);if(v<62)return 48+(v-52);if(v==62)return 43;if(v==63)return 47}throw"n:"+v};return g.writeByte=function(v){for(w=w<<8|v&255,E+=8,a+=1;E>=6;)m(w>>>E-6),E-=6},g.flush=function(){if(E>0&&(m(w<<6-E),w=0,E=0),a%3!=0)for(var v=3-a%3,O=0;O<v;O+=1)f+="="},g.toString=function(){return f},g},H=function(w){var E=w,a=0,f=0,g=0,m={};m.read=function(){for(;g<8;){if(a>=E.length){if(g==0)return-1;throw"unexpected end of file./"+g}var v=E.charAt(a);if(a+=1,v=="=")return g=0,-1;if(v.match(/^\s$/))continue;f=f<<6|p(v.charCodeAt(0)),g+=6}var O=f>>>g-8&255;return g-=8,O};var p=function(v){if(65<=v&&v<=90)return v-65;if(97<=v&&v<=122)return v-97+26;if(48<=v&&v<=57)return v-48+52;if(v==43)return 62;if(v==47)return 63;throw"c:"+v};return m},b=function(w,E){var a=w,f=E,g=new Array(w*E),m={};m.setPixel=function(N,P,G){g[P*a+N]=G},m.write=function(N){N.writeString("GIF87a"),N.writeShort(a),N.writeShort(f),N.writeByte(128),N.writeByte(0),N.writeByte(0),N.writeByte(0),N.writeByte(0),N.writeByte(0),N.writeByte(255),N.writeByte(255),N.writeByte(255),N.writeString(","),N.writeShort(0),N.writeShort(0),N.writeShort(a),N.writeShort(f),N.writeByte(0);var P=2,G=v(P);N.writeByte(P);for(var M=0;G.length-M>255;)N.writeByte(255),N.writeBytes(G,M,255),M+=255;N.writeByte(G.length-M),N.writeBytes(G,M,G.length-M),N.writeByte(0),N.writeString(";")};var p=function(N){var P=N,G=0,M=0,F={};return F.write=function(T,Y){if(T>>>Y)throw"length over";for(;G+Y>=8;)P.writeByte(255&(T<<G|M)),Y-=8-G,T>>>=8-G,M=0,G=0;M=T<<G|M,G=G+Y},F.flush=function(){G>0&&P.writeByte(M)},F},v=function(N){for(var P=1<<N,G=(1<<N)+1,M=N+1,F=O(),T=0;T<P;T+=1)F.add(String.fromCharCode(T));F.add(String.fromCharCode(P)),F.add(String.fromCharCode(G));var Y=D(),ie=p(Y);ie.write(P,M);var re=0,j=String.fromCharCode(g[re]);for(re+=1;re<g.length;){var z=String.fromCharCode(g[re]);re+=1,F.contains(j+z)?j=j+z:(ie.write(F.indexOf(j),M),F.size()<4095&&(F.size()==1<<M&&(M+=1),F.add(j+z)),j=z)}return ie.write(F.indexOf(j),M),ie.write(G,M),ie.flush(),Y.toByteArray()},O=function(){var N={},P=0,G={};return G.add=function(M){if(G.contains(M))throw"dup key:"+M;N[M]=P,P+=1},G.size=function(){return P},G.indexOf=function(M){return N[M]},G.contains=function(M){return typeof N[M]<"u"},G};return m},R=function(w,E,a){for(var f=b(w,E),g=0;g<E;g+=1)for(var m=0;m<w;m+=1)f.setPixel(m,g,a(m,g));var p=D();f.write(p);for(var v=q(),O=p.toByteArray(),N=0;N<O.length;N+=1)v.writeByte(O[N]);return v.flush(),"data:image/gif;base64,"+v};return i}();(function(){t.stringToBytesFuncs["UTF-8"]=function(i){function r(o){for(var s=[],c=0;c<o.length;c++){var d=o.charCodeAt(c);d<128?s.push(d):d<2048?s.push(192|d>>6,128|d&63):d<55296||d>=57344?s.push(224|d>>12,128|d>>6&63,128|d&63):(c++,d=65536+((d&1023)<<10|o.charCodeAt(c)&1023),s.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|d&63))}return s}return r(i)}})(),function(i){n.exports=i()}(function(){return t})})(Gi);const sc=Gi.exports,ac=Lo({__proto__:null,default:sc},[Gi.exports]),cc=new je("QR"),lc=(n,e)=>{const r=ac(0,"L");n.length>500&&cc.warn("getQrData",'The size of the payload in the QR code is quite long and some devices might not be able to scan it anymore. To reduce the QR size, try using a shorter "name", "appUrl" and "iconUrl"');try{if(r.addData(n),r.make(),e==="svg")return r.createSvgTag();if(e==="ascii"){const o=r.getModuleCount(),s="\x1B[40m  \x1B[0m",c="\x1B[47m  \x1B[0m",d=new Array(o+3).join(c),u=new Array(o+3).join(s);let l="";l+=`${u}
`,l+=`${d}
`;for(let h=0;h<o;h++){l+=c;for(let A=0;A<o;A++)l+=r.isDark(h,A)?s:c;l+=`${c}
`}return l+=d,l+=u,l}else return r.createDataURL()}catch(o){throw console.error("error",o),o}},Jt=(n,e)=>`${n}?type=tzip10&data=${e}`,dc=[{key:"spire_chrome",id:"gpfndedineagiepkpinficbcbbgjoenn",name:"Spire",shortName:"Spire",color:"",logo:"data:image/;base64,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",link:"https://spirewallet.com/"},{key:"temple_chrome",id:"ookjlbkiijinhpmnjffcofjonbfbgaoc",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/;base64,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",link:"https://templewallet.com/"}],uc=[{key:"galleon_desktop",name:"Galleon",shortName:"Galleon",color:"",logo:"data:image/;base64,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",deepLink:"galleon://"},{key:"umami_desktop",name:"Umami",shortName:"Umami",color:"",logo:"data:image/;base64,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",deepLink:"umami://"}],hc=[{key:"kukai_web",name:"Kukai Wallet",shortName:"Kukai",color:"",logo:"data:image/;base64,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",links:{mainnet:"https://wallet.kukai.app",ghostnet:"https://ghostnet.kukai.app",mondaynet:"https://dailynet.kukai.app",delphinet:"https://testnet.kukai.app",edonet:"https://edonet.kukai.app",florencenet:"https://florencenet.kukai.app",granadanet:"https://granadanet.kukai.app",hangzhounet:"https://hangzhounet.kukai.app",ithacanet:"https://ithacanet.kukai.app",jakartanet:"https://jakartanet.kukai.app",kathmandunet:"https://kathmandunet.kukai.app"}}],fc=[{key:"airgap_ios",name:"AirGap Wallet",shortName:"AirGap",color:"rgb(4, 235, 204)",logo:"data:image/;base64,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",universalLink:"https://wallet.airgap.it",deepLink:"airgap-wallet://"},{key:"naan_ios",name:"Naan Wallet",shortName:"Naan",color:"rgb(129, 100, 100)",logo:"data:image/;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAZfElEQVR4Ad3Be5BeZ33Y8e/veZ5zznvd+0VaaVfWfSVLtiUbY4PBBsaUy0CCE0JDadopCdBJ2iQ0w0ynSSedyaQzzaTJtJlJ/oBShoRJS2nTlNImxNg4gSBsLNuydZdWu5J2tau9vfvezznP8yuvPLJLhtYr22khn4/8yscarpnG0mitStluiBYsJndS8GUsDRmoWsltJB2vSCYikZOO74gJGVEwIlJGoiAejw9G0IjUd6XolSiyaAyZ74giCJkJmsWCxuCcqjGqKmLwqM8QzVSjrrVOjQhWYiWFPFc6BpxxKsYjJqgYi+0mGvwGIQkaJMJqot0cjeNMS5GobadstFAvJbxLteva6tsBDVZL1XGNRdWVvJWosyJ5XhdfNQwSiwYrmW8QF61keZCcTDyR5KISdz1YFQTJrGAUcagR1oYNy3uQ9Z2xWZnE1Cdy0xhT3xwRbQ4IaT/4kiU4UAMYBIPQExACSEBsRjBNpVDLKa6JGbgurrQYU5lHhufQgUtWRy8E37+ekStO9LtE8SqpR1wQsJrnuUqwGseWTrtOREIICWnS0aTVpVhflzjpx+WtZVkLHcn7DP2dWJJiJKHUFtOxmDQzrWIQkyLQhciKqhHj1ajMH4rszNuU2ftDWLgDOlsEhO+yhhuU71I2wwAGFMhjoAzpGGygLIIBw8tU8UL5qpitz2J2HAvhtsfVbzuptqPGBBUfyL2RzJlQ7AqmXNZ2pyUmcwxKzHoJ1jttKu0Wbt2komVhsB3LUB5LppkQCmKDiisUJc86YiIrGlKh2xzAPfX3nXvm70J9F98lwv8PFppTRs5PoeffZwTUVi8qd/2+Zvd8TszAauLikGapwUVK16uLihqHNqVugjhYL2Xa7Hix9x38eVeQRExuxcuGaDkRUSvWOOlKR8RYwQWH/OXHnP3i50Vm3gXpID9ghHRQmHvQmqf/HiKp2sln1IvmWYq1ESY2SEFIsxa5dwiO3Cv2wYO/FEU4CT6VXIxEhViMFfHWS+pVMCtbhD/4A+GZj4Iv8gPPF+DiO5TTDwRue8yHcoPIY50B4+mmHXwOTmJciDHGODGSSqVUoiAFcZmVXHNJQ26cub7XyGe/Clffwg8bXXiTMZ/5qomX9ucGyTQVmxlxGkmxkGBCWwTERFEqSbGAEKRbSqRl2uKDiNX6DpHP/jE0Jvmh1dpm5LP/1bCy2wcnbRckK1YkUielUh+FomBsFNGVVDpRapzPxKgTtFkVPvcFaG/lh157i+H3vwD1PpMjziOduGtatMVbFSOFSEBE8kysqFhjxPLlX4fVg/yNsbbfyh//KyQXa1UIuSCIOCNONWCMiBgkhFQMFx+Ekx/hr0EpVkZKnoFSoBwHYqv05EFopkKtbbneNDS6htednv7bmNP/KWP/o8aAESNiFae5kUxUjLOEFBeFP/k1EYTXgQDjfZ7psZSdQzlDJY8Rvq+gioiAQq1jmFmNOLMUcaXmUOV1of7Pfi3P9z1hIpMFCRJlRu3bjn4qMV6NEETsifcbOf4xXiMjcGA85T0HW9y/o0NORkeFgQRE4GrLsjZ+gOt5QjWrMev7aN/xdhZDhXh9nv4CbO3zHNqaMj2WogrXmw5VXhORzojYgbOiW05GwWO8weV0RFB8biWKjn2C12jHYM7b97YZKXsutyNmd9zHnqOHERGe+6M/QlD2PPIeqtUSqvDof/4T3vTuBymVCtRLjmfOn+N2U6cYGXqGSoGH97d5w1SXxy8UOXc94rUwfOsTWTjyJZWAulQc4kUtAkt7hWv38ipFVnloT5s7J1JCUE7LBHsfeQ+VSpGe4ANh6iBH7t6PtQZQLp+b5fCb7qZUKhDSBtUdQ+w9vI/nvvU0924H4WUDxcCPHmpyeiniq2dKdHLh1RCuHxUWDoiZOGmswbjcYiQRZ0+/FxBehb5C4MNHG9w1keK9crayjzsfeYRKpUhPSOucPD3DXUf3Ya0BFN9Zop5njG8dADJMlAEZW+67nYnJbZxd5fuaHsv4yD11hsueV0ki98J7rcQkPhIDiYRgQWce4FUYLnk+fLTBWMXjg3KmtIcj734TRjaADmiTuSvzTG4fxNk6mtdAN5idX2fXbSOEdIV0Yx4IvMiz9wMPk/dtpdYJ9NQ7Oaq8ZLAY+PCRBhN9Oa+Ghpm35sFIFgwmSzwqLWdk4Si3aKAY+Im7mlSTgA/Ko9cKTAz3I5KTNWqktUVW11a4+uwM5SgAns7qEqo5Z791Gt1oYSIHQVk9eY50owGqiEk5+uPvZXFkmp4vLTX4xMUVvrlQ56ZCpPzYnU3Gq55bJbJ0REwzyeNMDHgxcm0X5APcgsQpjxxuUkkCPV++CNsiZeJN9wOOqFImb7X56pePs3OkgisN0BOVivzZZ/6Y5PoipS3bQCqYyJHW6pz+91+ktbiM73S5fvwZ9j74VmbbCWvtjM/vGeDHGh3SPHBTwSkfONykEgdujS8Ll6eRIMZ5h2X5MLfo4X1thsuenr+4ooyXChz40feBCEiJkOV8/avPsa1TY2DvHsABRRC41nbsPbSHFyXU5xZ49rc/Q2nLKMngALY4zvgbpimVEkr3P8w+tQwuNPjHxvBfZtb4rUtrNLs5PdUk8N6DLYxwS0SvHbZeMCE4VBenuQX7xzIOjKf0zG5A3Q6w7859lCe28iJDbXmd1fWMidE+Slu2cINEXHj0W+jqOuP3voGe9tIi/bunuOuffIzb3v8wttAPdifY3YDjO8sZXyj0ccfcBt9R5R9MlvmiBkqx46apwZwj27rcCtWlg0ENJs0zUV3ewyZFVnnbnjY9rTRwKt7JgSHLtoce5KaNi6c4/vwieyqw6wM/So+GQP3SOdaLgxy8707EWsBQHBvDxIOM3fshbDIJlAADMgxmhPv27eXJkHFxaIChZsb+uQ1+I4r4zVNLzK93yHyg5807O5RjZfNWd3fTTOz9Rz5ZjM3jPy/S3sIm3DOZsm80o+d4e4i9D9zPvgfvB7Hc1LU5Fy5ucPTuaQqDgyCCiJD0x5w4s8K9D91LUh4CuwPIgYC4YcQOg+kHIkBAClTLFT75lh9heeYiP1V1/POJAlN9CXOdnN+9vM7PtboMNDPu7k9wBmZWIzYnaObv+7SLTBCR+nY2wRq4e3uXnit10Klpdu+eAATsTtAGhEVmLtTYtXs7/XumwAwDBQgLQIF2SygWE9AuEMBsgTAPYQ3MVsACyssSen7hPR8mdGb40qd/j1+sKKVWxtpIkf5mRrko5D5weCLlL2cLtDPhlYi0txqXOxO7ZgXSPjZhz3BGJQn0rAzsZmxsgBcpICD9BE24PLfC1I4xXmRBymDGaLXBZi3ai4tAgLDIDWYrkIHWAEVDG/V1NO9w0+joVsa3T/O5sTGWp/rY4ZWP1lI+UYh4uL9AElliqxwYT9mcvBhH3X4j1AeAiE2YHk/puVpX0uooleU5XqItemYudeiPQOo1btAaN0gfy6s5w31F2svL3KBNCEuAAbMNiOgJ7Q2az38NcY7vIUOsA4dfqPN7oxU+v7XML+/o4/NXa9w0PZaxSUZCbdiEkA6xCdbAjsGcno3KBGZjjUK1yku0Rk+7sUF+fZG4WuUG7YJu0NNNqxT6qnRWV3mJ1iAsARakBAimOELljr8FOP6qr3zoUzz2s7/A9Y6llXrwgScqMTdt7cspRspmCO0BY0yjj00YLXsSp/To8HY6iwv0793DS7QJ2sWnDXyzQWd5hZeE64CnUCghxrF25Ro3qW9AuARhnpvEOJAC3ysHXWN0ZIDhsWkm3/k+HrUxX1/u8pZmRlClxwhM9OVshtCpmuBDiU0Yq3p6luoZwxNbac9fRYzhe+gKPmuTtzvE/X28zENYZGxsBOscC0s11HtAERMAD2EWXz9L6Db5/jyE6+DnQOtsHR9C+7ZzZGuVT06PYkS4aazq2RwtGkQSNmGg6Omp5Y5yKaGybYK4r4+XaJvglzHGI9Zg4piXhA6EJZK4DbbIyJvfglgLuoHvNNi4OMflP30CW6hjYsv3l4CUQdtofoFkoMjOvTv59kwXVb7HYDGwGSI+MYJ1bEI5VnokijHGEPX1oSHwooD6BkKDEHJsqUxrYYGbVFtAG/x5kvIg/eUC8/MrIBVsoZ/lZ09Rn5tHyYCM/yMziu/Wqc9eIWQ1hu+4nZ2HDnJ8xaHKS0qxshkhdKxRhM2IjNIjqhgjDB85ihgBrZG3ryHWICIYA6NHj9K3axeQ4tuLiFFelLLztiK15VUW5pZQNSBltr/9rez5ifciUuL/Lka5jdn/8ThiDC6B2971TqYOHOSkjqO8KLbKZhgTYwRhU4QbXN7B+wBBAQEEV0hYfvYUs195jJC2KESOer0FCLYQUTt/idr5S8x+5TEKSZOkuoXRcsSJ5y7SEw/dRTx4F5hBkBLgQRtA4K9ypTFu//jPYhOHiRTjYOK+e7nrkQ9wymxDlU1TVYwS2Iw0F3rGyobFxVXSTsoN0oeGmOXjL9CcX8RFgdHhPi7PLQERSD/liW089Wv/lsLQAEjO9NEjXDy1QNxqcvnyEmgdZBTMJGAhrKD5BfCnQFt8D3GI2wlEgAetYZMOLhLu/JH3c9pM0M3ZpKDGSMjZhGZq6CnGhu7KIs4I7XaXnrztGZzezdg9d7D70E6uXV+n2+ygqoAFIu755X/E0OH9IP0ICW94/09y+TvPszq7wOrKMoRlXiIxIinoBvjnydYv8bIMsRakyMs8i8f+HPEph97/Pk6mQ2xOITci2mUTVluGmzonvs1wIszNLtITVScYv/8BBg/soVweotPoMlYwnDt3lR5X2Un/vjcSlctABBJRLpe448d/ho0TJ7j4/AWajQXQNW6QhKzZYO3MBdZOncHEV0HbgII/Tb5xjNXnj5Oub/DtX/0tVJXxew9j4xZxLLzjI+9GEuEVCV2jSItNWGpYbhofjLj27HN0mh1ukCLY27HFKZA+Jg+8mYXT52iuNfA+AApmF9g7wU4BBvCMb9vC9oc/TNTY4NSJGdrNqxCWgISoMsn814+R1hvYuAS6yA1mJ65UpjK1lSuPfZO+XVO0FpZ4kQGEoaEqD77/Tl6JYJoGqnU2YaVpaWdCz0S/49qZM5TjiNXVOmgbsGB2gtnO6Pg4zbzIiEk5c3oOtAHkIEUgAQL4GfBn2blvC9UDDzFYLXPy2QvUNxbAzwLC/p/6EKNHDoEUQVMISyAVcIeJ+yZoLVynvbRMeWIcpAoyCFh64sTySpS+dQNujU0ICjOrETcNlpX8haeZv3wdtA14XqItjr7vPl74b/+d0O7SaLQgrPKyAORovgr+LLt2D2GruykXi8ycnuPKlXnA44qjmHgIMNygNdAVICZrDHDwp3+SI7/0cfJ2B4i46blnZvjT//g0ryRovOqC9q0ZyAHHKzi1GHFwPKVn//YK37m6xOCWNdI0Iy7UQIZ4UUalBGMPvRF78RRng3L03hJoFaQICD6tYyMDePDnmNyym5XyEebOPU1nvcHxa2sMlSwDsWLjhOLYGLaQoH4ZsULUvw18HXQDVyzRbLZ5/vhZXjg2w6VzGzhjeQVZO+9bd3lIGrFEDcgGeAWXViNqbUN/MZBEhmrVsXWwzPlzVzh4ewK2HzCErIXQ5q4H7+Bbf/oCkwMVZmYW2LnTgp0EBBuXqJ19jrXT55l690NktROMbXmQkZGHOXPqSUJ6meXUsdCo07k2T3txger4GJVtE/Tv3kWeWzqtBldm50nnZyltLHD7WMxjswM4Y3ll8QYhaZg82KBamWcTgsKTlxNu2lFssZ4qWatLlnUhLNFjIkdr4RrNK/P0s0G706WxusHGxgb4K4CCDFCfvcrKc6cJWU5hpATawBjDgQOjHJqusGNvBRtqDO6fIh4YoO/QNL4Yc+35F8i6TbqdDrevPMU7h1Z54LaE00tF0lzYDNX+OaNGnVELDM7A2kE24bmFhLsnuwwWA30Fy5Uzx9n50MOcPjnL4TsdaAGIMUmJZ/7lv+HOX/woV+odhsuDnD15iTvv3k/ELKCMv/FuRo4cxJUGgRLoOkgfmAmSwVXikJL3C0k1x2bXOXRkKy8rgpQ4sTLLaOM8rUx46nLC5g1cEmsxzhRVZPQ8m+QDPHq2iPKiXWaZufMzJCIsL29AuA5hCVcosvuD76G8dSvTB3dzbXWDqa3DHH/qDHmeAUrUN05heAxw3KAd0DpQALsfkZi80eLb/+K3KY4N015a4WWBnsn73sxiC75+vkgnFzZNhs85Z9WI7aKMnuYWzKxGPHs1oacQGQozT1GIHbMXrpJlOaBE1WHG7z0KJgEKHLlnP3NLGZPjgxx/8gz1RhvUgvQBMS8J1wEPUgU7RfW2Sfp3TTF4YA/FsRGQEkgVpEzPwGCVk34HL1yLuTXjp6woxpucYLac4BY9dr7AwoalZ0clcP3YY2wbG+DpJ8/ifQAixA4hpkyPiHDPvXew0u6nv1zi0unLfOOLX2H+L77B2slTvCyHcJ2etJZTnhjnvl//FNWpCSABikAMCD0hKKfmuii3RsOW57zmah+8+1MFQqlm+ObHISRsUlDhwkrEnpGMYqSMRCnnLsyzbd80585fpXP6BP3bt2Gc42UpY1unCW6A9fUVqiP9rHaFuROnmf/qnxCL0rh8hcrkGIjDFkcwrgmk2DgGHEhMjyrMzi7yh595nLXLdUSEzUuWg3/Pr2sguDiLNHVJFsL400auPsQtaKaG//BMhQ/e1WS45DlcrHH+G1+hdOB+asURvv67n2PX7gmG77yD6tQU4EFrjI6OUMkmaDKLv2awt+9nbXWK2a4jSSLWTs5io6tYm5DEEDQn7bao11dYurpEtbuGWV/hiWeVTh4hItyaiackSnziRe3Db/ilAiZDdX1cmH0btyj1wumlmPGqZ6AYGIo9ZmmG9VZG9dBR1rxj7vEnMGvLiDEUBktg+okqfZRKNcbGKwwmGVP7d5CZBBPHoErIA51Wi4vPvkB44Rj+4mkGF89w0F7HbDT4sxcSmqnj1Tn6GTE7noqNUfvAG34hCT6X3JeXnHnqZwDhFuVBOLUY0zPRn1OMhDFpoAsX6KY5fmI3jdIwXZuQq6dcApEU8ECGKxVwUYmhoUFGRvsZHRtgdGwAayA5/yT7yl1GikI5thy/mvDlkyXameHVEd/17/skEm14k6nTPAf1KoxeUt3+dZErb+NVCArfmClw7nrE2/e2mRzIGSlbRlgmtJa5cs3TvjrEeSlzrGuQSh/FaoVCKSaODWkGeZoyFAcKeRvWl6g2rrGjKPRcq1seO1fkSs3xWiiTXxMduCoh16CKM7lVNV6c8Rrkgd+x/OHbeA2WGpY/PF5hx2DOvVMddgzmGIGpfgvUgBrE3NBdD3SuB1TBWaEUG4wIN2lRuFJzPHU54fxyhCqvWeCB3zE2qISA8bG6NIrUWFX1OeT7Hjdu4hvC/Jt5jWbXHLNrFfqLgf2jGTuHM7ZWPZFVbkqcIXGG/13mhaWGZWbVcXYpYqVleb0o254I+d4/x+WaR0atWHWxQ0UjNZojUeS9ffc/Jf93XwN1vA5qbcO35xK+PZfgDAwUPQPFQDlWIqv0ZF5opcJ6x7DeNmReeP1JFty7/llB4mAwmmNVrcdJJ+CjoMbEiE8Q3XYiyBv/tei3PsXrLA+w3LQsNy3/r6m86TeN3/a8CZHiRH0IaluRGu2gVq1aE2kWcjSLlPDO30B2PMrfGJNfE33Hb4pPtJvngFHrUc1EjbiCOhWVbqreoFnuFV/MNPydj8L40/yQU8aeCeGDH8VHmVev3gY13UxtEMXkatLcabPZIojRKN1QrNU8dDTvROvB//QjysQ3+CGluuWY6scf8d2+tSzLVcVolDU0F9V2u0EnL6i9f/oTzpiEPG2KjRPEe2IMkYswlLvK9JfEtEswfzdg+OEQxNzxGfUf/LjTaj0S1OBVQlutLWq3mxE01jxLsXcf/Dnri4aiTyiQgYoaY8RaIdWAaOKtmX5Mza7HNVzdJ9Lczg8w1dFnxT3yCRPe+mkJSRYQtRLUaa4iRk3mVUxJu7HXXLtq7zryD61FiSNDKY3IrRfvIRglOKcGwYqgoXI14+gXVLc/oXhrZG07hAI/EEwz6K7/qfLwr3h9169aHZ2JcBrEahBFQ1tDMEowWgixdqJMWzbTTHN1cZqDFV0vQh5HmLxA0EwrxknikW7iCZmi0kGsDSa77Zve7/qmtxpF9spRYf6NhJmjyOLtUJ8ETfjrlUH5KrrlpMrkMyKTxzK//Um8a1sXwAbNQ6oSvJpiokkH9a6krbyr3id0krbWXa5R6snzgGvHQRPvJaqjjSoUxRB1E9qdDkkxIU0NNvKI6SNkKcZ3lDiIkyS1ZvpYnh865vO2GOvF2k5RdWWb92s7nDYmRGrjSmcU1x5CW/3QrYKWoFmEPAZ13CA5uBTKHZAmxHWkVCMU1yQUl4X+axnleTGDl0WGrvhQauKtii1q5FKiONc0bWOCaG4SIh+r913NWmhANUu7hBChcVdrLle3kdOWTH3JqxsobdN6tkLa6Uo1Q9MiqDqpypCa3FPqNggVq92QiwYrVkviQ1vFBokDquolt5mKtSKm1Ay+cC5w27mcgCMT5wwSRWR5JkE9AhgDISggCKCioAbVgAgY47DGachyvCpeHCpWjaYYa9RaJZcM52ONg9GuCSBGNU1ArHoJWiBWWp48LmspGtQNU6dJW5NGpq0oI6r0acVV9X8BXChrJiNQKxUAAAAASUVORK5CYII=",universalLink:"https://naanwallet.com",deepLink:"naan://"},{key:"autonomy-app",name:"Autonomy: Digital Art Wallet",shortName:"Autonomy",color:"",logo:"data:image/;base64,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",universalLink:"https://autonomy.io/apps/tezos",deepLink:"autonomy-tezos://"},{key:"temple_ios",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/;base64,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",universalLink:"https://templewallet.com",deepLink:"temple://"}];var Ye=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};let yo=uc,wo=dc,Ao=hc,bo=fc;const On=()=>yo,vc=n=>{yo=n},Xt=()=>wo,pc=n=>{wo=n},Ni=()=>Ao,gc=n=>{Ao=n},Yt=()=>bo,Ec=n=>{bo=n},Mt=new It,fi=["ookjlbkiijinhpmnjffcofjonbfbgaoc","gpfndedineagiepkpinficbcbbgjoenn"];var Et;(function(n){n[n.DESKTOP=0]="DESKTOP",n[n.IOS=1]="IOS",n[n.ANDROID=2]="ANDROID"})(Et||(Et={}));var Le;(function(n){n.IOS="ios",n.ANDROID="android",n.EXTENSION="extension",n.DESKTOP="desktop",n.WEB="web"})(Le||(Le={}));class lt{static getPlatfrom(){return Ye(this,void 0,void 0,function*(){return mo(window)?Et.ANDROID:Eo(window)?Et.IOS:Et.DESKTOP})}static getPairingInfo(e,t,i,r){return Ye(this,void 0,void 0,function*(){const o=r??(yield lt.getPlatfrom()),s=e.p2pSyncCode,c=e.postmessageSyncCode,d=e.preferredNetwork;switch(o){case Et.DESKTOP:return lt.getDesktopPairingAlert(s,t,c,i,d);case Et.IOS:return lt.getIOSPairingAlert(s,t,d);case Et.ANDROID:return lt.getAndroidPairingAlert(s,t,d);default:throw new Error("platform unknown")}})}static getDesktopPairingAlert(e,t,i,r,o){return Ye(this,void 0,void 0,function*(){const s=yield nn.getAvailableExtensions();s.forEach(d=>{const u=fi.indexOf(d.id);u>=0&&fi.splice(u,1)});const c=[];return Xt().length>0&&c.push({title:"Browser Extensions",type:Le.EXTENSION,wallets:[...s.map(d=>{var u,l,h,A,y;const k=Xt().find(B=>B.id===d.id);return{key:(u=k==null?void 0:k.key)!==null&&u!==void 0?u:d.id,name:(l=d.name)!==null&&l!==void 0?l:k==null?void 0:k.name,logo:(h=d.iconUrl)!==null&&h!==void 0?h:k==null?void 0:k.logo,shortName:(A=d.shortName)!==null&&A!==void 0?A:k==null?void 0:k.shortName,color:(y=d.color)!==null&&y!==void 0?y:k==null?void 0:k.color,enabled:!0,clicked:!1,clickHandler(){return Ye(this,void 0,void 0,function*(){if(!this.clicked){if(this.clicked=!0,i){const B=yield Mt.serialize(yield i()),D={target:ut.EXTENSION,payload:B,targetId:d.id};oe.postMessage(D,oe.location.origin)}t(Le.EXTENSION,this)}})}}}),...Xt().filter(d=>fi.some(u=>u===d.id)).map(d=>({key:d.key,name:d.name,shortName:d.shortName,color:d.color,logo:d.logo,enabled:!1,clickHandler:()=>{window.open(d.link,"_blank")}}))].sort((d,u)=>d.key.localeCompare(u.key))}),On().length>0&&c.push({title:"Desktop & Web Wallets",type:Le.DESKTOP,wallets:[...On().map(d=>({key:d.key,name:d.name,shortName:d.shortName,color:d.color,logo:d.logo,enabled:!0,clicked:!1,clickHandler(){return Ye(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const u=yield Mt.serialize(yield e()),l=Jt(d.deepLink,u);window.open(l,"_blank"),t(Le.DESKTOP,this,!0)})}})),...yield lt.getWebList(e,t,o)].sort((d,u)=>d.key.localeCompare(u.key))}),Yt().length>0&&c.push({title:"Mobile Wallets",type:Le.IOS,wallets:[...Yt().map(d=>({key:d.key,name:d.name,shortName:d.shortName,color:d.color,logo:d.logo,enabled:!0,clicked:!1,clickHandler(){return Ye(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const u=yield Mt.serialize(yield e());r(u),t(Le.IOS,this,!0)})}}))].sort((d,u)=>d.key.localeCompare(u.key))}),{walletLists:c,buttons:[]}})}static getIOSPairingAlert(e,t,i){return Ye(this,void 0,void 0,function*(){return{walletLists:[{title:"Mobile Wallets",type:Le.IOS,wallets:Yt().map(r=>({key:r.key,name:r.name,shortName:r.shortName,color:r.color,logo:r.logo,enabled:!0,clicked:!1,clickHandler(){var o;return Ye(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const s=yield Mt.serialize(yield e()),c=Jt((o=r.deepLink)!==null&&o!==void 0?o:r.universalLink,s),d=document.createElement("a");d.setAttribute("href",c),d.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),t(Le.IOS,this,!0)})}})).sort((r,o)=>r.key.localeCompare(o.key))},{title:"Web Wallets",type:Le.WEB,wallets:[...yield lt.getWebList(e,t,i)].sort((r,o)=>r.key.localeCompare(o.key))}],buttons:[]}})}static getAndroidPairingAlert(e,t,i){return Ye(this,void 0,void 0,function*(){return{walletLists:[{title:"Web Wallets",type:Le.WEB,wallets:[...yield lt.getWebList(e,t,i)].sort((r,o)=>r.key.localeCompare(o.key))}],buttons:[{title:"Mobile Wallets",text:"Connect Wallet",clickHandler:()=>Ye(this,void 0,void 0,function*(){const r=yield Mt.serialize(yield e()),o=Jt("tezos://",r);window.open(o,"_blank"),t(Le.ANDROID)})}]}})}static getWebList(e,t,i){return Ye(this,void 0,void 0,function*(){return Ni().map(r=>({key:r.key,name:r.name,shortName:r.shortName,color:r.color,logo:r.logo,enabled:!0,clicked:!1,clickHandler(){if(this.clicked)return;this.clicked=!0;const o=window.open("","_blank");e().then(s=>Mt.serialize(s)).then(s=>{var c;const d=Jt((c=r.links[i])!==null&&c!==void 0?c:r.links[Ee.MAINNET],s);o?o.location.href=d:window.open(d,"_blank"),t(Le.WEB,this,!0)}).catch(s=>{console.error(s)})}})).sort((r,o)=>r.key.localeCompare(o.key))})}}const K=(n,e,t,i)=>{const r=document.createElement(n);return e.length>0&&r.classList.add(...e.filter(o=>!!o).map(o=>xt(o))),t.forEach(o=>{r.setAttribute(xt(o[0]),xt(o[1]))}),typeof i=="object"&&Array.isArray(i)?i.filter(o=>!!o).forEach(o=>{r.appendChild(o)}):typeof i=="string"&&(r.innerText=i),r},St=(n,e,t)=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.length>0&&i.classList.add(...n.filter(r=>!!r)),e.forEach(r=>{i.setAttribute(xt(r[0]),xt(r[1]))}),typeof t=="object"&&Array.isArray(t)&&t.filter(r=>!!r).forEach(r=>{i.appendChild(r)}),i},We=n=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");return n.forEach(t=>{e.setAttribute(xt(t[0]),xt(t[1]))}),e},mc=n=>{const e=document.createElementNS("http://www.w3.org/2000/svg","g");return n.filter(t=>!!t).forEach(t=>{e.appendChild(t)}),e},yc=()=>St(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[We([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])]),xt=n=>{const e=document.createElement("div");return e.innerText=n,e.innerHTML},Ir=n=>{n.innerHTML=""};var ze=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const Or=new je("Alert"),Cr=new It,wc=(n,e,t)=>ze(void 0,void 0,void 0,function*(){const i=()=>ze(void 0,void 0,void 0,function*(){return lt.getPairingInfo(t,(f,g,m)=>ze(void 0,void 0,void 0,function*(){m||(yield Kn())}),()=>ze(void 0,void 0,void 0,function*(){a()}))}),r=yield i(),o=e.getElementById("pairing-container");if(!o)throw new Error("container not found");const s=document.createElement("span");o.appendChild(s),r.buttons.forEach(f=>ze(void 0,void 0,void 0,function*(){const g=yield vt(),m=K("div",["beacon-list__title"],[],f.title),p=K("button",["beacon-modal__button","connect__btn"],[],f.text),v=document.createElement("a");v.id=`button_${g}`,v.appendChild(m),v.appendChild(p),s.appendChild(v);const O=e.getElementById(v.id);O&&O.addEventListener("click",()=>ze(void 0,void 0,void 0,function*(){f.clickHandler()}))}));const c=(f,g,m)=>{const p=`Open in ${m.name}`,v=m.key,O=m.logo?K("div",[],[],[K("img",["beacon-selection__img"],[["src",m.logo]],"")]):St(["beacon-selection__img","svg-inline--fa","fa-wallet","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","wallet"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"],["style","enable-background:new 0 0 512 512;"],["xml:space","preserve"]],[We([["d","M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z"]])]),N=K("div",["beacon-selection__name"],[],[K("span",[],[],m.name),m.enabled?void 0:K("p",[],[],"Not installed")]),P=K("a",["beacon-selection__list",m.enabled?"":"disabled"],[["tabindex","0"],["id",`wallet_${v}`],["alt",p],["target","_blank"]],[N,O]),G=document.createElement("span");G.appendChild(P),f.appendChild(G);const M=e.getElementById(`wallet_${v}`),F=T=>ze(void 0,void 0,void 0,function*(){if(T&&T.key!=="Enter")return;m.clickHandler();const Y=e.getElementById("beacon-modal__content");Y&&g!==Le.EXTENSION&&g!==Le.IOS&&(Ir(Y),Y.appendChild(K("p",["beacon-alert__title"],[],"Establishing Connection..")),Y.appendChild(K("div",["progress-line"],[["id","beacon-toast-loader"]],"")),Y.appendChild(K("div",["beacon--selected__container"],[],[...m.logo?[K("img",["beacon-selection__img"],[["src",m.logo]],""),K("img",["beacon--selection__name__lg"],[],m.name)]:[]])))});M&&(M.addEventListener("click",()=>F()),M.addEventListener("keydown",F))},d=document.createElement("span");o.appendChild(d);const u=f=>{Ir(d),f.forEach(g=>{const m=document.createElement("div");m.classList.add("beacon-list__wrapper"),d.appendChild(m),m.appendChild(K("div",["beacon-list__title"],[],g.title));const p=document.createElement("span");m.appendChild(p),g.wallets.forEach(v=>ze(void 0,void 0,void 0,function*(){c(p,g.type,v)}))})};u(r.walletLists);const l=f=>ze(void 0,void 0,void 0,function*(){if(f.data==="extensionsUpdated"){const g=yield i();u(g.walletLists)}});let h;h=f=>{f.data===`closeAlert-${n}`&&(oe.removeEventListener("message",l),oe.removeEventListener("message",h))},oe.addEventListener("message",l),oe.addEventListener("message",h);const A=e.getElementById("beacon--qr__container"),y=e.getElementById("beacon--qr__copy"),k=e.getElementById("beacon-title"),B=mo(window)?"android":Eo(window)?"ios":"desktop",D=e.getElementById("beacon-main-text"),q=e.getElementById("pairing-container"),H=e.getElementById("beacon--switch__container"),b=()=>ze(void 0,void 0,void 0,function*(){const f=t?yield Cr.serialize(yield t.p2pSyncCode()):"";navigator.clipboard.writeText(f).then(()=>{y&&(y.innerText="Copied"),Or.log("Copying to clipboard was successful!")},g=>{Or.error("Could not copy text to clipboard: ",g)})});let R=!1;const w=f=>ze(void 0,void 0,void 0,function*(){const g=e.getElementById("beacon-switch");if(g&&(g.innerText=f==="none"?"Pair wallet on same device":"Pair wallet on another device"),D&&q&&H&&y&&A&&k)switch(D.style.display="none",k.style.textAlign="center",q.style.display="none",H.style.display="initial",f){case"ios":q.style.display="initial";break;case"android":q.style.display="initial";break;case"desktop":q.style.display="initial",k.style.textAlign="left",D.style.display="none",H.style.display="initial";break;default:if(!R){R=!0;const m=yield Cr.serialize(yield t.p2pSyncCode()),p=Jt("tezos://",m),O=lc(p,"svg").replace("<svg",'<svg class="beacon-alert__image"');A.insertAdjacentHTML("afterbegin",O),y&&y.addEventListener("click",b),A&&A.addEventListener("click",b)}D.style.display="initial"}});let E=!1;const a=()=>{w(E?"none":B),E=!E};a();{const f=e.getElementById("beacon-switch");f&&f.addEventListener("click",a)}});let _o=Tn.LIGHT;const Pr=n=>{_o=n},qi=()=>_o,Ac=n=>K("div",["beacon-toast__base","animated","fadeIn"],[["id","beacon-toast"]],[K("div",["beacon-toast__content"],[],[K("span",[],[["id","beacon-text"]],[K("p",[],[["id","beacon-text-content"]],n),K("a",["beacon-toast__wallet__link"],[["id","beacon-open-wallet"]],[K("span",[],[],"Open"),St(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[We([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])])])]),St(["beacon-toast__more","svg-inline--fa","fa-angle-down","fa-w-10"],[["id","beacon-toast-button-expand"],["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","angle-down"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[We([["fill","currentColor"],["d","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]])]),St(["beacon-toast__more","svg-inline--fa","fa-times","fa-w-10"],[["id","beacon-toast-button-close"],["aria-hidden","true"],["focusable","false"],["data-prefix","fal"],["data-icon","times"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[We([["fill","currentColor"],["d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]])])]),K("div",["progress-line"],[["id","beacon-toast-loader"]],""),K("hr",["hide"],[["id","beacon-toast-loader-placeholder"]],""),K("div",["beacon-toast__more--action"],[["id","beacon-toast-list"]],"")]),bc=()=>K("a",[],[["href","https://walletbeacon.io"],["target","_blank"]],[document.createTextNode("powered by"),St([],[["id","f63e95a9-fd19-4487-bc1a-09eb2f066704"],["data-name","Guides"],["xmlns","http://www.w3.org/2000/svg"],["width","65"],["height","65"],["viewBox","0 0 65 65"]],[K("title",[],[],"beacon_logo"),We([["fill","currentColor"],["d","M59.66,29.52v1.06c0,.37-.18,9.07-4.11,15.88S44.16,57.75,43.84,57.93l-.91.54-1.61-.93-9.19-5.3a14.68,14.68,0,0,1-1.63-1.06h0a14.09,14.09,0,0,1-1.29-1,17.63,17.63,0,0,1-2.56-2.7,18.58,18.58,0,0,1-2.56-4.51,21.53,21.53,0,0,1-1.5-9,6.21,6.21,0,0,1,2.93-.73c.25,0,.49,0,.74,0a18.29,18.29,0,0,0,1,7.93,15.06,15.06,0,0,0,6.67,8l8.93,5.16c.2-.13.43-.3.68-.48,2.26-1.6,6.42-4.92,8.86-9.13C55.12,39.94,55.8,34,56,31.57l-3.79-2.19a23,23,0,0,0,.6-3.83Z"]]),We([["fill","currentColor"],["d","M49.22,11.43V23.89c0,.65,0,1.3-.1,1.94v0c-.06.55-.13,1.1-.24,1.63A18,18,0,0,1,47.82,31a19.11,19.11,0,0,1-2.62,4.49,21.37,21.37,0,0,1-7.07,5.8,6.08,6.08,0,0,1-2.42-2.84A18.1,18.1,0,0,0,42,33.7h0a15.12,15.12,0,0,0,3.58-9.81V13.6c-.21-.11-.47-.21-.74-.35-2.52-1.16-7.47-3.1-12.36-3.1-5.42,0-11,2.4-13.08,3.45V18a22.54,22.54,0,0,0-3.63,1.38V11.43l.92-.52c.33-.18,8-4.38,15.79-4.38s15.48,4.2,15.8,4.38Z"]]),We([["fill","currentColor"],["d","M18,26.4,9,31.55q0,.35.06.78a31.63,31.63,0,0,0,3.49,12.28c2.71,4.71,7.55,8.3,9.53,9.64l3.79-2.19a23.33,23.33,0,0,0,3,2.44l-6.88,4-.92-.54c-.31-.18-7.75-4.69-11.68-11.5S5.36,30.92,5.35,30.56V29.49L7,28.55l9.17-5.29c.57-.32,1.14-.61,1.72-.87a13.46,13.46,0,0,1,1.55-.61A17.52,17.52,0,0,1,23,20.91a19.2,19.2,0,0,1,5.19,0,21.49,21.49,0,0,1,8.55,3.24,6.29,6.29,0,0,1-1.25,3.51,17.9,17.9,0,0,0-7.3-3.06A15.14,15.14,0,0,0,18,26.4Z"]])]),document.createTextNode("Beacon")]),Ro=(n,e,t,i)=>K("div",["beacon-alert__base","animated","fadeIn"],[["id",`beacon-alert-modal-${n}`]],[K("div",["beacon-modal__wrapper"],[],[K("div",["beacon-modal__header"],[],[St([],[["xmlns","http://www.w3.org/2000/svg"],["id","Guides"],["x","0"],["y","0"],["version","1.1"],["viewBox","0 0 179.2 43"],["xml:space","preserve"],["width","140"],["height","40"]],[K("style",[],[],`.st0 {
                    fill: #3880ff;
                  }
                  .st1 {
                    fill: #fff;
                  }`),We([["d","M45 19v.9c0 .3-.2 7.5-3.4 13.2-3.3 5.6-9.4 9.3-9.7 9.5l-.8.4-1.3-.8-7.6-4.4c-.5-.3-.9-.6-1.4-.9-.4-.3-.7-.5-1.1-.8-.8-.7-1.5-1.4-2.1-2.2-.9-1.1-1.6-2.4-2.1-3.7-.9-2.3-1.3-4.8-1.2-7.5.8-.4 1.6-.6 2.4-.6h.6c-.2 2.4.1 4.6.8 6.6 1 2.8 2.9 5.1 5.5 6.6l7.4 4.3c.2-.1.4-.2.6-.4 1.9-1.3 5.3-4.1 7.3-7.6 2.2-3.9 2.8-8.9 3-10.8L38.8 19c.3-1 .4-2.1.5-3.2L45 19z"],["class","st0"]]),We([["d","M36.3 4.1v10.3c0 .5 0 1.1-.1 1.6s-.1.9-.2 1.3c-.2 1-.5 2-.9 3-.5 1.3-1.3 2.6-2.2 3.7-1.5 1.9-3.5 3.6-5.9 4.8-.9-.6-1.6-1.3-2-2.4 2.1-1 3.9-2.3 5.2-4 1.9-2.3 3-5.1 3-8.1V5.9l-.6-.3c-2-1-6.1-2.6-10.1-2.6-4.5 0-9.1 2-10.9 2.9v3.6c-1 .3-2 .7-3 1.1V4.1l.8-.4C9.7 3.5 16 0 22.5 0s12.8 3.5 13.1 3.6l.7.5z"],["class","st0"]]),We([["d","M10.5 16.5l-7.4 4.3v.7c.2 2.1.9 6.5 2.9 10 2.2 3.9 6.2 6.9 7.9 8l3.1-1.8c.8.7 1.6 1.4 2.5 2L13.8 43l-.8-.5c-.3-.2-6.4-3.9-9.7-9.5C.1 27.4 0 20.2 0 19.9V19l1.3-.8L9 13.9c.5-.3.9-.5 1.4-.7.4-.2.8-.4 1.3-.5 1-.4 2-.6 3-.7 1.4-.2 2.9-.2 4.3 0 2.4.3 4.8 1.2 7.1 2.7 0 1-.4 2-1 2.9-1.9-1.3-4-2.2-6-2.5-3.1-.6-6-.1-8.6 1.4z"],["class","st0"]]),mc([We([["d","M73.9 23c.9 1 1.3 2.3 1.3 3.7 0 1.9-.6 3.4-1.9 4.5-1.3 1.1-3.1 1.7-5.5 1.7h-8.6v-23h8.4c2.3 0 4.1.5 5.3 1.5 1.2 1 1.8 2.4 1.8 4.2 0 1.5-.4 2.7-1.2 3.6-.8.9-1.8 1.5-3.1 1.8 1.5.3 2.6 1 3.5 2zm-11.7-3h5c1.5 0 2.6-.3 3.4-1 .8-.7 1.2-1.6 1.2-2.8 0-1.2-.4-2.1-1.1-2.8-.8-.7-1.9-1-3.5-1h-4.8V20zm8.7 9.4c.9-.7 1.3-1.7 1.3-3s-.4-2.3-1.3-3c-.9-.7-2.1-1.1-3.7-1.1h-5v8.2h5c1.6-.1 2.8-.4 3.7-1.1zM95.3 24.6H81c.1 2.1.6 3.6 1.7 4.6s2.4 1.5 4 1.5c1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.7 1.8-2.9h3.2c-.2 1.2-.7 2.4-1.5 3.3-.8 1-1.7 1.7-2.9 2.3-1.2.5-2.6.8-4.1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 1.7 0 3.3.4 4.6 1.1 1.3.7 2.3 1.7 3 3 .7 1.2 1 2.6 1 4.1.1.7 0 1.2-.1 1.7zm-3.5-4.8c-.5-.9-1.2-1.6-2.1-2-.9-.4-1.8-.7-2.8-.7-1.6 0-3 .5-4.1 1.5-1.1 1-1.7 2.5-1.8 4.5h11.5c0-1.3-.2-2.4-.7-3.3zM111.2 16c1.2.9 2.1 2 2.5 3.5V15h3v18h-3v-4.6c-.5 1.5-1.3 2.6-2.5 3.5-1.2.9-2.7 1.3-4.4 1.3-1.6 0-3-.4-4.3-1.1-1.2-.7-2.2-1.8-2.9-3.2-.7-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.7-1.4 1.7-2.5 2.9-3.2 1.2-.7 2.7-1.1 4.3-1.1 1.7-.1 3.1.4 4.4 1.2zm-8 3.1c-1.1 1.2-1.7 2.8-1.7 4.8 0 2.1.5 3.7 1.7 4.8 1.1 1.2 2.6 1.8 4.4 1.8 1.2 0 2.2-.3 3.2-.8.9-.5 1.7-1.3 2.2-2.3.5-1 .8-2.1.8-3.5 0-1.3-.3-2.5-.8-3.5s-1.2-1.8-2.2-2.3c-.9-.5-2-.8-3.2-.8-1.9.1-3.3.7-4.4 1.8zM135 16.6c1.5 1.2 2.4 2.9 2.8 4.9h-3.1c-.2-1.3-.8-2.3-1.8-3-1-.7-2.2-1.1-3.6-1.1-1 0-2 .2-2.9.7-.9.5-1.6 1.2-2.1 2.2-.5 1-.8 2.2-.8 3.7s.3 2.7.8 3.7 1.2 1.7 2.1 2.2c.9.5 1.8.7 2.9.7 1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.8 1.8-3h3.1c-.3 2.1-1.3 3.7-2.8 4.9-1.5 1.2-3.4 1.8-5.7 1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 2.3-.1 4.2.6 5.7 1.8zM154.5 15.9c1.4.7 2.4 1.8 3.2 3.2.8 1.4 1.2 3 1.2 4.9 0 1.9-.4 3.5-1.2 4.9-.8 1.4-1.8 2.4-3.2 3.2-1.4.7-2.9 1.1-4.6 1.1-1.7 0-3.3-.4-4.6-1.1-1.4-.7-2.4-1.8-3.2-3.2-.8-1.4-1.2-3-1.2-4.9 0-1.9.4-3.5 1.2-4.9.8-1.4 1.9-2.5 3.2-3.2 1.4-.7 2.9-1.1 4.6-1.1 1.7-.1 3.2.3 4.6 1.1zm-7.6 2.2c-.9.5-1.6 1.2-2.2 2.2-.6 1-.8 2.2-.8 3.7 0 1.4.3 2.7.8 3.6.6 1 1.3 1.7 2.2 2.2.9.5 1.9.7 3 .7s2.1-.2 3-.7c.9-.5 1.6-1.2 2.2-2.2.6-1 .8-2.2.8-3.6 0-1.5-.3-2.7-.8-3.7-.6-1-1.3-1.7-2.2-2.2-.9-.5-1.9-.7-3-.7s-2.1.2-3 .7zM177.3 16.7c1.3 1.3 1.9 3.3 1.9 5.8v10.4h-3V22.8c0-1.8-.5-3.2-1.4-4.1-.9-1-2.2-1.4-3.7-1.4-1.6 0-2.9.5-3.9 1.6s-1.5 2.6-1.5 4.6V33h-3V15h3v4.3c.5-1.5 1.3-2.6 2.4-3.4 1.2-.8 2.5-1.2 4-1.2 2.2 0 3.9.6 5.2 2z"],["class","st1"]])])]),K("div",["beacon-modal__close__wrapper"],[["id",`beacon-alert-${n}-close`]],[K("div",["beacon-modal__close__icon"],[],[K("div",["beacon-modal__close__line1"],[],[]),K("div",["beacon-modal__close__line2"],[],[])])])]),K("div",["beacon-modal__base"],[],[K("div",[],[["id","beacon-modal__content"]],[K("div",[],[],[K("p",["beacon-alert__title"],[],e),...i,K("div",["beacon-action__container"],[],t)])])])])]),_c=(n,e,t,i)=>Ro(n,e,t,[K("div",["beacon-alert__text"],[["id","beacon-main-text"]],i)]),Rc=(n,e,t,i)=>Ro(n,e,t,[K("span",[],[["id","pairing-container"]],""),K("div",["beacon-alert__text"],[["id","beacon-main-text"]],[K("p",["beacon-list__title"],[["id","beacon-title"]],[document.createTextNode("Scan QR code with a Beacon-compatible wallet. "),K("a",[],[["href","https://docs.walletbeacon.io/supported-wallets"],["target","_blank"]],"Learn more"),...i])]),K("div",[],[["id","beacon--switch__container"]],[K("button",["beacon-modal__button--outline"],[["id","beacon-switch"]],"")]),K("div",[],[["id","beacon--disclaimer"]],"")]);var dt=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};let Ii,mt;typeof window<"u"&&typeof window.document<"u"&&(mt=window.document);const Oi={},Tc=n=>typeof n=="string"?K("div",[],[["id","beacon--qr__container"]],[K("div",[],[["id","beacon--qr__copy__container"]],[K("button",["beacon-modal__button--outline"],[["id","beacon--qr__copy"]],"Copy")])]):K("span",[],[],""),Sc=(n,e,t,i,r)=>{const o=t,s=i.map((l,h)=>K("button",[`beacon-modal__button${l.style==="outline"?"--outline":""}`],[["id",`beacon-alert-${n}-${h}`]],l.text));let c=Nr.default.css;r&&(c+=Nr.pair.css);const d=K("span",[],[],o),u=r?Rc(n,[d],s,[e]):_c(n,[d],s,[e]);return{style:c,html:u}},An=n=>(oe.postMessage(`closeAlert-${n}`),new Promise(e=>{var t;const i=mt.getElementById(`beacon-alert-wrapper-${n}`);if(!i)return e();const r=(t=i.shadowRoot)===null||t===void 0?void 0:t.getElementById(`beacon-alert-modal-${n}`);if(r){const s=Oi[n];s&&(clearTimeout(s),Oi[n]=void 0),r.className=r.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const c=i.parentNode;c&&c.removeChild(i),Ii&&Ii.focus(),e()},300)}else e()})),Kn=()=>dt(void 0,void 0,void 0,function*(){return new Promise(n=>dt(void 0,void 0,void 0,function*(){const e=mt.querySelectorAll('[id^="beacon-alert-wrapper-"]');if(e.length>0){const t=[];e.forEach(i=>dt(void 0,void 0,void 0,function*(){t.push(i.id.split("-")[3])})),yield Promise.all(t.map(An)),n()}else n()}))}),qt=n=>dt(void 0,void 0,void 0,function*(){var e,t;const i=n.body,r=n.data,o=n.title,s=n.timer,c=n.pairingPayload,d=n.disclaimerText,u=n.closeButtonCallback;yield Kn();const l=(yield vt()).split("-").join(""),h=mt.createElement("div");h.setAttribute("id",`beacon-alert-wrapper-${l}`);const A=h.attachShadow({mode:"open"}),y=mt.createElement("div");y.setAttribute("tabindex","0"),A.appendChild(y);const k=[...(t=(e=n.buttons)===null||e===void 0?void 0:e.map(f=>{var g,m;return{text:f.text,actionCallback:(g=f.actionCallback)!==null&&g!==void 0?g:()=>Promise.resolve(),style:(m=f.style)!==null&&m!==void 0?m:"outline"}}))!==null&&t!==void 0?t:[]];let B=c?Tc(i):K("span",[],[],i??"");r&&(B=K("span",[],[],[B,K("pre",[],[["style","text-align: left"]],r)]));const{style:D,html:q}=Sc(l,B,o,k,!!(c!=null&&c.p2pSyncCode));y.appendChild(q);const H=mt.createElement("style");H.textContent=D,A.appendChild(H),s&&(Oi[l]=window.setTimeout(()=>dt(void 0,void 0,void 0,function*(){yield An(l)}),s)),mt.body.prepend(h);const b=A.getElementById(`beacon-alert-${l}-close`),R=()=>dt(void 0,void 0,void 0,function*(){u&&u(),yield An(l)});if(d){const f=A.getElementById("beacon--disclaimer");f&&(f.innerText=d)}const w=qi(),E=A.getElementById(`beacon-alert-modal-${l}`);E&&(E.classList.add(`theme__${w}`),E.addEventListener("click",R));const a=A.querySelectorAll(".beacon-modal__wrapper");return a.length>0&&a[0].addEventListener("click",f=>{f.stopPropagation()}),Ii=mt.activeElement,y.focus(),k.forEach((f,g)=>{const m=A.getElementById(`beacon-alert-${l}-${g}`);m&&m.addEventListener("click",()=>dt(void 0,void 0,void 0,function*(){yield An(l),f.actionCallback&&(yield f.actionCallback())}))}),b&&b.addEventListener("click",()=>dt(void 0,void 0,void 0,function*(){yield R()})),window.addEventListener("keydown",f=>dt(void 0,void 0,void 0,function*(){f.key==="Escape"&&(yield R())})),c&&(yield wc(l,A,c)),l}),xc={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-toast__base {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 2147483000;
  margin: 0 auto;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
  flex-direction: column;
}
@media (max-width: 576px) {
  .beacon-toast__base {
    top: 8px;
    right: 8px;
    left: 8px;
  }
  .beacon-toast__wallet__outer {
    flex-wrap: wrap;
  }
  .beacon-toast__wallet__link {
    display: flex;
    margin-left: 12px !important;
  }
}

.theme__light.beacon-toast__base {
  background: #fff;
}

.theme__dark.beacon-toast__base {
  background: #27334c;
}

.theme__dark p {
  color: #6183ff;
}

a {
  text-decoration: none;
  color: #3880ff;
}

a svg {
  width: 12px;
  margin-left: 2px;
}

a:visited {
  color: #3880ff;
}

hr {
  height: 1px;
  color: rgba(0, 0, 0, 0.12);
  background-color: rgba(0, 0, 0, 0.12);
  border: none;
  width: 100%;
  margin: 0;
  display: none;
}

.show {
  display: block !important;
}

.hide {
  display: none !important;
}

#beacon-toast-list {
  display: none;
}

.beacon-toast__upside_down {
  transform: rotate(180deg);
}

.beacon-toast__content {
  justify-content: space-between;
  min-height: 56px;
  height: 0;
}

.beacon-toast__action__item,
.beacon-toast__powered a,
.beacon-toast__wallet__container,
#beacon-text,
.beacon-toast__action__item p,
.beacon-toast__wallet__outer {
  align-items: center;
}

.beacon-toast__content,
.beacon-toast__base,
.beacon-toast__action__item,
.beacon-toast__powered a,
#beacon-text,
.beacon-toast__wallet__container,
.beacon-toast__wallet__outer {
  display: flex;
}

.beacon-toast__content,
.beacon-toast__action__item,
.beacon-toast__powered a {
  padding: 0 16px;
  font-family: Roboto, Helvetica, sans-serif;
}

#beacon-text strong {
  display: contents;
}
.beacon-toast__wallet__link {
  margin-left: 8px;
}
.beacon-toast__wallet__link svg {
  margin-left: 4px;
}
.beacon-toast__powered a {
  margin: 4px 0 12px;
  font-size: 12px;
  opacity: 0.64;
}

.beacon-toast__powered svg {
  width: 20px;
  height: 20px;
  margin: 0 2px 0 4px;
}

.beacon-toast__action__item {
  font-size: 14px;
  max-width: 40ch;
}

.beacon-toast__action__item p {
  margin-right: 8px;
}

.beacon-toast__action__item__subtitle,
.beacon-toast__powered a {
  min-width: 88px;
  color: rgba(0, 0, 0, 0.54);
}

.theme__dark .beacon-toast__powered a {
  color: #7c99d6;
}

.beacon-toast__content__img {
  width: 24px;
  height: 24px;
  margin-right: 4px;
  image-rendering: -moz-crisp-edges; /* Firefox */
  image-rendering: -o-crisp-edges; /* Opera */
  image-rendering: -webkit-optimize-contrast; /* Webkit (non-standard naming) */
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor; /* IE (non-standard property) */
}

.beacon-toast__more {
  width: 14px;
  transition: transform 0.5s;
}

a,
.beacon-toast__more {
  cursor: pointer;
}

a:hover {
  opacity: 0.64;
}

.theme__dark .beacon-toast__more {
  color: #7c99d6;
}

.beacon-toast__more--action {
  margin: 8px 0;
}

#beacon-text {
  padding-right: 24px;
}

#beacon-text-content {
  display: flex;
  align-items: center;
}

.progress-line,
.progress-line:before {
  height: 3px;
  width: 100%;
  margin: 0;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}};var De=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};let $e;typeof window<"u"&&typeof window.document<"u"&&($e=window.document);const To=5*1e3;let zt,Cn,Ke;const Nc=n=>De(void 0,void 0,void 0,function*(){const{text:e,isBold:t,actionText:i,actionLogo:r,actionCallback:o}=n,s=yield vt(),c=$e.createElement("div");c.classList.add("beacon-toast__action__item"),Ci(c);const d=u=>K("strong",[],[],u);if(o){e.length>0&&c.appendChild(K("p",[],[],e));const u=K("span",[],[],[K("span",[],[],i),r&&r==="external"?yc():void 0]);c.appendChild(K("p",[],[],[K("a",[],[["id",s]],[t?d([u]):u])]))}else if(i){e.length>0&&c.appendChild(K("p",["beacon-toast__action__item__subtitle"],[],e));const u=K("span",[],[],i);c.appendChild(K("p",[],[],[t?d([u]):u]))}else{const u=K("p",[],[],e);c.appendChild(t?d([u]):u)}return o&&c.addEventListener("click",o),c}),Ci=n=>{for(;n.firstChild;)n.removeChild(n.firstChild)},So=n=>{var e,t;const i=(e=Ke==null?void 0:Ke.walletInfo)===null||e===void 0?void 0:e.icon,r=(t=Ke==null?void 0:Ke.walletInfo)===null||t===void 0?void 0:t.name;let o;const s=K("strong",[],[],r??"Wallet");i?o=K("span",["beacon-toast__wallet__container"],[],[K("img",["beacon-toast__content__img"],[["src",i]],""),s]):o=s;const c=n.split("{{wallet}}");if(c.length===1)return[K("span",[],[],n)];{const d=[];for(let u=0;u<c.length;u++)d.push(K("span",[],[],c[u])),u<c.length-1&&d.push(o);return d}},Ic=n=>{const e=n.body,t=So(e),i=K("span",["beacon-toast__wallet__outer"],[],t),r=Ac([i]);return{style:xc.default.css,html:r}},Ue=()=>new Promise(n=>{var e;Ke=void 0;const t=$e.getElementById("beacon-toast-wrapper");if(!t)return n();const i=(e=t.shadowRoot)===null||e===void 0?void 0:e.getElementById("beacon-toast");i?(zt&&(clearTimeout(zt),zt=void 0),i.className=i.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const o=t.parentNode;o&&o.removeChild(t),n()},300)):n()}),vi=(n,e,t)=>{const i=n.getElementById(e);return i&&i.addEventListener("click",()=>De(void 0,void 0,void 0,function*(){yield t(i)})),i},Hi=(n,e)=>{const t=n.getElementById(e);t&&(t.classList.remove("hide"),t.classList.add("show"))},Fi=(n,e)=>{const t=n.getElementById(e);t&&(t.classList.add("hide"),t.classList.remove("show"))},Oc=n=>{Fi(n,"beacon-toast-loader"),Hi(n,"beacon-toast-loader-placeholder")},Cc=n=>{Hi(n,"beacon-toast-button-expand"),Fi(n,"beacon-toast-button-close")},xo=n=>{Hi(n,"beacon-toast-button-close"),Fi(n,"beacon-toast-button-expand")},No=n=>{const e=n.getElementById("beacon-toast-button-expand"),t=n.getElementById("beacon-toast-list");e&&t&&(e.classList.remove("beacon-toast__upside_down"),t.classList.add("hide"),t.classList.remove("show"))},Io=n=>{const e=n.getElementById("beacon-toast-button-expand"),t=n.getElementById("beacon-toast-list");e&&t&&(e.classList.add("beacon-toast__upside_down"),t.classList.remove("hide"),t.classList.add("show"))},Pi=n=>{const e=n.getElementById("beacon-toast-button-expand"),t=n.getElementById("beacon-toast-list");e&&t&&(e.classList.contains("beacon-toast__upside_down")?No(n):Io(n))},Oo=(n,e,t)=>De(void 0,void 0,void 0,function*(){const i=e.actions;if(i&&i.length>0){const r=i.map(c=>De(void 0,void 0,void 0,function*(){return Nc(c)}));(yield Promise.all(r)).forEach(c=>t.appendChild(c));const s=$e.createElement("small");s.classList.add("beacon-toast__powered"),s.appendChild(bc()),t.appendChild(s),Cc(n)}else xo(n),No(n)}),kr=n=>De(void 0,void 0,void 0,function*(){Ke=n;const e=n.timer,t=$e.createElement("div");t.setAttribute("id","beacon-toast-wrapper");const i=t.attachShadow({mode:"open"}),r=$e.createElement("div"),{style:o,html:s}=Ic(n);r.appendChild(s);const c=$e.createElement("style");c.textContent=o,i.appendChild(r),i.appendChild(c),e&&(zt=window.setTimeout(()=>De(void 0,void 0,void 0,function*(){yield Ue()}),e)),$e.body.prepend(t);const d=qi(),u=i.getElementById("beacon-toast");u&&u.classList.add(`theme__${d}`);const l=i.getElementById("beacon-toast-list");l&&(yield Oo(i,n,l));const h=i.getElementById("beacon-open-wallet");h&&(n.openWalletAction?h.addEventListener("click",()=>{n.openWalletAction&&n.openWalletAction()}):h.classList.add("hide")),Ke.state==="loading"&&(Cn=window.setTimeout(()=>De(void 0,void 0,void 0,function*(){const y=i.getElementById("beacon-toast-button-expand");y&&!y.classList.contains("beacon-toast__upside_down")&&Pi(i)}),To)),vi(i,"beacon-toast-button-done",()=>De(void 0,void 0,void 0,function*(){yield Ue()}));const A=vi(i,"beacon-toast-button-close",()=>De(void 0,void 0,void 0,function*(){yield Ue()}));A&&Ke.state==="loading"&&A.classList.add("hide"),vi(i,"beacon-toast-button-expand",()=>De(void 0,void 0,void 0,function*(){Pi(i)}))}),Pc=n=>De(void 0,void 0,void 0,function*(){Ke=Object.assign(Object.assign({},Ke),n);const e=n.timer,t=$e.getElementById("beacon-toast-wrapper");if(!t)return;const i=t.shadowRoot;if(!i)return;const r=i.getElementById("beacon-toast-list");r&&(Ci(r),yield Oo(i,n,r)),Ke.state==="loading"&&(Cn=window.setTimeout(()=>De(void 0,void 0,void 0,function*(){const d=i.getElementById("beacon-toast-button-expand");d&&!d.classList.contains("beacon-toast__upside_down")&&Pi(i)}),To));const o=i.getElementById("beacon-text-content");o&&(Ci(o),o.appendChild(K("span",["beacon-toast__wallet__outer"],[],So(n.body))));const s=i.getElementById("beacon-open-wallet");s&&(n.openWalletAction?(s.classList.remove("hide"),s.addEventListener("click",()=>{n.openWalletAction&&n.openWalletAction()})):s.classList.add("hide")),e&&(zt=window.setTimeout(()=>De(void 0,void 0,void 0,function*(){yield Ue()}),e));const c=i.getElementById("beacon-toast-button-done");c&&c.addEventListener("click",()=>De(void 0,void 0,void 0,function*(){yield Ue()}))}),wt=n=>De(void 0,void 0,void 0,function*(){var e;if(Cn&&clearTimeout(Cn),$e.getElementById("beacon-toast-wrapper")?n.forceNew?(yield Ue(),yield kr(n)):yield Pc(n):yield kr(n),Ke&&Ke.state==="finished"){const i=(e=$e.getElementById("beacon-toast-wrapper"))===null||e===void 0?void 0:e.shadowRoot;i&&(Oc(i),xo(i),Io(i))}}),jn=n=>n.length>=12?`${n.substr(0,5)}...${n.substr(-5)}`:n;var de=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const $t=new je("BeaconEvents"),rn=5*1e3;var L;(function(n){n.PERMISSION_REQUEST_SENT="PERMISSION_REQUEST_SENT",n.PERMISSION_REQUEST_SUCCESS="PERMISSION_REQUEST_SUCCESS",n.PERMISSION_REQUEST_ERROR="PERMISSION_REQUEST_ERROR",n.OPERATION_REQUEST_SENT="OPERATION_REQUEST_SENT",n.OPERATION_REQUEST_SUCCESS="OPERATION_REQUEST_SUCCESS",n.OPERATION_REQUEST_ERROR="OPERATION_REQUEST_ERROR",n.SIGN_REQUEST_SENT="SIGN_REQUEST_SENT",n.SIGN_REQUEST_SUCCESS="SIGN_REQUEST_SUCCESS",n.SIGN_REQUEST_ERROR="SIGN_REQUEST_ERROR",n.BROADCAST_REQUEST_SENT="BROADCAST_REQUEST_SENT",n.BROADCAST_REQUEST_SUCCESS="BROADCAST_REQUEST_SUCCESS",n.BROADCAST_REQUEST_ERROR="BROADCAST_REQUEST_ERROR",n.ACKNOWLEDGE_RECEIVED="ACKNOWLEDGE_RECEIVED",n.LOCAL_RATE_LIMIT_REACHED="LOCAL_RATE_LIMIT_REACHED",n.NO_PERMISSIONS="NO_PERMISSIONS",n.ACTIVE_ACCOUNT_SET="ACTIVE_ACCOUNT_SET",n.ACTIVE_TRANSPORT_SET="ACTIVE_TRANSPORT_SET",n.SHOW_PREPARE="SHOW_PREPARE",n.HIDE_UI="HIDE_UI",n.PAIR_INIT="PAIR_INIT",n.PAIR_SUCCESS="PAIR_SUCCESS",n.CHANNEL_CLOSED="CHANNEL_CLOSED",n.INTERNAL_ERROR="INTERNAL_ERROR",n.UNKNOWN="UNKNOWN"})(L||(L={}));const vn=n=>de(void 0,void 0,void 0,function*(){let e;const t=[];if(n.walletInfo.deeplink&&(n.walletInfo.type==="web"||n.walletInfo.type==="mobile"&&xi(window)||n.walletInfo.type==="desktop"&&!xi(window))){const i=n.walletInfo.deeplink;e=()=>de(void 0,void 0,void 0,function*(){const r=document.createElement("a");r.setAttribute("href",i),r.setAttribute("target","_blank"),r.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))})}t.push({text:"No answer from your wallet received yet. Please make sure the wallet is open.",isBold:!0}),t.push({text:"Did you make a mistake?",actionText:"Cancel Request",actionCallback:()=>de(void 0,void 0,void 0,function*(){yield Ue()})}),t.push({text:"Wallet not receiving request?",actionText:"Reset Connection",actionCallback:()=>de(void 0,void 0,void 0,function*(){yield Ue();const i=n.extraInfo.resetCallback;i&&($t.log("showSentToast","resetCallback invoked"),yield i())})}),wt({body:"Request sent to  {{wallet}}",walletInfo:n.walletInfo,state:"loading",actions:t,openWalletAction:e}).catch(i=>console.error(i))}),kc=n=>de(void 0,void 0,void 0,function*(){wt({body:"Awaiting confirmation in  {{wallet}}",state:"acknowledge",walletInfo:n.walletInfo}).catch(e=>console.error(e))}),Lc=n=>de(void 0,void 0,void 0,function*(){const e=n.walletInfo?"Preparing Request for  {{wallet}}...":"Preparing Request...";wt({body:e,state:"prepare",walletInfo:n.walletInfo}).catch(t=>console.error(t))}),Mc=n=>de(void 0,void 0,void 0,function*(){n?(n.includes("alert")&&Kn(),n.includes("toast")&&Ue()):Ue()}),Uc=()=>de(void 0,void 0,void 0,function*(){yield qt({title:"No Permission",body:"Please allow the wallet to handle this type of request."})}),pn=(n,e)=>de(void 0,void 0,void 0,function*(){var t,i,r,o,s,c;const d=n.errorResponse.errorType?Fe.getError(n.errorResponse.errorType,n.errorResponse.errorData):new Zr,u=[{text:d.title,isBold:!0}];if(n.errorResponse.errorType===le.TRANSACTION_INVALID_ERROR&&n.errorResponse.errorData){const l=n.errorResponse.errorData,h=n.errorMessages;let A=!1;if(!((t=l[0])===null||t===void 0)&&t.contract_handle&&h&&(h!=null&&h[l[0].contract_handle])){const y=(o=(r=(i=l[1])===null||i===void 0?void 0:i.with)===null||r===void 0?void 0:r.int)!==null&&o!==void 0?o:(c=(s=l[1])===null||s===void 0?void 0:s.with)===null||c===void 0?void 0:c.string,k=h==null?void 0:h[l[0].contract_handle];y&&(k!=null&&k[y])&&(u.push({text:k==null?void 0:k[y],isBold:!0}),A=!0)}A||u.push({text:d.description}),u.push({text:"",actionText:"Show Details",actionCallback:()=>de(void 0,void 0,void 0,function*(){yield Ue(),yield qt({title:d.title,body:d.fullDescription.description,data:d.fullDescription.data,buttons:e})})})}yield wt({body:"{{wallet}}  has returned an error",timer:n.errorResponse.errorType===le.ABORTED_ERROR?rn:void 0,state:"finished",walletInfo:n.walletInfo,actions:u})}),Bc=()=>de(void 0,void 0,void 0,function*(){qt({title:"Error",body:"Rate limit reached. Please slow down",buttons:[{text:"Done",style:"outline"}],timer:3e3}).catch(n=>console.error(n))}),Dc=()=>de(void 0,void 0,void 0,function*(){yield Kn()}),Kc=()=>de(void 0,void 0,void 0,function*(){yield qt({title:"Channel closed",body:"Your peer has closed the connection.",buttons:[{text:"Done",style:"outline"}],timer:1500})}),jc=n=>de(void 0,void 0,void 0,function*(){var e;const t=[...(e=n.buttons)!==null&&e!==void 0?e:[]];t.push({text:"Done",style:"outline"});const i={title:"Internal Error",body:n.text,buttons:t};yield qt(i)}),Gc=n=>de(void 0,void 0,void 0,function*(){const e={title:"Choose your preferred wallet",body:"<p></p>",pairingPayload:{p2pSyncCode:n.p2pPeerInfo,postmessageSyncCode:n.postmessagePeerInfo,preferredNetwork:n.preferredNetwork},closeButtonCallback:n.abortedHandler,disclaimerText:n.disclaimerText};yield qt(e)}),qc=n=>de(void 0,void 0,void 0,function*(){const{output:e}=n;yield wt({body:"{{wallet}}  has granted permission",timer:rn,walletInfo:n.walletInfo,state:"finished",actions:[{text:"Address",actionText:jn(e.address),isBold:!0},{text:"Network",actionText:`${e.network.type}`},{text:"Permissions",actionText:e.scopes.join(", ")}]})}),Hc=n=>de(void 0,void 0,void 0,function*(){const{account:e,output:t,blockExplorer:i}=n;yield wt({body:"{{wallet}}  successfully submitted operation",timer:rn,state:"finished",walletInfo:n.walletInfo,actions:[{text:jn(t.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>de(void 0,void 0,void 0,function*(){const r=yield i.getTransactionLink(t.transactionHash,e.network);window.open(r,"_blank"),yield Ue()})}]})}),Fc=n=>de(void 0,void 0,void 0,function*(){const e=n.output;yield wt({body:"{{wallet}}  successfully signed payload",timer:rn,state:"finished",walletInfo:n.walletInfo,actions:[{text:`Signature: ${jn(e.signature)}`,actionText:"Copy to clipboard",actionCallback:()=>de(void 0,void 0,void 0,function*(){navigator.clipboard.writeText(e.signature).then(()=>{$t.log("showSignSuccessAlert","Copying to clipboard was successful!")},t=>{$t.error("showSignSuccessAlert","Could not copy text to clipboard: ",t)}),yield Ue()})}]})}),Qc=n=>de(void 0,void 0,void 0,function*(){const{network:e,output:t,blockExplorer:i}=n;yield wt({body:"{{wallet}}  successfully injected operation",timer:rn,state:"finished",walletInfo:n.walletInfo,actions:[{text:jn(t.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>de(void 0,void 0,void 0,function*(){const r=yield i.getTransactionLink(t.transactionHash,e);window.open(r,"_blank"),yield Ue()})}]})}),pi=()=>()=>de(void 0,void 0,void 0,function*(){}),he={[L.PERMISSION_REQUEST_SENT]:vn,[L.PERMISSION_REQUEST_SUCCESS]:qc,[L.PERMISSION_REQUEST_ERROR]:pn,[L.OPERATION_REQUEST_SENT]:vn,[L.OPERATION_REQUEST_SUCCESS]:Hc,[L.OPERATION_REQUEST_ERROR]:pn,[L.SIGN_REQUEST_SENT]:vn,[L.SIGN_REQUEST_SUCCESS]:Fc,[L.SIGN_REQUEST_ERROR]:pn,[L.BROADCAST_REQUEST_SENT]:vn,[L.BROADCAST_REQUEST_SUCCESS]:Qc,[L.BROADCAST_REQUEST_ERROR]:pn,[L.ACKNOWLEDGE_RECEIVED]:kc,[L.LOCAL_RATE_LIMIT_REACHED]:Bc,[L.NO_PERMISSIONS]:Uc,[L.ACTIVE_ACCOUNT_SET]:pi(),[L.ACTIVE_TRANSPORT_SET]:pi(),[L.SHOW_PREPARE]:Lc,[L.HIDE_UI]:Mc,[L.PAIR_INIT]:Gc,[L.PAIR_SUCCESS]:Dc,[L.CHANNEL_CLOSED]:Kc,[L.INTERNAL_ERROR]:jc,[L.UNKNOWN]:pi()};class Lr{constructor(e={},t){this.callbackMap={[L.PERMISSION_REQUEST_SENT]:[he.PERMISSION_REQUEST_SENT],[L.PERMISSION_REQUEST_SUCCESS]:[he.PERMISSION_REQUEST_SUCCESS],[L.PERMISSION_REQUEST_ERROR]:[he.PERMISSION_REQUEST_ERROR],[L.OPERATION_REQUEST_SENT]:[he.OPERATION_REQUEST_SENT],[L.OPERATION_REQUEST_SUCCESS]:[he.OPERATION_REQUEST_SUCCESS],[L.OPERATION_REQUEST_ERROR]:[he.OPERATION_REQUEST_ERROR],[L.SIGN_REQUEST_SENT]:[he.SIGN_REQUEST_SENT],[L.SIGN_REQUEST_SUCCESS]:[he.SIGN_REQUEST_SUCCESS],[L.SIGN_REQUEST_ERROR]:[he.SIGN_REQUEST_ERROR],[L.BROADCAST_REQUEST_SENT]:[he.BROADCAST_REQUEST_SENT],[L.BROADCAST_REQUEST_SUCCESS]:[he.BROADCAST_REQUEST_SUCCESS],[L.BROADCAST_REQUEST_ERROR]:[he.BROADCAST_REQUEST_ERROR],[L.ACKNOWLEDGE_RECEIVED]:[he.ACKNOWLEDGE_RECEIVED],[L.LOCAL_RATE_LIMIT_REACHED]:[he.LOCAL_RATE_LIMIT_REACHED],[L.NO_PERMISSIONS]:[he.NO_PERMISSIONS],[L.ACTIVE_ACCOUNT_SET]:[he.ACTIVE_ACCOUNT_SET],[L.ACTIVE_TRANSPORT_SET]:[he.ACTIVE_TRANSPORT_SET],[L.SHOW_PREPARE]:[he.SHOW_PREPARE],[L.HIDE_UI]:[he.HIDE_UI],[L.PAIR_INIT]:[he.PAIR_INIT],[L.PAIR_SUCCESS]:[he.PAIR_SUCCESS],[L.CHANNEL_CLOSED]:[he.CHANNEL_CLOSED],[L.INTERNAL_ERROR]:[he.INTERNAL_ERROR],[L.UNKNOWN]:[he.UNKNOWN]},t&&this.setAllHandlers(),this.overrideDefaults(e)}on(e,t){return de(this,void 0,void 0,function*(){const i=this.callbackMap[e]||[];i.push(t),this.callbackMap[e]=i})}emit(e,t,i){return de(this,void 0,void 0,function*(){const r=this.callbackMap[e];r&&r.length>0&&r.forEach(o=>de(this,void 0,void 0,function*(){try{yield o(t,i)}catch(s){$t.error(`error handling event ${e}`,s)}}))})}overrideDefaults(e){Object.keys(e).forEach(t=>{const i=t,r=e[i];r&&(this.callbackMap[i]=[r.handler])})}setAllHandlers(e){Object.keys(this.callbackMap).forEach(t=>{const i=t;this.callbackMap[i]=[],e?this.callbackMap[i].push(e):this.callbackMap[i].push((...r)=>{$t.log(t,...r)})})}}const gn={[$.BlockchainRequest]:{sent:L.UNKNOWN,success:L.UNKNOWN,error:L.UNKNOWN},[$.BlockchainResponse]:{sent:L.UNKNOWN,success:L.UNKNOWN,error:L.UNKNOWN},[$.PermissionRequest]:{sent:L.PERMISSION_REQUEST_SENT,success:L.PERMISSION_REQUEST_SUCCESS,error:L.PERMISSION_REQUEST_ERROR},[$.PermissionResponse]:{sent:L.UNKNOWN,success:L.UNKNOWN,error:L.UNKNOWN},[$.OperationRequest]:{sent:L.OPERATION_REQUEST_SENT,success:L.OPERATION_REQUEST_SUCCESS,error:L.OPERATION_REQUEST_ERROR},[$.OperationResponse]:{sent:L.UNKNOWN,success:L.UNKNOWN,error:L.UNKNOWN},[$.SignPayloadRequest]:{sent:L.SIGN_REQUEST_SENT,success:L.SIGN_REQUEST_SUCCESS,error:L.SIGN_REQUEST_ERROR},[$.SignPayloadResponse]:{sent:L.UNKNOWN,success:L.UNKNOWN,error:L.UNKNOWN},[$.BroadcastRequest]:{sent:L.BROADCAST_REQUEST_SENT,success:L.BROADCAST_REQUEST_SUCCESS,error:L.BROADCAST_REQUEST_ERROR},[$.BroadcastResponse]:{sent:L.UNKNOWN,success:L.UNKNOWN,error:L.UNKNOWN},[$.Acknowledge]:{sent:L.UNKNOWN,success:L.UNKNOWN,error:L.UNKNOWN},[$.Disconnect]:{sent:L.UNKNOWN,success:L.UNKNOWN,error:L.UNKNOWN},[$.Error]:{sent:L.UNKNOWN,success:L.UNKNOWN,error:L.UNKNOWN}};var Vc=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class Wc{constructor(e){this.rpcUrls=e}getLinkForNetwork(e){return Vc(this,void 0,void 0,function*(){return this.rpcUrls[e.type]})}}var Mr=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};class Jc extends Wc{constructor(e={[Ee.MAINNET]:"https://tzkt.io",[Ee.GHOSTNET]:"https://ghostnet.tzkt.io",[Ee.MONDAYNET]:"https://mondaynet.tzkt.io",[Ee.DAILYNET]:"https://dailynet.tzkt.io",[Ee.DELPHINET]:"https://delphinet.tzkt.io",[Ee.EDONET]:"https://edonet.tzkt.io",[Ee.FLORENCENET]:"https://florencenet.tzkt.io",[Ee.GRANADANET]:"https://granadanet.tzkt.io",[Ee.HANGZHOUNET]:"https://hangzhounet.tzkt.io",[Ee.ITHACANET]:"https://ithacanet.tzkt.io",[Ee.JAKARTANET]:"https://jakartanet.tzkt.io",[Ee.KATHMANDUNET]:"https://kathmandunet.tzkt.io",[Ee.CUSTOM]:"https://kathmandunet.tzkt.io"}){super(e),this.rpcUrls=e}getAddressLink(e,t){return Mr(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(t)}/${e}`})}getTransactionLink(e,t){return Mr(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(t)}/${e}`})}}var En=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const gi=new je("DappPostMessageTransport");class Xc extends nn{constructor(e,t,i){super(e,t,i,Z.TRANSPORT_POSTMESSAGE_PEERS_DAPP)}startOpenChannelListener(){return En(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>En(this,void 0,void 0,function*(){gi.log("connect","received PostMessagePairingResponse",e),yield this.addPeer(e),this._isConnected=Je.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return En(this,void 0,void 0,function*(){gi.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return En(this,void 0,void 0,function*(){gi.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var mn=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const Ei=new je("DappP2PTransport");class Yc extends tc{constructor(e,t,i,r,o,s){super(e,t,i,r,Z.TRANSPORT_P2P_PEERS_DAPP,o,s)}startOpenChannelListener(){return mn(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>mn(this,void 0,void 0,function*(){Ei.log("listenForNewPeer","new publicKey",e.publicKey),yield this.addPeer(e),this._isConnected=Je.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return mn(this,void 0,void 0,function*(){Ei.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return mn(this,void 0,void 0,function*(){Ei.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var J=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(l){try{u(i.next(l))}catch(h){s(h)}}function d(l){try{u(i.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):r(l.value).then(c,d)}u((i=i.apply(n,e||[])).next())})};const pe=new je("DAppClient");class el extends ks{constructor(e){var t,i,r,o,s;super(Object.assign({storage:e&&e.storage?e.storage:new qs},e)),this.events=new Lr,this.openRequests=new Map,this._activeAccount=new be,this._activePeer=new be,this.blockchains=new Map,this.events=new Lr(e.eventHandlers,(t=e.disableDefaultEvents)!==null&&t!==void 0?t:!1),this.blockExplorer=(i=e.blockExplorer)!==null&&i!==void 0?i:new Jc,this.preferredNetwork=(r=e.preferredNetwork)!==null&&r!==void 0?r:Ee.MAINNET,Pr((o=e.colorMode)!==null&&o!==void 0?o:Tn.LIGHT),this.disclaimerText=e.disclaimerText,this.errorMessages=(s=e.errorMessages)!==null&&s!==void 0?s:{},this.appMetadataManager=new Hs(this.storage),this.activeAccountLoaded=this.storage.get(Z.ACTIVE_ACCOUNT).then(c=>J(this,void 0,void 0,function*(){c?yield this.setActiveAccount(yield this.accountManager.getAccount(c)):yield this.setActiveAccount(void 0)})).catch(c=>J(this,void 0,void 0,function*(){yield this.setActiveAccount(void 0),console.error(c)})),this.handleResponse=(c,d)=>J(this,void 0,void 0,function*(){var u,l;const h=this.openRequests.get(c.id);if(pe.log("handleResponse","Received message",c,d),c.version==="3"){const A=c;if(h&&A.message.type===$.Acknowledge)pe.log(`acknowledge message received for ${c.id}`),console.timeLog(c.id,"acknowledge"),this.events.emit(L.ACKNOWLEDGE_RECEIVED,{message:A.message,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(h){const y=A.message.blockchainData.appMetadata;A.message.type===$.PermissionResponse&&y&&(yield this.appMetadataManager.addAppMetadata(y)),console.timeLog(A.id,"response"),console.timeEnd(A.id),A.message.type===$.Error?h.reject(A.message):h.resolve({message:c,connectionInfo:d}),this.openRequests.delete(A.id)}else if(A.message.type===$.Disconnect){const y=d.origin===Ze.P2P?this.p2pTransport:(u=this.postMessageTransport)!==null&&u!==void 0?u:yield this.transport;if(y){const B=(yield y.getPeers()).find(D=>D.senderId===c.senderId);B?(yield y.removePeer(B),yield this.removeAccountsForPeers([B]),yield this.events.emit(L.CHANNEL_CLOSED)):pe.error("handleDisconnect","cannot find peer for sender ID",c.senderId)}}else pe.error("handleResponse","no request found for id ",c.id,c)}else{const A=c;if(h&&A.type===$.Acknowledge)pe.log(`acknowledge message received for ${c.id}`),console.timeLog(c.id,"acknowledge"),this.events.emit(L.ACKNOWLEDGE_RECEIVED,{message:A,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(h)A.type===$.PermissionResponse&&A.appMetadata&&(yield this.appMetadataManager.addAppMetadata(A.appMetadata)),console.timeLog(A.id,"response"),console.timeEnd(A.id),A.type===$.Error||c.errorType?h.reject(A):h.resolve({message:c,connectionInfo:d}),this.openRequests.delete(A.id);else if(A.type===$.Disconnect||c.typedMessage.type===$.Disconnect){const y=d.origin===Ze.P2P?this.p2pTransport:(l=this.postMessageTransport)!==null&&l!==void 0?l:yield this.transport;if(y){const B=(yield y.getPeers()).find(D=>D.senderId===c.senderId);B?(yield y.removePeer(B),yield this.removeAccountsForPeers([B]),yield this.events.emit(L.CHANNEL_CLOSED)):pe.error("handleDisconnect","cannot find peer for sender ID",c.senderId)}}else pe.error("handleResponse","no request found for id ",c.id,c)}})}initInternalTransports(){return J(this,void 0,void 0,function*(){const e=yield this.keyPair;this.postMessageTransport||this.p2pTransport||(this.postMessageTransport=new Xc(this.name,e,this.storage),yield this.addListener(this.postMessageTransport),this.p2pTransport=new Yc(this.name,e,this.storage,this.matrixNodes,this.iconUrl,this.appUrl),yield this.addListener(this.p2pTransport))})}init(e){const t=Object.create(null,{init:{get:()=>super.init}});return J(this,void 0,void 0,function*(){if(this._initPromise)return this._initPromise;try{yield this.activeAccountLoaded}catch{}return this._initPromise=new Promise(i=>J(this,void 0,void 0,function*(){if(e)yield this.addListener(e),i(yield t.init.call(this,e));else if(this._transport.isSettled())yield(yield this.transport).connect(),i(yield t.init.call(this,yield this.transport));else{const r=yield this.getActiveAccount(),o=()=>{this.postMessageTransport&&this.postMessageTransport.stopListeningForNewPeers().catch(console.error),this.p2pTransport&&this.p2pTransport.stopListeningForNewPeers().catch(console.error)};if(yield this.initInternalTransports(),!this.postMessageTransport||!this.p2pTransport)return;if(this.postMessageTransport.connect().then().catch(console.error),r&&r.origin){const s=r.origin.type;s===Ze.EXTENSION?i(yield t.init.call(this,this.postMessageTransport)):s===Ze.P2P&&i(yield t.init.call(this,this.p2pTransport))}else{const s=this.p2pTransport,c=this.postMessageTransport;c.listenForNewPeer(d=>{pe.log("init","postmessage transport peer connected",d),this.events.emit(L.PAIR_SUCCESS,d).catch(u=>console.warn(u)),this.setActivePeer(d).catch(console.error),this.setTransport(this.postMessageTransport).catch(console.error),o(),i(Nt.POST_MESSAGE)}).catch(console.error),s.listenForNewPeer(d=>{pe.log("init","p2p transport peer connected",d),this.events.emit(L.PAIR_SUCCESS,d).catch(u=>console.warn(u)),this.setActivePeer(d).catch(console.error),this.setTransport(this.p2pTransport).catch(console.error),o(),i(Nt.P2P)}).catch(console.error),nn.getAvailableExtensions().then(()=>J(this,void 0,void 0,function*(){this.events.emit(L.PAIR_INIT,{p2pPeerInfo:()=>(s.connect().then().catch(console.error),s.getPairingRequestInfo()),postmessagePeerInfo:()=>c.getPairingRequestInfo(),preferredNetwork:this.preferredNetwork,abortedHandler:()=>{console.log("ABORTED"),this._initPromise=void 0},disclaimerText:this.disclaimerText}).catch(d=>console.warn(d))})).catch(d=>{this._initPromise=void 0,console.error(d)})}}})),this._initPromise})}getActiveAccount(){return J(this,void 0,void 0,function*(){return this._activeAccount.promise})}setActiveAccount(e){return J(this,void 0,void 0,function*(){if(this._activeAccount.isSettled()?this._activeAccount=be.resolve(e):this._activeAccount.resolve(e),e){const t=e.origin.type;yield this.initInternalTransports(),t===Ze.EXTENSION?yield this.setTransport(this.postMessageTransport):t===Ze.P2P&&(yield this.setTransport(this.p2pTransport));const i=yield this.getPeer(e);yield this.setActivePeer(i)}else yield this.setActivePeer(void 0),yield this.setTransport(void 0);yield this.storage.set(Z.ACTIVE_ACCOUNT,e?e.accountIdentifier:void 0),yield this.events.emit(L.ACTIVE_ACCOUNT_SET,e)})}clearActiveAccount(){return this.setActiveAccount()}setColorMode(e){return J(this,void 0,void 0,function*(){return Pr(e)})}getColorMode(){return J(this,void 0,void 0,function*(){return qi()})}getAppMetadata(){return J(this,void 0,void 0,function*(){return this.getOwnAppMetadata()})}showPrepare(){return J(this,void 0,void 0,function*(){const e=yield(()=>J(this,void 0,void 0,function*(){try{return yield this.getWalletInfo()}catch{return}}))();yield this.events.emit(L.SHOW_PREPARE,{walletInfo:e})})}hideUI(e){return J(this,void 0,void 0,function*(){yield this.events.emit(L.HIDE_UI,e)})}removeAccount(e){const t=Object.create(null,{removeAccount:{get:()=>super.removeAccount}});return J(this,void 0,void 0,function*(){const i=t.removeAccount.call(this,e),r=yield this.getActiveAccount();return r&&r.accountIdentifier===e&&(yield this.setActiveAccount(void 0)),i})}removeAllAccounts(){const e=Object.create(null,{removeAllAccounts:{get:()=>super.removeAllAccounts}});return J(this,void 0,void 0,function*(){yield e.removeAllAccounts.call(this),yield this.setActiveAccount(void 0)})}removePeer(e,t=!1){return J(this,void 0,void 0,function*(){const i=yield this.transport,r=i.removePeer(e);return yield this.removeAccountsForPeers([e]),t&&(yield this.sendDisconnectToPeer(e,i)),r})}removeAllPeers(e=!1){return J(this,void 0,void 0,function*(){const t=yield this.transport,i=yield t.getPeers(),r=t.removeAllPeers();if(yield this.removeAccountsForPeers(i),e){const o=i.map(s=>this.sendDisconnectToPeer(s,t));yield Promise.all(o)}return r})}subscribeToEvent(e,t){return J(this,void 0,void 0,function*(){yield this.events.on(e,t)})}checkPermissions(e){return J(this,void 0,void 0,function*(){if(e===$.PermissionRequest)return!0;const t=yield this.getActiveAccount();if(!t)throw yield this.sendInternalError("No active account set!");const i=t.scopes;switch(e){case $.OperationRequest:return i.includes(nt.OPERATION_REQUEST);case $.SignPayloadRequest:return i.includes(nt.SIGN);case $.BroadcastRequest:return!0;default:return!1}})}sendNotification(e,t,i,r){var o,s,c;return J(this,void 0,void 0,function*(){const d=yield this.getActiveAccount();if(!d||d&&!d.scopes.includes(nt.NOTIFICATION)&&!d.notification)throw new Error("notification permissions not given");if(!(!((o=d.notification)===null||o===void 0)&&o.token))throw new Error("No AccessToken");const u=(s=d.notification)===null||s===void 0?void 0:s.apiUrl;if(!u)throw new Error("No Push URL set");return this.sendNotificationWithAccessToken({url:u,recipient:d.address,title:e,body:t,payload:i,protocolIdentifier:r,accessToken:(c=d.notification)===null||c===void 0?void 0:c.token})})}addBlockchain(e){this.blockchains.set(e.identifier,e),e.getWalletLists().then(t=>{vc(t.desktopList),pc(t.extensionList),gc(t.webList),Ec(t.iOSList)})}removeBlockchain(e){this.blockchains.delete(e)}permissionRequest(e){return J(this,void 0,void 0,function*(){console.log("PERMISSION REQUEST");const t=this.blockchains.get(e.blockchainIdentifier);if(!t)throw new Error(`Blockchain "${e.blockchainIdentifier}" not supported by dAppClient`);const i=Object.assign(Object.assign({},e),{type:$.PermissionRequest,blockchainData:Object.assign(Object.assign({},e.blockchainData),{appMetadata:yield this.getOwnAppMetadata()})});console.log("REQUESTION PERMIMISSION V3","xxx",i);const{message:r,connectionInfo:o}=yield this.makeRequestV3(i).catch(d=>J(this,void 0,void 0,function*(){throw new Error("TODO")}));console.log("RESPONSE V3",r,o);const s=yield t.getAccountInfosFromPermissionResponse(r.message),c={accountIdentifier:s[0].accountId,senderId:r.senderId,origin:{type:o.origin,id:o.id},address:s[0].address,publicKey:s[0].publicKey,scopes:r.message.blockchainData.scopes,connectedAt:new Date().getTime(),chainData:r.message.blockchainData};return yield this.accountManager.addAccount(c),yield this.setActiveAccount(c),yield t.handleResponse({request:i,account:c,output:r,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),yield this.notifySuccess(i,{account:c,output:{address:s[0].address,network:{type:Ee.MAINNET},scopes:[nt.OPERATION_REQUEST]},blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),r.message})}request(e){return J(this,void 0,void 0,function*(){console.log("REQUEST",e);const t=this.blockchains.get(e.blockchainIdentifier);if(!t)throw new Error(`Blockchain "${t}" not supported by dAppClient`);yield t.validateRequest(e);const i=yield this.getActiveAccount();if(!i)throw yield this.sendInternalError("No active account!");const r=Object.assign(Object.assign({},e),{type:$.BlockchainRequest,accountId:i.accountIdentifier}),{message:o,connectionInfo:s}=yield this.makeRequestV3(r).catch(c=>J(this,void 0,void 0,function*(){throw console.error(c),new Error("TODO")}));return yield t.handleResponse({request:r,account:i,output:o,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),o.message})}requestPermissions(e){return J(this,void 0,void 0,function*(){const t={appMetadata:yield this.getOwnAppMetadata(),type:$.PermissionRequest,network:e&&e.network?e.network:{type:Ee.MAINNET},scopes:e&&e.scopes?e.scopes:[nt.OPERATION_REQUEST,nt.SIGN]},{message:i,connectionInfo:r}=yield this.makeRequest(t).catch(u=>J(this,void 0,void 0,function*(){throw yield this.handleRequestError(t,u)})),o=i.publicKey||i.pubkey||i.pubKey,s=yield ls(o),c={accountIdentifier:yield _i(s,i.network),senderId:i.senderId,origin:{type:r.origin,id:r.id},address:s,publicKey:o,network:i.network,scopes:i.scopes,threshold:i.threshold,notification:i.notification,connectedAt:new Date().getTime()};yield this.accountManager.addAccount(c),yield this.setActiveAccount(c);const d=Object.assign(Object.assign({},i),{address:s,accountInfo:c});return yield this.notifySuccess(t,{account:c,output:d,blockExplorer:this.blockExplorer,connectionContext:r,walletInfo:yield this.getWalletInfo()}),d})}requestSignPayload(e){return J(this,void 0,void 0,function*(){if(!e.payload)throw yield this.sendInternalError("Payload must be provided");const t=yield this.getActiveAccount();if(!t)throw yield this.sendInternalError("No active account!");const i=e.payload;if(typeof i!="string")throw new Error("Payload must be a string");const r=(()=>{switch(e.signingType){case gt.OPERATION:if(!i.startsWith("03"))throw new Error('When using signing type "OPERATION", the payload must start with prefix "03"');return gt.OPERATION;case gt.MICHELINE:if(!i.startsWith("05"))throw new Error('When using signing type "MICHELINE", the payload must start with prefix "05"');return gt.MICHELINE;case gt.RAW:default:return gt.RAW}})(),o={type:$.SignPayloadRequest,signingType:r,payload:i,sourceAddress:e.sourceAddress||t.address},{message:s,connectionInfo:c}=yield this.makeRequest(o).catch(d=>J(this,void 0,void 0,function*(){throw yield this.handleRequestError(o,d)}));return yield this.notifySuccess(o,{account:t,output:s,connectionContext:c,walletInfo:yield this.getWalletInfo()}),s})}requestOperation(e){return J(this,void 0,void 0,function*(){if(!e.operationDetails)throw yield this.sendInternalError("Operation details must be provided");const t=yield this.getActiveAccount();if(!t)throw yield this.sendInternalError("No active account!");const i={type:$.OperationRequest,network:t.network||{type:Ee.MAINNET},operationDetails:e.operationDetails,sourceAddress:t.address||""},{message:r,connectionInfo:o}=yield this.makeRequest(i).catch(s=>J(this,void 0,void 0,function*(){throw yield this.handleRequestError(i,s)}));return yield this.notifySuccess(i,{account:t,output:r,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),r})}requestBroadcast(e){return J(this,void 0,void 0,function*(){if(!e.signedTransaction)throw yield this.sendInternalError("Signed transaction must be provided");const t=e.network||{type:Ee.MAINNET},i={type:$.BroadcastRequest,network:t,signedTransaction:e.signedTransaction},{message:r,connectionInfo:o}=yield this.makeRequest(i).catch(s=>J(this,void 0,void 0,function*(){throw yield this.handleRequestError(i,s)}));return yield this.notifySuccess(i,{network:t,output:r,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),r})}setActivePeer(e){return J(this,void 0,void 0,function*(){this._activePeer.isSettled()?this._activePeer=be.resolve(e):this._activePeer.resolve(e),e&&(yield this.initInternalTransports(),e.type==="postmessage-pairing-response"?yield this.setTransport(this.postMessageTransport):e.type==="p2p-pairing-response"&&(yield this.setTransport(this.p2pTransport)))})}setTransport(e){const t=Object.create(null,{setTransport:{get:()=>super.setTransport}});return J(this,void 0,void 0,function*(){e||(this._initPromise=void 0);const i=t.setTransport.call(this,e);return yield this.events.emit(L.ACTIVE_TRANSPORT_SET,e),i})}sendInternalError(e){return J(this,void 0,void 0,function*(){throw yield this.events.emit(L.INTERNAL_ERROR,{text:e}),new Error(e)})}removeAccountsForPeers(e){return J(this,void 0,void 0,function*(){const t=yield this.accountManager.getAccounts(),i=e.map(c=>c.senderId),o=t.filter(c=>i.includes(c.senderId)).map(c=>c.accountIdentifier);yield this.accountManager.removeAccounts(o);const s=yield this.getActiveAccount();s&&o.includes(s.accountIdentifier)&&(yield this.setActiveAccount(void 0))})}handleRequestError(e,t){return J(this,void 0,void 0,function*(){if(pe.error("handleRequestError","error response",t),t.errorType){const i=[];if(t.errorType===le.NO_PRIVATE_KEY_FOUND_ERROR){const s=()=>J(this,void 0,void 0,function*(){const c=e;let d;if(c.sourceAddress&&c.network){const u=yield _i(c.sourceAddress,c.network);d=yield this.getAccount(u),d&&(yield this.removeAccount(d.accountIdentifier))}});i.push({text:"Remove account",actionCallback:s})}const r=yield this.getPeer(),o=yield this.getActiveAccount();throw e.type===$.PermissionRequest&&(yield this.getActiveAccount())===void 0&&(this._initPromise=void 0,this.postMessageTransport=void 0,this.p2pTransport=void 0,yield this.setTransport(),yield this.setActivePeer()),this.events.emit(gn[e.type].error,{errorResponse:t,walletInfo:yield this.getWalletInfo(r,o),errorMessages:this.errorMessages},i).catch(s=>pe.error("handleRequestError",s)),Fe.getError(t.errorType,t.errorData)}throw t})}notifySuccess(e,t){return J(this,void 0,void 0,function*(){this.events.emit(gn[e.type].success,t).catch(i=>console.warn(i))})}getWalletInfo(e,t){var i,r;return J(this,void 0,void 0,function*(){const o=t||(yield this.getActiveAccount()),s=e||(yield this.getPeer(o));let c;o&&(c=yield this.appMetadataManager.getAppMetadata(o.senderId));const d=s;c||(c={name:d.name,icon:d.icon});const u=(A,y)=>A&&y?A.toLowerCase()===y.toLowerCase():!1;let l,h;if(Yt().find(A=>u(A.name,c==null?void 0:c.name))?(l=Yt().find(A=>u(A.name,c==null?void 0:c.name)),h="mobile"):Ni().find(A=>u(A.name,c==null?void 0:c.name))?(l=Ni().find(A=>u(A.name,c==null?void 0:c.name)),h="web"):On().find(A=>u(A.name,c==null?void 0:c.name))?(l=On().find(A=>u(A.name,c==null?void 0:c.name)),h="desktop"):Xt().find(A=>u(A.name,c==null?void 0:c.name))&&(l=Xt().find(A=>u(A.name,c==null?void 0:c.name)),h="extension"),l){let A;return l.hasOwnProperty("links")?A=l.links[(i=o==null?void 0:o.network.type)!==null&&i!==void 0?i:this.preferredNetwork]:l.hasOwnProperty("deepLink")&&(A=l.deepLink),{name:c.name,icon:(r=c.icon)!==null&&r!==void 0?r:l.logo,deeplink:A,type:h}}return c})}getPeer(e){var t,i,r,o;return J(this,void 0,void 0,function*(){let s;if(e){pe.log("getPeer","We have an account",e);const c=(i=yield(t=this.postMessageTransport)===null||t===void 0?void 0:t.getPeers())!==null&&i!==void 0?i:[],d=(o=yield(r=this.p2pTransport)===null||r===void 0?void 0:r.getPeers())!==null&&o!==void 0?o:[],u=[...c,...d];pe.log("getPeer","Found peers",u,e),s=u.find(l=>l.senderId===e.senderId),s||(s=u.find(l=>l.extensionId===e.origin.id))}else s=yield this._activePeer.promise,pe.log("getPeer","Active peer",s);if(!s)throw new Error("No matching peer found.");return s})}makeRequest(e){var t;return J(this,void 0,void 0,function*(){const i=yield vt();if(console.time(i),pe.log("makeRequest","starting"),yield this.init(),console.timeLog(i,"init done"),pe.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(L.LOCAL_RATE_LIMIT_REACHED).catch(l=>console.warn(l)),new Error("rate limit reached");if(!(yield this.checkPermissions(e.type)))throw this.events.emit(L.NO_PERMISSIONS).catch(l=>console.warn(l)),new Error("No permissions to send this request to wallet!");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const r=Object.assign({id:i,version:"2",senderId:yield Kt(yield this.beaconId)},e),o=new be;this.addOpenRequest(r.id,o);const s=yield new It().serialize(r),c=yield this.getActiveAccount(),d=yield this.getPeer(c),u=yield this.getWalletInfo(d,c);pe.log("makeRequest","sending message",r),console.timeLog(i,"sending");try{yield(yield this.transport).send(s,d)}catch(l){throw this.events.emit(L.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>J(this,void 0,void 0,function*(){yield Ue(),this.disconnect()})}]}),console.timeLog(i,"send error"),l}return console.timeLog(i,"sent"),this.events.emit(gn[e.type].sent,{walletInfo:Object.assign(Object.assign({},u),{name:(t=u.name)!==null&&t!==void 0?t:"Wallet"}),extraInfo:{resetCallback:()=>J(this,void 0,void 0,function*(){this.disconnect()})}}).catch(l=>console.warn(l)),o.promise})}makeRequestV3(e){var t;return J(this,void 0,void 0,function*(){const i=yield vt();if(console.time(i),pe.log("makeRequest","starting"),yield this.init(),console.timeLog(i,"init done"),pe.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(L.LOCAL_RATE_LIMIT_REACHED).catch(h=>console.warn(h)),new Error("rate limit reached");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const r={id:i,version:"3",senderId:yield Kt(yield this.beaconId),message:e},o=new be;this.addOpenRequest(r.id,o);const s=yield new It().serialize(r),c=yield this.getActiveAccount(),d=yield this.getPeer(c),u=yield this.getWalletInfo(d,c);pe.log("makeRequest","sending message",r),console.timeLog(i,"sending");try{yield(yield this.transport).send(s,d)}catch(h){throw this.events.emit(L.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>J(this,void 0,void 0,function*(){yield Ue(),this.disconnect()})}]}),console.timeLog(i,"send error"),h}console.timeLog(i,"sent");const l=e.type;return this.events.emit(gn[l].sent,{walletInfo:Object.assign(Object.assign({},u),{name:(t=u.name)!==null&&t!==void 0?t:"Wallet"}),extraInfo:{resetCallback:()=>J(this,void 0,void 0,function*(){this.disconnect()})}}).catch(h=>console.warn(h)),o.promise})}disconnect(){return J(this,void 0,void 0,function*(){this.postMessageTransport=void 0,this.p2pTransport=void 0,yield Promise.all([this.clearActiveAccount(),(yield this.transport).disconnect()])})}addOpenRequest(e,t){pe.log("addOpenRequest",this.name,`adding request ${e} and waiting for answer`),this.openRequests.set(e,t)}sendNotificationWithAccessToken(e){return J(this,void 0,void 0,function*(){const{url:t,recipient:i,title:r,body:o,payload:s,protocolIdentifier:c,accessToken:d}=e,u=new Date().toISOString(),l=yield this.keyPair,h=l.publicKey,A=Buffer.from(new Uint8Array([13,15,37,217])),y=Co.encode(Buffer.concat([A,Buffer.from(h)])),k=["Tezos Signed Message: ",i,r,o,u,s].join(" "),B=ft(k),D="0501"+B.length.toString(16).padStart(8,"0")+B,q=yield hs(D,{secretKey:Buffer.from(l.secretKey)});return(yield Po.post(`${t}/send`,{recipient:i,title:r,body:o,timestamp:u,payload:s,accessToken:d,protocolIdentifier:c,sender:{name:this.name,publicKey:y,signature:q}})).data})}}export{Tn as C,el as D,Ee as N,nt as P,Yi as T};
