import{d as w,x as C,y as I,r as d,w as B,e as D,s as y,o as b,f as U,g as e,h as n,j as p,I as h,i as P,t as A,k as E,F as S,n as m,L,T as z,_ as F,l as N,m as T,v as H}from"./main-34b72f39.js";const u=a=>(N("data-v-d6d37f2b"),a=a(),T(),a),K={class:"center"},j={class:"card z-depth-2"},M={class:"content"},O=u(()=>e("div",{class:"icon-wrap center pv-2"},[e("i",{class:"las la-3x la-cloud"})],-1)),$=u(()=>e("div",{class:"headline pv-3"},"Connect your Remote Signer",-1)),q=u(()=>e("div",{class:"pt-1 space-1"},null,-1)),G={key:0,class:"error-text pt-2"},J=u(()=>e("div",{class:"pv-2 space-2",style:{"grid-row":"9","grid-colum":"1"}},null,-1)),Q={class:"buttons pt-0 pb-2"},W=w({__name:"RemoteSignerDialog",props:{context:null},emits:["cancel","confirm"],setup(a,{emit:f}){const s=a,g=C("Baker Address"),x=I("Remote Signer Url"),r=d(""),c=d(""),i=d(void 0),l=d(!1);let v=!1;B(()=>s.context.active,t=>{if(t)v=!1;else{l.value=!1,i.value=void 0;return}});const k=D(()=>l.value||y(g.value,t=>t(r.value)!==!0)||y(x.value,t=>t(c.value)!==!0)),R=async()=>{try{l.value=!0;const{RemoteSession:t}=await F(()=>import("./RemoteSignerSession-9282c7e0.js"),["assets/RemoteSignerSession-9282c7e0.js","assets/main-34b72f39.js","assets/index-b9d33df4.css","assets/SessionBase-8b70e21a.js","assets/taquito.es6-f55643bf.js","assets/DAppClient-0e874b97.js"]),o=await t.create(r.value,c.value,s.context.networkId,{rpc:s.context.rpc});if(v&&o){o.logout();return}typeof s.context.confirm=="function"&&s.context.confirm(o),f("confirm",o)}catch(t){i.value=`Failed to login with ledger!
Error: ${t.message}`}finally{l.value=!1}},V=()=>{v=!0,typeof s.context.cancel=="function"&&s.context.cancel(),f("cancel")};return(t,o)=>(b(),U(z,{to:"#dialog"},[e("div",{class:m(["modal",{"modal-active":a.context.active}]),key:"remoteSignerDialog"},[e("div",K,[e("div",j,[e("div",M,[O,$,n(h,{type:"text",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=_=>r.value=_),label:"Baker PKH",hint:"PKH of your baker",rules:p(g)},null,8,["modelValue","rules"]),n(h,{type:"text",modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=_=>c.value=_),label:"Remote Signer Url",hint:"Url pointing to your signer instance",rules:p(x)},null,8,["modelValue","rules"]),q,i.value?(b(),P("div",G,A(i.value),1)):E("",!0),J,e("div",Q,[n(S,{onClick:V,label:"Cancel"}),n(S,{class:m(["confirm-btn",{disabled:p(k)}]),onClick:R,label:"Connect"},null,8,["class"])])]),e("div",{class:m(["loader-wrap",{"loader-hidden":!l.value}])},[n(L,{class:"loader","is-indeterminate":!0,label:"Please confirm operation on your ledger..."})],2)])])],2)]))}});const Y=H(W,[["__scopeId","data-v-d6d37f2b"]]);export{Y as default};
