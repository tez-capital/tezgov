import{_ as l,H as v,K as m,N as y}from"./main.8de698c1.js";import{N as f,C as A}from"./DAppClient.0f8bb82b.js";import"./index.c7b5a5ee.js";let t;const p=async e=>({name:"TEZGOV",iconUrl:"https://tezgov.app/icon/favicon.png",preferredNetwork:e!=null?e:f.MAINNET,eventHandlers:{},colorMode:A.DARK}),g=async(e,o)=>{const s=await v({method:"get",url:"/assets/styles/beacon.css"}),c=new Promise((r,a)=>{m(document.body,n=>{const i=n;if(typeof i.id=="string"&&i.id.startsWith("beacon-alert-wrapper")){const d=i==null?void 0:i.shadowRoot;if(d){y(d,s.data);const w=d.querySelector(".beacon-modal__close__wrapper");w&&w.addEventListener("click",()=>a("closed"))}return i.style.display="block",!0}return!1})}),_=e.requestPermissions(o);await Promise.race([c,_])},u=async(e,o)=>{await e.client.getActiveAccount()||await g(e,{network:o})},h=async(e,o)=>{if(t!==void 0)if((o==null?void 0:o.useCached)===!0){const r=t;return await u(r,{type:e}),r}else t.disconnect(),t.clearActiveAccount(),t=void 0;const{BeaconWallet:s}=await l(()=>import("./taquito-beacon-wallet.es6.eb082d82.js"),["assets/taquito-beacon-wallet.es6.eb082d82.js","assets/DAppClient.0f8bb82b.js","assets/main.8de698c1.js","assets/index.dec37447.css","assets/index.c7b5a5ee.js","assets/taquito.es6.980d28b3.js","assets/taquito-http-utils.es6.39d3f08c.js","assets/taquito-utils.es6.ee50ee00.js"]),c=t!=null?t:new s(await p(e));return t=c,await u(c,{type:e}),c},R=async()=>{const{BeaconWallet:e}=await l(()=>import("./taquito-beacon-wallet.es6.eb082d82.js"),["assets/taquito-beacon-wallet.es6.eb082d82.js","assets/DAppClient.0f8bb82b.js","assets/main.8de698c1.js","assets/index.dec37447.css","assets/index.c7b5a5ee.js","assets/taquito.es6.980d28b3.js","assets/taquito-http-utils.es6.39d3f08c.js","assets/taquito-utils.es6.ee50ee00.js"]),o=t!=null?t:new e(await p());t=o;const s=await o.client.getActiveAccount();return{active:!!s,networkId:s==null?void 0:s.network.type}},T=async(e="mainnet",o)=>{const{create_toolkit:s}=await l(()=>import("./taquito.22cee858.js"),["assets/taquito.22cee858.js","assets/taquito.es6.980d28b3.js","assets/taquito-http-utils.es6.39d3f08c.js","assets/main.8de698c1.js","assets/index.dec37447.css","assets/taquito-utils.es6.ee50ee00.js","assets/index.c7b5a5ee.js"]),{tezos:c,forger:_}=await s(o.rpc),r=await h(e,o);c.setWalletProvider(r);const a=await r.client.getActiveAccount(),n=a!=null&&a.address?await c.rpc.getManagerKey(a==null?void 0:a.address):void 0;return{wallet:r,account:a==null?void 0:a.address,tezos:c,forger:_,managerKey:n==null?void 0:n.toString()}},b=async()=>{t==null||t.disconnect(),t=void 0};export{T as connect_beacon_wallet,h as create_beacon_wallet,b as disconnect_beacon_wallet,R as has_active_account};
