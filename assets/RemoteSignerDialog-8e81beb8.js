import{_ as C}from"./taquito-utils.es6-2790dd94.js";import{d as I,r as u,w as B,c as D,s as x,o as y,a as U,b as e,e as c,u as v,I as S,f as P,t as A,g as E,F as k,n as f,L,T as z,p as F,h as N,i as T}from"./main-0e7f43b8.js";import{a as H,b as K}from"./rules-8e180ef6.js";import"./_commonjsHelpers-6dff16f2.js";const _=a=>(F("data-v-d6d37f2b"),a=a(),N(),a),M={class:"center"},O={class:"card z-depth-2"},$={class:"content"},j=_(()=>e("div",{class:"icon-wrap center pv-2"},[e("i",{class:"las la-3x la-cloud"})],-1)),q=_(()=>e("div",{class:"headline pv-3"},"Connect your Remote Signer",-1)),G=_(()=>e("div",{class:"pt-1 space-1"},null,-1)),J={key:0,class:"error-text pt-2"},Q=_(()=>e("div",{class:"pv-2 space-2",style:{"grid-row":"9","grid-colum":"1"}},null,-1)),W={class:"buttons pt-0 pb-2"},X=I({__name:"RemoteSignerDialog",props:{context:null},emits:["cancel","confirm"],setup(a,{emit:g}){const s=a,b=H("Baker Address"),h=K("Remote Signer Url"),r=u(""),i=u(""),d=u(void 0),n=u(!1);let m=!1;B(()=>s.context.active,t=>{if(t)m=!1;else{n.value=!1,d.value=void 0;return}});const R=D(()=>n.value||x(b.value,t=>t(r.value)!==!0)||x(h.value,t=>t(i.value)!==!0));let l;const V=async()=>{try{n.value=!0;const{RemoteSession:t}=await C(()=>import("./RemoteSignerSession-6df1e41c.js"),["assets/RemoteSignerSession-6df1e41c.js","assets/main-0e7f43b8.js","assets/taquito-utils.es6-2790dd94.js","assets/_commonjsHelpers-6dff16f2.js","assets/index-29a899e9.css","assets/SessionBase-d217152b.js","assets/taquito.es6-14c09632.js","assets/index-9aada285.js","assets/DAppClient-e2aae175.js"]),o=await t.create(r.value,i.value,s.context.networkId,{rpc:s.context.rpc});if(m&&o){o.logout();return}typeof s.context.confirm=="function"&&s.context.confirm(o),g("confirm",o)}catch(t){d.value=`Failed to login with ledger!
Error: ${t.message}`,l==null||l.close()}finally{n.value=!1}},w=()=>{m=!0,l==null||l.close(),typeof s.context.cancel=="function"&&s.context.cancel(),g("cancel")};return(t,o)=>(y(),U(z,{to:"#dialog"},[e("div",{class:f(["modal",{"modal-active":a.context.active}]),key:"remoteSignerDialog"},[e("div",M,[e("div",O,[e("div",$,[j,q,c(S,{type:"text",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=p=>r.value=p),label:"Baker PKH",hint:"PKH of your baker",rules:v(b)},null,8,["modelValue","rules"]),c(S,{type:"text",modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=p=>i.value=p),label:"Remote Signer Url",hint:"Url pointing to your signer instance",rules:v(h)},null,8,["modelValue","rules"]),G,d.value?(y(),P("div",J,A(d.value),1)):E("",!0),Q,e("div",W,[c(k,{onClick:w,label:"Cancel"}),c(k,{class:f(["confirm-btn",{disabled:v(R)}]),onClick:V,label:"Connect"},null,8,["class"])])]),e("div",{class:f(["loader-wrap",{"loader-hidden":!n.value}])},[c(L,{class:"loader","is-indeterminate":!0,label:"Please confirm operation on your ledger..."})],2)])])],2)]))}});const oe=T(X,[["__scopeId","data-v-d6d37f2b"]]);export{oe as default};
