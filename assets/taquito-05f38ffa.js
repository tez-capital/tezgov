import{h as jt,H as dt,T as Tt,M as Dt,R as qt,l as Ft}from"./taquito.es6-0764cd35.js";import{a2 as c0,ae as It,af as ee,V as I0,ag as Yr,ah as $t,ai as ve,aj as me,ak as Ut,al as Nt,P as M0,Z as Wt,p as Lt,am as ge,M as Gt,an as Xt,ao as Zt,ap as Qt,ab as Yt,a8 as T,aq as Jt}from"./main-31999e94.js";import"./DAppClient-0df61cf3.js";var pt;class rn extends Error{constructor(r){super(`The map type '${r}' is invalid`),this.mapType=r,this.name="InvalidMapTypeError"}}const lt=Symbol.for("taquito-michelson-map-type-symbol"),en=c=>"args"in c&&Array.isArray(c.args)&&c.args.length===2;class ye extends Error{constructor(r,e,t){super(`${t} not compliant with underlying michelson type`),this.value=r,this.type=e,this.name="MapTypecheckError"}}class s0{constructor(r){this.valueMap=new Map,this.keyMap=new Map,this[pt]=!0,r&&this.setType(r)}static isMichelsonMap(r){return r&&r[lt]===!0}setType(r){if(!en(r))throw new rn(r.toString());this.keySchema=new L0(r.args[0]),this.valueSchema=new L0(r.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(r,e){const t=new s0(e);return Object.keys(r).forEach(n=>{t.set(n,r[n])}),t}typecheckKey(r){return this.keySchema?this.keySchema.Typecheck(r):!0}typecheckValue(r){return this.valueSchema?this.valueSchema.Typecheck(r):!0}assertTypecheckValue(r){if(!this.typecheckValue(r))throw new ye(r,this.valueSchema,"value")}assertTypecheckKey(r){if(!this.typecheckKey(r))throw new ye(r,this.keySchema,"key")}serializeDeterministically(r){return jt(r)}*keys(){for(const[r]of this.entries())yield r}*values(){for(const[,r]of this.entries())yield r}*entries(){for(const r of this.valueMap.keys())yield[this.keyMap.get(r),this.valueMap.get(r)]}get(r){this.assertTypecheckKey(r);const e=this.serializeDeterministically(r);return this.valueMap.get(e)}set(r,e){this.assertTypecheckKey(r),this.assertTypecheckValue(e);const t=this.serializeDeterministically(r);this.keyMap.set(t,r),this.valueMap.set(t,e)}delete(r){this.assertTypecheckKey(r),this.keyMap.delete(this.serializeDeterministically(r)),this.valueMap.delete(this.serializeDeterministically(r))}has(r){this.assertTypecheckKey(r);const e=this.serializeDeterministically(r);return this.keyMap.has(e)&&this.valueMap.has(e)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(r){for(const[e,t]of this.entries())r(t,e,this)}}pt=lt;class $ extends Error{constructor(r,e,t){super(),this.value=r,this.token=e,this.name="ValidationError";const n=this.token.annot(),s=n?`[${n}] `:"";this.message=`${s}${t}`}}class Z{constructor(r,e,t){this.val=r,this.idx=e,this.fac=t,this.createToken=this.fac}typeWithoutAnnotations(){const r=t=>{if(typeof t=="object"){if(Array.isArray(t))return t.map(v=>r(v));const n=t;return n.args?{prim:n.prim,args:n.args.map(s=>r(s))}:{prim:n.prim}}return t};return(t=>t.args?{prim:t.prim,args:t.args.map(n=>r(n))}:{prim:t.prim})(this.val)}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.ExtractSchema()]]}}class G extends Z{compare(r,e){return r===e?0:r<e?-1:1}}class be extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="BigMapValidationError"}}class n0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}ExtractSchema(){return{big_map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:n0.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}isValid(r){return s0.isMichelsonMap(r)?null:new be(r,this,"Value must be a MichelsonMap")}objLitToMichelsonMap(r){return r instanceof s0?r:typeof r=="object"?Object.keys(r).length===0?new s0:s0.fromLiteral(r):r}Encode(r){const e=this.objLitToMichelsonMap(r.pop()),t=this.isValid(e);if(t)throw t;return Array.from(e.keys()).sort((n,s)=>this.KeySchema.compare(n,s)).map(n=>({prim:"Elt",args:[this.KeySchema.EncodeObject(n),this.ValueSchema.EncodeObject(e.get(n))]}))}EncodeObject(r,e){const t=this.objLitToMichelsonMap(r),n=this.isValid(t);if(n)throw n;return e&&e[n0.prim]?e[n0.prim](t,this.val):Array.from(t.keys()).sort((s,v)=>this.KeySchema.compare(s,v)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(t.get(s))]}))}Execute(r,e){if(e&&e[n0.prim])return e[n0.prim](r,this.val);if(Array.isArray(r)){const t=new s0(this.val);return r.forEach(n=>{t.set(this.KeySchema.ToKey(n.args[0]),this.ValueSchema.Execute(n.args[1]))}),t}else{if("int"in r)return r.int;throw new be(r,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(r)}`)}}findAndReturnTokens(r,e){return n0.prim===r&&e.push(this),this.KeySchema.findAndReturnTokens(r,e),this.ValueSchema.findAndReturnTokens(r,e),e}}n0.prim="big_map";class tn extends Error{constructor(r){super(r),this.message=r,this.name="OrTokenDecodingError"}}class q extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Encode(r){const e=r[r.length-1],t=this.createToken(this.val.args[0],this.idx);let n=1;t instanceof q&&(n=Object.keys(t.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+n);if(String(t.annot())===String(e)&&!(t instanceof q))return r.pop(),{prim:"Left",args:[t.Encode(r)]};if(String(s.annot())===String(e)&&!(s instanceof q))return r.pop(),{prim:"Right",args:[s.Encode(r)]};if(t instanceof q){const v=t.Encode(r);if(v)return{prim:"Left",args:[v]}}if(s instanceof q){const v=s.Encode(r);if(v)return{prim:"Right",args:[v]}}return null}ExtractSignature(){const r=this.createToken(this.val.args[0],this.idx);let e=1;r instanceof q&&(e=Object.keys(r.ExtractSchema()).length);const t=this.createToken(this.val.args[1],this.idx+e),n=[];if(r instanceof q)n.push(...r.ExtractSignature());else for(const s of r.ExtractSignature())n.push([r.annot(),...s]);if(t instanceof q)n.push(...t.ExtractSignature());else for(const s of t.ExtractSignature())n.push([t.annot(),...s]);return n}EncodeObject(r,e){const t=Object.keys(r)[0],n=this.createToken(this.val.args[0],this.idx);let s=1;n instanceof q&&(s=Object.keys(n.ExtractSchema()).length);const v=this.createToken(this.val.args[1],this.idx+s);if(String(n.annot())===String(t)&&!(n instanceof q))return{prim:"Left",args:[n.EncodeObject(r[t],e)]};if(String(v.annot())===String(t)&&!(v instanceof q))return{prim:"Right",args:[v.EncodeObject(r[t],e)]};if(n instanceof q){const d=n.EncodeObject(r,e);if(d)return{prim:"Left",args:[d]}}if(v instanceof q){const d=v.EncodeObject(r,e);if(d)return{prim:"Right",args:[d]}}return null}Execute(r,e){const t=this.createToken(this.val.args[0],this.idx);let n=1;t instanceof q&&(n=Object.keys(t.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+n);if(r.prim==="Right")return s instanceof q?s.Execute(r.args[0],e):{[s.annot()]:s.Execute(r.args[0],e)};if(r.prim==="Left")return t instanceof q?t.Execute(r.args[0],e):{[t.annot()]:t.Execute(r.args[0],e)};throw new tn(`Was expecting Left or Right prim but got: ${r.prim}`)}traversal(r,e,t){const n=this.createToken(this.val.args[0],this.idx);let s=1,v;n instanceof q&&!n.hasAnnotations()?(v=r(n),s=Object.keys(n.ExtractSchema()).length):v={[n.annot()]:r(n)};const d=this.createToken(this.val.args[1],this.idx+s);let m;return d instanceof q&&!d.hasAnnotations()?m=e(d):m={[d.annot()]:e(d)},t(v,m)}ExtractSchema(){return this.traversal(r=>r.ExtractSchema(),r=>r.ExtractSchema(),(r,e)=>Object.assign(Object.assign({},r),e))}generateSchema(){return{__michelsonType:q.prim,schema:this.traversal(r=>r instanceof q&&!r.hasAnnotations()?r.generateSchema().schema:r.generateSchema(),r=>r instanceof q&&!r.hasAnnotations()?r.generateSchema().schema:r.generateSchema(),(r,e)=>Object.assign(Object.assign({},r),e))}}findToken(r){const e=this.createToken(this.val.args[0],this.idx);let t=1;e instanceof q&&(t=Object.keys(e.ExtractSchema()).length);const n=this.createToken(this.val.args[1],this.idx+t);if(String(e.annot())===String(r)&&!(e instanceof q)&&e instanceof G)return e;if(String(n.annot())===String(r)&&!(n instanceof q)&&n instanceof G)return n;if(e instanceof q){const s=e.findToken(r);if(s)return s}if(n instanceof q){const s=n.findToken(r);if(s)return s}return null}compare(r,e){const t=Object.keys(r)[0],n=Object.keys(e)[0];if(t===n){const s=this.findToken(t);if(s instanceof G)return s.compare(r[t],e[t])}else{const s=JSON.stringify(this.EncodeObject(r)),v=JSON.stringify(this.EncodeObject(e));return s<v?-1:1}}ToKey(r){return this.Execute(r)}ToBigMapKey(r){return{key:this.EncodeObject(r),type:this.typeWithoutAnnotations()}}findAndReturnTokens(r,e){return q.prim===r&&e.push(this),this.traversal(t=>t.findAndReturnTokens(r,e),t=>t.findAndReturnTokens(r,e),(t,n)=>Object.assign(Object.assign({},t),n)),e}}q.prim="or";class nn extends Error{constructor(r){super(r),this.message=r,this.name="TokenArgumentValidationError"}}class sn extends Error{constructor(r,e){super(`Tokens ${r} and ${e} are not comparable`),this.val1=r,this.val2=e,this.name="TokenComparisonError"}}function Jr(c,r=X.prim){if(Array.isArray(c))return Jr({prim:r,args:c},r);if(c.args===void 0)throw new nn("Encountered an invalid PairToken with no arguments, a pair must have two or more arguments");return c.args.length>2?[c.args[0],{prim:r,args:c.args.slice(1)}]:[c.args[0],c.args[1]]}class X extends G{constructor(r,e,t){super(Array.isArray(r)?{prim:X.prim,args:r}:r.prim?r:{prim:X.prim,args:r},e,t)}args(){return Jr(this.val)}tokens(){let r=0;return this.args().map(e=>{const t=this.createToken(e,this.idx+r);return t instanceof X?r+=Object.keys(t.ExtractSchema()).length:r++,t})}Encode(r){return{prim:"Pair",args:this.tokens().map(e=>e.Encode(r))}}ExtractSignature(){const r=this.args(),e=this.createToken(r[0],this.idx);let t=1;e instanceof q&&(t=Object.keys(e.ExtractSchema()).length);const n=this.createToken(r[1],this.idx+t),s=[];for(const v of e.ExtractSignature())for(const d of n.ExtractSignature())s.push([...v,...d]);return s}ToBigMapKey(r){return{key:this.EncodeObject(r),type:this.typeWithoutAnnotations()}}ToKey(r){return this.Execute(r)}EncodeObject(r,e){const[t,n]=this.tokens();let s;t instanceof X&&!t.hasAnnotations()?s=r:s=r[t.annot()];let v;return n instanceof X&&!n.hasAnnotations()?v=r:v=r[n.annot()],{prim:"Pair",args:[t.EncodeObject(s,e),n.EncodeObject(v,e)]}}traversal(r,e){const t=this.args(),n=this.createToken(t[0],this.idx);let s=1,v;n instanceof X&&(s=Object.keys(n.ExtractSchema()).length),n instanceof X&&!n.hasAnnotations()?v=r(n):v={[n.annot()]:r(n)};const d=this.createToken(t[1],this.idx+s);let m;return d instanceof X&&!d.hasAnnotations()?m=e(d):m={[d.annot()]:e(d)},Object.assign(Object.assign({},v),m)}Execute(r,e){const t=Jr(r,"Pair");return this.traversal(n=>n.Execute(t[0],e),n=>n.Execute(t[1],e))}ExtractSchema(){return this.traversal(r=>r.ExtractSchema(),r=>r.ExtractSchema())}generateSchema(){return{__michelsonType:X.prim,schema:this.traversal(r=>r instanceof X&&!r.hasAnnotations()?r.generateSchema().schema:r.generateSchema(),r=>r instanceof X&&!r.hasAnnotations()?r.generateSchema().schema:r.generateSchema())}}compare(r,e){const[t,n]=this.tokens(),s=(v,d)=>v instanceof X&&!v.hasAnnotations()?d:d[v.annot()];if(t instanceof G&&n instanceof G){const v=t.compare(s(t,r),s(t,e));return v===0?n.compare(s(n,r),s(n,e)):v}throw new sn(r,e)}findAndReturnTokens(r,e){return X.prim===r&&e.push(this),this.tokens().map(t=>t.findAndReturnTokens(r,e)),e}}X.prim="pair";class Ee extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="NatValidationError"}}class h0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){return new c0(r[Object.keys(r)[0]])}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return{int:new c0(e).toFixed()}}isValid(r){const e=new c0(r);return e.isNaN()?new Ee(r,this,`Value is not a number: ${r}`):e.isNegative()?new Ee(r,this,`Value cannot be negative: ${r}`):null}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[h0.prim]?e[h0.prim](r):{int:new c0(r).toFixed()}}ExtractSchema(){return h0.prim}generateSchema(){return{__michelsonType:h0.prim,schema:h0.prim}}ToBigMapKey(r){return{key:{int:String(r)},type:{prim:h0.prim}}}ToKey({int:r}){return new c0(r)}compare(r,e){const t=Number(r),n=Number(e);return t===n?0:t<n?-1:1}findAndReturnTokens(r,e){return h0.prim===r&&e.push(this),e}}h0.prim="nat";class x0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){return r[Object.keys(r)[0]]}ExtractSchema(){return x0.prim}generateSchema(){return{__michelsonType:x0.prim,schema:x0.prim}}Encode(r){return{string:r.pop()}}EncodeObject(r,e){return e&&e[x0.prim]?e[x0.prim](r):{string:r}}ToKey({string:r}){return r}ToBigMapKey(r){return{key:{string:r},type:{prim:x0.prim}}}findAndReturnTokens(r,e){return x0.prim===r&&e.push(this),e}}x0.prim="string";class Xr extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="AddressValidationError"}}class A0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}ToBigMapKey(r){return{key:{bytes:It(r)},type:{prim:"bytes"}}}isValid(r){return ee(r)!==I0.VALID?new Xr(r,this,`Address is not valid: ${r}`):null}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return{string:e}}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[A0.prim]?e[A0.prim](r):{string:r}}Execute(r){if(r.string)return r.string;if(!r.bytes)throw new Xr(r,this,`cannot be missing both string and bytes: ${r}`);return Yr(r.bytes)}ExtractSchema(){return A0.prim}generateSchema(){return{__michelsonType:A0.prim,schema:A0.prim}}ToKey({bytes:r,string:e}){if(e)return e;if(!r)throw new Xr({bytes:r,string:e},this,`cannot be missing both string and bytes ${{string:e,bytes:r}}`);return Yr(r)}compare(r,e){const t=v=>v.startsWith("tz"),n=t(r),s=t(e);return n&&!s?-1:s&&!n?1:super.compare(r,e)}findAndReturnTokens(r,e){return A0.prim===r&&e.push(this),e}}A0.prim="address";class an extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="MapValidationError"}}class F0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(r){return s0.isMichelsonMap(r)?null:new an(r,this,"Value must be a MichelsonMap")}Execute(r,e){const t=new s0(this.val);return r.forEach(n=>{t.set(this.KeySchema.ToKey(n.args[0]),this.ValueSchema.Execute(n.args[1],e))}),t}objLitToMichelsonMap(r){return r instanceof s0?r:typeof r=="object"?Object.keys(r).length===0?new s0:s0.fromLiteral(r):r}Encode(r){const e=this.objLitToMichelsonMap(r.pop()),t=this.isValid(e);if(t)throw t;return Array.from(e.keys()).sort((n,s)=>this.KeySchema.compare(n,s)).map(n=>({prim:"Elt",args:[this.KeySchema.EncodeObject(n),this.ValueSchema.EncodeObject(e.get(n))]}))}EncodeObject(r,e){const t=this.objLitToMichelsonMap(r),n=this.isValid(t);if(n)throw n;return e&&e[F0.prim]?e[F0.prim](t):Array.from(t.keys()).sort((s,v)=>this.KeySchema.compare(s,v)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(t.get(s))]}))}ExtractSchema(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:F0.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(r,e){return F0.prim===r&&e.push(this),this.KeySchema.findAndReturnTokens(r,e),this.ValueSchema.findAndReturnTokens(r,e),e}}F0.prim="map";class u0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){return String(r.prim).toLowerCase()==="true"}Encode(r){return{prim:r.pop()?"True":"False"}}EncodeObject(r,e){return e&&e[u0.prim]?e[u0.prim](r):{prim:r?"True":"False"}}ExtractSchema(){return u0.prim}generateSchema(){return{__michelsonType:u0.prim,schema:u0.prim}}ToBigMapKey(r){return{key:this.EncodeObject(r),type:{prim:u0.prim}}}ToKey(r){return this.EncodeObject(r)}compare(r,e){return r&&e||!r&&!e?0:r?1:-1}findAndReturnTokens(r,e){return u0.prim===r&&e.push(this),e}}u0.prim="bool";class cr extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="TxRollupL2AddressValidationError"}}class B0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}ToBigMapKey(r){return{key:{bytes:$t(r)},type:{prim:"bytes"}}}isValid(r){if(ee(r)!==I0.VALID)throw new cr(r,this,`tx_rollup_l2_address is not valid: ${r}`);return null}Encode(r){const e=r.pop();if(!e)throw new cr(e,this,`arg missing to encode: this -> "${e}"`);return this.isValid(e),{string:e}}EncodeObject(r,e){return this.isValid(r),e&&e[B0.prim]?e[B0.prim](r):{string:r}}Execute(r){if(r.string)return r.string;if(!r.bytes)throw new cr(r,this,`value cannot be missing string and byte value. must have one ${JSON.stringify(r)}`);return ve(r.bytes)}ExtractSchema(){return B0.prim}generateSchema(){return{__michelsonType:B0.prim,schema:B0.prim}}ToKey({bytes:r,string:e}){if(e)return e;if(!r)throw new cr(r,this,`value cannot be missing string and byte value. must have one: bytes = ${r}`);return ve(r)}findAndReturnTokens(r,e){return B0.prim===r&&e.push(this),e}}B0.prim="tx_rollup_l2_address";class Se extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="ContractValidationError"}}class r0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}isValid(r){return ee(r)!==I0.VALID?new Se(r,this,"Contract address is not valid"):null}Execute(r){if(r.string)return r.string;if(!r.bytes)throw new Se(r,this,"must contain bytes or string");return Yr(r.bytes)}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return{string:e}}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[r0.prim]?e[r0.prim](r):{string:r}}ExtractSchema(){return r0.prim}generateSchema(){const r=this.createToken(this.val.args[0],0);return{__michelsonType:r0.prim,schema:{parameter:this.val.args[0]?r.generateSchema():{}}}}findAndReturnTokens(r,e){return r0.prim===r&&e.push(this),e}}r0.prim="contract";class on extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="ListValidationError"}}class K0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}isValid(r){return Array.isArray(r)?null:new on(r,this,"Value must be an array")}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;const n=this.createToken(this.val.args[0],0);return e.reduce((s,v)=>[...s,n.EncodeObject(v)],[])}Execute(r,e){const t=this.createToken(this.val.args[0],0),n=this.isValid(r);if(n)throw n;return r.reduce((s,v)=>[...s,t.Execute(v,e)],[])}EncodeObject(r,e){const t=this.createToken(this.val.args[0],0),n=this.isValid(r);if(n)throw n;return e&&e[K0.prim]?e[K0.prim](r):r.reduce((s,v)=>[...s,t.EncodeObject(v)],[])}ExtractSchema(){return{[K0.prim]:this.valueSchema.ExtractSchema()}}generateSchema(){return{__michelsonType:K0.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(r,e){return K0.prim===r&&e.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(r,e),e}}K0.prim="list";class cn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="MutezValidationError"}}class f0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){return new c0(r[Object.keys(r)[0]])}ExtractSchema(){return f0.prim}generateSchema(){return{__michelsonType:f0.prim,schema:f0.prim}}isValid(r){return new c0(r).isNaN()?new cn(r,this,`Value is not a number: ${r}`):null}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return{int:String(e).toString()}}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[f0.prim]?e[f0.prim](r):{int:String(r).toString()}}ToBigMapKey(r){return{key:{int:String(r)},type:{prim:f0.prim}}}ToKey({int:r}){return r}compare(r,e){const t=Number(r),n=Number(e);return t===n?0:t<n?-1:1}findAndReturnTokens(r,e){return f0.prim===r&&e.push(this),e}}f0.prim="mutez";class hn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="BytesValidationError"}}class d0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}ToBigMapKey(r){return{key:{bytes:r},type:{prim:d0.prim}}}isValid(r){return typeof r=="string"&&/^[0-9a-fA-F]*$/.test(r)&&r.length%2===0?null:new hn(r,this,`Invalid bytes: ${r}`)}convertUint8ArrayToHexString(r){return r.constructor===Uint8Array?Buffer.from(r).toString("hex"):r}Encode(r){let e=r.pop();e=me(this.convertUint8ArrayToHexString(e));const t=this.isValid(e);if(t)throw t;return{bytes:String(e).toString()}}EncodeObject(r,e){r=this.convertUint8ArrayToHexString(r),typeof r=="string"&&(r=me(r));const t=this.isValid(r);if(t)throw t;return e&&e[d0.prim]?e[d0.prim](r):{bytes:String(r).toString()}}Execute(r){return r.bytes}ExtractSchema(){return d0.prim}generateSchema(){return{__michelsonType:d0.prim,schema:d0.prim}}ToKey({bytes:r,string:e}){return e||r}findAndReturnTokens(r,e){return d0.prim===r&&e.push(this),e}}d0.prim="bytes";class nr extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(r){const e=r;return e==null?{prim:"None"}:Array.isArray(e)&&(e[e.length-1]===void 0||e[e.length-1]===null)?(e.pop(),{prim:"None"}):{prim:"Some",args:[this.schema().Encode(r)]}}EncodeObject(r,e){const t=r;return t==null?{prim:"None"}:{prim:"Some",args:[this.schema().EncodeObject(t,e)]}}Execute(r,e){return r.prim==="None"?null:this.schema().Execute(r.args[0],e)}ExtractSchema(){return this.schema().ExtractSchema()}generateSchema(){return{__michelsonType:nr.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature(),[]]}get KeySchema(){return this.schema()}compare(r,e){if(r){if(!e)return 1}else return-1;return this.KeySchema.compare(r,e)}ToKey(r){return this.Execute(r)}ToBigMapKey(r){return{key:this.EncodeObject(r),type:this.typeWithoutAnnotations()}}findAndReturnTokens(r,e){return nr.prim===r&&e.push(this),this.subToken().findAndReturnTokens(r,e),e}}nr.prim="option";class p0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){if(r.string&&/^\d+$/.test(r.string))return new Date(Number(r.string)*1e3).toISOString();if(r.string)return new Date(r.string).toISOString();if(r.int)return new Date(Number(r.int)*1e3).toISOString()}Encode(r){const e=r.pop();return typeof e=="number"?{int:String(e)}:{string:e}}EncodeObject(r,e){return e&&e[p0.prim]?e[p0.prim](r):typeof r=="number"?{int:String(r)}:{string:r}}ExtractSchema(){return p0.prim}generateSchema(){return{__michelsonType:p0.prim,schema:p0.prim}}ToKey({string:r}){return r}ToBigMapKey(r){return{key:{string:r},type:{prim:p0.prim}}}findAndReturnTokens(r,e){return p0.prim===r&&e.push(this),e}}p0.prim="timestamp";class xn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="IntValidationError"}}class Y extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){return new c0(r[Object.keys(r)[0]])}ExtractSchema(){return Y.prim}generateSchema(){return{__michelsonType:Y.prim,schema:Y.prim}}isValid(r){return new c0(r).isNaN()?new xn(r,this,`Value is not a number: ${r}`):null}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return{int:new c0(e).toFixed()}}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[Y.prim]?e[Y.prim](r):{int:new c0(r).toFixed()}}ToBigMapKey(r){return{key:{int:String(r)},type:{prim:Y.prim}}}ToKey({int:r}){return r}compare(r,e){const t=Number(r),n=Number(e);return t===n?0:t<n?-1:1}findAndReturnTokens(r,e){return Y.prim===r&&e.push(this),e}}Y.prim="int";class l0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Encode(r){return r.pop(),{prim:"Unit"}}EncodeObject(r,e){return e&&e[l0.prim]?e[l0.prim](r):{prim:"Unit"}}Execute(r){return Re}ExtractSchema(){return l0.prim}generateSchema(){return{__michelsonType:l0.prim,schema:l0.prim}}compare(r,e){return 0}ToKey(r){return Re}ToBigMapKey(r){return{key:{prim:"Unit"},type:{prim:l0.prim}}}findAndReturnTokens(r,e){return l0.prim===r&&e.push(this),e}}l0.prim="unit";const un=4;class fn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="KeyValidationError"}}class v0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){return r.string?r.string:Ut(r.bytes)}isValid(r){return Nt(r)!==I0.VALID?new fn(r,this,"Key is not valid"):null}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return{string:e}}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[v0.prim]?e[v0.prim](r):{string:r}}ExtractSchema(){return v0.prim}generateSchema(){return{__michelsonType:v0.prim,schema:v0.prim}}ToKey(r){return this.Execute(r)}ToBigMapKey(r){return{key:{string:r},type:{prim:v0.prim}}}compare(r,e){const t=this.getPrefix(r),n=this.getPrefix(e);if(t===M0.EDPK&&n!==M0.EDPK)return-1;if(t===M0.SPPK&&n!==M0.SPPK)return n===M0.EDPK?1:-1;if(t===M0.P2PK){if(n!==M0.P2PK)return 1;const s=this.getP256PublicKeyComparableBytes(r),v=this.getP256PublicKeyComparableBytes(e);return Buffer.compare(s,v)}return super.compare(r,e)}getPrefix(r){return r.substring(0,un)}getP256PublicKeyComparableBytes(r){return Wt(r,Lt[M0.P2PK]).slice(1)}findAndReturnTokens(r,e){return v0.prim===r&&e.push(this),e}}v0.prim="key";class dn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="KeyHashValidationError"}}class m0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){return r.string?r.string:ge(r.bytes)}isValid(r){return Gt(r)!==I0.VALID?new dn(r,this,`KeyHash is not valid: ${r}`):null}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return{string:e}}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[m0.prim]?e[m0.prim](r):{string:r}}ExtractSchema(){return m0.prim}generateSchema(){return{__michelsonType:m0.prim,schema:m0.prim}}ToKey({string:r,bytes:e}){return r||ge(e)}ToBigMapKey(r){return{key:{string:r},type:{prim:m0.prim}}}findAndReturnTokens(r,e){return m0.prim===r&&e.push(this),e}}m0.prim="key_hash";class pn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="SignatureValidationError"}}class g0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){return r.string?r.string:r.bytes}isValid(r){return Xt(r)!==I0.VALID?new pn(r,this,"Signature is not valid"):null}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return{string:e}}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[g0.prim]?e[g0.prim](r):{string:r}}ExtractSchema(){return g0.prim}generateSchema(){return{__michelsonType:g0.prim,schema:g0.prim}}ToKey(r){return this.Execute(r)}ToBigMapKey(r){return{key:{string:r},type:{prim:g0.prim}}}findAndReturnTokens(r,e){return g0.prim===r&&e.push(this),e}}g0.prim="signature";class j0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(r){return r.string?r.string:r}Encode(r){return r.pop()}EncodeObject(r,e){return e&&e[j0.prim]?e[j0.prim](r):r}ExtractSchema(){return{[j0.prim]:{parameters:this.paramSchema.ExtractSchema(),returns:this.returnSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:j0.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(r,e){return j0.prim===r&&e.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(r,e),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(r,e),e}}j0.prim="lambda";class _0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){return r.string}Encode(...r){return{string:r.pop()}}EncodeObject(r,e){return e&&e[_0.prim]?e[_0.prim](r):{string:r}}ExtractSchema(){return _0.prim}generateSchema(){return{__michelsonType:_0.prim,schema:_0.prim}}findAndReturnTokens(r,e){return _0.prim===r&&e.push(this),e}}_0.prim="operation";class ln extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="SetValidationError"}}class T0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(r){return Array.isArray(r)?null:new ln(r,this,"Value must be an array")}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return e.sort((n,s)=>this.KeySchema.compare(n,s)).reduce((n,s)=>[...n,this.KeySchema.EncodeObject(s)],[])}Execute(r,e){return r.reduce((t,n)=>[...t,this.KeySchema.Execute(n,e)],[])}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[T0.prim]?e[T0.prim](r):r.sort((n,s)=>this.KeySchema.compare(n,s)).reduce((n,s)=>[...n,this.KeySchema.EncodeObject(s)],[])}ExtractSchema(){return T0.prim}generateSchema(){return{__michelsonType:T0.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(r,e){return T0.prim===r&&e.push(this),this.KeySchema.findAndReturnTokens(r,e),e}}T0.prim="set";class vn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="ChainIDValidationError"}}class y0 extends G{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}isValid(r){return Zt(r)!==I0.VALID?new vn(r,this,"ChainID is not valid"):null}Execute(r){return r[Object.keys(r)[0]]}ExtractSchema(){return y0.prim}generateSchema(){return{__michelsonType:y0.prim,schema:y0.prim}}Encode(r){const e=r.pop(),t=this.isValid(e);if(t)throw t;return{string:e}}EncodeObject(r,e){const t=this.isValid(r);if(t)throw t;return e&&e[y0.prim]?e[y0.prim](r):{string:r}}ToKey({string:r}){return r}ToBigMapKey(r){return{key:{string:r},type:{prim:y0.prim}}}findAndReturnTokens(r,e){return y0.prim===r&&e.push(this),e}}y0.prim="chain_id";class we extends Error{constructor(){super("Tickets cannot be sent to the blockchain; they are created on-chain"),this.name="TicketEncodeError"}}const mn={prim:"contract"},gn={prim:"int"};class S0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(r){throw new we}EncodeObject(r,e){if(e&&e[S0.prim])return e[S0.prim](r,this.val);throw new we}Execute(r,e){if(e&&e[S0.prim])return e[S0.prim](r,this.val);const t=this.createToken(mn,this.idx),n=this.valueToken,s=this.createToken(gn,this.idx);return r.args[2]===void 0&&r.args[1].args!==void 0?{ticketer:t.Execute(r.args[0],e),value:n.Execute(r.args[1].args[0],e),amount:s.Execute(r.args[1].args[1],e)}:{ticketer:t.Execute(r.args[0],e),value:n.Execute(r.args[1],e),amount:s.Execute(r.args[2],e)}}ExtractSchema(){return{ticketer:r0.prim,value:this.valueToken.ExtractSchema(),amount:Y.prim}}generateSchema(){return{__michelsonType:S0.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:r0.prim,schema:r0.prim},amount:{__michelsonType:Y.prim,schema:Y.prim}}}}findAndReturnTokens(r,e){return S0.prim===r&&e.push(this),this.valueToken.findAndReturnTokens(r,e),e}}S0.prim="ticket";class Ae extends Error{constructor(){super("Ticket_deprecated cannot be sent to the blockchain; they are created on-chain"),this.name="TicketDeprecatedEncodeError"}}const yn={prim:"contract"},bn={prim:"int"};class w0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(r){throw new Ae}EncodeObject(r,e){if(e&&e[w0.prim])return e[w0.prim](r,this.val);throw new Ae}Execute(r,e){if(e&&e[w0.prim])return e[w0.prim](r,this.val);const t=this.createToken(yn,this.idx),n=this.valueToken,s=this.createToken(bn,this.idx);return r.args[2]===void 0&&r.args[1].args!==void 0?{ticketer:t.Execute(r.args[0],e),value:n.Execute(r.args[1].args[0],e),amount:s.Execute(r.args[1].args[1],e)}:{ticketer:t.Execute(r.args[0],e),value:n.Execute(r.args[1],e),amount:s.Execute(r.args[2],e)}}ExtractSchema(){return{ticketer:r0.prim,value:this.valueToken.ExtractSchema(),amount:Y.prim}}generateSchema(){return{__michelsonType:w0.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:r0.prim,schema:r0.prim},amount:{__michelsonType:Y.prim,schema:Y.prim}}}}findAndReturnTokens(r,e){return w0.prim===r&&e.push(this),this.valueToken.findAndReturnTokens(r,e),e}}w0.prim="ticket_deprecated";class Zr extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="NeverTokenError"}}class C0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Encode(r){const e=r.pop();throw new Zr(e,this,"Assigning a value to the type never is forbidden.")}EncodeObject(r,e){if(e&&e[C0.prim])return e[C0.prim](r);throw new Zr(r,this,"Assigning a value to the type never is forbidden.")}Execute(r){throw new Zr(r,this,"There is no literal value for the type never.")}ExtractSchema(){return C0.prim}generateSchema(){return{__michelsonType:C0.prim,schema:C0.prim}}findAndReturnTokens(r,e){return C0.prim===r&&e.push(this),e}}C0.prim="never";class Qr extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="SaplingStateValidationError"}}class b0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}isValid(r){return typeof r=="object"&&Object.keys(r).length===0}Execute(r,e){if(e&&e[b0.prim])return e[b0.prim](r,this.val);if("int"in r)return r.int;throw new Qr(r,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(r)}`)}Encode(r){const e=r.pop();if(this.isValid(e))return[];throw new Qr(e,this,`Invalid sapling_state. Received: ${e} while expecting: {}`)}EncodeObject(r,e){if(e&&e[b0.prim])return e[b0.prim](r);if(this.isValid(r))return[];throw new Qr(r,this,`Invalid sapling_state. Received: ${r} while expecting: {}`)}ExtractSchema(){return{[b0.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:b0.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(r,e){return b0.prim===r&&e.push(this),e}}b0.prim="sapling_state";class Be extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="SaplingTransactionValidationError"}}class D0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){throw new Be(r,this,"There is no literal value for the sapling_transaction type.")}validateBytes(r){const e=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(r);if(e&&e[2].length%2===0)return e[2];throw new Be(r,this,`Invalid bytes: ${r}`)}convertUint8ArrayToHexString(r){return r.constructor===Uint8Array?Buffer.from(r).toString("hex"):r}Encode(r){let e=r.pop();return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),{bytes:String(e).toString()}}EncodeObject(r,e){return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),e&&e[D0.prim]?e[D0.prim](r):{bytes:String(r).toString()}}ExtractSchema(){return{[D0.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:D0.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(r,e){return D0.prim===r&&e.push(this),e}}D0.prim="sapling_transaction";class _e extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="SaplingTransactionDeprecatedValidationError"}}class q0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r){throw new _e(r,this,"There is no literal value for the sapling_transaction_deprecated type.")}validateBytes(r){const e=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(r);if(e&&e[2].length%2===0)return e[2];throw new _e(r,this,`Invalid bytes: ${r}`)}convertUint8ArrayToHexString(r){return r.constructor===Uint8Array?Buffer.from(r).toString("hex"):r}Encode(r){let e=r.pop();return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),{bytes:String(e).toString()}}EncodeObject(r,e){return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),e&&e[q0.prim]?e[q0.prim](r):{bytes:String(r).toString()}}ExtractSchema(){return{[q0.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:q0.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(r,e){return q0.prim===r&&e.push(this),e}}q0.prim="sapling_transaction_deprecated";class En extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="Bls12381frValidationError"}}class R0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}isValid(r){return/^[0-9a-fA-F]*$/.test(r)&&r.length%2===0?null:new En(r,this,`Invalid bytes: ${r}`)}convertUint8ArrayToHexString(r){return r.constructor===Uint8Array?Buffer.from(r).toString("hex"):r}Encode(r){let e=r.pop();if(typeof e=="number")return{int:e.toString()};{e=this.convertUint8ArrayToHexString(e);const t=this.isValid(e);if(t)throw t;return{bytes:e}}}EncodeObject(r,e){if(e&&e[R0.prim])return e[R0.prim](r);if(typeof r=="number")return{int:r.toString()};{r=this.convertUint8ArrayToHexString(r);const t=this.isValid(r);if(t)throw t;return{bytes:r}}}Execute(r){return r.bytes}ExtractSchema(){return R0.prim}generateSchema(){return{__michelsonType:R0.prim,schema:R0.prim}}findAndReturnTokens(r,e){return R0.prim===r&&e.push(this),e}}R0.prim="bls12_381_fr";class Sn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="Bls12381g1ValidationError"}}class H0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}isValid(r){return/^[0-9a-fA-F]*$/.test(r)&&r.length%2===0?null:new Sn(r,this,`Invalid bytes: ${r}`)}convertUint8ArrayToHexString(r){return r.constructor===Uint8Array?Buffer.from(r).toString("hex"):r}Encode(r){let e=r.pop();e=this.convertUint8ArrayToHexString(e);const t=this.isValid(e);if(t)throw t;return{bytes:e}}EncodeObject(r,e){r=this.convertUint8ArrayToHexString(r);const t=this.isValid(r);if(t)throw t;return e&&e[H0.prim]?e[H0.prim](r):{bytes:r}}Execute(r){return r.bytes}ExtractSchema(){return H0.prim}generateSchema(){return{__michelsonType:H0.prim,schema:H0.prim}}findAndReturnTokens(r,e){return H0.prim===r&&e.push(this),e}}H0.prim="bls12_381_g1";class wn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="Bls12381g2ValidationError"}}class V0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}isValid(r){return/^[0-9a-fA-F]*$/.test(r)&&r.length%2===0?null:new wn(r,this,`Invalid bytes: ${r}`)}convertUint8ArrayToHexString(r){return r.constructor===Uint8Array?Buffer.from(r).toString("hex"):r}Encode(r){let e=r.pop();e=this.convertUint8ArrayToHexString(e);const t=this.isValid(e);if(t)throw t;return{bytes:e}}EncodeObject(r,e){r=this.convertUint8ArrayToHexString(r);const t=this.isValid(r);if(t)throw t;return e&&e[V0.prim]?e[V0.prim](r):{bytes:r}}Execute(r){return r.bytes}ExtractSchema(){return V0.prim}generateSchema(){return{__michelsonType:V0.prim,schema:V0.prim}}findAndReturnTokens(r,e){return V0.prim===r&&e.push(this),e}}V0.prim="bls12_381_g2";class An extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="ChestValidationError"}}class k0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}isValid(r){return/^[0-9a-fA-F]*$/.test(r)&&r.length%2===0?null:new An(r,this,`Invalid bytes: ${r}`)}convertUint8ArrayToHexString(r){return r.constructor===Uint8Array?Buffer.from(r).toString("hex"):r}Encode(r){let e=r.pop();e=this.convertUint8ArrayToHexString(e);const t=this.isValid(e);if(t)throw t;return{bytes:e}}EncodeObject(r,e){r=this.convertUint8ArrayToHexString(r);const t=this.isValid(r);if(t)throw t;return e&&e[k0.prim]?e[k0.prim](r):{bytes:r}}Execute(r){return r.bytes}ExtractSchema(){return k0.prim}generateSchema(){return{__michelsonType:k0.prim,schema:k0.prim}}findAndReturnTokens(r,e){return k0.prim===r&&e.push(this),e}}k0.prim="chest";class Bn extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="ChestKeyValidationError"}}class z0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}isValid(r){return/^[0-9a-fA-F]*$/.test(r)&&r.length%2===0?null:new Bn(r,this,`Invalid bytes: ${r}`)}convertUint8ArrayToHexString(r){return r.constructor===Uint8Array?Buffer.from(r).toString("hex"):r}Encode(r){let e=r.pop();e=this.convertUint8ArrayToHexString(e);const t=this.isValid(e);if(t)throw t;return{bytes:e}}EncodeObject(r,e){r=this.convertUint8ArrayToHexString(r);const t=this.isValid(r);if(t)throw t;return e&&e[z0.prim]?e[z0.prim](r):{bytes:r}}Execute(r){return r.bytes}ExtractSchema(){return z0.prim}generateSchema(){return{__michelsonType:z0.prim,schema:z0.prim}}findAndReturnTokens(r,e){return z0.prim===r&&e.push(this),e}}z0.prim="chest_key";class Ce extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="GlobalConstantEncodingError"}}class _n extends ${constructor(r,e,t){super(r,e,t),this.value=r,this.token=e,this.name="GlobalConstantDecodingError"}}class E0 extends Z{constructor(r,e,t){super(r,e,t),this.val=r,this.idx=e,this.fac=t}Execute(r,e){if(e&&e[E0.prim])return e[E0.prim](r,this.val);throw new _n(r,this,`Unable to decode a value represented by a globalThis constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following globalThis constant hash was encountered: ${this.val.args[0].string}.`)}Encode(r){throw new Ce(r,this,`Unable to encode a script containing globalThis constants. Please provide an expanded script to the Michelson-Encoder. The following globalThis constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(r,e){if(e&&e[E0.prim])return e[E0.prim](r);throw new Ce(r,this,`Unable to encode a script containing globalThis constants. Please provide an expanded script to the Michelson-Encoder. The following globalThis constant hash was encountered: ${this.val.args[0].string}.`)}ExtractSchema(){return E0.prim}generateSchema(){return{__michelsonType:E0.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(r,e){return E0.prim===r&&e.push(this),e}}E0.prim="constant";const Cn=[X,h0,x0,n0,A0,B0,F0,u0,q,r0,K0,f0,d0,nr,p0,Y,l0,v0,m0,g0,j0,_0,T0,y0,S0,w0,C0,b0,D0,q0,R0,H0,V0,k0,z0,E0];class Rn extends Error{constructor(r,e){super(r),this.message=r,this.data=e,this.name="Invalid token error"}}function xr(c,r){if(Array.isArray(c))return new X(c,r,xr);const e=Cn.find(t=>t.prim===c.prim);if(!e)throw new Rn("Malformed data expected a value with a valid prim property",c);return new e(c,r,xr)}class Hn extends Error{constructor(r){super("Invalid RPC response passed as argument(s)"),this.script=r,this.name="InvalidRpcResponseError"}}class hr extends Error{constructor(r){super(r),this.message=r,this.name="InvalidBigMapSchema"}}class Vn extends Error{constructor(r){super(r),this.message=r,this.name="InvalidBigMapDiff"}}class kn extends Error{constructor(r,e){super(`Unable to encode ${r}. ${e}`),this.obj=r,this.details=e,this.name="BigMapEncodingError"}}class zn extends Error{constructor(r,e){super(`Unable to encode ${r}. ${e}`),this.obj=r,this.details=e,this.name="StorageEncodingError"}}class On extends Error{constructor(r){super(r),this.message=r,this.name="MissingArgumentError"}}var vt;const mt=Symbol.for("taquito-schema-type-symbol");function ir(c,r=X.prim){var e,t;if(Array.isArray(c))return ir({prim:r,args:c},r);const n=c;return n.prim===r&&n.args&&n.args.length>2?Object.assign(Object.assign({},n),{args:[(e=n.args)===null||e===void 0?void 0:e[0],{prim:r,args:(t=n.args)===null||t===void 0?void 0:t.slice(1)}]}):n}function gt(c,r){const e=ir(c),t=ir(r);return e.prim===t.prim&&(e.args===void 0&&t.args===void 0||e.args!==void 0&&t.args!==void 0&&e.args.length===t.args.length&&e.args.every((n,s)=>{var v,d;return gt(n,(d=(v=t.args)===null||v===void 0?void 0:v[s])!==null&&d!==void 0?d:{})}))&&(e.annots===void 0&&t.annots===void 0||e.annots!==void 0&&t.annots!==void 0&&e.annots.length===t.annots.length&&e.annots.every((n,s)=>{var v;return n===((v=t.annots)===null||v===void 0?void 0:v[s])}))}class L0{constructor(r){if(this.val=r,this[vt]=!0,this.root=xr(r,0),this.root instanceof n0)this.bigMap=this.root;else if(this.isExpressionExtended(r)&&r.prim==="pair"){const e=r.args[0];this.isExpressionExtended(e)&&e.prim==="big_map"&&(this.bigMap=new n0(e,0,xr))}}static isSchema(r){return r&&r[mt]===!0}static fromRPCResponse(r){const e=r&&r.script&&Array.isArray(r.script.code)&&r.script.code.find(t=>{if(Array.isArray(t))this.fromRPCResponse({script:{code:t,storage:r.script.storage}});else{const n=t;return n.prim?n.prim==="storage":!1}});if(!e||!Array.isArray(e.args))throw new Hn(r.script);return new L0(e.args[0])}isExpressionExtended(r){return"prim"in r&&Array.isArray(r.args)}removeTopLevelAnnotation(r){return(this.root instanceof X||this.root instanceof q)&&this.root.hasAnnotations()&&typeof r=="object"&&Object.keys(r).length===1?r[Object.keys(r)[0]]:r}Execute(r,e){const t=this.root.Execute(r,e);return this.removeTopLevelAnnotation(t)}Typecheck(r){if(this.root instanceof n0&&Number.isInteger(Number(r))||this.root instanceof S0&&r.ticketer&&r.value&&r.amount||this.root instanceof w0&&r.ticketer&&r.value&&r.amount||this.root instanceof F0&&this.root.ValueSchema instanceof n0)return!0;try{return this.root.EncodeObject(r),!0}catch{return!1}}ExecuteOnBigMapDiff(r,e){if(!this.bigMap)throw new hr("Big map schema is undefined");if(!Array.isArray(r))throw new Vn("Big map diff must be an array");const t=r.map(({key:n,value:s})=>({args:[n,s]}));return this.bigMap.Execute(t,e)}ExecuteOnBigMapValue(r,e){if(!this.bigMap)throw new hr("No big map schema");return this.bigMap.ValueSchema.Execute(r,e)}EncodeBigMapKey(r){if(!this.bigMap)throw new hr("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(r)}catch(e){throw new kn("big map key",e)}}Encode(r,e){try{return this.root.EncodeObject(r,e)}catch(t){throw t instanceof $?t:new zn("storage object",t)}}ExtractSchema(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}ComputeState(r,e){if(!this.bigMap)throw new hr("Big map schema is undefined");const t=r.reduce((n,s)=>Object.assign(Object.assign({},n),this.ExecuteOnBigMapDiff(s.contents[0].metadata.operation_result.big_map_diff)),{});return Object.assign(Object.assign({},this.Execute(e)),{[this.bigMap.annot()]:t})}FindFirstInTopLevelPair(r,e){return this.findValue(this.root.val,r,e)}findValue(r,e,t){if(gt(t,r))return e;if(Array.isArray(r)||r.prim==="pair"){const n=ir(r),s=ir(e,"Pair");if(n.args===void 0||s.args===void 0)throw new On("Tokens have no arguments");if(n.args[0])return this.findValue(n.args[0],s.args[0],t)||this.findValue(n.args[1],s.args[1],t)}}findToken(r){const e=[];return this.root.findAndReturnTokens(r,e)}}vt=mt;const Re=Symbol();var re={},Pn={get exports(){return re},set exports(c){re=c}},ur={},Mn={get exports(){return ur},set exports(c){ur=c}},He;function D(){return He||(He=1,function(c,r){(function(e,t){c.exports=t()})(T,function(){var e=e||function(t,n){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof Qt=="function")try{s=Yt}catch{}var v=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},d=Object.create||function(){function h(){}return function(f){var l;return h.prototype=f,l=new h,h.prototype=null,l}}(),m={},i=m.lib={},a=i.Base=function(){return{extend:function(h){var f=d(this);return h&&f.mixIn(h),(!f.hasOwnProperty("init")||this.init===f.init)&&(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var f in h)h.hasOwnProperty(f)&&(this[f]=h[f]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),b=i.WordArray=a.extend({init:function(h,f){h=this.words=h||[],f!=n?this.sigBytes=f:this.sigBytes=h.length*4},toString:function(h){return(h||u).stringify(this)},concat:function(h){var f=this.words,l=h.words,w=this.sigBytes,A=h.sigBytes;if(this.clamp(),w%4)for(var B=0;B<A;B++){var _=l[B>>>2]>>>24-B%4*8&255;f[w+B>>>2]|=_<<24-(w+B)%4*8}else for(var O=0;O<A;O+=4)f[w+O>>>2]=l[O>>>2];return this.sigBytes+=A,this},clamp:function(){var h=this.words,f=this.sigBytes;h[f>>>2]&=4294967295<<32-f%4*8,h.length=t.ceil(f/4)},clone:function(){var h=a.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var f=[],l=0;l<h;l+=4)f.push(v());return new b.init(f,h)}}),o=m.enc={},u=o.Hex={stringify:function(h){for(var f=h.words,l=h.sigBytes,w=[],A=0;A<l;A++){var B=f[A>>>2]>>>24-A%4*8&255;w.push((B>>>4).toString(16)),w.push((B&15).toString(16))}return w.join("")},parse:function(h){for(var f=h.length,l=[],w=0;w<f;w+=2)l[w>>>3]|=parseInt(h.substr(w,2),16)<<24-w%8*4;return new b.init(l,f/2)}},x=o.Latin1={stringify:function(h){for(var f=h.words,l=h.sigBytes,w=[],A=0;A<l;A++){var B=f[A>>>2]>>>24-A%4*8&255;w.push(String.fromCharCode(B))}return w.join("")},parse:function(h){for(var f=h.length,l=[],w=0;w<f;w++)l[w>>>2]|=(h.charCodeAt(w)&255)<<24-w%4*8;return new b.init(l,f)}},p=o.Utf8={stringify:function(h){try{return decodeURIComponent(escape(x.stringify(h)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(h){return x.parse(unescape(encodeURIComponent(h)))}},g=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new b.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=p.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var f,l=this._data,w=l.words,A=l.sigBytes,B=this.blockSize,_=B*4,O=A/_;h?O=t.ceil(O):O=t.max((O|0)-this._minBufferSize,0);var y=O*B,E=t.min(y*4,A);if(y){for(var R=0;R<y;R+=B)this._doProcessBlock(w,R);f=w.splice(0,y),l.sigBytes-=E}return new b.init(f,E)},clone:function(){var h=a.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0});i.Hasher=g.extend({cfg:a.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){h&&this._append(h);var f=this._doFinalize();return f},blockSize:16,_createHelper:function(h){return function(f,l){return new h.init(l).finalize(f)}},_createHmacHelper:function(h){return function(f,l){return new S.HMAC.init(h,l).finalize(f)}}});var S=m.algo={};return m}(Math);return e})}(Mn)),ur}var fr={},Kn={get exports(){return fr},set exports(c){fr=c}},Ve;function Nr(){return Ve||(Ve=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){return function(t){var n=e,s=n.lib,v=s.Base,d=s.WordArray,m=n.x64={};m.Word=v.extend({init:function(i,a){this.high=i,this.low=a}}),m.WordArray=v.extend({init:function(i,a){i=this.words=i||[],a!=t?this.sigBytes=a:this.sigBytes=i.length*8},toX32:function(){for(var i=this.words,a=i.length,b=[],o=0;o<a;o++){var u=i[o];b.push(u.high),b.push(u.low)}return d.create(b,this.sigBytes)},clone:function(){for(var i=v.clone.call(this),a=i.words=this.words.slice(0),b=a.length,o=0;o<b;o++)a[o]=a[o].clone();return i}})}(),e})}(Kn)),fr}var dr={},jn={get exports(){return dr},set exports(c){dr=c}},ke;function Tn(){return ke||(ke=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){return function(){if(typeof ArrayBuffer=="function"){var t=e,n=t.lib,s=n.WordArray,v=s.init,d=s.init=function(m){if(m instanceof ArrayBuffer&&(m=new Uint8Array(m)),(m instanceof Int8Array||typeof Uint8ClampedArray<"u"&&m instanceof Uint8ClampedArray||m instanceof Int16Array||m instanceof Uint16Array||m instanceof Int32Array||m instanceof Uint32Array||m instanceof Float32Array||m instanceof Float64Array)&&(m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength)),m instanceof Uint8Array){for(var i=m.byteLength,a=[],b=0;b<i;b++)a[b>>>2]|=m[b]<<24-b%4*8;v.call(this,a,i)}else v.apply(this,arguments)};d.prototype=s}}(),e.lib.WordArray})}(jn)),dr}var pr={},Dn={get exports(){return pr},set exports(c){pr=c}},ze;function qn(){return ze||(ze=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){return function(){var t=e,n=t.lib,s=n.WordArray,v=t.enc;v.Utf16=v.Utf16BE={stringify:function(m){for(var i=m.words,a=m.sigBytes,b=[],o=0;o<a;o+=2){var u=i[o>>>2]>>>16-o%4*8&65535;b.push(String.fromCharCode(u))}return b.join("")},parse:function(m){for(var i=m.length,a=[],b=0;b<i;b++)a[b>>>1]|=m.charCodeAt(b)<<16-b%2*16;return s.create(a,i*2)}},v.Utf16LE={stringify:function(m){for(var i=m.words,a=m.sigBytes,b=[],o=0;o<a;o+=2){var u=d(i[o>>>2]>>>16-o%4*8&65535);b.push(String.fromCharCode(u))}return b.join("")},parse:function(m){for(var i=m.length,a=[],b=0;b<i;b++)a[b>>>1]|=d(m.charCodeAt(b)<<16-b%2*16);return s.create(a,i*2)}};function d(m){return m<<8&4278255360|m>>>8&16711935}}(),e.enc.Utf16})}(Dn)),pr}var lr={},Fn={get exports(){return lr},set exports(c){lr=c}},Oe;function G0(){return Oe||(Oe=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){return function(){var t=e,n=t.lib,s=n.WordArray,v=t.enc;v.Base64={stringify:function(m){var i=m.words,a=m.sigBytes,b=this._map;m.clamp();for(var o=[],u=0;u<a;u+=3)for(var x=i[u>>>2]>>>24-u%4*8&255,p=i[u+1>>>2]>>>24-(u+1)%4*8&255,g=i[u+2>>>2]>>>24-(u+2)%4*8&255,S=x<<16|p<<8|g,h=0;h<4&&u+h*.75<a;h++)o.push(b.charAt(S>>>6*(3-h)&63));var f=b.charAt(64);if(f)for(;o.length%4;)o.push(f);return o.join("")},parse:function(m){var i=m.length,a=this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var o=0;o<a.length;o++)b[a.charCodeAt(o)]=o}var u=a.charAt(64);if(u){var x=m.indexOf(u);x!==-1&&(i=x)}return d(m,i,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function d(m,i,a){for(var b=[],o=0,u=0;u<i;u++)if(u%4){var x=a[m.charCodeAt(u-1)]<<u%4*2,p=a[m.charCodeAt(u)]>>>6-u%4*2,g=x|p;b[o>>>2]|=g<<24-o%4*8,o++}return s.create(b,o)}}(),e.enc.Base64})}(Fn)),lr}var vr={},In={get exports(){return vr},set exports(c){vr=c}},Pe;function $n(){return Pe||(Pe=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){return function(){var t=e,n=t.lib,s=n.WordArray,v=t.enc;v.Base64url={stringify:function(m,i=!0){var a=m.words,b=m.sigBytes,o=i?this._safe_map:this._map;m.clamp();for(var u=[],x=0;x<b;x+=3)for(var p=a[x>>>2]>>>24-x%4*8&255,g=a[x+1>>>2]>>>24-(x+1)%4*8&255,S=a[x+2>>>2]>>>24-(x+2)%4*8&255,h=p<<16|g<<8|S,f=0;f<4&&x+f*.75<b;f++)u.push(o.charAt(h>>>6*(3-f)&63));var l=o.charAt(64);if(l)for(;u.length%4;)u.push(l);return u.join("")},parse:function(m,i=!0){var a=m.length,b=i?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var u=0;u<b.length;u++)o[b.charCodeAt(u)]=u}var x=b.charAt(64);if(x){var p=m.indexOf(x);p!==-1&&(a=p)}return d(m,a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function d(m,i,a){for(var b=[],o=0,u=0;u<i;u++)if(u%4){var x=a[m.charCodeAt(u-1)]<<u%4*2,p=a[m.charCodeAt(u)]>>>6-u%4*2,g=x|p;b[o>>>2]|=g<<24-o%4*8,o++}return s.create(b,o)}}(),e.enc.Base64url})}(In)),vr}var mr={},Un={get exports(){return mr},set exports(c){mr=c}},Me;function X0(){return Me||(Me=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){return function(t){var n=e,s=n.lib,v=s.WordArray,d=s.Hasher,m=n.algo,i=[];(function(){for(var p=0;p<64;p++)i[p]=t.abs(t.sin(p+1))*4294967296|0})();var a=m.MD5=d.extend({_doReset:function(){this._hash=new v.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,g){for(var S=0;S<16;S++){var h=g+S,f=p[h];p[h]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360}var l=this._hash.words,w=p[g+0],A=p[g+1],B=p[g+2],_=p[g+3],O=p[g+4],y=p[g+5],E=p[g+6],R=p[g+7],V=p[g+8],P=p[g+9],M=p[g+10],j=p[g+11],W=p[g+12],F=p[g+13],U=p[g+14],I=p[g+15],C=l[0],k=l[1],z=l[2],H=l[3];C=b(C,k,z,H,w,7,i[0]),H=b(H,C,k,z,A,12,i[1]),z=b(z,H,C,k,B,17,i[2]),k=b(k,z,H,C,_,22,i[3]),C=b(C,k,z,H,O,7,i[4]),H=b(H,C,k,z,y,12,i[5]),z=b(z,H,C,k,E,17,i[6]),k=b(k,z,H,C,R,22,i[7]),C=b(C,k,z,H,V,7,i[8]),H=b(H,C,k,z,P,12,i[9]),z=b(z,H,C,k,M,17,i[10]),k=b(k,z,H,C,j,22,i[11]),C=b(C,k,z,H,W,7,i[12]),H=b(H,C,k,z,F,12,i[13]),z=b(z,H,C,k,U,17,i[14]),k=b(k,z,H,C,I,22,i[15]),C=o(C,k,z,H,A,5,i[16]),H=o(H,C,k,z,E,9,i[17]),z=o(z,H,C,k,j,14,i[18]),k=o(k,z,H,C,w,20,i[19]),C=o(C,k,z,H,y,5,i[20]),H=o(H,C,k,z,M,9,i[21]),z=o(z,H,C,k,I,14,i[22]),k=o(k,z,H,C,O,20,i[23]),C=o(C,k,z,H,P,5,i[24]),H=o(H,C,k,z,U,9,i[25]),z=o(z,H,C,k,_,14,i[26]),k=o(k,z,H,C,V,20,i[27]),C=o(C,k,z,H,F,5,i[28]),H=o(H,C,k,z,B,9,i[29]),z=o(z,H,C,k,R,14,i[30]),k=o(k,z,H,C,W,20,i[31]),C=u(C,k,z,H,y,4,i[32]),H=u(H,C,k,z,V,11,i[33]),z=u(z,H,C,k,j,16,i[34]),k=u(k,z,H,C,U,23,i[35]),C=u(C,k,z,H,A,4,i[36]),H=u(H,C,k,z,O,11,i[37]),z=u(z,H,C,k,R,16,i[38]),k=u(k,z,H,C,M,23,i[39]),C=u(C,k,z,H,F,4,i[40]),H=u(H,C,k,z,w,11,i[41]),z=u(z,H,C,k,_,16,i[42]),k=u(k,z,H,C,E,23,i[43]),C=u(C,k,z,H,P,4,i[44]),H=u(H,C,k,z,W,11,i[45]),z=u(z,H,C,k,I,16,i[46]),k=u(k,z,H,C,B,23,i[47]),C=x(C,k,z,H,w,6,i[48]),H=x(H,C,k,z,R,10,i[49]),z=x(z,H,C,k,U,15,i[50]),k=x(k,z,H,C,y,21,i[51]),C=x(C,k,z,H,W,6,i[52]),H=x(H,C,k,z,_,10,i[53]),z=x(z,H,C,k,M,15,i[54]),k=x(k,z,H,C,A,21,i[55]),C=x(C,k,z,H,V,6,i[56]),H=x(H,C,k,z,I,10,i[57]),z=x(z,H,C,k,E,15,i[58]),k=x(k,z,H,C,F,21,i[59]),C=x(C,k,z,H,O,6,i[60]),H=x(H,C,k,z,j,10,i[61]),z=x(z,H,C,k,B,15,i[62]),k=x(k,z,H,C,P,21,i[63]),l[0]=l[0]+C|0,l[1]=l[1]+k|0,l[2]=l[2]+z|0,l[3]=l[3]+H|0},_doFinalize:function(){var p=this._data,g=p.words,S=this._nDataBytes*8,h=p.sigBytes*8;g[h>>>5]|=128<<24-h%32;var f=t.floor(S/4294967296),l=S;g[(h+64>>>9<<4)+15]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,g[(h+64>>>9<<4)+14]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360,p.sigBytes=(g.length+1)*4,this._process();for(var w=this._hash,A=w.words,B=0;B<4;B++){var _=A[B];A[B]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return w},clone:function(){var p=d.clone.call(this);return p._hash=this._hash.clone(),p}});function b(p,g,S,h,f,l,w){var A=p+(g&S|~g&h)+f+w;return(A<<l|A>>>32-l)+g}function o(p,g,S,h,f,l,w){var A=p+(g&h|S&~h)+f+w;return(A<<l|A>>>32-l)+g}function u(p,g,S,h,f,l,w){var A=p+(g^S^h)+f+w;return(A<<l|A>>>32-l)+g}function x(p,g,S,h,f,l,w){var A=p+(S^(g|~h))+f+w;return(A<<l|A>>>32-l)+g}n.MD5=d._createHelper(a),n.HmacMD5=d._createHmacHelper(a)}(Math),e.MD5})}(Un)),mr}var gr={},Nn={get exports(){return gr},set exports(c){gr=c}},Ke;function te(){return Ke||(Ke=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){return function(){var t=e,n=t.lib,s=n.WordArray,v=n.Hasher,d=t.algo,m=[],i=d.SHA1=v.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var o=this._hash.words,u=o[0],x=o[1],p=o[2],g=o[3],S=o[4],h=0;h<80;h++){if(h<16)m[h]=a[b+h]|0;else{var f=m[h-3]^m[h-8]^m[h-14]^m[h-16];m[h]=f<<1|f>>>31}var l=(u<<5|u>>>27)+S+m[h];h<20?l+=(x&p|~x&g)+1518500249:h<40?l+=(x^p^g)+1859775393:h<60?l+=(x&p|x&g|p&g)-1894007588:l+=(x^p^g)-899497514,S=g,g=p,p=x<<30|x>>>2,x=u,u=l}o[0]=o[0]+u|0,o[1]=o[1]+x|0,o[2]=o[2]+p|0,o[3]=o[3]+g|0,o[4]=o[4]+S|0},_doFinalize:function(){var a=this._data,b=a.words,o=this._nDataBytes*8,u=a.sigBytes*8;return b[u>>>5]|=128<<24-u%32,b[(u+64>>>9<<4)+14]=Math.floor(o/4294967296),b[(u+64>>>9<<4)+15]=o,a.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var a=v.clone.call(this);return a._hash=this._hash.clone(),a}});t.SHA1=v._createHelper(i),t.HmacSHA1=v._createHmacHelper(i)}(),e.SHA1})}(Nn)),gr}var yr={},Wn={get exports(){return yr},set exports(c){yr=c}},je;function yt(){return je||(je=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){return function(t){var n=e,s=n.lib,v=s.WordArray,d=s.Hasher,m=n.algo,i=[],a=[];(function(){function u(S){for(var h=t.sqrt(S),f=2;f<=h;f++)if(!(S%f))return!1;return!0}function x(S){return(S-(S|0))*4294967296|0}for(var p=2,g=0;g<64;)u(p)&&(g<8&&(i[g]=x(t.pow(p,1/2))),a[g]=x(t.pow(p,1/3)),g++),p++})();var b=[],o=m.SHA256=d.extend({_doReset:function(){this._hash=new v.init(i.slice(0))},_doProcessBlock:function(u,x){for(var p=this._hash.words,g=p[0],S=p[1],h=p[2],f=p[3],l=p[4],w=p[5],A=p[6],B=p[7],_=0;_<64;_++){if(_<16)b[_]=u[x+_]|0;else{var O=b[_-15],y=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,E=b[_-2],R=(E<<15|E>>>17)^(E<<13|E>>>19)^E>>>10;b[_]=y+b[_-7]+R+b[_-16]}var V=l&w^~l&A,P=g&S^g&h^S&h,M=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),j=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),W=B+j+V+a[_]+b[_],F=M+P;B=A,A=w,w=l,l=f+W|0,f=h,h=S,S=g,g=W+F|0}p[0]=p[0]+g|0,p[1]=p[1]+S|0,p[2]=p[2]+h|0,p[3]=p[3]+f|0,p[4]=p[4]+l|0,p[5]=p[5]+w|0,p[6]=p[6]+A|0,p[7]=p[7]+B|0},_doFinalize:function(){var u=this._data,x=u.words,p=this._nDataBytes*8,g=u.sigBytes*8;return x[g>>>5]|=128<<24-g%32,x[(g+64>>>9<<4)+14]=t.floor(p/4294967296),x[(g+64>>>9<<4)+15]=p,u.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var u=d.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA256=d._createHelper(o),n.HmacSHA256=d._createHmacHelper(o)}(Math),e.SHA256})}(Wn)),yr}var br={},Ln={get exports(){return br},set exports(c){br=c}},Te;function Gn(){return Te||(Te=1,function(c,r){(function(e,t,n){c.exports=t(D(),yt())})(T,function(e){return function(){var t=e,n=t.lib,s=n.WordArray,v=t.algo,d=v.SHA256,m=v.SHA224=d.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var i=d._doFinalize.call(this);return i.sigBytes-=4,i}});t.SHA224=d._createHelper(m),t.HmacSHA224=d._createHmacHelper(m)}(),e.SHA224})}(Ln)),br}var Er={},Xn={get exports(){return Er},set exports(c){Er=c}},De;function bt(){return De||(De=1,function(c,r){(function(e,t,n){c.exports=t(D(),Nr())})(T,function(e){return function(){var t=e,n=t.lib,s=n.Hasher,v=t.x64,d=v.Word,m=v.WordArray,i=t.algo;function a(){return d.create.apply(d,arguments)}var b=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],o=[];(function(){for(var x=0;x<80;x++)o[x]=a()})();var u=i.SHA512=s.extend({_doReset:function(){this._hash=new m.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(x,p){for(var g=this._hash.words,S=g[0],h=g[1],f=g[2],l=g[3],w=g[4],A=g[5],B=g[6],_=g[7],O=S.high,y=S.low,E=h.high,R=h.low,V=f.high,P=f.low,M=l.high,j=l.low,W=w.high,F=w.low,U=A.high,I=A.low,C=B.high,k=B.low,z=_.high,H=_.low,L=O,N=y,J=E,K=R,Z0=V,U0=P,Lr=M,Q0=j,a0=W,e0=F,sr=U,Y0=I,ar=C,J0=k,Gr=z,rr=H,o0=0;o0<80;o0++){var i0,O0,or=o[o0];if(o0<16)O0=or.high=x[p+o0*2]|0,i0=or.low=x[p+o0*2+1]|0;else{var ie=o[o0-15],N0=ie.high,er=ie.low,At=(N0>>>1|er<<31)^(N0>>>8|er<<24)^N0>>>7,se=(er>>>1|N0<<31)^(er>>>8|N0<<24)^(er>>>7|N0<<25),ae=o[o0-2],W0=ae.high,tr=ae.low,Bt=(W0>>>19|tr<<13)^(W0<<3|tr>>>29)^W0>>>6,oe=(tr>>>19|W0<<13)^(tr<<3|W0>>>29)^(tr>>>6|W0<<26),ce=o[o0-7],_t=ce.high,Ct=ce.low,he=o[o0-16],Rt=he.high,xe=he.low;i0=se+Ct,O0=At+_t+(i0>>>0<se>>>0?1:0),i0=i0+oe,O0=O0+Bt+(i0>>>0<oe>>>0?1:0),i0=i0+xe,O0=O0+Rt+(i0>>>0<xe>>>0?1:0),or.high=O0,or.low=i0}var Ht=a0&sr^~a0&ar,ue=e0&Y0^~e0&J0,Vt=L&J^L&Z0^J&Z0,kt=N&K^N&U0^K&U0,zt=(L>>>28|N<<4)^(L<<30|N>>>2)^(L<<25|N>>>7),fe=(N>>>28|L<<4)^(N<<30|L>>>2)^(N<<25|L>>>7),Ot=(a0>>>14|e0<<18)^(a0>>>18|e0<<14)^(a0<<23|e0>>>9),Pt=(e0>>>14|a0<<18)^(e0>>>18|a0<<14)^(e0<<23|a0>>>9),de=b[o0],Mt=de.high,pe=de.low,t0=rr+Pt,P0=Gr+Ot+(t0>>>0<rr>>>0?1:0),t0=t0+ue,P0=P0+Ht+(t0>>>0<ue>>>0?1:0),t0=t0+pe,P0=P0+Mt+(t0>>>0<pe>>>0?1:0),t0=t0+i0,P0=P0+O0+(t0>>>0<i0>>>0?1:0),le=fe+kt,Kt=zt+Vt+(le>>>0<fe>>>0?1:0);Gr=ar,rr=J0,ar=sr,J0=Y0,sr=a0,Y0=e0,e0=Q0+t0|0,a0=Lr+P0+(e0>>>0<Q0>>>0?1:0)|0,Lr=Z0,Q0=U0,Z0=J,U0=K,J=L,K=N,N=t0+le|0,L=P0+Kt+(N>>>0<t0>>>0?1:0)|0}y=S.low=y+N,S.high=O+L+(y>>>0<N>>>0?1:0),R=h.low=R+K,h.high=E+J+(R>>>0<K>>>0?1:0),P=f.low=P+U0,f.high=V+Z0+(P>>>0<U0>>>0?1:0),j=l.low=j+Q0,l.high=M+Lr+(j>>>0<Q0>>>0?1:0),F=w.low=F+e0,w.high=W+a0+(F>>>0<e0>>>0?1:0),I=A.low=I+Y0,A.high=U+sr+(I>>>0<Y0>>>0?1:0),k=B.low=k+J0,B.high=C+ar+(k>>>0<J0>>>0?1:0),H=_.low=H+rr,_.high=z+Gr+(H>>>0<rr>>>0?1:0)},_doFinalize:function(){var x=this._data,p=x.words,g=this._nDataBytes*8,S=x.sigBytes*8;p[S>>>5]|=128<<24-S%32,p[(S+128>>>10<<5)+30]=Math.floor(g/4294967296),p[(S+128>>>10<<5)+31]=g,x.sigBytes=p.length*4,this._process();var h=this._hash.toX32();return h},clone:function(){var x=s.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});t.SHA512=s._createHelper(u),t.HmacSHA512=s._createHmacHelper(u)}(),e.SHA512})}(Xn)),Er}var Sr={},Zn={get exports(){return Sr},set exports(c){Sr=c}},qe;function Qn(){return qe||(qe=1,function(c,r){(function(e,t,n){c.exports=t(D(),Nr(),bt())})(T,function(e){return function(){var t=e,n=t.x64,s=n.Word,v=n.WordArray,d=t.algo,m=d.SHA512,i=d.SHA384=m.extend({_doReset:function(){this._hash=new v.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var a=m._doFinalize.call(this);return a.sigBytes-=16,a}});t.SHA384=m._createHelper(i),t.HmacSHA384=m._createHmacHelper(i)}(),e.SHA384})}(Zn)),Sr}var wr={},Yn={get exports(){return wr},set exports(c){wr=c}},Fe;function Jn(){return Fe||(Fe=1,function(c,r){(function(e,t,n){c.exports=t(D(),Nr())})(T,function(e){return function(t){var n=e,s=n.lib,v=s.WordArray,d=s.Hasher,m=n.x64,i=m.Word,a=n.algo,b=[],o=[],u=[];(function(){for(var g=1,S=0,h=0;h<24;h++){b[g+5*S]=(h+1)*(h+2)/2%64;var f=S%5,l=(2*g+3*S)%5;g=f,S=l}for(var g=0;g<5;g++)for(var S=0;S<5;S++)o[g+5*S]=S+(2*g+3*S)%5*5;for(var w=1,A=0;A<24;A++){for(var B=0,_=0,O=0;O<7;O++){if(w&1){var y=(1<<O)-1;y<32?_^=1<<y:B^=1<<y-32}w&128?w=w<<1^113:w<<=1}u[A]=i.create(B,_)}})();var x=[];(function(){for(var g=0;g<25;g++)x[g]=i.create()})();var p=a.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],S=0;S<25;S++)g[S]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,S){for(var h=this._state,f=this.blockSize/2,l=0;l<f;l++){var w=g[S+2*l],A=g[S+2*l+1];w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360;var B=h[l];B.high^=A,B.low^=w}for(var _=0;_<24;_++){for(var O=0;O<5;O++){for(var y=0,E=0,R=0;R<5;R++){var B=h[O+5*R];y^=B.high,E^=B.low}var V=x[O];V.high=y,V.low=E}for(var O=0;O<5;O++)for(var P=x[(O+4)%5],M=x[(O+1)%5],j=M.high,W=M.low,y=P.high^(j<<1|W>>>31),E=P.low^(W<<1|j>>>31),R=0;R<5;R++){var B=h[O+5*R];B.high^=y,B.low^=E}for(var F=1;F<25;F++){var y,E,B=h[F],U=B.high,I=B.low,C=b[F];C<32?(y=U<<C|I>>>32-C,E=I<<C|U>>>32-C):(y=I<<C-32|U>>>64-C,E=U<<C-32|I>>>64-C);var k=x[o[F]];k.high=y,k.low=E}var z=x[0],H=h[0];z.high=H.high,z.low=H.low;for(var O=0;O<5;O++)for(var R=0;R<5;R++){var F=O+5*R,B=h[F],L=x[F],N=x[(O+1)%5+5*R],J=x[(O+2)%5+5*R];B.high=L.high^~N.high&J.high,B.low=L.low^~N.low&J.low}var B=h[0],K=u[_];B.high^=K.high,B.low^=K.low}},_doFinalize:function(){var g=this._data,S=g.words;this._nDataBytes*8;var h=g.sigBytes*8,f=this.blockSize*32;S[h>>>5]|=1<<24-h%32,S[(t.ceil((h+1)/f)*f>>>5)-1]|=128,g.sigBytes=S.length*4,this._process();for(var l=this._state,w=this.cfg.outputLength/8,A=w/8,B=[],_=0;_<A;_++){var O=l[_],y=O.high,E=O.low;y=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,B.push(E),B.push(y)}return new v.init(B,w)},clone:function(){for(var g=d.clone.call(this),S=g._state=this._state.slice(0),h=0;h<25;h++)S[h]=S[h].clone();return g}});n.SHA3=d._createHelper(p),n.HmacSHA3=d._createHmacHelper(p)}(Math),e.SHA3})}(Yn)),wr}var Ar={},ri={get exports(){return Ar},set exports(c){Ar=c}},Ie;function ei(){return Ie||(Ie=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(t){var n=e,s=n.lib,v=s.WordArray,d=s.Hasher,m=n.algo,i=v.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=v.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),b=v.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),o=v.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=v.create([0,1518500249,1859775393,2400959708,2840853838]),x=v.create([1352829926,1548603684,1836072691,2053994217,0]),p=m.RIPEMD160=d.extend({_doReset:function(){this._hash=v.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(A,B){for(var _=0;_<16;_++){var O=B+_,y=A[O];A[O]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360}var E=this._hash.words,R=u.words,V=x.words,P=i.words,M=a.words,j=b.words,W=o.words,F,U,I,C,k,z,H,L,N,J;z=F=E[0],H=U=E[1],L=I=E[2],N=C=E[3],J=k=E[4];for(var K,_=0;_<80;_+=1)K=F+A[B+P[_]]|0,_<16?K+=g(U,I,C)+R[0]:_<32?K+=S(U,I,C)+R[1]:_<48?K+=h(U,I,C)+R[2]:_<64?K+=f(U,I,C)+R[3]:K+=l(U,I,C)+R[4],K=K|0,K=w(K,j[_]),K=K+k|0,F=k,k=C,C=w(I,10),I=U,U=K,K=z+A[B+M[_]]|0,_<16?K+=l(H,L,N)+V[0]:_<32?K+=f(H,L,N)+V[1]:_<48?K+=h(H,L,N)+V[2]:_<64?K+=S(H,L,N)+V[3]:K+=g(H,L,N)+V[4],K=K|0,K=w(K,W[_]),K=K+J|0,z=J,J=N,N=w(L,10),L=H,H=K;K=E[1]+I+N|0,E[1]=E[2]+C+J|0,E[2]=E[3]+k+z|0,E[3]=E[4]+F+H|0,E[4]=E[0]+U+L|0,E[0]=K},_doFinalize:function(){var A=this._data,B=A.words,_=this._nDataBytes*8,O=A.sigBytes*8;B[O>>>5]|=128<<24-O%32,B[(O+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,A.sigBytes=(B.length+1)*4,this._process();for(var y=this._hash,E=y.words,R=0;R<5;R++){var V=E[R];E[R]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360}return y},clone:function(){var A=d.clone.call(this);return A._hash=this._hash.clone(),A}});function g(A,B,_){return A^B^_}function S(A,B,_){return A&B|~A&_}function h(A,B,_){return(A|~B)^_}function f(A,B,_){return A&_|B&~_}function l(A,B,_){return A^(B|~_)}function w(A,B){return A<<B|A>>>32-B}n.RIPEMD160=d._createHelper(p),n.HmacRIPEMD160=d._createHmacHelper(p)}(),e.RIPEMD160})}(ri)),Ar}var Br={},ti={get exports(){return Br},set exports(c){Br=c}},$e;function ne(){return $e||($e=1,function(c,r){(function(e,t){c.exports=t(D())})(T,function(e){(function(){var t=e,n=t.lib,s=n.Base,v=t.enc,d=v.Utf8,m=t.algo;m.HMAC=s.extend({init:function(i,a){i=this._hasher=new i.init,typeof a=="string"&&(a=d.parse(a));var b=i.blockSize,o=b*4;a.sigBytes>o&&(a=i.finalize(a)),a.clamp();for(var u=this._oKey=a.clone(),x=this._iKey=a.clone(),p=u.words,g=x.words,S=0;S<b;S++)p[S]^=1549556828,g[S]^=909522486;u.sigBytes=x.sigBytes=o,this.reset()},reset:function(){var i=this._hasher;i.reset(),i.update(this._iKey)},update:function(i){return this._hasher.update(i),this},finalize:function(i){var a=this._hasher,b=a.finalize(i);a.reset();var o=a.finalize(this._oKey.clone().concat(b));return o}})})()})}(ti)),Br}var _r={},ni={get exports(){return _r},set exports(c){_r=c}},Ue;function ii(){return Ue||(Ue=1,function(c,r){(function(e,t,n){c.exports=t(D(),te(),ne())})(T,function(e){return function(){var t=e,n=t.lib,s=n.Base,v=n.WordArray,d=t.algo,m=d.SHA1,i=d.HMAC,a=d.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:m,iterations:1}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,o){for(var u=this.cfg,x=i.create(u.hasher,b),p=v.create(),g=v.create([1]),S=p.words,h=g.words,f=u.keySize,l=u.iterations;S.length<f;){var w=x.update(o).finalize(g);x.reset();for(var A=w.words,B=A.length,_=w,O=1;O<l;O++){_=x.finalize(_),x.reset();for(var y=_.words,E=0;E<B;E++)A[E]^=y[E]}p.concat(w),h[0]++}return p.sigBytes=f*4,p}});t.PBKDF2=function(b,o,u){return a.create(u).compute(b,o)}}(),e.PBKDF2})}(ni)),_r}var Cr={},si={get exports(){return Cr},set exports(c){Cr=c}},Ne;function $0(){return Ne||(Ne=1,function(c,r){(function(e,t,n){c.exports=t(D(),te(),ne())})(T,function(e){return function(){var t=e,n=t.lib,s=n.Base,v=n.WordArray,d=t.algo,m=d.MD5,i=d.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:m,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var o,u=this.cfg,x=u.hasher.create(),p=v.create(),g=p.words,S=u.keySize,h=u.iterations;g.length<S;){o&&x.update(o),o=x.update(a).finalize(b),x.reset();for(var f=1;f<h;f++)o=x.finalize(o),x.reset();p.concat(o)}return p.sigBytes=S*4,p}});t.EvpKDF=function(a,b,o){return i.create(o).compute(a,b)}}(),e.EvpKDF})}(si)),Cr}var Rr={},ai={get exports(){return Rr},set exports(c){Rr=c}},We;function Q(){return We||(We=1,function(c,r){(function(e,t,n){c.exports=t(D(),$0())})(T,function(e){e.lib.Cipher||function(t){var n=e,s=n.lib,v=s.Base,d=s.WordArray,m=s.BufferedBlockAlgorithm,i=n.enc;i.Utf8;var a=i.Base64,b=n.algo,o=b.EvpKDF,u=s.Cipher=m.extend({cfg:v.extend(),createEncryptor:function(y,E){return this.create(this._ENC_XFORM_MODE,y,E)},createDecryptor:function(y,E){return this.create(this._DEC_XFORM_MODE,y,E)},init:function(y,E,R){this.cfg=this.cfg.extend(R),this._xformMode=y,this._key=E,this.reset()},reset:function(){m.reset.call(this),this._doReset()},process:function(y){return this._append(y),this._process()},finalize:function(y){y&&this._append(y);var E=this._doFinalize();return E},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function y(E){return typeof E=="string"?O:A}return function(E){return{encrypt:function(R,V,P){return y(V).encrypt(E,R,V,P)},decrypt:function(R,V,P){return y(V).decrypt(E,R,V,P)}}}}()});s.StreamCipher=u.extend({_doFinalize:function(){var y=this._process(!0);return y},blockSize:1});var x=n.mode={},p=s.BlockCipherMode=v.extend({createEncryptor:function(y,E){return this.Encryptor.create(y,E)},createDecryptor:function(y,E){return this.Decryptor.create(y,E)},init:function(y,E){this._cipher=y,this._iv=E}}),g=x.CBC=function(){var y=p.extend();y.Encryptor=y.extend({processBlock:function(R,V){var P=this._cipher,M=P.blockSize;E.call(this,R,V,M),P.encryptBlock(R,V),this._prevBlock=R.slice(V,V+M)}}),y.Decryptor=y.extend({processBlock:function(R,V){var P=this._cipher,M=P.blockSize,j=R.slice(V,V+M);P.decryptBlock(R,V),E.call(this,R,V,M),this._prevBlock=j}});function E(R,V,P){var M,j=this._iv;j?(M=j,this._iv=t):M=this._prevBlock;for(var W=0;W<P;W++)R[V+W]^=M[W]}return y}(),S=n.pad={},h=S.Pkcs7={pad:function(y,E){for(var R=E*4,V=R-y.sigBytes%R,P=V<<24|V<<16|V<<8|V,M=[],j=0;j<V;j+=4)M.push(P);var W=d.create(M,V);y.concat(W)},unpad:function(y){var E=y.words[y.sigBytes-1>>>2]&255;y.sigBytes-=E}};s.BlockCipher=u.extend({cfg:u.cfg.extend({mode:g,padding:h}),reset:function(){var y;u.reset.call(this);var E=this.cfg,R=E.iv,V=E.mode;this._xformMode==this._ENC_XFORM_MODE?y=V.createEncryptor:(y=V.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==y?this._mode.init(this,R&&R.words):(this._mode=y.call(V,this,R&&R.words),this._mode.__creator=y)},_doProcessBlock:function(y,E){this._mode.processBlock(y,E)},_doFinalize:function(){var y,E=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(E.pad(this._data,this.blockSize),y=this._process(!0)):(y=this._process(!0),E.unpad(y)),y},blockSize:128/32});var f=s.CipherParams=v.extend({init:function(y){this.mixIn(y)},toString:function(y){return(y||this.formatter).stringify(this)}}),l=n.format={},w=l.OpenSSL={stringify:function(y){var E,R=y.ciphertext,V=y.salt;return V?E=d.create([1398893684,1701076831]).concat(V).concat(R):E=R,E.toString(a)},parse:function(y){var E,R=a.parse(y),V=R.words;return V[0]==1398893684&&V[1]==1701076831&&(E=d.create(V.slice(2,4)),V.splice(0,4),R.sigBytes-=16),f.create({ciphertext:R,salt:E})}},A=s.SerializableCipher=v.extend({cfg:v.extend({format:w}),encrypt:function(y,E,R,V){V=this.cfg.extend(V);var P=y.createEncryptor(R,V),M=P.finalize(E),j=P.cfg;return f.create({ciphertext:M,key:R,iv:j.iv,algorithm:y,mode:j.mode,padding:j.padding,blockSize:y.blockSize,formatter:V.format})},decrypt:function(y,E,R,V){V=this.cfg.extend(V),E=this._parse(E,V.format);var P=y.createDecryptor(R,V).finalize(E.ciphertext);return P},_parse:function(y,E){return typeof y=="string"?E.parse(y,this):y}}),B=n.kdf={},_=B.OpenSSL={execute:function(y,E,R,V){V||(V=d.random(64/8));var P=o.create({keySize:E+R}).compute(y,V),M=d.create(P.words.slice(E),R*4);return P.sigBytes=E*4,f.create({key:P,iv:M,salt:V})}},O=s.PasswordBasedCipher=A.extend({cfg:A.cfg.extend({kdf:_}),encrypt:function(y,E,R,V){V=this.cfg.extend(V);var P=V.kdf.execute(R,y.keySize,y.ivSize);V.iv=P.iv;var M=A.encrypt.call(this,y,E,P.key,V);return M.mixIn(P),M},decrypt:function(y,E,R,V){V=this.cfg.extend(V),E=this._parse(E,V.format);var P=V.kdf.execute(R,y.keySize,y.ivSize,E.salt);V.iv=P.iv;var M=A.decrypt.call(this,y,E,P.key,V);return M}})}()})}(ai)),Rr}var Hr={},oi={get exports(){return Hr},set exports(c){Hr=c}},Le;function ci(){return Le||(Le=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();t.Encryptor=t.extend({processBlock:function(s,v){var d=this._cipher,m=d.blockSize;n.call(this,s,v,m,d),this._prevBlock=s.slice(v,v+m)}}),t.Decryptor=t.extend({processBlock:function(s,v){var d=this._cipher,m=d.blockSize,i=s.slice(v,v+m);n.call(this,s,v,m,d),this._prevBlock=i}});function n(s,v,d,m){var i,a=this._iv;a?(i=a.slice(0),this._iv=void 0):i=this._prevBlock,m.encryptBlock(i,0);for(var b=0;b<d;b++)s[v+b]^=i[b]}return t}(),e.mode.CFB})}(oi)),Hr}var Vr={},hi={get exports(){return Vr},set exports(c){Vr=c}},Ge;function xi(){return Ge||(Ge=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(s,v){var d=this._cipher,m=d.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0);var b=a.slice(0);d.encryptBlock(b,0),a[m-1]=a[m-1]+1|0;for(var o=0;o<m;o++)s[v+o]^=b[o]}});return t.Decryptor=n,t}(),e.mode.CTR})}(hi)),Vr}var kr={},ui={get exports(){return kr},set exports(c){kr=c}},Xe;function fi(){return Xe||(Xe=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(d){if((d>>24&255)===255){var m=d>>16&255,i=d>>8&255,a=d&255;m===255?(m=0,i===255?(i=0,a===255?a=0:++a):++i):++m,d=0,d+=m<<16,d+=i<<8,d+=a}else d+=1<<24;return d}function s(d){return(d[0]=n(d[0]))===0&&(d[1]=n(d[1])),d}var v=t.Encryptor=t.extend({processBlock:function(d,m){var i=this._cipher,a=i.blockSize,b=this._iv,o=this._counter;b&&(o=this._counter=b.slice(0),this._iv=void 0),s(o);var u=o.slice(0);i.encryptBlock(u,0);for(var x=0;x<a;x++)d[m+x]^=u[x]}});return t.Decryptor=v,t}(),e.mode.CTRGladman})}(ui)),kr}var zr={},di={get exports(){return zr},set exports(c){zr=c}},Ze;function pi(){return Ze||(Ze=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(s,v){var d=this._cipher,m=d.blockSize,i=this._iv,a=this._keystream;i&&(a=this._keystream=i.slice(0),this._iv=void 0),d.encryptBlock(a,0);for(var b=0;b<m;b++)s[v+b]^=a[b]}});return t.Decryptor=n,t}(),e.mode.OFB})}(di)),zr}var Or={},li={get exports(){return Or},set exports(c){Or=c}},Qe;function vi(){return Qe||(Qe=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(n,s){this._cipher.encryptBlock(n,s)}}),t.Decryptor=t.extend({processBlock:function(n,s){this._cipher.decryptBlock(n,s)}}),t}(),e.mode.ECB})}(li)),Or}var Pr={},mi={get exports(){return Pr},set exports(c){Pr=c}},Ye;function gi(){return Ye||(Ye=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return e.pad.AnsiX923={pad:function(t,n){var s=t.sigBytes,v=n*4,d=v-s%v,m=s+d-1;t.clamp(),t.words[m>>>2]|=d<<24-m%4*8,t.sigBytes+=d},unpad:function(t){var n=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=n}},e.pad.Ansix923})}(mi)),Pr}var Mr={},yi={get exports(){return Mr},set exports(c){Mr=c}},Je;function bi(){return Je||(Je=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return e.pad.Iso10126={pad:function(t,n){var s=n*4,v=s-t.sigBytes%s;t.concat(e.lib.WordArray.random(v-1)).concat(e.lib.WordArray.create([v<<24],1))},unpad:function(t){var n=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=n}},e.pad.Iso10126})}(yi)),Mr}var Kr={},Ei={get exports(){return Kr},set exports(c){Kr=c}},rt;function Si(){return rt||(rt=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})}(Ei)),Kr}var jr={},wi={get exports(){return jr},set exports(c){jr=c}},et;function Ai(){return et||(et=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return e.pad.ZeroPadding={pad:function(t,n){var s=n*4;t.clamp(),t.sigBytes+=s-(t.sigBytes%s||s)},unpad:function(t){for(var n=t.words,s=t.sigBytes-1,s=t.sigBytes-1;s>=0;s--)if(n[s>>>2]>>>24-s%4*8&255){t.sigBytes=s+1;break}}},e.pad.ZeroPadding})}(wi)),jr}var Tr={},Bi={get exports(){return Tr},set exports(c){Tr=c}},tt;function _i(){return tt||(tt=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})}(Bi)),Tr}var Dr={},Ci={get exports(){return Dr},set exports(c){Dr=c}},nt;function Ri(){return nt||(nt=1,function(c,r){(function(e,t,n){c.exports=t(D(),Q())})(T,function(e){return function(t){var n=e,s=n.lib,v=s.CipherParams,d=n.enc,m=d.Hex,i=n.format;i.Hex={stringify:function(a){return a.ciphertext.toString(m)},parse:function(a){var b=m.parse(a);return v.create({ciphertext:b})}}}(),e.format.Hex})}(Ci)),Dr}var qr={},Hi={get exports(){return qr},set exports(c){qr=c}},it;function Vi(){return it||(it=1,function(c,r){(function(e,t,n){c.exports=t(D(),G0(),X0(),$0(),Q())})(T,function(e){return function(){var t=e,n=t.lib,s=n.BlockCipher,v=t.algo,d=[],m=[],i=[],a=[],b=[],o=[],u=[],x=[],p=[],g=[];(function(){for(var f=[],l=0;l<256;l++)l<128?f[l]=l<<1:f[l]=l<<1^283;for(var w=0,A=0,l=0;l<256;l++){var B=A^A<<1^A<<2^A<<3^A<<4;B=B>>>8^B&255^99,d[w]=B,m[B]=w;var _=f[w],O=f[_],y=f[O],E=f[B]*257^B*16843008;i[w]=E<<24|E>>>8,a[w]=E<<16|E>>>16,b[w]=E<<8|E>>>24,o[w]=E;var E=y*16843009^O*65537^_*257^w*16843008;u[B]=E<<24|E>>>8,x[B]=E<<16|E>>>16,p[B]=E<<8|E>>>24,g[B]=E,w?(w=_^f[f[f[y^_]]],A^=f[f[A]]):w=A=1}})();var S=[0,1,2,4,8,16,32,64,128,27,54],h=v.AES=s.extend({_doReset:function(){var f;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var l=this._keyPriorReset=this._key,w=l.words,A=l.sigBytes/4,B=this._nRounds=A+6,_=(B+1)*4,O=this._keySchedule=[],y=0;y<_;y++)y<A?O[y]=w[y]:(f=O[y-1],y%A?A>6&&y%A==4&&(f=d[f>>>24]<<24|d[f>>>16&255]<<16|d[f>>>8&255]<<8|d[f&255]):(f=f<<8|f>>>24,f=d[f>>>24]<<24|d[f>>>16&255]<<16|d[f>>>8&255]<<8|d[f&255],f^=S[y/A|0]<<24),O[y]=O[y-A]^f);for(var E=this._invKeySchedule=[],R=0;R<_;R++){var y=_-R;if(R%4)var f=O[y];else var f=O[y-4];R<4||y<=4?E[R]=f:E[R]=u[d[f>>>24]]^x[d[f>>>16&255]]^p[d[f>>>8&255]]^g[d[f&255]]}}},encryptBlock:function(f,l){this._doCryptBlock(f,l,this._keySchedule,i,a,b,o,d)},decryptBlock:function(f,l){var w=f[l+1];f[l+1]=f[l+3],f[l+3]=w,this._doCryptBlock(f,l,this._invKeySchedule,u,x,p,g,m);var w=f[l+1];f[l+1]=f[l+3],f[l+3]=w},_doCryptBlock:function(f,l,w,A,B,_,O,y){for(var E=this._nRounds,R=f[l]^w[0],V=f[l+1]^w[1],P=f[l+2]^w[2],M=f[l+3]^w[3],j=4,W=1;W<E;W++){var F=A[R>>>24]^B[V>>>16&255]^_[P>>>8&255]^O[M&255]^w[j++],U=A[V>>>24]^B[P>>>16&255]^_[M>>>8&255]^O[R&255]^w[j++],I=A[P>>>24]^B[M>>>16&255]^_[R>>>8&255]^O[V&255]^w[j++],C=A[M>>>24]^B[R>>>16&255]^_[V>>>8&255]^O[P&255]^w[j++];R=F,V=U,P=I,M=C}var F=(y[R>>>24]<<24|y[V>>>16&255]<<16|y[P>>>8&255]<<8|y[M&255])^w[j++],U=(y[V>>>24]<<24|y[P>>>16&255]<<16|y[M>>>8&255]<<8|y[R&255])^w[j++],I=(y[P>>>24]<<24|y[M>>>16&255]<<16|y[R>>>8&255]<<8|y[V&255])^w[j++],C=(y[M>>>24]<<24|y[R>>>16&255]<<16|y[V>>>8&255]<<8|y[P&255])^w[j++];f[l]=F,f[l+1]=U,f[l+2]=I,f[l+3]=C},keySize:256/32});t.AES=s._createHelper(h)}(),e.AES})}(Hi)),qr}var Fr={},ki={get exports(){return Fr},set exports(c){Fr=c}},st;function zi(){return st||(st=1,function(c,r){(function(e,t,n){c.exports=t(D(),G0(),X0(),$0(),Q())})(T,function(e){return function(){var t=e,n=t.lib,s=n.WordArray,v=n.BlockCipher,d=t.algo,m=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],i=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],b=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],o=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=d.DES=v.extend({_doReset:function(){for(var S=this._key,h=S.words,f=[],l=0;l<56;l++){var w=m[l]-1;f[l]=h[w>>>5]>>>31-w%32&1}for(var A=this._subKeys=[],B=0;B<16;B++){for(var _=A[B]=[],O=a[B],l=0;l<24;l++)_[l/6|0]|=f[(i[l]-1+O)%28]<<31-l%6,_[4+(l/6|0)]|=f[28+(i[l+24]-1+O)%28]<<31-l%6;_[0]=_[0]<<1|_[0]>>>31;for(var l=1;l<7;l++)_[l]=_[l]>>>(l-1)*4+3;_[7]=_[7]<<5|_[7]>>>27}for(var y=this._invSubKeys=[],l=0;l<16;l++)y[l]=A[15-l]},encryptBlock:function(S,h){this._doCryptBlock(S,h,this._subKeys)},decryptBlock:function(S,h){this._doCryptBlock(S,h,this._invSubKeys)},_doCryptBlock:function(S,h,f){this._lBlock=S[h],this._rBlock=S[h+1],x.call(this,4,252645135),x.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),x.call(this,1,1431655765);for(var l=0;l<16;l++){for(var w=f[l],A=this._lBlock,B=this._rBlock,_=0,O=0;O<8;O++)_|=b[O][((B^w[O])&o[O])>>>0];this._lBlock=B,this._rBlock=A^_}var y=this._lBlock;this._lBlock=this._rBlock,this._rBlock=y,x.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),S[h]=this._lBlock,S[h+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(S,h){var f=(this._lBlock>>>S^this._rBlock)&h;this._rBlock^=f,this._lBlock^=f<<S}function p(S,h){var f=(this._rBlock>>>S^this._lBlock)&h;this._lBlock^=f,this._rBlock^=f<<S}t.DES=v._createHelper(u);var g=d.TripleDES=v.extend({_doReset:function(){var S=this._key,h=S.words;if(h.length!==2&&h.length!==4&&h.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var f=h.slice(0,2),l=h.length<4?h.slice(0,2):h.slice(2,4),w=h.length<6?h.slice(0,2):h.slice(4,6);this._des1=u.createEncryptor(s.create(f)),this._des2=u.createEncryptor(s.create(l)),this._des3=u.createEncryptor(s.create(w))},encryptBlock:function(S,h){this._des1.encryptBlock(S,h),this._des2.decryptBlock(S,h),this._des3.encryptBlock(S,h)},decryptBlock:function(S,h){this._des3.decryptBlock(S,h),this._des2.encryptBlock(S,h),this._des1.decryptBlock(S,h)},keySize:192/32,ivSize:64/32,blockSize:64/32});t.TripleDES=v._createHelper(g)}(),e.TripleDES})}(ki)),Fr}var Ir={},Oi={get exports(){return Ir},set exports(c){Ir=c}},at;function Pi(){return at||(at=1,function(c,r){(function(e,t,n){c.exports=t(D(),G0(),X0(),$0(),Q())})(T,function(e){return function(){var t=e,n=t.lib,s=n.StreamCipher,v=t.algo,d=v.RC4=s.extend({_doReset:function(){for(var a=this._key,b=a.words,o=a.sigBytes,u=this._S=[],x=0;x<256;x++)u[x]=x;for(var x=0,p=0;x<256;x++){var g=x%o,S=b[g>>>2]>>>24-g%4*8&255;p=(p+u[x]+S)%256;var h=u[x];u[x]=u[p],u[p]=h}this._i=this._j=0},_doProcessBlock:function(a,b){a[b]^=m.call(this)},keySize:256/32,ivSize:0});function m(){for(var a=this._S,b=this._i,o=this._j,u=0,x=0;x<4;x++){b=(b+1)%256,o=(o+a[b])%256;var p=a[b];a[b]=a[o],a[o]=p,u|=a[(a[b]+a[o])%256]<<24-x*8}return this._i=b,this._j=o,u}t.RC4=s._createHelper(d);var i=v.RC4Drop=d.extend({cfg:d.cfg.extend({drop:192}),_doReset:function(){d._doReset.call(this);for(var a=this.cfg.drop;a>0;a--)m.call(this)}});t.RC4Drop=s._createHelper(i)}(),e.RC4})}(Oi)),Ir}var $r={},Mi={get exports(){return $r},set exports(c){$r=c}},ot;function Ki(){return ot||(ot=1,function(c,r){(function(e,t,n){c.exports=t(D(),G0(),X0(),$0(),Q())})(T,function(e){return function(){var t=e,n=t.lib,s=n.StreamCipher,v=t.algo,d=[],m=[],i=[],a=v.Rabbit=s.extend({_doReset:function(){for(var o=this._key.words,u=this.cfg.iv,x=0;x<4;x++)o[x]=(o[x]<<8|o[x]>>>24)&16711935|(o[x]<<24|o[x]>>>8)&4278255360;var p=this._X=[o[0],o[3]<<16|o[2]>>>16,o[1],o[0]<<16|o[3]>>>16,o[2],o[1]<<16|o[0]>>>16,o[3],o[2]<<16|o[1]>>>16],g=this._C=[o[2]<<16|o[2]>>>16,o[0]&4294901760|o[1]&65535,o[3]<<16|o[3]>>>16,o[1]&4294901760|o[2]&65535,o[0]<<16|o[0]>>>16,o[2]&4294901760|o[3]&65535,o[1]<<16|o[1]>>>16,o[3]&4294901760|o[0]&65535];this._b=0;for(var x=0;x<4;x++)b.call(this);for(var x=0;x<8;x++)g[x]^=p[x+4&7];if(u){var S=u.words,h=S[0],f=S[1],l=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,w=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,A=l>>>16|w&4294901760,B=w<<16|l&65535;g[0]^=l,g[1]^=A,g[2]^=w,g[3]^=B,g[4]^=l,g[5]^=A,g[6]^=w,g[7]^=B;for(var x=0;x<4;x++)b.call(this)}},_doProcessBlock:function(o,u){var x=this._X;b.call(this),d[0]=x[0]^x[5]>>>16^x[3]<<16,d[1]=x[2]^x[7]>>>16^x[5]<<16,d[2]=x[4]^x[1]>>>16^x[7]<<16,d[3]=x[6]^x[3]>>>16^x[1]<<16;for(var p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360,o[u+p]^=d[p]},blockSize:128/32,ivSize:64/32});function b(){for(var o=this._X,u=this._C,x=0;x<8;x++)m[x]=u[x];u[0]=u[0]+1295307597+this._b|0,u[1]=u[1]+3545052371+(u[0]>>>0<m[0]>>>0?1:0)|0,u[2]=u[2]+886263092+(u[1]>>>0<m[1]>>>0?1:0)|0,u[3]=u[3]+1295307597+(u[2]>>>0<m[2]>>>0?1:0)|0,u[4]=u[4]+3545052371+(u[3]>>>0<m[3]>>>0?1:0)|0,u[5]=u[5]+886263092+(u[4]>>>0<m[4]>>>0?1:0)|0,u[6]=u[6]+1295307597+(u[5]>>>0<m[5]>>>0?1:0)|0,u[7]=u[7]+3545052371+(u[6]>>>0<m[6]>>>0?1:0)|0,this._b=u[7]>>>0<m[7]>>>0?1:0;for(var x=0;x<8;x++){var p=o[x]+u[x],g=p&65535,S=p>>>16,h=((g*g>>>17)+g*S>>>15)+S*S,f=((p&4294901760)*p|0)+((p&65535)*p|0);i[x]=h^f}o[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,o[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,o[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,o[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,o[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,o[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,o[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,o[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}t.Rabbit=s._createHelper(a)}(),e.Rabbit})}(Mi)),$r}var Ur={},ji={get exports(){return Ur},set exports(c){Ur=c}},ct;function Ti(){return ct||(ct=1,function(c,r){(function(e,t,n){c.exports=t(D(),G0(),X0(),$0(),Q())})(T,function(e){return function(){var t=e,n=t.lib,s=n.StreamCipher,v=t.algo,d=[],m=[],i=[],a=v.RabbitLegacy=s.extend({_doReset:function(){var o=this._key.words,u=this.cfg.iv,x=this._X=[o[0],o[3]<<16|o[2]>>>16,o[1],o[0]<<16|o[3]>>>16,o[2],o[1]<<16|o[0]>>>16,o[3],o[2]<<16|o[1]>>>16],p=this._C=[o[2]<<16|o[2]>>>16,o[0]&4294901760|o[1]&65535,o[3]<<16|o[3]>>>16,o[1]&4294901760|o[2]&65535,o[0]<<16|o[0]>>>16,o[2]&4294901760|o[3]&65535,o[1]<<16|o[1]>>>16,o[3]&4294901760|o[0]&65535];this._b=0;for(var g=0;g<4;g++)b.call(this);for(var g=0;g<8;g++)p[g]^=x[g+4&7];if(u){var S=u.words,h=S[0],f=S[1],l=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,w=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,A=l>>>16|w&4294901760,B=w<<16|l&65535;p[0]^=l,p[1]^=A,p[2]^=w,p[3]^=B,p[4]^=l,p[5]^=A,p[6]^=w,p[7]^=B;for(var g=0;g<4;g++)b.call(this)}},_doProcessBlock:function(o,u){var x=this._X;b.call(this),d[0]=x[0]^x[5]>>>16^x[3]<<16,d[1]=x[2]^x[7]>>>16^x[5]<<16,d[2]=x[4]^x[1]>>>16^x[7]<<16,d[3]=x[6]^x[3]>>>16^x[1]<<16;for(var p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360,o[u+p]^=d[p]},blockSize:128/32,ivSize:64/32});function b(){for(var o=this._X,u=this._C,x=0;x<8;x++)m[x]=u[x];u[0]=u[0]+1295307597+this._b|0,u[1]=u[1]+3545052371+(u[0]>>>0<m[0]>>>0?1:0)|0,u[2]=u[2]+886263092+(u[1]>>>0<m[1]>>>0?1:0)|0,u[3]=u[3]+1295307597+(u[2]>>>0<m[2]>>>0?1:0)|0,u[4]=u[4]+3545052371+(u[3]>>>0<m[3]>>>0?1:0)|0,u[5]=u[5]+886263092+(u[4]>>>0<m[4]>>>0?1:0)|0,u[6]=u[6]+1295307597+(u[5]>>>0<m[5]>>>0?1:0)|0,u[7]=u[7]+3545052371+(u[6]>>>0<m[6]>>>0?1:0)|0,this._b=u[7]>>>0<m[7]>>>0?1:0;for(var x=0;x<8;x++){var p=o[x]+u[x],g=p&65535,S=p>>>16,h=((g*g>>>17)+g*S>>>15)+S*S,f=((p&4294901760)*p|0)+((p&65535)*p|0);i[x]=h^f}o[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,o[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,o[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,o[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,o[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,o[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,o[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,o[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}t.RabbitLegacy=s._createHelper(a)}(),e.RabbitLegacy})}(ji)),Ur}(function(c,r){(function(e,t,n){c.exports=t(D(),Nr(),Tn(),qn(),G0(),$n(),X0(),te(),yt(),Gn(),bt(),Qn(),Jn(),ei(),ne(),ii(),$0(),Q(),ci(),xi(),fi(),pi(),vi(),gi(),bi(),Si(),Ai(),_i(),Ri(),Vi(),zi(),Pi(),Ki(),Ti())})(T,function(e){return e})})(Pn);const ht=re;function Wr(c,r,e,t){function n(s){return s instanceof e?s:new e(function(v){v(s)})}return new(e||(e=Promise))(function(s,v){function d(a){try{i(t.next(a))}catch(b){v(b)}}function m(a){try{i(t.throw(a))}catch(b){v(b)}}function i(a){a.done?s(a.value):n(a.value).then(d,m)}i((t=t.apply(c,r||[])).next())})}class xt{constructor(){this.httpBackend=new dt}getMetadata(r,{protocol:e,location:t},n){return Wr(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:`${e}:${decodeURIComponent(t)}`,method:"GET",headers:{"Content-Type":"text/plain; charset=utf-8"},json:!1})})}}class Di extends Error{constructor(){super("Non-compliance with the TZIP-016 standard. No big map named metadata was found in the contract storage."),this.name="BigMapMetadataNotFound"}}class qi extends Error{constructor(r){super(`No metadata was found in the contract storage. ${r}`),this.info=r,this.name="MetadataNotFound"}}class Et extends Error{constructor(r){super(`Non-compliance with the TZIP-016 standard. The URI is invalid: ${r}.`),this.uri=r,this.name="InvalidUri"}}class Fi extends Error{constructor(r){super(`The metadata found at the pointed ressource are not compliant with tzip16 standard: ${r}.`),this.invalidMetadata=r,this.name="InvalidMetadata"}}class Ii extends Error{constructor(r){super(`The protocol found in the URI is not supported: ${r}.`),this.protocol=r,this.name="ProtocolNotSupported"}}class $i extends Error{constructor(){super("The contract does not comply with the tzip16 standard. The type of metadata should be bytes."),this.name="InvalidMetadataType"}}const ut={prim:"big_map",args:[{prim:"string"},{prim:"bytes"}],annots:["%metadata"]};class Ui{constructor(){this.TEZOS_STORAGE_REGEX=/^(?:\/\/(KT1\w{33})(?:\.(.+))?\/)?([\w|%]+)$/}getMetadata(r,{location:e},t){return Wr(this,void 0,void 0,function*(){const n=this.parseTezosStorageUri(e);if(!n)throw new Et(`tezos-storage:${e}`);const s=yield t.readProvider.getScript(n.contractAddress||r.address,"head"),v=L0.fromRPCResponse({script:s}).FindFirstInTopLevelPair(s.storage,ut);if(!v||!v.int)throw new Di;const d=yield t.contract.getBigMapKeyByID(v.int.toString(),n.path,new L0(ut));if(!d)throw new qi(`No '${n.path}' key found in the big map %metadata of the contract ${n.contractAddress||r.address}`);if(!/^[0-9a-fA-F]*$/.test(d))throw new $i;return Jt(d)})}parseTezosStorageUri(r){const e=this.TEZOS_STORAGE_REGEX.exec(r);if(e)return{contractAddress:e[1],network:e[2],path:decodeURIComponent(e[3])}}}class Ni{constructor(r){this.httpBackend=new dt,this._ipfsGateway=r||"ipfs.io"}getMetadata(r,{location:e},t){return Wr(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:`https://${this._ipfsGateway}/ipfs/${e.substring(2)}/`,method:"GET",headers:{"Content-Type":"text/plain; charset=utf-8"},json:!1})})}}var ft;(function(c){c.MICHELSON_STORAGE="michelsonStorageView",c.REST_API_QUERY="restApiQuery"})(ft||(ft={}));function Wi(c){return ht.SHA256(c).toString(ht.enc.Hex)}class St{constructor(r){this.handlers=r,this.PROTOCOL_REGEX=/(?:sha256:\/\/0x(.*)\/)?(https?|ipfs|tezos-storage):(.*)/}provideMetadata(r,e,t){return Wr(this,void 0,void 0,function*(){const n=this.extractProtocolInfo(e);if(!n||!n.location)throw new Et(e);const s=this.handlers.get(n.protocol);if(!s)throw new Ii(n.protocol);const v=yield s.getMetadata(r,n,t),d=Wi(v);let m;try{m=JSON.parse(v)}catch{throw new Fi(v)}return{uri:e,metadata:m,integrityCheckResult:n.sha256hash?n.sha256hash===d:void 0,sha256Hash:n.sha256hash?d:void 0}})}extractProtocolInfo(r){const e=this.PROTOCOL_REGEX.exec(r);if(e)return{sha256hash:e[1],protocol:e[2],location:e[3]}}}const wt=new Map([["http",new xt],["https",new xt],["tezos-storage",new Ui],["ipfs",new Ni]]);class Li{constructor(r){this._metadataProvider=r||new St(wt)}configureContext(r){Object.assign(r,{metadataProvider:this._metadataProvider})}}class Gi{constructor(r){this._metadataProvider=r||new St(wt)}configureContext(r){Object.assign(r,{metadataProvider:this._metadataProvider})}}const Xi="https://rpc.tzbeta.net/",Ji=async c=>{const r=new Tt(c??Xi);return r.addExtension(new Gi),r.addExtension(new Li),r.setPackerProvider(new Dt),r.getFactory(qt)(),{tezos:r,forger:Ft}};export{Ji as create_toolkit};
