import{_ as d}from"./taquito-utils.es6-2790dd94.js";import{N as m,C as v}from"./DAppClient-b62def3c.js";import{m as y,v as f,x as A}from"./main-ab9e62f4.js";import"./_commonjsHelpers-6dff16f2.js";let o;const u=async e=>({name:"TEZGOV",iconUrl:"https://tezgov.app/icon/favicon.png",preferredNetwork:e??m.MAINNET,eventHandlers:{},colorMode:v.DARK}),g=async(e,t)=>{const s=await y({method:"get",url:"/assets/styles/beacon.css"}),n=new Promise((c,a)=>{f(document.body,i=>{const r=i;if(typeof r.id=="string"&&r.id.startsWith("beacon-alert-wrapper")){const _=r==null?void 0:r.shadowRoot;if(_){A(_,s.data);const w=_.querySelector(".beacon-modal__close__wrapper");w&&w.addEventListener("click",()=>a("closed"))}return r.style.display="block",!0}return!1})}),l=e.requestPermissions(t);await Promise.race([n,l])},p=async(e,t)=>{await e.client.getActiveAccount()||await g(e,{network:t})},h=async(e,t)=>{if(o!==void 0)if((t==null?void 0:t.useCached)===!0){const c=o;return await p(c,{type:e}),c}else o.disconnect(),o.clearActiveAccount(),o=void 0;const{BeaconWallet:s}=await d(()=>import("./taquito-beacon-wallet.es6-e72e0b3e.js"),["assets/taquito-beacon-wallet.es6-e72e0b3e.js","assets/DAppClient-b62def3c.js","assets/main-ab9e62f4.js","assets/taquito-utils.es6-2790dd94.js","assets/_commonjsHelpers-6dff16f2.js","assets/index-754ef289.css","assets/taquito.es6-14c09632.js","assets/index-9aada285.js"]),n=o??new s(await u(e));return o=n,await p(n,{type:e}),n},R=async()=>{const{BeaconWallet:e}=await d(()=>import("./taquito-beacon-wallet.es6-e72e0b3e.js"),["assets/taquito-beacon-wallet.es6-e72e0b3e.js","assets/DAppClient-b62def3c.js","assets/main-ab9e62f4.js","assets/taquito-utils.es6-2790dd94.js","assets/_commonjsHelpers-6dff16f2.js","assets/index-754ef289.css","assets/taquito.es6-14c09632.js","assets/index-9aada285.js"]),t=o??new e(await u());o=t;const s=await t.client.getActiveAccount();return{active:!!s,networkId:s==null?void 0:s.network.type}},T=async(e="mainnet",t)=>{const{create_toolkit:s}=await d(()=>import("./taquito-cd2f90fd.js"),["assets/taquito-cd2f90fd.js","assets/taquito.es6-14c09632.js","assets/taquito-utils.es6-2790dd94.js","assets/_commonjsHelpers-6dff16f2.js","assets/index-9aada285.js"]),{tezos:n,forger:l}=await s(t.rpc),c=await h(e,t);n.setWalletProvider(c);const a=await c.client.getActiveAccount(),i=a!=null&&a.address?await n.rpc.getManagerKey(a==null?void 0:a.address):void 0;return{wallet:c,account:a==null?void 0:a.address,tezos:n,forger:l,managerKey:i==null?void 0:i.toString()}},q=async()=>{o==null||o.disconnect(),o=void 0};export{T as connect_beacon_wallet,h as create_beacon_wallet,q as disconnect_beacon_wallet,R as has_active_account};
