var Z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Wf(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}const Qf={},Jf=Object.freeze(Object.defineProperty({__proto__:null,default:Qf},Symbol.toStringTag,{value:"Module"})),es=Wf(Jf);var Be;(function(t){t[t.NO_PREFIX_MATCHED=0]="NO_PREFIX_MATCHED",t[t.INVALID_CHECKSUM=1]="INVALID_CHECKSUM",t[t.INVALID_LENGTH=2]="INVALID_LENGTH",t[t.VALID=3]="VALID",t[t.PREFIX_NOT_ALLOWED=4]="PREFIX_NOT_ALLOWED",t[t.INVALID_ENCODING=5]="INVALID_ENCODING",t[t.OTHER=6]="OTHER"})(Be||(Be={}));const zn={[Be.NO_PREFIX_MATCHED]:"unsupported Base58 prefix",[Be.INVALID_CHECKSUM]:"invalid checksum",[Be.INVALID_LENGTH]:"invalid length",[Be.PREFIX_NOT_ALLOWED]:"Base58 prefix not allowed in this context",[Be.INVALID_ENCODING]:"invalid Base58 encoding"};class Wt extends Error{}class ae extends Wt{constructor(e,r,n){let i,f,s;e!==void 0&&(typeof e=="string"?(s=e,r!==void 0&&(typeof r=="string"?i=r:(f=r,n!==void 0?i=n:i=zn[r]))):(f=e,i=zn[e],s=i)),super(s),this.name=this.constructor.name,this.result=f,this.errorDetail=i}}class Y0 extends Wt{}class V0 extends Wt{}class Zi extends Wt{}class $0 extends Wt{}class z0 extends Wt{}class Yi extends ae{constructor(e,r){super(`Invalid address "${e}"`,r),this.address=e,this.name=this.constructor.name}}class X0 extends ae{constructor(e,r){super(`Invalid proof "${e}"`,r),this.proof=e,this.name=this.constructor.name}}class j0 extends ae{constructor(e,r){super(`Invalid staking address "${e}", you can only set destination as your own address`,r),this.address=e,this.name=this.constructor.name}}class W0 extends ae{constructor(e,r){super("The amount can only be 0 when finalizing an unstake",r),this.address=e,this.name=this.constructor.name}}class Q0 extends ae{constructor(e,r){super(`Invalid block hash "${e}"`,r),this.blockHash=e,this.name=this.constructor.name}}class J0 extends ae{constructor(e,r){super(`Invalid amount "${e}"`,r),this.amount=e,this.name=this.constructor.name}}class ea extends ae{constructor(e,r){super(`Invalid derivation path "${e}"`,r),this.derivationPath=e,this.name=this.constructor.name}}class Jr extends ae{constructor(e,r){super(`Invalid hex string "${e}"`,r),this.hexString=e,this.name=this.constructor.name}}class ts extends ae{constructor(e,r){super(`Invalid message "${e}"`,r),this.msg=e,this.name=this.constructor.name}}class ta extends ae{constructor(e,r,n,i,f){const s=`Invalid view arguments ${JSON.stringify(n)} received for name "${e}" expecting one of the following signatures ${JSON.stringify(r)}.`;super(s,f),this.viewName=e,this.sigs=r,this.args=n,this.cause=i,this.name=this.constructor.name}}class rs extends ae{constructor(e){super("Invalid private key",e),this.name=this.constructor.name}}class Vi extends ae{constructor(e,r){const n=e!==void 0?`Invalid public key "${e}"`:"Invalid public key";super(n,r),this.publicKey=e,this.name=this.constructor.name}}class ns extends ae{constructor(e,r){super(`Invalid signature "${e}"`,r),this.signature=e,this.name=this.constructor.name}}class ra extends ae{constructor(e,r){super(`Invalid contract address "${e}"`,r),this.contractAddress=e,this.name=this.constructor.name}}class na extends ae{constructor(e,r){super(`Invalid chain id "${e}"`,r),this.chainId=e,this.name=this.constructor.name}}class ia extends ae{constructor(e,r){super(`Invalid public key hash "${e}"`,r),this.keyHash=e,this.name=this.constructor.name}}class fa extends ae{constructor(e,r){super(`Invalid operation hash "${e}"`,r),this.operationHash=e,this.name=this.constructor.name}}class sa extends ae{constructor(e,r){super(`Invalid operation kind "${e}"`,r),this.operationKind=e,this.name=this.constructor.name}}class oa extends Zi{constructor(e){super(e),this.name=this.constructor.name}}class aa extends Zi{constructor(e){super(e),this.name=this.constructor.name}}class ca extends Wt{constructor(e,r){super(`Public key not found of this address "${e}" in either wallet or contract API.`),this.pkh=e,this.cause=r,this.name=this.constructor.name}}var is=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,en=Math.ceil,ot=Math.floor,Je="[BigNumber Error] ",Xn=Je+"Number primitive has more than 15 significant digits: ",bt=1e14,te=14,tn=9007199254740991,rn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Nt=1e7,we=1e9;function $i(t){var e,r,n,i=N.prototype={constructor:N,toString:null,valueOf:null},f=new N(1),s=20,u=4,c=-7,d=21,g=-1e7,S=1e7,_=!1,I=1,H=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",Y=!0;function N(b,h){var y,A,B,w,p,o,l,E,m=this;if(!(m instanceof N))return new N(b,h);if(h==null){if(b&&b._isBigNumber===!0){m.s=b.s,!b.c||b.e>S?m.c=m.e=null:b.e<g?m.c=[m.e=0]:(m.e=b.e,m.c=b.c.slice());return}if((o=typeof b=="number")&&b*0==0){if(m.s=1/b<0?(b=-b,-1):1,b===~~b){for(w=0,p=b;p>=10;p/=10,w++);w>S?m.c=m.e=null:(m.e=w,m.c=[b]);return}E=String(b)}else{if(!is.test(E=String(b)))return n(m,E,o);m.s=E.charCodeAt(0)==45?(E=E.slice(1),-1):1}(w=E.indexOf("."))>-1&&(E=E.replace(".","")),(p=E.search(/e/i))>0?(w<0&&(w=p),w+=+E.slice(p+1),E=E.substring(0,p)):w<0&&(w=E.length)}else{if(le(h,2,K.length,"Base"),h==10&&Y)return m=new N(b),M(m,s+m.e+1,u);if(E=String(b),o=typeof b=="number"){if(b*0!=0)return n(m,E,o,h);if(m.s=1/b<0?(E=E.slice(1),-1):1,N.DEBUG&&E.replace(/^0\.0*|\./,"").length>15)throw Error(Xn+b)}else m.s=E.charCodeAt(0)===45?(E=E.slice(1),-1):1;for(y=K.slice(0,h),w=p=0,l=E.length;p<l;p++)if(y.indexOf(A=E.charAt(p))<0){if(A=="."){if(p>w){w=l;continue}}else if(!B&&(E==E.toUpperCase()&&(E=E.toLowerCase())||E==E.toLowerCase()&&(E=E.toUpperCase()))){B=!0,p=-1,w=0;continue}return n(m,String(b),o,h)}o=!1,E=r(E,h,10,m.s),(w=E.indexOf("."))>-1?E=E.replace(".",""):w=E.length}for(p=0;E.charCodeAt(p)===48;p++);for(l=E.length;E.charCodeAt(--l)===48;);if(E=E.slice(p,++l)){if(l-=p,o&&N.DEBUG&&l>15&&(b>tn||b!==ot(b)))throw Error(Xn+m.s*b);if((w=w-p-1)>S)m.c=m.e=null;else if(w<g)m.c=[m.e=0];else{if(m.e=w,m.c=[],p=(w+1)%te,w<0&&(p+=te),p<l){for(p&&m.c.push(+E.slice(0,p)),l-=te;p<l;)m.c.push(+E.slice(p,p+=te));p=te-(E=E.slice(p)).length}else p-=l;for(;p--;E+="0");m.c.push(+E)}}else m.c=[m.e=0]}N.clone=$i,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(b){var h,y;if(b!=null)if(typeof b=="object"){if(b.hasOwnProperty(h="DECIMAL_PLACES")&&(y=b[h],le(y,0,we,h),s=y),b.hasOwnProperty(h="ROUNDING_MODE")&&(y=b[h],le(y,0,8,h),u=y),b.hasOwnProperty(h="EXPONENTIAL_AT")&&(y=b[h],y&&y.pop?(le(y[0],-we,0,h),le(y[1],0,we,h),c=y[0],d=y[1]):(le(y,-we,we,h),c=-(d=y<0?-y:y))),b.hasOwnProperty(h="RANGE"))if(y=b[h],y&&y.pop)le(y[0],-we,-1,h),le(y[1],1,we,h),g=y[0],S=y[1];else if(le(y,-we,we,h),y)g=-(S=y<0?-y:y);else throw Error(Je+h+" cannot be zero: "+y);if(b.hasOwnProperty(h="CRYPTO"))if(y=b[h],y===!!y)if(y)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))_=y;else throw _=!y,Error(Je+"crypto unavailable");else _=y;else throw Error(Je+h+" not true or false: "+y);if(b.hasOwnProperty(h="MODULO_MODE")&&(y=b[h],le(y,0,9,h),I=y),b.hasOwnProperty(h="POW_PRECISION")&&(y=b[h],le(y,0,we,h),H=y),b.hasOwnProperty(h="FORMAT"))if(y=b[h],typeof y=="object")F=y;else throw Error(Je+h+" not an object: "+y);if(b.hasOwnProperty(h="ALPHABET"))if(y=b[h],typeof y=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(y))Y=y.slice(0,10)=="0123456789",K=y;else throw Error(Je+h+" invalid: "+y)}else throw Error(Je+"Object expected: "+b);return{DECIMAL_PLACES:s,ROUNDING_MODE:u,EXPONENTIAL_AT:[c,d],RANGE:[g,S],CRYPTO:_,MODULO_MODE:I,POW_PRECISION:H,FORMAT:F,ALPHABET:K}},N.isBigNumber=function(b){if(!b||b._isBigNumber!==!0)return!1;if(!N.DEBUG)return!0;var h,y,A=b.c,B=b.e,w=b.s;e:if({}.toString.call(A)=="[object Array]"){if((w===1||w===-1)&&B>=-we&&B<=we&&B===ot(B)){if(A[0]===0){if(B===0&&A.length===1)return!0;break e}if(h=(B+1)%te,h<1&&(h+=te),String(A[0]).length==h){for(h=0;h<A.length;h++)if(y=A[h],y<0||y>=bt||y!==ot(y))break e;if(y!==0)return!0}}}else if(A===null&&B===null&&(w===null||w===1||w===-1))return!0;throw Error(Je+"Invalid BigNumber: "+b)},N.maximum=N.max=function(){return G(arguments,-1)},N.minimum=N.min=function(){return G(arguments,1)},N.random=(function(){var b=9007199254740992,h=Math.random()*b&2097151?function(){return ot(Math.random()*b)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(y){var A,B,w,p,o,l=0,E=[],m=new N(f);if(y==null?y=s:le(y,0,we),p=en(y/te),_)if(crypto.getRandomValues){for(A=crypto.getRandomValues(new Uint32Array(p*=2));l<p;)o=A[l]*131072+(A[l+1]>>>11),o>=9e15?(B=crypto.getRandomValues(new Uint32Array(2)),A[l]=B[0],A[l+1]=B[1]):(E.push(o%1e14),l+=2);l=p/2}else if(crypto.randomBytes){for(A=crypto.randomBytes(p*=7);l<p;)o=(A[l]&31)*281474976710656+A[l+1]*1099511627776+A[l+2]*4294967296+A[l+3]*16777216+(A[l+4]<<16)+(A[l+5]<<8)+A[l+6],o>=9e15?crypto.randomBytes(7).copy(A,l):(E.push(o%1e14),l+=7);l=p/7}else throw _=!1,Error(Je+"crypto unavailable");if(!_)for(;l<p;)o=h(),o<9e15&&(E[l++]=o%1e14);for(p=E[--l],y%=te,p&&y&&(o=rn[te-y],E[l]=ot(p/o)*o);E[l]===0;E.pop(),l--);if(l<0)E=[w=0];else{for(w=-1;E[0]===0;E.splice(0,1),w-=te);for(l=1,o=E[0];o>=10;o/=10,l++);l<te&&(w-=te-l)}return m.e=w,m.c=E,m}})(),N.sum=function(){for(var b=1,h=arguments,y=new N(h[0]);b<h.length;)y=y.plus(h[b++]);return y},r=(function(){var b="0123456789";function h(y,A,B,w){for(var p,o=[0],l,E=0,m=y.length;E<m;){for(l=o.length;l--;o[l]*=A);for(o[0]+=w.indexOf(y.charAt(E++)),p=0;p<o.length;p++)o[p]>B-1&&(o[p+1]==null&&(o[p+1]=0),o[p+1]+=o[p]/B|0,o[p]%=B)}return o.reverse()}return function(y,A,B,w,p){var o,l,E,m,x,v,L,q,V=y.indexOf("."),X=s,$=u;for(V>=0&&(m=H,H=0,y=y.replace(".",""),q=new N(A),v=q.pow(y.length-V),H=m,q.c=h(Bt(ft(v.c),v.e,"0"),10,B,b),q.e=q.c.length),L=h(y,A,B,p?(o=K,b):(o=b,K)),E=m=L.length;L[--m]==0;L.pop());if(!L[0])return o.charAt(0);if(V<0?--E:(v.c=L,v.e=E,v.s=w,v=e(v,q,X,$,B),L=v.c,x=v.r,E=v.e),l=E+X+1,V=L[l],m=B/2,x=x||l<0||L[l+1]!=null,x=$<4?(V!=null||x)&&($==0||$==(v.s<0?3:2)):V>m||V==m&&($==4||x||$==6&&L[l-1]&1||$==(v.s<0?8:7)),l<1||!L[0])y=x?Bt(o.charAt(1),-X,o.charAt(0)):o.charAt(0);else{if(L.length=l,x)for(--B;++L[--l]>B;)L[l]=0,l||(++E,L=[1].concat(L));for(m=L.length;!L[--m];);for(V=0,y="";V<=m;y+=o.charAt(L[V++]));y=Bt(y,E,o.charAt(0))}return y}})(),e=(function(){function b(A,B,w){var p,o,l,E,m=0,x=A.length,v=B%Nt,L=B/Nt|0;for(A=A.slice();x--;)l=A[x]%Nt,E=A[x]/Nt|0,p=L*l+E*v,o=v*l+p%Nt*Nt+m,m=(o/w|0)+(p/Nt|0)+L*E,A[x]=o%w;return m&&(A=[m].concat(A)),A}function h(A,B,w,p){var o,l;if(w!=p)l=w>p?1:-1;else for(o=l=0;o<w;o++)if(A[o]!=B[o]){l=A[o]>B[o]?1:-1;break}return l}function y(A,B,w,p){for(var o=0;w--;)A[w]-=o,o=A[w]<B[w]?1:0,A[w]=o*p+A[w]-B[w];for(;!A[0]&&A.length>1;A.splice(0,1));}return function(A,B,w,p,o){var l,E,m,x,v,L,q,V,X,$,z,T,C,R,a,U,j,W=A.s==B.s?1:-1,re=A.c,J=B.c;if(!re||!re[0]||!J||!J[0])return new N(!A.s||!B.s||(re?J&&re[0]==J[0]:!J)?NaN:re&&re[0]==0||!J?W*0:W/0);for(V=new N(W),X=V.c=[],E=A.e-B.e,W=w+E+1,o||(o=bt,E=at(A.e/te)-at(B.e/te),W=W/te|0),m=0;J[m]==(re[m]||0);m++);if(J[m]>(re[m]||0)&&E--,W<0)X.push(1),x=!0;else{for(R=re.length,U=J.length,m=0,W+=2,v=ot(o/(J[0]+1)),v>1&&(J=b(J,v,o),re=b(re,v,o),U=J.length,R=re.length),C=U,$=re.slice(0,U),z=$.length;z<U;$[z++]=0);j=J.slice(),j=[0].concat(j),a=J[0],J[1]>=o/2&&a++;do{if(v=0,l=h(J,$,U,z),l<0){if(T=$[0],U!=z&&(T=T*o+($[1]||0)),v=ot(T/a),v>1)for(v>=o&&(v=o-1),L=b(J,v,o),q=L.length,z=$.length;h(L,$,q,z)==1;)v--,y(L,U<q?j:J,q,o),q=L.length,l=1;else v==0&&(l=v=1),L=J.slice(),q=L.length;if(q<z&&(L=[0].concat(L)),y($,L,z,o),z=$.length,l==-1)for(;h(J,$,U,z)<1;)v++,y($,U<z?j:J,z,o),z=$.length}else l===0&&(v++,$=[0]);X[m++]=v,$[0]?$[z++]=re[C]||0:($=[re[C]],z=1)}while((C++<R||$[0]!=null)&&W--);x=$[0]!=null,X[0]||X.splice(0,1)}if(o==bt){for(m=1,W=X[0];W>=10;W/=10,m++);M(V,w+(V.e=m+E*te-1)+1,p,x)}else V.e=E,V.r=+x;return V}})();function P(b,h,y,A){var B,w,p,o,l;if(y==null?y=u:le(y,0,8),!b.c)return b.toString();if(B=b.c[0],p=b.e,h==null)l=ft(b.c),l=A==1||A==2&&(p<=c||p>=d)?Br(l,p):Bt(l,p,"0");else if(b=M(new N(b),h,y),w=b.e,l=ft(b.c),o=l.length,A==1||A==2&&(h<=w||w<=c)){for(;o<h;l+="0",o++);l=Br(l,w)}else if(h-=p,l=Bt(l,w,"0"),w+1>o){if(--h>0)for(l+=".";h--;l+="0");}else if(h+=w-o,h>0)for(w+1==o&&(l+=".");h--;l+="0");return b.s<0&&B?"-"+l:l}function G(b,h){for(var y,A,B=1,w=new N(b[0]);B<b.length;B++)A=new N(b[B]),(!A.s||(y=Gt(w,A))===h||y===0&&w.s===h)&&(w=A);return w}function D(b,h,y){for(var A=1,B=h.length;!h[--B];h.pop());for(B=h[0];B>=10;B/=10,A++);return(y=A+y*te-1)>S?b.c=b.e=null:y<g?b.c=[b.e=0]:(b.e=y,b.c=h),b}n=(function(){var b=/^(-?)0([xbo])(?=\w[\w.]*$)/i,h=/^([^.]+)\.$/,y=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(w,p,o,l){var E,m=o?p:p.replace(B,"");if(A.test(m))w.s=isNaN(m)?null:m<0?-1:1;else{if(!o&&(m=m.replace(b,function(x,v,L){return E=(L=L.toLowerCase())=="x"?16:L=="b"?2:8,!l||l==E?v:x}),l&&(E=l,m=m.replace(h,"$1").replace(y,"0.$1")),p!=m))return new N(m,E);if(N.DEBUG)throw Error(Je+"Not a"+(l?" base "+l:"")+" number: "+p);w.s=null}w.c=w.e=null}})();function M(b,h,y,A){var B,w,p,o,l,E,m,x=b.c,v=rn;if(x){e:{for(B=1,o=x[0];o>=10;o/=10,B++);if(w=h-B,w<0)w+=te,p=h,l=x[E=0],m=ot(l/v[B-p-1]%10);else if(E=en((w+1)/te),E>=x.length)if(A){for(;x.length<=E;x.push(0));l=m=0,B=1,w%=te,p=w-te+1}else break e;else{for(l=o=x[E],B=1;o>=10;o/=10,B++);w%=te,p=w-te+B,m=p<0?0:ot(l/v[B-p-1]%10)}if(A=A||h<0||x[E+1]!=null||(p<0?l:l%v[B-p-1]),A=y<4?(m||A)&&(y==0||y==(b.s<0?3:2)):m>5||m==5&&(y==4||A||y==6&&(w>0?p>0?l/v[B-p]:0:x[E-1])%10&1||y==(b.s<0?8:7)),h<1||!x[0])return x.length=0,A?(h-=b.e+1,x[0]=v[(te-h%te)%te],b.e=-h||0):x[0]=b.e=0,b;if(w==0?(x.length=E,o=1,E--):(x.length=E+1,o=v[te-w],x[E]=p>0?ot(l/v[B-p]%v[p])*o:0),A)for(;;)if(E==0){for(w=1,p=x[0];p>=10;p/=10,w++);for(p=x[0]+=o,o=1;p>=10;p/=10,o++);w!=o&&(b.e++,x[0]==bt&&(x[0]=1));break}else{if(x[E]+=o,x[E]!=bt)break;x[E--]=0,o=1}for(w=x.length;x[--w]===0;x.pop());}b.e>S?b.c=b.e=null:b.e<g&&(b.c=[b.e=0])}return b}function k(b){var h,y=b.e;return y===null?b.toString():(h=ft(b.c),h=y<=c||y>=d?Br(h,y):Bt(h,y,"0"),b.s<0?"-"+h:h)}return i.absoluteValue=i.abs=function(){var b=new N(this);return b.s<0&&(b.s=1),b},i.comparedTo=function(b,h){return Gt(this,new N(b,h))},i.decimalPlaces=i.dp=function(b,h){var y,A,B,w=this;if(b!=null)return le(b,0,we),h==null?h=u:le(h,0,8),M(new N(w),b+w.e+1,h);if(!(y=w.c))return null;if(A=((B=y.length-1)-at(this.e/te))*te,B=y[B])for(;B%10==0;B/=10,A--);return A<0&&(A=0),A},i.dividedBy=i.div=function(b,h){return e(this,new N(b,h),s,u)},i.dividedToIntegerBy=i.idiv=function(b,h){return e(this,new N(b,h),0,1)},i.exponentiatedBy=i.pow=function(b,h){var y,A,B,w,p,o,l,E,m,x=this;if(b=new N(b),b.c&&!b.isInteger())throw Error(Je+"Exponent not an integer: "+k(b));if(h!=null&&(h=new N(h)),o=b.e>14,!x.c||!x.c[0]||x.c[0]==1&&!x.e&&x.c.length==1||!b.c||!b.c[0])return m=new N(Math.pow(+k(x),o?b.s*(2-Sr(b)):+k(b))),h?m.mod(h):m;if(l=b.s<0,h){if(h.c?!h.c[0]:!h.s)return new N(NaN);A=!l&&x.isInteger()&&h.isInteger(),A&&(x=x.mod(h))}else{if(b.e>9&&(x.e>0||x.e<-1||(x.e==0?x.c[0]>1||o&&x.c[1]>=24e7:x.c[0]<8e13||o&&x.c[0]<=9999975e7)))return w=x.s<0&&Sr(b)?-0:0,x.e>-1&&(w=1/w),new N(l?1/w:w);H&&(w=en(H/te+2))}for(o?(y=new N(.5),l&&(b.s=1),E=Sr(b)):(B=Math.abs(+k(b)),E=B%2),m=new N(f);;){if(E){if(m=m.times(x),!m.c)break;w?m.c.length>w&&(m.c.length=w):A&&(m=m.mod(h))}if(B){if(B=ot(B/2),B===0)break;E=B%2}else if(b=b.times(y),M(b,b.e+1,1),b.e>14)E=Sr(b);else{if(B=+k(b),B===0)break;E=B%2}x=x.times(x),w?x.c&&x.c.length>w&&(x.c.length=w):A&&(x=x.mod(h))}return A?m:(l&&(m=f.div(m)),h?m.mod(h):w?M(m,H,u,p):m)},i.integerValue=function(b){var h=new N(this);return b==null?b=u:le(b,0,8),M(h,h.e+1,b)},i.isEqualTo=i.eq=function(b,h){return Gt(this,new N(b,h))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(b,h){return Gt(this,new N(b,h))>0},i.isGreaterThanOrEqualTo=i.gte=function(b,h){return(h=Gt(this,new N(b,h)))===1||h===0},i.isInteger=function(){return!!this.c&&at(this.e/te)>this.c.length-2},i.isLessThan=i.lt=function(b,h){return Gt(this,new N(b,h))<0},i.isLessThanOrEqualTo=i.lte=function(b,h){return(h=Gt(this,new N(b,h)))===-1||h===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(b,h){var y,A,B,w,p=this,o=p.s;if(b=new N(b,h),h=b.s,!o||!h)return new N(NaN);if(o!=h)return b.s=-h,p.plus(b);var l=p.e/te,E=b.e/te,m=p.c,x=b.c;if(!l||!E){if(!m||!x)return m?(b.s=-h,b):new N(x?p:NaN);if(!m[0]||!x[0])return x[0]?(b.s=-h,b):new N(m[0]?p:u==3?-0:0)}if(l=at(l),E=at(E),m=m.slice(),o=l-E){for((w=o<0)?(o=-o,B=m):(E=l,B=x),B.reverse(),h=o;h--;B.push(0));B.reverse()}else for(A=(w=(o=m.length)<(h=x.length))?o:h,o=h=0;h<A;h++)if(m[h]!=x[h]){w=m[h]<x[h];break}if(w&&(B=m,m=x,x=B,b.s=-b.s),h=(A=x.length)-(y=m.length),h>0)for(;h--;m[y++]=0);for(h=bt-1;A>o;){if(m[--A]<x[A]){for(y=A;y&&!m[--y];m[y]=h);--m[y],m[A]+=bt}m[A]-=x[A]}for(;m[0]==0;m.splice(0,1),--E);return m[0]?D(b,m,E):(b.s=u==3?-1:1,b.c=[b.e=0],b)},i.modulo=i.mod=function(b,h){var y,A,B=this;return b=new N(b,h),!B.c||!b.s||b.c&&!b.c[0]?new N(NaN):!b.c||B.c&&!B.c[0]?new N(B):(I==9?(A=b.s,b.s=1,y=e(B,b,0,3),b.s=A,y.s*=A):y=e(B,b,0,I),b=B.minus(y.times(b)),!b.c[0]&&I==1&&(b.s=B.s),b)},i.multipliedBy=i.times=function(b,h){var y,A,B,w,p,o,l,E,m,x,v,L,q,V,X,$=this,z=$.c,T=(b=new N(b,h)).c;if(!z||!T||!z[0]||!T[0])return!$.s||!b.s||z&&!z[0]&&!T||T&&!T[0]&&!z?b.c=b.e=b.s=null:(b.s*=$.s,!z||!T?b.c=b.e=null:(b.c=[0],b.e=0)),b;for(A=at($.e/te)+at(b.e/te),b.s*=$.s,l=z.length,x=T.length,l<x&&(q=z,z=T,T=q,B=l,l=x,x=B),B=l+x,q=[];B--;q.push(0));for(V=bt,X=Nt,B=x;--B>=0;){for(y=0,v=T[B]%X,L=T[B]/X|0,p=l,w=B+p;w>B;)E=z[--p]%X,m=z[p]/X|0,o=L*E+m*v,E=v*E+o%X*X+q[w]+y,y=(E/V|0)+(o/X|0)+L*m,q[w--]=E%V;q[w]=y}return y?++A:q.splice(0,1),D(b,q,A)},i.negated=function(){var b=new N(this);return b.s=-b.s||null,b},i.plus=function(b,h){var y,A=this,B=A.s;if(b=new N(b,h),h=b.s,!B||!h)return new N(NaN);if(B!=h)return b.s=-h,A.minus(b);var w=A.e/te,p=b.e/te,o=A.c,l=b.c;if(!w||!p){if(!o||!l)return new N(B/0);if(!o[0]||!l[0])return l[0]?b:new N(o[0]?A:B*0)}if(w=at(w),p=at(p),o=o.slice(),B=w-p){for(B>0?(p=w,y=l):(B=-B,y=o),y.reverse();B--;y.push(0));y.reverse()}for(B=o.length,h=l.length,B-h<0&&(y=l,l=o,o=y,h=B),B=0;h;)B=(o[--h]=o[h]+l[h]+B)/bt|0,o[h]=bt===o[h]?0:o[h]%bt;return B&&(o=[B].concat(o),++p),D(b,o,p)},i.precision=i.sd=function(b,h){var y,A,B,w=this;if(b!=null&&b!==!!b)return le(b,1,we),h==null?h=u:le(h,0,8),M(new N(w),b,h);if(!(y=w.c))return null;if(B=y.length-1,A=B*te+1,B=y[B]){for(;B%10==0;B/=10,A--);for(B=y[0];B>=10;B/=10,A++);}return b&&w.e+1>A&&(A=w.e+1),A},i.shiftedBy=function(b){return le(b,-tn,tn),this.times("1e"+b)},i.squareRoot=i.sqrt=function(){var b,h,y,A,B,w=this,p=w.c,o=w.s,l=w.e,E=s+4,m=new N("0.5");if(o!==1||!p||!p[0])return new N(!o||o<0&&(!p||p[0])?NaN:p?w:1/0);if(o=Math.sqrt(+k(w)),o==0||o==1/0?(h=ft(p),(h.length+l)%2==0&&(h+="0"),o=Math.sqrt(+h),l=at((l+1)/2)-(l<0||l%2),o==1/0?h="5e"+l:(h=o.toExponential(),h=h.slice(0,h.indexOf("e")+1)+l),y=new N(h)):y=new N(o+""),y.c[0]){for(l=y.e,o=l+E,o<3&&(o=0);;)if(B=y,y=m.times(B.plus(e(w,B,E,1))),ft(B.c).slice(0,o)===(h=ft(y.c)).slice(0,o))if(y.e<l&&--o,h=h.slice(o-3,o+1),h=="9999"||!A&&h=="4999"){if(!A&&(M(B,B.e+s+2,0),B.times(B).eq(w))){y=B;break}E+=4,o+=4,A=1}else{(!+h||!+h.slice(1)&&h.charAt(0)=="5")&&(M(y,y.e+s+2,1),b=!y.times(y).eq(w));break}}return M(y,y.e+s+1,u,b)},i.toExponential=function(b,h){return b!=null&&(le(b,0,we),b++),P(this,b,h,1)},i.toFixed=function(b,h){return b!=null&&(le(b,0,we),b=b+this.e+1),P(this,b,h)},i.toFormat=function(b,h,y){var A,B=this;if(y==null)b!=null&&h&&typeof h=="object"?(y=h,h=null):b&&typeof b=="object"?(y=b,b=h=null):y=F;else if(typeof y!="object")throw Error(Je+"Argument not an object: "+y);if(A=B.toFixed(b,h),B.c){var w,p=A.split("."),o=+y.groupSize,l=+y.secondaryGroupSize,E=y.groupSeparator||"",m=p[0],x=p[1],v=B.s<0,L=v?m.slice(1):m,q=L.length;if(l&&(w=o,o=l,l=w,q-=w),o>0&&q>0){for(w=q%o||o,m=L.substr(0,w);w<q;w+=o)m+=E+L.substr(w,o);l>0&&(m+=E+L.slice(w)),v&&(m="-"+m)}A=x?m+(y.decimalSeparator||"")+((l=+y.fractionGroupSize)?x.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(y.fractionGroupSeparator||"")):x):m}return(y.prefix||"")+A+(y.suffix||"")},i.toFraction=function(b){var h,y,A,B,w,p,o,l,E,m,x,v,L=this,q=L.c;if(b!=null&&(o=new N(b),!o.isInteger()&&(o.c||o.s!==1)||o.lt(f)))throw Error(Je+"Argument "+(o.isInteger()?"out of range: ":"not an integer: ")+k(o));if(!q)return new N(L);for(h=new N(f),E=y=new N(f),A=l=new N(f),v=ft(q),w=h.e=v.length-L.e-1,h.c[0]=rn[(p=w%te)<0?te+p:p],b=!b||o.comparedTo(h)>0?w>0?h:E:o,p=S,S=1/0,o=new N(v),l.c[0]=0;m=e(o,h,0,1),B=y.plus(m.times(A)),B.comparedTo(b)!=1;)y=A,A=B,E=l.plus(m.times(B=E)),l=B,h=o.minus(m.times(B=h)),o=B;return B=e(b.minus(y),A,0,1),l=l.plus(B.times(E)),y=y.plus(B.times(A)),l.s=E.s=L.s,w=w*2,x=e(E,A,w,u).minus(L).abs().comparedTo(e(l,y,w,u).minus(L).abs())<1?[E,A]:[l,y],S=p,x},i.toNumber=function(){return+k(this)},i.toPrecision=function(b,h){return b!=null&&le(b,1,we),P(this,b,h,2)},i.toString=function(b){var h,y=this,A=y.s,B=y.e;return B===null?A?(h="Infinity",A<0&&(h="-"+h)):h="NaN":(b==null?h=B<=c||B>=d?Br(ft(y.c),B):Bt(ft(y.c),B,"0"):b===10&&Y?(y=M(new N(y),s+B+1,u),h=Bt(ft(y.c),y.e,"0")):(le(b,2,K.length,"Base"),h=r(Bt(ft(y.c),B,"0"),10,b,A,!0)),A<0&&y.c[0]&&(h="-"+h)),h},i.valueOf=i.toJSON=function(){return k(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&N.set(t),N}function at(t){var e=t|0;return t>0||t===e?e:e-1}function ft(t){for(var e,r,n=1,i=t.length,f=t[0]+"";n<i;){for(e=t[n++]+"",r=te-e.length;r--;e="0"+e);f+=e}for(i=f.length;f.charCodeAt(--i)===48;);return f.slice(0,i+1||1)}function Gt(t,e){var r,n,i=t.c,f=e.c,s=t.s,u=e.s,c=t.e,d=e.e;if(!s||!u)return null;if(r=i&&!i[0],n=f&&!f[0],r||n)return r?n?0:-u:s;if(s!=u)return s;if(r=s<0,n=c==d,!i||!f)return n?0:!i^r?1:-1;if(!n)return c>d^r?1:-1;for(u=(c=i.length)<(d=f.length)?c:d,s=0;s<u;s++)if(i[s]!=f[s])return i[s]>f[s]^r?1:-1;return c==d?0:c>d^r?1:-1}function le(t,e,r,n){if(t<e||t>r||t!==ot(t))throw Error(Je+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Sr(t){var e=t.c.length-1;return at(t.e/te)==e&&t.c[e]%2!=0}function Br(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function Bt(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(n=t.length,++e>n){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var fs=$i(),nn={},ne={},fn={},jn;function ss(){return jn||(jn=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(u,c){var d=u>>>16&65535,g=u&65535,S=c>>>16&65535,_=c&65535;return g*_+(d*_+g*S<<16>>>0)|0}t.mul=Math.imul||e;function r(u,c){return u+c|0}t.add=r;function n(u,c){return u-c|0}t.sub=n;function i(u,c){return u<<c|u>>>32-c}t.rotl=i;function f(u,c){return u<<32-c|u>>>c}t.rotr=f;function s(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}t.isInteger=Number.isInteger||s,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(u){return t.isInteger(u)&&u>=-t.MAX_SAFE_INTEGER&&u<=t.MAX_SAFE_INTEGER}})(fn)),fn}var Wn;function Rn(){if(Wn)return ne;Wn=1,Object.defineProperty(ne,"__esModule",{value:!0});var t=ss();function e(o,l){return l===void 0&&(l=0),(o[l+0]<<8|o[l+1])<<16>>16}ne.readInt16BE=e;function r(o,l){return l===void 0&&(l=0),(o[l+0]<<8|o[l+1])>>>0}ne.readUint16BE=r;function n(o,l){return l===void 0&&(l=0),(o[l+1]<<8|o[l])<<16>>16}ne.readInt16LE=n;function i(o,l){return l===void 0&&(l=0),(o[l+1]<<8|o[l])>>>0}ne.readUint16LE=i;function f(o,l,E){return l===void 0&&(l=new Uint8Array(2)),E===void 0&&(E=0),l[E+0]=o>>>8,l[E+1]=o>>>0,l}ne.writeUint16BE=f,ne.writeInt16BE=f;function s(o,l,E){return l===void 0&&(l=new Uint8Array(2)),E===void 0&&(E=0),l[E+0]=o>>>0,l[E+1]=o>>>8,l}ne.writeUint16LE=s,ne.writeInt16LE=s;function u(o,l){return l===void 0&&(l=0),o[l]<<24|o[l+1]<<16|o[l+2]<<8|o[l+3]}ne.readInt32BE=u;function c(o,l){return l===void 0&&(l=0),(o[l]<<24|o[l+1]<<16|o[l+2]<<8|o[l+3])>>>0}ne.readUint32BE=c;function d(o,l){return l===void 0&&(l=0),o[l+3]<<24|o[l+2]<<16|o[l+1]<<8|o[l]}ne.readInt32LE=d;function g(o,l){return l===void 0&&(l=0),(o[l+3]<<24|o[l+2]<<16|o[l+1]<<8|o[l])>>>0}ne.readUint32LE=g;function S(o,l,E){return l===void 0&&(l=new Uint8Array(4)),E===void 0&&(E=0),l[E+0]=o>>>24,l[E+1]=o>>>16,l[E+2]=o>>>8,l[E+3]=o>>>0,l}ne.writeUint32BE=S,ne.writeInt32BE=S;function _(o,l,E){return l===void 0&&(l=new Uint8Array(4)),E===void 0&&(E=0),l[E+0]=o>>>0,l[E+1]=o>>>8,l[E+2]=o>>>16,l[E+3]=o>>>24,l}ne.writeUint32LE=_,ne.writeInt32LE=_;function I(o,l){l===void 0&&(l=0);var E=u(o,l),m=u(o,l+4);return E*4294967296+m-(m>>31)*4294967296}ne.readInt64BE=I;function H(o,l){l===void 0&&(l=0);var E=c(o,l),m=c(o,l+4);return E*4294967296+m}ne.readUint64BE=H;function F(o,l){l===void 0&&(l=0);var E=d(o,l),m=d(o,l+4);return m*4294967296+E-(E>>31)*4294967296}ne.readInt64LE=F;function K(o,l){l===void 0&&(l=0);var E=g(o,l),m=g(o,l+4);return m*4294967296+E}ne.readUint64LE=K;function Y(o,l,E){return l===void 0&&(l=new Uint8Array(8)),E===void 0&&(E=0),S(o/4294967296>>>0,l,E),S(o>>>0,l,E+4),l}ne.writeUint64BE=Y,ne.writeInt64BE=Y;function N(o,l,E){return l===void 0&&(l=new Uint8Array(8)),E===void 0&&(E=0),_(o>>>0,l,E),_(o/4294967296>>>0,l,E+4),l}ne.writeUint64LE=N,ne.writeInt64LE=N;function P(o,l,E){if(E===void 0&&(E=0),o%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(o/8>l.length-E)throw new Error("readUintBE: array is too short for the given bitLength");for(var m=0,x=1,v=o/8+E-1;v>=E;v--)m+=l[v]*x,x*=256;return m}ne.readUintBE=P;function G(o,l,E){if(E===void 0&&(E=0),o%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(o/8>l.length-E)throw new Error("readUintLE: array is too short for the given bitLength");for(var m=0,x=1,v=E;v<E+o/8;v++)m+=l[v]*x,x*=256;return m}ne.readUintLE=G;function D(o,l,E,m){if(E===void 0&&(E=new Uint8Array(o/8)),m===void 0&&(m=0),o%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!t.isSafeInteger(l))throw new Error("writeUintBE value must be an integer");for(var x=1,v=o/8+m-1;v>=m;v--)E[v]=l/x&255,x*=256;return E}ne.writeUintBE=D;function M(o,l,E,m){if(E===void 0&&(E=new Uint8Array(o/8)),m===void 0&&(m=0),o%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!t.isSafeInteger(l))throw new Error("writeUintLE value must be an integer");for(var x=1,v=m;v<m+o/8;v++)E[v]=l/x&255,x*=256;return E}ne.writeUintLE=M;function k(o,l){l===void 0&&(l=0);var E=new DataView(o.buffer,o.byteOffset,o.byteLength);return E.getFloat32(l)}ne.readFloat32BE=k;function b(o,l){l===void 0&&(l=0);var E=new DataView(o.buffer,o.byteOffset,o.byteLength);return E.getFloat32(l,!0)}ne.readFloat32LE=b;function h(o,l){l===void 0&&(l=0);var E=new DataView(o.buffer,o.byteOffset,o.byteLength);return E.getFloat64(l)}ne.readFloat64BE=h;function y(o,l){l===void 0&&(l=0);var E=new DataView(o.buffer,o.byteOffset,o.byteLength);return E.getFloat64(l,!0)}ne.readFloat64LE=y;function A(o,l,E){l===void 0&&(l=new Uint8Array(4)),E===void 0&&(E=0);var m=new DataView(l.buffer,l.byteOffset,l.byteLength);return m.setFloat32(E,o),l}ne.writeFloat32BE=A;function B(o,l,E){l===void 0&&(l=new Uint8Array(4)),E===void 0&&(E=0);var m=new DataView(l.buffer,l.byteOffset,l.byteLength);return m.setFloat32(E,o,!0),l}ne.writeFloat32LE=B;function w(o,l,E){l===void 0&&(l=new Uint8Array(8)),E===void 0&&(E=0);var m=new DataView(l.buffer,l.byteOffset,l.byteLength);return m.setFloat64(E,o),l}ne.writeFloat64BE=w;function p(o,l,E){l===void 0&&(l=new Uint8Array(8)),E===void 0&&(E=0);var m=new DataView(l.buffer,l.byteOffset,l.byteLength);return m.setFloat64(E,o,!0),l}return ne.writeFloat64LE=p,ne}var Ar={},Qn;function wr(){if(Qn)return Ar;Qn=1,Object.defineProperty(Ar,"__esModule",{value:!0});function t(e){for(var r=0;r<e.length;r++)e[r]=0;return e}return Ar.wipe=t,Ar}var Jn;function os(){return Jn||(Jn=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Rn(),r=wr();t.BLOCK_SIZE=128,t.DIGEST_LENGTH=64,t.KEY_LENGTH=64,t.PERSONALIZATION_LENGTH=16,t.SALT_LENGTH=16,t.MAX_LEAF_SIZE=Math.pow(2,32)-1,t.MAX_FANOUT=255,t.MAX_MAX_DEPTH=255;var n=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),i=[[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6],[22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8],[14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16],[18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26],[4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18],[24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22],[26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20],[12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10],[20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0],[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]],f=(function(){function u(c,d){if(c===void 0&&(c=64),this.digestLength=c,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(n),this._buffer=new Uint8Array(t.BLOCK_SIZE),this._bufferLength=0,this._ctr=new Uint32Array(4),this._flag=new Uint32Array(4),this._lastNode=!1,this._finished=!1,this._vtmp=new Uint32Array(32),this._mtmp=new Uint32Array(32),c<1||c>t.DIGEST_LENGTH)throw new Error("blake2b: wrong digest length");d&&this.validateConfig(d);var g=0;d&&d.key&&(g=d.key.length);var S=1,_=1;d&&d.tree&&(S=d.tree.fanout,_=d.tree.maxDepth),this._state[0]^=c|g<<8|S<<16|_<<24,d&&d.tree&&(this._state[1]^=d.tree.leafSize,this._state[2]^=d.tree.nodeOffsetLowBits,this._state[3]^=d.tree.nodeOffsetHighBits,this._state[4]^=d.tree.nodeDepth|d.tree.innerDigestLength<<8,this._lastNode=d.tree.lastNode),d&&d.salt&&(this._state[8]^=e.readUint32LE(d.salt,0),this._state[9]^=e.readUint32LE(d.salt,4),this._state[10]^=e.readUint32LE(d.salt,8),this._state[11]^=e.readUint32LE(d.salt,12)),d&&d.personalization&&(this._state[12]^=e.readUint32LE(d.personalization,0),this._state[13]^=e.readUint32LE(d.personalization,4),this._state[14]^=e.readUint32LE(d.personalization,8),this._state[15]^=e.readUint32LE(d.personalization,12)),this._initialState=new Uint32Array(this._state),d&&d.key&&g>0&&(this._paddedKey=new Uint8Array(t.BLOCK_SIZE),this._paddedKey.set(d.key),this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE)}return u.prototype.reset=function(){return this._state.set(this._initialState),this._paddedKey?(this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE):this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._finished=!1,this},u.prototype.validateConfig=function(c){if(c.key&&c.key.length>t.KEY_LENGTH)throw new Error("blake2b: wrong key length");if(c.salt&&c.salt.length!==t.SALT_LENGTH)throw new Error("blake2b: wrong salt length");if(c.personalization&&c.personalization.length!==t.PERSONALIZATION_LENGTH)throw new Error("blake2b: wrong personalization length");if(c.tree){if(c.tree.fanout<0||c.tree.fanout>t.MAX_FANOUT)throw new Error("blake2b: wrong tree fanout");if(c.tree.maxDepth<0||c.tree.maxDepth>t.MAX_MAX_DEPTH)throw new Error("blake2b: wrong tree depth");if(c.tree.leafSize<0||c.tree.leafSize>t.MAX_LEAF_SIZE)throw new Error("blake2b: wrong leaf size");if(c.tree.innerDigestLength<0||c.tree.innerDigestLength>t.DIGEST_LENGTH)throw new Error("blake2b: wrong tree inner digest length")}},u.prototype.update=function(c,d){if(d===void 0&&(d=c.length),this._finished)throw new Error("blake2b: can't update because hash was finished.");var g=t.BLOCK_SIZE-this._bufferLength,S=0;if(d===0)return this;if(d>g){for(var _=0;_<g;_++)this._buffer[this._bufferLength+_]=c[S+_];this._processBlock(t.BLOCK_SIZE),S+=g,d-=g,this._bufferLength=0}for(;d>t.BLOCK_SIZE;){for(var _=0;_<t.BLOCK_SIZE;_++)this._buffer[_]=c[S+_];this._processBlock(t.BLOCK_SIZE),S+=t.BLOCK_SIZE,d-=t.BLOCK_SIZE,this._bufferLength=0}for(var _=0;_<d;_++)this._buffer[this._bufferLength+_]=c[S+_];return this._bufferLength+=d,this},u.prototype.finish=function(c){if(!this._finished){for(var d=this._bufferLength;d<t.BLOCK_SIZE;d++)this._buffer[d]=0;this._flag[0]=4294967295,this._flag[1]=4294967295,this._lastNode&&(this._flag[2]=4294967295,this._flag[3]=4294967295),this._processBlock(this._bufferLength),this._finished=!0}for(var g=this._buffer.subarray(0,64),d=0;d<16;d++)e.writeUint32LE(this._state[d],g,d*4);return c.set(g.subarray(0,c.length)),this},u.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},u.prototype.clean=function(){r.wipe(this._vtmp),r.wipe(this._mtmp),r.wipe(this._state),r.wipe(this._buffer),r.wipe(this._initialState),this._paddedKey&&r.wipe(this._paddedKey),this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._lastNode=!1,this._finished=!1},u.prototype.saveState=function(){if(this._finished)throw new Error("blake2b: cannot save finished state");return{state:new Uint32Array(this._state),buffer:new Uint8Array(this._buffer),bufferLength:this._bufferLength,ctr:new Uint32Array(this._ctr),flag:new Uint32Array(this._flag),lastNode:this._lastNode,paddedKey:this._paddedKey?new Uint8Array(this._paddedKey):void 0,initialState:new Uint32Array(this._initialState)}},u.prototype.restoreState=function(c){return this._state.set(c.state),this._buffer.set(c.buffer),this._bufferLength=c.bufferLength,this._ctr.set(c.ctr),this._flag.set(c.flag),this._lastNode=c.lastNode,this._paddedKey&&r.wipe(this._paddedKey),this._paddedKey=c.paddedKey?new Uint8Array(c.paddedKey):void 0,this._initialState.set(c.initialState),this},u.prototype.cleanSavedState=function(c){r.wipe(c.state),r.wipe(c.buffer),r.wipe(c.initialState),c.paddedKey&&r.wipe(c.paddedKey),c.bufferLength=0,r.wipe(c.ctr),r.wipe(c.flag),c.lastNode=!1},u.prototype._G=function(c,d,g,S,_,I,H,F,K,Y,N,P,G){var D=c[d],M=c[I],k=c[g],b=c[H],h=c[S],y=c[F],A=c[_],B=c[K],w=D&65535,p=D>>>16,o=M&65535,l=M>>>16;w+=k&65535,p+=k>>>16,o+=b&65535,l+=b>>>16,p+=w>>>16,o+=p>>>16,l+=o>>>16,M=o&65535|l<<16,D=w&65535|p<<16,w=D&65535,p=D>>>16,o=M&65535,l=M>>>16,w+=Y&65535,p+=Y>>>16,o+=N&65535,l+=N>>>16,p+=w>>>16,o+=p>>>16,l+=o>>>16,M=o&65535|l<<16,D=w&65535|p<<16,A^=D,B^=M,w=B,B=A,A=w,w=h&65535,p=h>>>16,o=y&65535,l=y>>>16,w+=A&65535,p+=A>>>16,o+=B&65535,l+=B>>>16,p+=w>>>16,o+=p>>>16,l+=o>>>16,y=o&65535|l<<16,h=w&65535|p<<16,k^=h,b^=y,w=k<<8|b>>>24,k=b<<8|k>>>24,b=w,w=D&65535,p=D>>>16,o=M&65535,l=M>>>16,w+=k&65535,p+=k>>>16,o+=b&65535,l+=b>>>16,p+=w>>>16,o+=p>>>16,l+=o>>>16,M=o&65535|l<<16,D=w&65535|p<<16,w=D&65535,p=D>>>16,o=M&65535,l=M>>>16,w+=P&65535,p+=P>>>16,o+=G&65535,l+=G>>>16,p+=w>>>16,o+=p>>>16,l+=o>>>16,M=o&65535|l<<16,D=w&65535|p<<16,A^=D,B^=M,w=A<<16|B>>>16,A=B<<16|A>>>16,B=w,w=h&65535,p=h>>>16,o=y&65535,l=y>>>16,w+=A&65535,p+=A>>>16,o+=B&65535,l+=B>>>16,p+=w>>>16,o+=p>>>16,l+=o>>>16,y=o&65535|l<<16,h=w&65535|p<<16,k^=h,b^=y,w=b<<1|k>>>31,k=k<<1|b>>>31,b=w,c[d]=D,c[I]=M,c[g]=k,c[H]=b,c[S]=h,c[F]=y,c[_]=A,c[K]=B},u.prototype._incrementCounter=function(c){for(var d=0;d<3;d++){var g=this._ctr[d]+c;if(this._ctr[d]=g>>>0,this._ctr[d]===g)return;c=1}},u.prototype._processBlock=function(c){this._incrementCounter(c);var d=this._vtmp;d.set(this._state),d.set(n,16),d[24]^=this._ctr[0],d[25]^=this._ctr[1],d[26]^=this._ctr[2],d[27]^=this._ctr[3],d[28]^=this._flag[0],d[29]^=this._flag[1],d[30]^=this._flag[2],d[31]^=this._flag[3];for(var g=this._mtmp,S=0;S<32;S++)g[S]=e.readUint32LE(this._buffer,S*4);for(var _=0;_<12;_++)this._G(d,0,8,16,24,1,9,17,25,g[i[_][0]],g[i[_][0]+1],g[i[_][1]],g[i[_][1]+1]),this._G(d,2,10,18,26,3,11,19,27,g[i[_][2]],g[i[_][2]+1],g[i[_][3]],g[i[_][3]+1]),this._G(d,4,12,20,28,5,13,21,29,g[i[_][4]],g[i[_][4]+1],g[i[_][5]],g[i[_][5]+1]),this._G(d,6,14,22,30,7,15,23,31,g[i[_][6]],g[i[_][6]+1],g[i[_][7]],g[i[_][7]+1]),this._G(d,0,10,20,30,1,11,21,31,g[i[_][8]],g[i[_][8]+1],g[i[_][9]],g[i[_][9]+1]),this._G(d,2,12,22,24,3,13,23,25,g[i[_][10]],g[i[_][10]+1],g[i[_][11]],g[i[_][11]+1]),this._G(d,4,14,16,26,5,15,17,27,g[i[_][12]],g[i[_][12]+1],g[i[_][13]],g[i[_][13]+1]),this._G(d,6,8,18,28,7,9,19,29,g[i[_][14]],g[i[_][14]+1],g[i[_][15]],g[i[_][15]+1]);for(var S=0;S<16;S++)this._state[S]^=d[S]^d[S+16]},u})();t.BLAKE2b=f;function s(u,c,d){c===void 0&&(c=t.DIGEST_LENGTH);var g=new f(c,d);g.update(u);var S=g.digest();return g.clean(),S}t.hash=s})(nn)),nn}var yr=os(),pt={},oe={},Ge={},sn={},cr={},ei;function as(){return ei||(ei=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.crypto=void 0,cr.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),cr}var ti;function zi(){return ti||(ti=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=r,t.anumber=n,t.abytes=i,t.ahash=f,t.aexists=s,t.aoutput=u,t.u8=c,t.u32=d,t.clean=g,t.createView=S,t.rotr=_,t.rotl=I,t.byteSwap=H,t.byteSwap32=F,t.bytesToHex=N,t.hexToBytes=D,t.asyncLoop=k,t.utf8ToBytes=b,t.bytesToUtf8=h,t.toBytes=y,t.kdfInputToBytes=A,t.concatBytes=B,t.checkOpts=w,t.createHasher=o,t.createOptHasher=l,t.createXOFer=E,t.randomBytes=m;const e=as();function r(x){return x instanceof Uint8Array||ArrayBuffer.isView(x)&&x.constructor.name==="Uint8Array"}function n(x){if(!Number.isSafeInteger(x)||x<0)throw new Error("positive integer expected, got "+x)}function i(x,...v){if(!r(x))throw new Error("Uint8Array expected");if(v.length>0&&!v.includes(x.length))throw new Error("Uint8Array expected of length "+v+", got length="+x.length)}function f(x){if(typeof x!="function"||typeof x.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");n(x.outputLen),n(x.blockLen)}function s(x,v=!0){if(x.destroyed)throw new Error("Hash instance has been destroyed");if(v&&x.finished)throw new Error("Hash#digest() has already been called")}function u(x,v){i(x);const L=v.outputLen;if(x.length<L)throw new Error("digestInto() expects output buffer of length at least "+L)}function c(x){return new Uint8Array(x.buffer,x.byteOffset,x.byteLength)}function d(x){return new Uint32Array(x.buffer,x.byteOffset,Math.floor(x.byteLength/4))}function g(...x){for(let v=0;v<x.length;v++)x[v].fill(0)}function S(x){return new DataView(x.buffer,x.byteOffset,x.byteLength)}function _(x,v){return x<<32-v|x>>>v}function I(x,v){return x<<v|x>>>32-v>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function H(x){return x<<24&4278190080|x<<8&16711680|x>>>8&65280|x>>>24&255}t.swap8IfBE=t.isLE?x=>x:x=>H(x),t.byteSwapIfBE=t.swap8IfBE;function F(x){for(let v=0;v<x.length;v++)x[v]=H(x[v]);return x}t.swap32IfBE=t.isLE?x=>x:F;const K=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Y=Array.from({length:256},(x,v)=>v.toString(16).padStart(2,"0"));function N(x){if(i(x),K)return x.toHex();let v="";for(let L=0;L<x.length;L++)v+=Y[x[L]];return v}const P={_0:48,_9:57,A:65,F:70,a:97,f:102};function G(x){if(x>=P._0&&x<=P._9)return x-P._0;if(x>=P.A&&x<=P.F)return x-(P.A-10);if(x>=P.a&&x<=P.f)return x-(P.a-10)}function D(x){if(typeof x!="string")throw new Error("hex string expected, got "+typeof x);if(K)return Uint8Array.fromHex(x);const v=x.length,L=v/2;if(v%2)throw new Error("hex string expected, got unpadded hex of length "+v);const q=new Uint8Array(L);for(let V=0,X=0;V<L;V++,X+=2){const $=G(x.charCodeAt(X)),z=G(x.charCodeAt(X+1));if($===void 0||z===void 0){const T=x[X]+x[X+1];throw new Error('hex string expected, got non-hex character "'+T+'" at index '+X)}q[V]=$*16+z}return q}const M=async()=>{};t.nextTick=M;async function k(x,v,L){let q=Date.now();for(let V=0;V<x;V++){L(V);const X=Date.now()-q;X>=0&&X<v||(await(0,t.nextTick)(),q+=X)}}function b(x){if(typeof x!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(x))}function h(x){return new TextDecoder().decode(x)}function y(x){return typeof x=="string"&&(x=b(x)),i(x),x}function A(x){return typeof x=="string"&&(x=b(x)),i(x),x}function B(...x){let v=0;for(let q=0;q<x.length;q++){const V=x[q];i(V),v+=V.length}const L=new Uint8Array(v);for(let q=0,V=0;q<x.length;q++){const X=x[q];L.set(X,V),V+=X.length}return L}function w(x,v){if(v!==void 0&&{}.toString.call(v)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(x,v)}class p{}t.Hash=p;function o(x){const v=q=>x().update(y(q)).digest(),L=x();return v.outputLen=L.outputLen,v.blockLen=L.blockLen,v.create=()=>x(),v}function l(x){const v=(q,V)=>x(V).update(y(q)).digest(),L=x({});return v.outputLen=L.outputLen,v.blockLen=L.blockLen,v.create=q=>x(q),v}function E(x){const v=(q,V)=>x(V).update(y(q)).digest(),L=x({});return v.outputLen=L.outputLen,v.blockLen=L.blockLen,v.create=q=>x(q),v}t.wrapConstructor=o,t.wrapConstructorWithOpts=l,t.wrapXOFConstructorWithOpts=E;function m(x=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(x));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(x));throw new Error("crypto.getRandomValues must be defined")}})(sn)),sn}var ri;function cs(){if(ri)return Ge;ri=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.SHA512_IV=Ge.SHA384_IV=Ge.SHA224_IV=Ge.SHA256_IV=Ge.HashMD=void 0,Ge.setBigUint64=e,Ge.Chi=r,Ge.Maj=n;const t=zi();function e(f,s,u,c){if(typeof f.setBigUint64=="function")return f.setBigUint64(s,u,c);const d=BigInt(32),g=BigInt(4294967295),S=Number(u>>d&g),_=Number(u&g),I=c?4:0,H=c?0:4;f.setUint32(s+I,S,c),f.setUint32(s+H,_,c)}function r(f,s,u){return f&s^~f&u}function n(f,s,u){return f&s^f&u^s&u}class i extends t.Hash{constructor(s,u,c,d){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=s,this.outputLen=u,this.padOffset=c,this.isLE=d,this.buffer=new Uint8Array(s),this.view=(0,t.createView)(this.buffer)}update(s){(0,t.aexists)(this),s=(0,t.toBytes)(s),(0,t.abytes)(s);const{view:u,buffer:c,blockLen:d}=this,g=s.length;for(let S=0;S<g;){const _=Math.min(d-this.pos,g-S);if(_===d){const I=(0,t.createView)(s);for(;d<=g-S;S+=d)this.process(I,S);continue}c.set(s.subarray(S,S+_),this.pos),this.pos+=_,S+=_,this.pos===d&&(this.process(u,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){(0,t.aexists)(this),(0,t.aoutput)(s,this),this.finished=!0;const{buffer:u,view:c,blockLen:d,isLE:g}=this;let{pos:S}=this;u[S++]=128,(0,t.clean)(this.buffer.subarray(S)),this.padOffset>d-S&&(this.process(c,0),S=0);for(let K=S;K<d;K++)u[K]=0;e(c,d-8,BigInt(this.length*8),g),this.process(c,0);const _=(0,t.createView)(s),I=this.outputLen;if(I%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const H=I/4,F=this.get();if(H>F.length)throw new Error("_sha2: outputLen bigger than state");for(let K=0;K<H;K++)_.setUint32(4*K,F[K],g)}digest(){const{buffer:s,outputLen:u}=this;this.digestInto(s);const c=s.slice(0,u);return this.destroy(),c}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:u,buffer:c,length:d,finished:g,destroyed:S,pos:_}=this;return s.destroyed=S,s.finished=g,s.length=d,s.pos=_,d%u&&s.buffer.set(c),s}clone(){return this._cloneInto()}}return Ge.HashMD=i,Ge.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ge.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Ge.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Ge.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ge}var ee={},ni;function us(){if(ni)return ee;ni=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.toBig=ee.shrSL=ee.shrSH=ee.rotrSL=ee.rotrSH=ee.rotrBL=ee.rotrBH=ee.rotr32L=ee.rotr32H=ee.rotlSL=ee.rotlSH=ee.rotlBL=ee.rotlBH=ee.add5L=ee.add5H=ee.add4L=ee.add4H=ee.add3L=ee.add3H=void 0,ee.add=Y,ee.fromBig=r,ee.split=n;const t=BigInt(2**32-1),e=BigInt(32);function r(h,y=!1){return y?{h:Number(h&t),l:Number(h>>e&t)}:{h:Number(h>>e&t)|0,l:Number(h&t)|0}}function n(h,y=!1){const A=h.length;let B=new Uint32Array(A),w=new Uint32Array(A);for(let p=0;p<A;p++){const{h:o,l}=r(h[p],y);[B[p],w[p]]=[o,l]}return[B,w]}const i=(h,y)=>BigInt(h>>>0)<<e|BigInt(y>>>0);ee.toBig=i;const f=(h,y,A)=>h>>>A;ee.shrSH=f;const s=(h,y,A)=>h<<32-A|y>>>A;ee.shrSL=s;const u=(h,y,A)=>h>>>A|y<<32-A;ee.rotrSH=u;const c=(h,y,A)=>h<<32-A|y>>>A;ee.rotrSL=c;const d=(h,y,A)=>h<<64-A|y>>>A-32;ee.rotrBH=d;const g=(h,y,A)=>h>>>A-32|y<<64-A;ee.rotrBL=g;const S=(h,y)=>y;ee.rotr32H=S;const _=(h,y)=>h;ee.rotr32L=_;const I=(h,y,A)=>h<<A|y>>>32-A;ee.rotlSH=I;const H=(h,y,A)=>y<<A|h>>>32-A;ee.rotlSL=H;const F=(h,y,A)=>y<<A-32|h>>>64-A;ee.rotlBH=F;const K=(h,y,A)=>h<<A-32|y>>>64-A;ee.rotlBL=K;function Y(h,y,A,B){const w=(y>>>0)+(B>>>0);return{h:h+A+(w/2**32|0)|0,l:w|0}}const N=(h,y,A)=>(h>>>0)+(y>>>0)+(A>>>0);ee.add3L=N;const P=(h,y,A,B)=>y+A+B+(h/2**32|0)|0;ee.add3H=P;const G=(h,y,A,B)=>(h>>>0)+(y>>>0)+(A>>>0)+(B>>>0);ee.add4L=G;const D=(h,y,A,B,w)=>y+A+B+w+(h/2**32|0)|0;ee.add4H=D;const M=(h,y,A,B,w)=>(h>>>0)+(y>>>0)+(A>>>0)+(B>>>0)+(w>>>0);ee.add5L=M;const k=(h,y,A,B,w,p)=>y+A+B+w+p+(h/2**32|0)|0;ee.add5H=k;const b={fromBig:r,split:n,toBig:i,shrSH:f,shrSL:s,rotrSH:u,rotrSL:c,rotrBH:d,rotrBL:g,rotr32H:S,rotr32L:_,rotlSH:I,rotlSL:H,rotlBH:F,rotlBL:K,add:Y,add3L:N,add3H:P,add4L:G,add4H:D,add5H:k,add5L:M};return ee.default=b,ee}var ii;function ls(){if(ii)return oe;ii=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.sha512_224=oe.sha512_256=oe.sha384=oe.sha512=oe.sha224=oe.sha256=oe.SHA512_256=oe.SHA512_224=oe.SHA384=oe.SHA512=oe.SHA224=oe.SHA256=void 0;const t=cs(),e=us(),r=zi(),n=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array(64);class f extends t.HashMD{constructor(P=32){super(64,P,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:P,B:G,C:D,D:M,E:k,F:b,G:h,H:y}=this;return[P,G,D,M,k,b,h,y]}set(P,G,D,M,k,b,h,y){this.A=P|0,this.B=G|0,this.C=D|0,this.D=M|0,this.E=k|0,this.F=b|0,this.G=h|0,this.H=y|0}process(P,G){for(let w=0;w<16;w++,G+=4)i[w]=P.getUint32(G,!1);for(let w=16;w<64;w++){const p=i[w-15],o=i[w-2],l=(0,r.rotr)(p,7)^(0,r.rotr)(p,18)^p>>>3,E=(0,r.rotr)(o,17)^(0,r.rotr)(o,19)^o>>>10;i[w]=E+i[w-7]+l+i[w-16]|0}let{A:D,B:M,C:k,D:b,E:h,F:y,G:A,H:B}=this;for(let w=0;w<64;w++){const p=(0,r.rotr)(h,6)^(0,r.rotr)(h,11)^(0,r.rotr)(h,25),o=B+p+(0,t.Chi)(h,y,A)+n[w]+i[w]|0,E=((0,r.rotr)(D,2)^(0,r.rotr)(D,13)^(0,r.rotr)(D,22))+(0,t.Maj)(D,M,k)|0;B=A,A=y,y=h,h=b+o|0,b=k,k=M,M=D,D=o+E|0}D=D+this.A|0,M=M+this.B|0,k=k+this.C|0,b=b+this.D|0,h=h+this.E|0,y=y+this.F|0,A=A+this.G|0,B=B+this.H|0,this.set(D,M,k,b,h,y,A,B)}roundClean(){(0,r.clean)(i)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.clean)(this.buffer)}}oe.SHA256=f;class s extends f{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}oe.SHA224=s;const u=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(N=>BigInt(N))),c=u[0],d=u[1],g=new Uint32Array(80),S=new Uint32Array(80);class _ extends t.HashMD{constructor(P=64){super(128,P,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:P,Al:G,Bh:D,Bl:M,Ch:k,Cl:b,Dh:h,Dl:y,Eh:A,El:B,Fh:w,Fl:p,Gh:o,Gl:l,Hh:E,Hl:m}=this;return[P,G,D,M,k,b,h,y,A,B,w,p,o,l,E,m]}set(P,G,D,M,k,b,h,y,A,B,w,p,o,l,E,m){this.Ah=P|0,this.Al=G|0,this.Bh=D|0,this.Bl=M|0,this.Ch=k|0,this.Cl=b|0,this.Dh=h|0,this.Dl=y|0,this.Eh=A|0,this.El=B|0,this.Fh=w|0,this.Fl=p|0,this.Gh=o|0,this.Gl=l|0,this.Hh=E|0,this.Hl=m|0}process(P,G){for(let L=0;L<16;L++,G+=4)g[L]=P.getUint32(G),S[L]=P.getUint32(G+=4);for(let L=16;L<80;L++){const q=g[L-15]|0,V=S[L-15]|0,X=e.rotrSH(q,V,1)^e.rotrSH(q,V,8)^e.shrSH(q,V,7),$=e.rotrSL(q,V,1)^e.rotrSL(q,V,8)^e.shrSL(q,V,7),z=g[L-2]|0,T=S[L-2]|0,C=e.rotrSH(z,T,19)^e.rotrBH(z,T,61)^e.shrSH(z,T,6),R=e.rotrSL(z,T,19)^e.rotrBL(z,T,61)^e.shrSL(z,T,6),a=e.add4L($,R,S[L-7],S[L-16]),U=e.add4H(a,X,C,g[L-7],g[L-16]);g[L]=U|0,S[L]=a|0}let{Ah:D,Al:M,Bh:k,Bl:b,Ch:h,Cl:y,Dh:A,Dl:B,Eh:w,El:p,Fh:o,Fl:l,Gh:E,Gl:m,Hh:x,Hl:v}=this;for(let L=0;L<80;L++){const q=e.rotrSH(w,p,14)^e.rotrSH(w,p,18)^e.rotrBH(w,p,41),V=e.rotrSL(w,p,14)^e.rotrSL(w,p,18)^e.rotrBL(w,p,41),X=w&o^~w&E,$=p&l^~p&m,z=e.add5L(v,V,$,d[L],S[L]),T=e.add5H(z,x,q,X,c[L],g[L]),C=z|0,R=e.rotrSH(D,M,28)^e.rotrBH(D,M,34)^e.rotrBH(D,M,39),a=e.rotrSL(D,M,28)^e.rotrBL(D,M,34)^e.rotrBL(D,M,39),U=D&k^D&h^k&h,j=M&b^M&y^b&y;x=E|0,v=m|0,E=o|0,m=l|0,o=w|0,l=p|0,{h:w,l:p}=e.add(A|0,B|0,T|0,C|0),A=h|0,B=y|0,h=k|0,y=b|0,k=D|0,b=M|0;const W=e.add3L(C,a,j);D=e.add3H(W,T,R,U),M=W|0}({h:D,l:M}=e.add(this.Ah|0,this.Al|0,D|0,M|0)),{h:k,l:b}=e.add(this.Bh|0,this.Bl|0,k|0,b|0),{h,l:y}=e.add(this.Ch|0,this.Cl|0,h|0,y|0),{h:A,l:B}=e.add(this.Dh|0,this.Dl|0,A|0,B|0),{h:w,l:p}=e.add(this.Eh|0,this.El|0,w|0,p|0),{h:o,l}=e.add(this.Fh|0,this.Fl|0,o|0,l|0),{h:E,l:m}=e.add(this.Gh|0,this.Gl|0,E|0,m|0),{h:x,l:v}=e.add(this.Hh|0,this.Hl|0,x|0,v|0),this.set(D,M,k,b,h,y,A,B,w,p,o,l,E,m,x,v)}roundClean(){(0,r.clean)(g,S)}destroy(){(0,r.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}oe.SHA512=_;class I extends _{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}oe.SHA384=I;const H=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),F=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class K extends _{constructor(){super(28),this.Ah=H[0]|0,this.Al=H[1]|0,this.Bh=H[2]|0,this.Bl=H[3]|0,this.Ch=H[4]|0,this.Cl=H[5]|0,this.Dh=H[6]|0,this.Dl=H[7]|0,this.Eh=H[8]|0,this.El=H[9]|0,this.Fh=H[10]|0,this.Fl=H[11]|0,this.Gh=H[12]|0,this.Gl=H[13]|0,this.Hh=H[14]|0,this.Hl=H[15]|0}}oe.SHA512_224=K;class Y extends _{constructor(){super(32),this.Ah=F[0]|0,this.Al=F[1]|0,this.Bh=F[2]|0,this.Bl=F[3]|0,this.Ch=F[4]|0,this.Cl=F[5]|0,this.Dh=F[6]|0,this.Dl=F[7]|0,this.Eh=F[8]|0,this.El=F[9]|0,this.Fh=F[10]|0,this.Fl=F[11]|0,this.Gh=F[12]|0,this.Gl=F[13]|0,this.Hh=F[14]|0,this.Hl=F[15]|0}}return oe.SHA512_256=Y,oe.sha256=(0,r.createHasher)(()=>new f),oe.sha224=(0,r.createHasher)(()=>new s),oe.sha512=(0,r.createHasher)(()=>new _),oe.sha384=(0,r.createHasher)(()=>new I),oe.sha512_256=(0,r.createHasher)(()=>new Y),oe.sha512_224=(0,r.createHasher)(()=>new K),oe}var fi;function ds(){if(fi)return pt;fi=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.sha224=pt.SHA224=pt.sha256=pt.SHA256=void 0;const t=ls();return pt.SHA256=t.SHA256,pt.sha256=t.sha256,pt.SHA224=t.SHA224,pt.sha224=t.sha224,pt}var on,si;function hs(){if(si)return on;si=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var f=e.charAt(i),s=f.charCodeAt(0);if(r[s]!==255)throw new TypeError(f+" is ambiguous");r[s]=i}var u=e.length,c=e.charAt(0),d=Math.log(u)/Math.log(256),g=Math.log(256)/Math.log(u);function S(H){if(H instanceof Uint8Array||(ArrayBuffer.isView(H)?H=new Uint8Array(H.buffer,H.byteOffset,H.byteLength):Array.isArray(H)&&(H=Uint8Array.from(H))),!(H instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(H.length===0)return"";for(var F=0,K=0,Y=0,N=H.length;Y!==N&&H[Y]===0;)Y++,F++;for(var P=(N-Y)*g+1>>>0,G=new Uint8Array(P);Y!==N;){for(var D=H[Y],M=0,k=P-1;(D!==0||M<K)&&k!==-1;k--,M++)D+=256*G[k]>>>0,G[k]=D%u>>>0,D=D/u>>>0;if(D!==0)throw new Error("Non-zero carry");K=M,Y++}for(var b=P-K;b!==P&&G[b]===0;)b++;for(var h=c.repeat(F);b<P;++b)h+=e.charAt(G[b]);return h}function _(H){if(typeof H!="string")throw new TypeError("Expected String");if(H.length===0)return new Uint8Array;for(var F=0,K=0,Y=0;H[F]===c;)K++,F++;for(var N=(H.length-F)*d+1>>>0,P=new Uint8Array(N);H[F];){var G=H.charCodeAt(F);if(G>255)return;var D=r[G];if(D===255)return;for(var M=0,k=N-1;(D!==0||M<Y)&&k!==-1;k--,M++)D+=u*P[k]>>>0,P[k]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");Y=M,F++}for(var b=N-Y;b!==N&&P[b]===0;)b++;for(var h=new Uint8Array(K+(N-b)),y=K;b!==N;)h[y++]=P[b++];return h}function I(H){var F=_(H);if(F)return F;throw new Error("Non-base"+u+" character")}return{encode:S,decodeUnsafe:_,decode:I}}return on=t,on}var an,oi;function bs(){return oi||(oi=1,an=hs()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),an}var cn,ai;function ps(){if(ai)return cn;ai=1;var t=bs();return cn=function(e){function r(s){var u=Uint8Array.from(s),c=e(u),d=u.length+4,g=new Uint8Array(d);return g.set(u,0),g.set(c.subarray(0,4),u.length),t.encode(g,d)}function n(s){var u=s.slice(0,-4),c=s.slice(-4),d=e(u);if(!(c[0]^d[0]|c[1]^d[1]|c[2]^d[2]|c[3]^d[3]))return u}function i(s){var u=t.decodeUnsafe(s);if(u)return n(u)}function f(s){var u=t.decode(s),c=n(u);if(!c)throw new Error("Invalid checksum");return c}return{encode:r,decode:f,decodeUnsafe:i}},cn}var un,ci;function xs(){if(ci)return un;ci=1;var{sha256:t}=ds(),e=ps();function r(n){return t(t(n))}return un=e(r),un}var ws=xs();const Xi=Gi(ws);var ln,ui;function ys(){return ui||(ui=1,ln=function(e){return ArrayBuffer.isView(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Buffer.from(e)}),ln}var gs=ys();const ms=Gi(gs);var dn={},hn={},ur={},lr={},li;function Es(){if(li)return lr;li=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.BrowserRandomSource=void 0;const t=65536;class e{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const n=typeof self<"u"?self.crypto||self.msCrypto:null;n&&n.getRandomValues!==void 0&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(n){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const i=new Uint8Array(n);for(let f=0;f<i.length;f+=t)this._crypto.getRandomValues(i.subarray(f,f+Math.min(i.length-f,t)));return i}}return lr.BrowserRandomSource=e,lr}function _s(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dr={},di;function Ss(){if(di)return dr;di=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.NodeRandomSource=void 0;const t=wr();class e{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof _s<"u"){const n=es;n&&n.randomBytes&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(n){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let i=this._crypto.randomBytes(n);if(i.length!==n)throw new Error("NodeRandomSource: got fewer bytes than requested");const f=new Uint8Array(n);for(let s=0;s<f.length;s++)f[s]=i[s];return(0,t.wipe)(i),f}}return dr.NodeRandomSource=e,dr}var hi;function Bs(){if(hi)return ur;hi=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.SystemRandomSource=void 0;const t=Es(),e=Ss();class r{constructor(){if(this.isAvailable=!1,this.name="",this._source=new t.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new e.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(i){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(i)}}return ur.SystemRandomSource=r,ur}var bi;function As(){return bi||(bi=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Bs(),r=Rn(),n=wr();t.defaultRandomSource=new e.SystemRandomSource;function i(d,g=t.defaultRandomSource){return g.randomBytes(d)}t.randomBytes=i;function f(d=t.defaultRandomSource){const g=i(4,d),S=(0,r.readUint32LE)(g);return(0,n.wipe)(g),S}t.randomUint32=f;const s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(d,g=s,S=t.defaultRandomSource){if(g.length<2)throw new Error("randomString charset is too short");if(g.length>256)throw new Error("randomString charset is too long");let _="";const I=g.length,H=256-256%I;for(;d>0;){const F=i(Math.ceil(d*256/H),S);for(let K=0;K<F.length&&d>0;K++){const Y=F[K];Y<H&&(_+=g.charAt(Y%I),d--)}(0,n.wipe)(F)}return _}t.randomString=u;function c(d,g=s,S=t.defaultRandomSource){const _=Math.ceil(d/(Math.log(g.length)/Math.LN2));return u(_,g,S)}t.randomStringForEntropy=c})(hn)),hn}var bn={},pi;function vs(){return pi||(pi=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Rn(),r=wr();t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=(function(){function u(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},u.prototype.update=function(c,d){if(d===void 0&&(d=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var g=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&d>0;)this._buffer[this._bufferLength++]=c[g++],d--;this._bufferLength===this.blockSize&&(f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(g=f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,g,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=c[g++],d--;return this},u.prototype.finish=function(c){if(!this._finished){var d=this._bytesHashed,g=this._bufferLength,S=d/536870912|0,_=d<<3,I=d%128<112?128:256;this._buffer[g]=128;for(var H=g+1;H<I-8;H++)this._buffer[H]=0;e.writeUint32BE(S,this._buffer,I-8),e.writeUint32BE(_,this._buffer,I-4),f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,I),this._finished=!0}for(var H=0;H<this.digestLength/8;H++)e.writeUint32BE(this._stateHi[H],c,H*8),e.writeUint32BE(this._stateLo[H],c,H*8+4);return this},u.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},u})();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function f(u,c,d,g,S,_,I){for(var H=d[0],F=d[1],K=d[2],Y=d[3],N=d[4],P=d[5],G=d[6],D=d[7],M=g[0],k=g[1],b=g[2],h=g[3],y=g[4],A=g[5],B=g[6],w=g[7],p,o,l,E,m,x,v,L;I>=128;){for(var q=0;q<16;q++){var V=8*q+_;u[q]=e.readUint32BE(S,V),c[q]=e.readUint32BE(S,V+4)}for(var q=0;q<80;q++){var X=H,$=F,z=K,T=Y,C=N,R=P,a=G,U=D,j=M,W=k,re=b,J=h,se=y,ue=A,$e=B,me=w;if(p=D,o=w,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=(N>>>14|y<<18)^(N>>>18|y<<14)^(y>>>9|N<<23),o=(y>>>14|N<<18)^(y>>>18|N<<14)^(N>>>9|y<<23),m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,p=N&P^~N&G,o=y&A^~y&B,m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,p=i[q*2],o=i[q*2+1],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,p=u[q%16],o=c[q%16],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,l=v&65535|L<<16,E=m&65535|x<<16,p=l,o=E,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=(H>>>28|M<<4)^(M>>>2|H<<30)^(M>>>7|H<<25),o=(M>>>28|H<<4)^(H>>>2|M<<30)^(H>>>7|M<<25),m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,p=H&F^H&K^F&K,o=M&k^M&b^k&b,m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,U=v&65535|L<<16,me=m&65535|x<<16,p=T,o=J,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=l,o=E,m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,T=v&65535|L<<16,J=m&65535|x<<16,F=X,K=$,Y=z,N=T,P=C,G=R,D=a,H=U,k=j,b=W,h=re,y=J,A=se,B=ue,w=$e,M=me,q%16===15)for(var V=0;V<16;V++)p=u[V],o=c[V],m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=u[(V+9)%16],o=c[(V+9)%16],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,l=u[(V+1)%16],E=c[(V+1)%16],p=(l>>>1|E<<31)^(l>>>8|E<<24)^l>>>7,o=(E>>>1|l<<31)^(E>>>8|l<<24)^(E>>>7|l<<25),m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,l=u[(V+14)%16],E=c[(V+14)%16],p=(l>>>19|E<<13)^(E>>>29|l<<3)^l>>>6,o=(E>>>19|l<<13)^(l>>>29|E<<3)^(E>>>6|l<<26),m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,u[V]=v&65535|L<<16,c[V]=m&65535|x<<16}p=H,o=M,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=d[0],o=g[0],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,d[0]=H=v&65535|L<<16,g[0]=M=m&65535|x<<16,p=F,o=k,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=d[1],o=g[1],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,d[1]=F=v&65535|L<<16,g[1]=k=m&65535|x<<16,p=K,o=b,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=d[2],o=g[2],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,d[2]=K=v&65535|L<<16,g[2]=b=m&65535|x<<16,p=Y,o=h,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=d[3],o=g[3],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,d[3]=Y=v&65535|L<<16,g[3]=h=m&65535|x<<16,p=N,o=y,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=d[4],o=g[4],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,d[4]=N=v&65535|L<<16,g[4]=y=m&65535|x<<16,p=P,o=A,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=d[5],o=g[5],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,d[5]=P=v&65535|L<<16,g[5]=A=m&65535|x<<16,p=G,o=B,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=d[6],o=g[6],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,d[6]=G=v&65535|L<<16,g[6]=B=m&65535|x<<16,p=D,o=w,m=o&65535,x=o>>>16,v=p&65535,L=p>>>16,p=d[7],o=g[7],m+=o&65535,x+=o>>>16,v+=p&65535,L+=p>>>16,x+=m>>>16,v+=x>>>16,L+=v>>>16,d[7]=D=v&65535|L<<16,g[7]=w=m&65535|x<<16,_+=128,I-=128}return _}function s(u){var c=new n;c.update(u);var d=c.digest();return c.clean(),d}t.hash=s})(bn)),bn}var xi;function Is(){return xi||(xi=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=As(),r=vs(),n=wr();t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(T){const C=new Float64Array(16);if(T)for(let R=0;R<T.length;R++)C[R]=T[R];return C}const f=new Uint8Array(32);f[0]=9;const s=i(),u=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),g=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function I(T,C){for(let R=0;R<16;R++)T[R]=C[R]|0}function H(T){let C=1;for(let R=0;R<16;R++){let a=T[R]+C+65535;C=Math.floor(a/65536),T[R]=a-C*65536}T[0]+=C-1+37*(C-1)}function F(T,C,R){const a=~(R-1);for(let U=0;U<16;U++){const j=a&(T[U]^C[U]);T[U]^=j,C[U]^=j}}function K(T,C){const R=i(),a=i();for(let U=0;U<16;U++)a[U]=C[U];H(a),H(a),H(a);for(let U=0;U<2;U++){R[0]=a[0]-65517;for(let W=1;W<15;W++)R[W]=a[W]-65535-(R[W-1]>>16&1),R[W-1]&=65535;R[15]=a[15]-32767-(R[14]>>16&1);const j=R[15]>>16&1;R[14]&=65535,F(a,R,1-j)}for(let U=0;U<16;U++)T[2*U]=a[U]&255,T[2*U+1]=a[U]>>8}function Y(T,C){let R=0;for(let a=0;a<32;a++)R|=T[a]^C[a];return(1&R-1>>>8)-1}function N(T,C){const R=new Uint8Array(32),a=new Uint8Array(32);return K(R,T),K(a,C),Y(R,a)}function P(T){const C=new Uint8Array(32);return K(C,T),C[0]&1}function G(T,C){for(let R=0;R<16;R++)T[R]=C[2*R]+(C[2*R+1]<<8);T[15]&=32767}function D(T,C,R){for(let a=0;a<16;a++)T[a]=C[a]+R[a]}function M(T,C,R){for(let a=0;a<16;a++)T[a]=C[a]-R[a]}function k(T,C,R){let a,U,j=0,W=0,re=0,J=0,se=0,ue=0,$e=0,me=0,ze=0,Ae=0,Ee=0,xe=0,pe=0,be=0,de=0,he=0,ve=0,Xe=0,Qe=0,rt=0,it=0,ht=0,wt=0,St=0,Rt=0,qt=0,er=0,ar=0,_r=0,Qr=0,$n=0,Ie=R[0],He=R[1],Le=R[2],Ue=R[3],Oe=R[4],Re=R[5],Ne=R[6],Te=R[7],Fe=R[8],ke=R[9],De=R[10],Pe=R[11],Me=R[12],Ce=R[13],Ke=R[14],qe=R[15];a=C[0],j+=a*Ie,W+=a*He,re+=a*Le,J+=a*Ue,se+=a*Oe,ue+=a*Re,$e+=a*Ne,me+=a*Te,ze+=a*Fe,Ae+=a*ke,Ee+=a*De,xe+=a*Pe,pe+=a*Me,be+=a*Ce,de+=a*Ke,he+=a*qe,a=C[1],W+=a*Ie,re+=a*He,J+=a*Le,se+=a*Ue,ue+=a*Oe,$e+=a*Re,me+=a*Ne,ze+=a*Te,Ae+=a*Fe,Ee+=a*ke,xe+=a*De,pe+=a*Pe,be+=a*Me,de+=a*Ce,he+=a*Ke,ve+=a*qe,a=C[2],re+=a*Ie,J+=a*He,se+=a*Le,ue+=a*Ue,$e+=a*Oe,me+=a*Re,ze+=a*Ne,Ae+=a*Te,Ee+=a*Fe,xe+=a*ke,pe+=a*De,be+=a*Pe,de+=a*Me,he+=a*Ce,ve+=a*Ke,Xe+=a*qe,a=C[3],J+=a*Ie,se+=a*He,ue+=a*Le,$e+=a*Ue,me+=a*Oe,ze+=a*Re,Ae+=a*Ne,Ee+=a*Te,xe+=a*Fe,pe+=a*ke,be+=a*De,de+=a*Pe,he+=a*Me,ve+=a*Ce,Xe+=a*Ke,Qe+=a*qe,a=C[4],se+=a*Ie,ue+=a*He,$e+=a*Le,me+=a*Ue,ze+=a*Oe,Ae+=a*Re,Ee+=a*Ne,xe+=a*Te,pe+=a*Fe,be+=a*ke,de+=a*De,he+=a*Pe,ve+=a*Me,Xe+=a*Ce,Qe+=a*Ke,rt+=a*qe,a=C[5],ue+=a*Ie,$e+=a*He,me+=a*Le,ze+=a*Ue,Ae+=a*Oe,Ee+=a*Re,xe+=a*Ne,pe+=a*Te,be+=a*Fe,de+=a*ke,he+=a*De,ve+=a*Pe,Xe+=a*Me,Qe+=a*Ce,rt+=a*Ke,it+=a*qe,a=C[6],$e+=a*Ie,me+=a*He,ze+=a*Le,Ae+=a*Ue,Ee+=a*Oe,xe+=a*Re,pe+=a*Ne,be+=a*Te,de+=a*Fe,he+=a*ke,ve+=a*De,Xe+=a*Pe,Qe+=a*Me,rt+=a*Ce,it+=a*Ke,ht+=a*qe,a=C[7],me+=a*Ie,ze+=a*He,Ae+=a*Le,Ee+=a*Ue,xe+=a*Oe,pe+=a*Re,be+=a*Ne,de+=a*Te,he+=a*Fe,ve+=a*ke,Xe+=a*De,Qe+=a*Pe,rt+=a*Me,it+=a*Ce,ht+=a*Ke,wt+=a*qe,a=C[8],ze+=a*Ie,Ae+=a*He,Ee+=a*Le,xe+=a*Ue,pe+=a*Oe,be+=a*Re,de+=a*Ne,he+=a*Te,ve+=a*Fe,Xe+=a*ke,Qe+=a*De,rt+=a*Pe,it+=a*Me,ht+=a*Ce,wt+=a*Ke,St+=a*qe,a=C[9],Ae+=a*Ie,Ee+=a*He,xe+=a*Le,pe+=a*Ue,be+=a*Oe,de+=a*Re,he+=a*Ne,ve+=a*Te,Xe+=a*Fe,Qe+=a*ke,rt+=a*De,it+=a*Pe,ht+=a*Me,wt+=a*Ce,St+=a*Ke,Rt+=a*qe,a=C[10],Ee+=a*Ie,xe+=a*He,pe+=a*Le,be+=a*Ue,de+=a*Oe,he+=a*Re,ve+=a*Ne,Xe+=a*Te,Qe+=a*Fe,rt+=a*ke,it+=a*De,ht+=a*Pe,wt+=a*Me,St+=a*Ce,Rt+=a*Ke,qt+=a*qe,a=C[11],xe+=a*Ie,pe+=a*He,be+=a*Le,de+=a*Ue,he+=a*Oe,ve+=a*Re,Xe+=a*Ne,Qe+=a*Te,rt+=a*Fe,it+=a*ke,ht+=a*De,wt+=a*Pe,St+=a*Me,Rt+=a*Ce,qt+=a*Ke,er+=a*qe,a=C[12],pe+=a*Ie,be+=a*He,de+=a*Le,he+=a*Ue,ve+=a*Oe,Xe+=a*Re,Qe+=a*Ne,rt+=a*Te,it+=a*Fe,ht+=a*ke,wt+=a*De,St+=a*Pe,Rt+=a*Me,qt+=a*Ce,er+=a*Ke,ar+=a*qe,a=C[13],be+=a*Ie,de+=a*He,he+=a*Le,ve+=a*Ue,Xe+=a*Oe,Qe+=a*Re,rt+=a*Ne,it+=a*Te,ht+=a*Fe,wt+=a*ke,St+=a*De,Rt+=a*Pe,qt+=a*Me,er+=a*Ce,ar+=a*Ke,_r+=a*qe,a=C[14],de+=a*Ie,he+=a*He,ve+=a*Le,Xe+=a*Ue,Qe+=a*Oe,rt+=a*Re,it+=a*Ne,ht+=a*Te,wt+=a*Fe,St+=a*ke,Rt+=a*De,qt+=a*Pe,er+=a*Me,ar+=a*Ce,_r+=a*Ke,Qr+=a*qe,a=C[15],he+=a*Ie,ve+=a*He,Xe+=a*Le,Qe+=a*Ue,rt+=a*Oe,it+=a*Re,ht+=a*Ne,wt+=a*Te,St+=a*Fe,Rt+=a*ke,qt+=a*De,er+=a*Pe,ar+=a*Me,_r+=a*Ce,Qr+=a*Ke,$n+=a*qe,j+=38*ve,W+=38*Xe,re+=38*Qe,J+=38*rt,se+=38*it,ue+=38*ht,$e+=38*wt,me+=38*St,ze+=38*Rt,Ae+=38*qt,Ee+=38*er,xe+=38*ar,pe+=38*_r,be+=38*Qr,de+=38*$n,U=1,a=j+U+65535,U=Math.floor(a/65536),j=a-U*65536,a=W+U+65535,U=Math.floor(a/65536),W=a-U*65536,a=re+U+65535,U=Math.floor(a/65536),re=a-U*65536,a=J+U+65535,U=Math.floor(a/65536),J=a-U*65536,a=se+U+65535,U=Math.floor(a/65536),se=a-U*65536,a=ue+U+65535,U=Math.floor(a/65536),ue=a-U*65536,a=$e+U+65535,U=Math.floor(a/65536),$e=a-U*65536,a=me+U+65535,U=Math.floor(a/65536),me=a-U*65536,a=ze+U+65535,U=Math.floor(a/65536),ze=a-U*65536,a=Ae+U+65535,U=Math.floor(a/65536),Ae=a-U*65536,a=Ee+U+65535,U=Math.floor(a/65536),Ee=a-U*65536,a=xe+U+65535,U=Math.floor(a/65536),xe=a-U*65536,a=pe+U+65535,U=Math.floor(a/65536),pe=a-U*65536,a=be+U+65535,U=Math.floor(a/65536),be=a-U*65536,a=de+U+65535,U=Math.floor(a/65536),de=a-U*65536,a=he+U+65535,U=Math.floor(a/65536),he=a-U*65536,j+=U-1+37*(U-1),U=1,a=j+U+65535,U=Math.floor(a/65536),j=a-U*65536,a=W+U+65535,U=Math.floor(a/65536),W=a-U*65536,a=re+U+65535,U=Math.floor(a/65536),re=a-U*65536,a=J+U+65535,U=Math.floor(a/65536),J=a-U*65536,a=se+U+65535,U=Math.floor(a/65536),se=a-U*65536,a=ue+U+65535,U=Math.floor(a/65536),ue=a-U*65536,a=$e+U+65535,U=Math.floor(a/65536),$e=a-U*65536,a=me+U+65535,U=Math.floor(a/65536),me=a-U*65536,a=ze+U+65535,U=Math.floor(a/65536),ze=a-U*65536,a=Ae+U+65535,U=Math.floor(a/65536),Ae=a-U*65536,a=Ee+U+65535,U=Math.floor(a/65536),Ee=a-U*65536,a=xe+U+65535,U=Math.floor(a/65536),xe=a-U*65536,a=pe+U+65535,U=Math.floor(a/65536),pe=a-U*65536,a=be+U+65535,U=Math.floor(a/65536),be=a-U*65536,a=de+U+65535,U=Math.floor(a/65536),de=a-U*65536,a=he+U+65535,U=Math.floor(a/65536),he=a-U*65536,j+=U-1+37*(U-1),T[0]=j,T[1]=W,T[2]=re,T[3]=J,T[4]=se,T[5]=ue,T[6]=$e,T[7]=me,T[8]=ze,T[9]=Ae,T[10]=Ee,T[11]=xe,T[12]=pe,T[13]=be,T[14]=de,T[15]=he}function b(T,C){k(T,C,C)}function h(T,C){const R=i();let a;for(a=0;a<16;a++)R[a]=C[a];for(a=253;a>=0;a--)b(R,R),a!==2&&a!==4&&k(R,R,C);for(a=0;a<16;a++)T[a]=R[a]}function y(T,C){const R=i();let a;for(a=0;a<16;a++)R[a]=C[a];for(a=250;a>=0;a--)b(R,R),a!==1&&k(R,R,C);for(a=0;a<16;a++)T[a]=R[a]}function A(T,C){const R=i(),a=i(),U=i(),j=i(),W=i(),re=i(),J=i(),se=i(),ue=i();M(R,T[1],T[0]),M(ue,C[1],C[0]),k(R,R,ue),D(a,T[0],T[1]),D(ue,C[0],C[1]),k(a,a,ue),k(U,T[3],C[3]),k(U,U,d),k(j,T[2],C[2]),D(j,j,j),M(W,a,R),M(re,j,U),D(J,j,U),D(se,a,R),k(T[0],W,re),k(T[1],se,J),k(T[2],J,re),k(T[3],W,se)}function B(T,C,R){for(let a=0;a<4;a++)F(T[a],C[a],R)}function w(T,C){const R=i(),a=i(),U=i();h(U,C[2]),k(R,C[0],U),k(a,C[1],U),K(T,a),T[31]^=P(R)<<7}function p(T,C,R){I(T[0],s),I(T[1],u),I(T[2],u),I(T[3],s);for(let a=255;a>=0;--a){const U=R[a/8|0]>>(a&7)&1;B(T,C,U),A(C,T),A(T,T),B(T,C,U)}}function o(T,C){const R=[i(),i(),i(),i()];I(R[0],g),I(R[1],S),I(R[2],u),k(R[3],g,S),p(T,R,C)}function l(T){if(T.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const C=(0,r.hash)(T);C[0]&=248,C[31]&=127,C[31]|=64;const R=new Uint8Array(32),a=[i(),i(),i(),i()];o(a,C),w(R,a);const U=new Uint8Array(64);return U.set(T),U.set(R,32),{publicKey:R,secretKey:U}}t.generateKeyPairFromSeed=l;function E(T){const C=(0,e.randomBytes)(32,T),R=l(C);return(0,n.wipe)(C),R}t.generateKeyPair=E;function m(T){if(T.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(T.subarray(32))}t.extractPublicKeyFromSecretKey=m;const x=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function v(T,C){let R,a,U,j;for(a=63;a>=32;--a){for(R=0,U=a-32,j=a-12;U<j;++U)C[U]+=R-16*C[a]*x[U-(a-32)],R=Math.floor((C[U]+128)/256),C[U]-=R*256;C[U]+=R,C[a]=0}for(R=0,U=0;U<32;U++)C[U]+=R-(C[31]>>4)*x[U],R=C[U]>>8,C[U]&=255;for(U=0;U<32;U++)C[U]-=R*x[U];for(a=0;a<32;a++)C[a+1]+=C[a]>>8,T[a]=C[a]&255}function L(T){const C=new Float64Array(64);for(let R=0;R<64;R++)C[R]=T[R];for(let R=0;R<64;R++)T[R]=0;v(T,C)}function q(T,C){const R=new Float64Array(64),a=[i(),i(),i(),i()],U=(0,r.hash)(T.subarray(0,32));U[0]&=248,U[31]&=127,U[31]|=64;const j=new Uint8Array(64);j.set(U.subarray(32),32);const W=new r.SHA512;W.update(j.subarray(32)),W.update(C);const re=W.digest();W.clean(),L(re),o(a,re),w(j,a),W.reset(),W.update(j.subarray(0,32)),W.update(T.subarray(32)),W.update(C);const J=W.digest();L(J);for(let se=0;se<32;se++)R[se]=re[se];for(let se=0;se<32;se++)for(let ue=0;ue<32;ue++)R[se+ue]+=J[se]*U[ue];return v(j.subarray(32),R),j}t.sign=q;function V(T,C){const R=i(),a=i(),U=i(),j=i(),W=i(),re=i(),J=i();return I(T[2],u),G(T[1],C),b(U,T[1]),k(j,U,c),M(U,U,T[2]),D(j,T[2],j),b(W,j),b(re,W),k(J,re,W),k(R,J,U),k(R,R,j),y(R,R),k(R,R,U),k(R,R,j),k(R,R,j),k(T[0],R,j),b(a,T[0]),k(a,a,j),N(a,U)&&k(T[0],T[0],_),b(a,T[0]),k(a,a,j),N(a,U)?-1:(P(T[0])===C[31]>>7&&M(T[0],s,T[0]),k(T[3],T[0],T[1]),0)}function X(T,C,R){const a=new Uint8Array(32),U=[i(),i(),i(),i()],j=[i(),i(),i(),i()];if(R.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(V(j,T))return!1;const W=new r.SHA512;W.update(R.subarray(0,32)),W.update(T),W.update(C);const re=W.digest();return L(re),p(U,j,re),o(j,R.subarray(32)),A(U,j),w(a,U),!Y(R,a)}t.verify=X;function $(T){let C=[i(),i(),i(),i()];if(V(C,T))throw new Error("Ed25519: invalid public key");let R=i(),a=i(),U=C[1];D(R,u,U),M(a,u,U),h(a,a),k(R,R,a);let j=new Uint8Array(32);return K(j,R),j}t.convertPublicKeyToX25519=$;function z(T){const C=(0,r.hash)(T.subarray(0,32));C[0]&=248,C[31]&=127,C[31]|=64;const R=new Uint8Array(C.subarray(0,32));return(0,n.wipe)(C),R}t.convertSecretKeyToX25519=z})(dn)),dn}var Hs=Is();const tr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function gr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function vn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function nt(t,...e){if(!gr(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ji(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");vn(t.outputLen),vn(t.blockLen)}function Or(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ls(t,e){nt(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function sr(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function pn(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function yt(t,e){return t<<32-e|t>>>e}const Wi=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Us=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ct(t){if(nt(t),Wi)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Us[t[r]];return e}const At={_0:48,_9:57,A:65,F:70,a:97,f:102};function wi(t){if(t>=At._0&&t<=At._9)return t-At._0;if(t>=At.A&&t<=At.F)return t-(At.A-10);if(t>=At.a&&t<=At.f)return t-(At.a-10)}function Rr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Wi)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,f=0;i<r;i++,f+=2){const s=wi(t.charCodeAt(f)),u=wi(t.charCodeAt(f+1));if(s===void 0||u===void 0){const c=t[f]+t[f+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+f)}n[i]=s*16+u}return n}function mr(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Nn(t){return typeof t=="string"&&(t=mr(t)),nt(t),t}function ce(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];nt(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const f=t[n];r.set(f,i),i+=f.length}return r}class Qi{}function Tn(t){const e=n=>t().update(Nn(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Fn(t=32){if(tr&&typeof tr.getRandomValues=="function")return tr.getRandomValues(new Uint8Array(t));if(tr&&typeof tr.randomBytes=="function")return Uint8Array.from(tr.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function Os(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),f=BigInt(4294967295),s=Number(r>>i&f),u=Number(r&f),c=n?4:0,d=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+d,u,n)}function Rs(t,e,r){return t&e^~t&r}function Ns(t,e,r){return t&e^t&r^e&r}class Ji extends Qi{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=pn(this.buffer)}update(e){Or(this),e=Nn(e),nt(e);const{view:r,buffer:n,blockLen:i}=this,f=e.length;for(let s=0;s<f;){const u=Math.min(i-this.pos,f-s);if(u===i){const c=pn(e);for(;i<=f-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+u),this.pos),this.pos+=u,s+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Or(this),Ls(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:f}=this;let{pos:s}=this;r[s++]=128,sr(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(n,0),s=0);for(let S=s;S<i;S++)r[S]=0;Os(n,i-8,BigInt(this.length*8),f),this.process(n,0);const u=pn(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,g=this.get();if(d>g.length)throw new Error("_sha2: outputLen bigger than state");for(let S=0;S<d;S++)u.setUint32(4*S,g[S],f)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:f,destroyed:s,pos:u}=this;return e.destroyed=s,e.finished=f,e.length=i,e.pos=u,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Tt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ze=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Ye=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),vr=BigInt(2**32-1),yi=BigInt(32);function Ts(t,e=!1){return e?{h:Number(t&vr),l:Number(t>>yi&vr)}:{h:Number(t>>yi&vr)|0,l:Number(t&vr)|0}}function Fs(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let f=0;f<r;f++){const{h:s,l:u}=Ts(t[f],e);[n[f],i[f]]=[s,u]}return[n,i]}const gi=(t,e,r)=>t>>>r,mi=(t,e,r)=>t<<32-r|e>>>r,rr=(t,e,r)=>t>>>r|e<<32-r,nr=(t,e,r)=>t<<32-r|e>>>r,Ir=(t,e,r)=>t<<64-r|e>>>r-32,Hr=(t,e,r)=>t>>>r-32|e<<64-r;function vt(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const ks=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Ds=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Ps=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Ms=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Cs=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Ks=(t,e,r,n,i,f)=>e+r+n+i+f+(t/2**32|0)|0,qs=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ft=new Uint32Array(64);class Gs extends Ji{constructor(e=32){super(64,e,8,!1),this.A=Tt[0]|0,this.B=Tt[1]|0,this.C=Tt[2]|0,this.D=Tt[3]|0,this.E=Tt[4]|0,this.F=Tt[5]|0,this.G=Tt[6]|0,this.H=Tt[7]|0}get(){const{A:e,B:r,C:n,D:i,E:f,F:s,G:u,H:c}=this;return[e,r,n,i,f,s,u,c]}set(e,r,n,i,f,s,u,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=f|0,this.F=s|0,this.G=u|0,this.H=c|0}process(e,r){for(let S=0;S<16;S++,r+=4)Ft[S]=e.getUint32(r,!1);for(let S=16;S<64;S++){const _=Ft[S-15],I=Ft[S-2],H=yt(_,7)^yt(_,18)^_>>>3,F=yt(I,17)^yt(I,19)^I>>>10;Ft[S]=F+Ft[S-7]+H+Ft[S-16]|0}let{A:n,B:i,C:f,D:s,E:u,F:c,G:d,H:g}=this;for(let S=0;S<64;S++){const _=yt(u,6)^yt(u,11)^yt(u,25),I=g+_+Rs(u,c,d)+qs[S]+Ft[S]|0,F=(yt(n,2)^yt(n,13)^yt(n,22))+Ns(n,i,f)|0;g=d,d=c,c=u,u=s+I|0,s=f,f=i,i=n,n=I+F|0}n=n+this.A|0,i=i+this.B|0,f=f+this.C|0,s=s+this.D|0,u=u+this.E|0,c=c+this.F|0,d=d+this.G|0,g=g+this.H|0,this.set(n,i,f,s,u,c,d,g)}roundClean(){sr(Ft)}destroy(){this.set(0,0,0,0,0,0,0,0),sr(this.buffer)}}const ef=Fs(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Zs=ef[0],Ys=ef[1],kt=new Uint32Array(80),Dt=new Uint32Array(80);class tf extends Ji{constructor(e=64){super(128,e,16,!1),this.Ah=Ye[0]|0,this.Al=Ye[1]|0,this.Bh=Ye[2]|0,this.Bl=Ye[3]|0,this.Ch=Ye[4]|0,this.Cl=Ye[5]|0,this.Dh=Ye[6]|0,this.Dl=Ye[7]|0,this.Eh=Ye[8]|0,this.El=Ye[9]|0,this.Fh=Ye[10]|0,this.Fl=Ye[11]|0,this.Gh=Ye[12]|0,this.Gl=Ye[13]|0,this.Hh=Ye[14]|0,this.Hl=Ye[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:f,Cl:s,Dh:u,Dl:c,Eh:d,El:g,Fh:S,Fl:_,Gh:I,Gl:H,Hh:F,Hl:K}=this;return[e,r,n,i,f,s,u,c,d,g,S,_,I,H,F,K]}set(e,r,n,i,f,s,u,c,d,g,S,_,I,H,F,K){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=f|0,this.Cl=s|0,this.Dh=u|0,this.Dl=c|0,this.Eh=d|0,this.El=g|0,this.Fh=S|0,this.Fl=_|0,this.Gh=I|0,this.Gl=H|0,this.Hh=F|0,this.Hl=K|0}process(e,r){for(let P=0;P<16;P++,r+=4)kt[P]=e.getUint32(r),Dt[P]=e.getUint32(r+=4);for(let P=16;P<80;P++){const G=kt[P-15]|0,D=Dt[P-15]|0,M=rr(G,D,1)^rr(G,D,8)^gi(G,D,7),k=nr(G,D,1)^nr(G,D,8)^mi(G,D,7),b=kt[P-2]|0,h=Dt[P-2]|0,y=rr(b,h,19)^Ir(b,h,61)^gi(b,h,6),A=nr(b,h,19)^Hr(b,h,61)^mi(b,h,6),B=Ps(k,A,Dt[P-7],Dt[P-16]),w=Ms(B,M,y,kt[P-7],kt[P-16]);kt[P]=w|0,Dt[P]=B|0}let{Ah:n,Al:i,Bh:f,Bl:s,Ch:u,Cl:c,Dh:d,Dl:g,Eh:S,El:_,Fh:I,Fl:H,Gh:F,Gl:K,Hh:Y,Hl:N}=this;for(let P=0;P<80;P++){const G=rr(S,_,14)^rr(S,_,18)^Ir(S,_,41),D=nr(S,_,14)^nr(S,_,18)^Hr(S,_,41),M=S&I^~S&F,k=_&H^~_&K,b=Cs(N,D,k,Ys[P],Dt[P]),h=Ks(b,Y,G,M,Zs[P],kt[P]),y=b|0,A=rr(n,i,28)^Ir(n,i,34)^Ir(n,i,39),B=nr(n,i,28)^Hr(n,i,34)^Hr(n,i,39),w=n&f^n&u^f&u,p=i&s^i&c^s&c;Y=F|0,N=K|0,F=I|0,K=H|0,I=S|0,H=_|0,{h:S,l:_}=vt(d|0,g|0,h|0,y|0),d=u|0,g=c|0,u=f|0,c=s|0,f=n|0,s=i|0;const o=ks(y,B,p);n=Ds(o,h,A,w),i=o|0}({h:n,l:i}=vt(this.Ah|0,this.Al|0,n|0,i|0)),{h:f,l:s}=vt(this.Bh|0,this.Bl|0,f|0,s|0),{h:u,l:c}=vt(this.Ch|0,this.Cl|0,u|0,c|0),{h:d,l:g}=vt(this.Dh|0,this.Dl|0,d|0,g|0),{h:S,l:_}=vt(this.Eh|0,this.El|0,S|0,_|0),{h:I,l:H}=vt(this.Fh|0,this.Fl|0,I|0,H|0),{h:F,l:K}=vt(this.Gh|0,this.Gl|0,F|0,K|0),{h:Y,l:N}=vt(this.Hh|0,this.Hl|0,Y|0,N|0),this.set(n,i,f,s,u,c,d,g,S,_,I,H,F,K,Y,N)}roundClean(){sr(kt,Dt)}destroy(){sr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Vs extends tf{constructor(){super(48),this.Ah=Ze[0]|0,this.Al=Ze[1]|0,this.Bh=Ze[2]|0,this.Bl=Ze[3]|0,this.Ch=Ze[4]|0,this.Cl=Ze[5]|0,this.Dh=Ze[6]|0,this.Dl=Ze[7]|0,this.Eh=Ze[8]|0,this.El=Ze[9]|0,this.Fh=Ze[10]|0,this.Fl=Ze[11]|0,this.Gh=Ze[12]|0,this.Gl=Ze[13]|0,this.Hh=Ze[14]|0,this.Hl=Ze[15]|0}}const kn=Tn(()=>new Gs),$s=Tn(()=>new tf),zs=Tn(()=>new Vs);class rf extends Qi{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,ji(e);const n=Nn(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,f=new Uint8Array(i);f.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<f.length;s++)f[s]^=54;this.iHash.update(f),this.oHash=e.create();for(let s=0;s<f.length;s++)f[s]^=106;this.oHash.update(f),sr(f)}update(e){return Or(this),this.iHash.update(e),this}digestInto(e){Or(this),nt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:f,blockLen:s,outputLen:u}=this;return e=e,e.finished=i,e.destroyed=f,e.blockLen=s,e.outputLen=u,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const nf=(t,e,r)=>new rf(t,e).update(r).digest();nf.create=(t,e)=>new rf(t,e);const Dn=BigInt(0),Nr=BigInt(1);function Tr(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function Zt(t,e,r=""){const n=gr(t),i=t?.length,f=e!==void 0;if(!n||f&&i!==e){const s=r&&`"${r}" `,u=f?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof t}`;throw new Error(s+"expected Uint8Array"+u+", got "+c)}return t}function Lr(t){const e=t.toString(16);return e.length&1?"0"+e:e}function ff(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Dn:BigInt("0x"+t)}function lt(t){return ff(Ct(t))}function sf(t){return nt(t),ff(Ct(Uint8Array.from(t).reverse()))}function Se(t,e){return Rr(t.toString(16).padStart(e*2,"0"))}function of(t,e){return Se(t,e).reverse()}function ye(t,e,r){let n;if(typeof e=="string")try{n=Rr(e)}catch(f){throw new Error(t+" must be hex string or Uint8Array, cause: "+f)}else if(gr(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const xn=t=>typeof t=="bigint"&&Dn<=t;function af(t,e,r){return xn(t)&&xn(e)&&xn(r)&&e<=t&&t<r}function Xs(t,e,r,n){if(!af(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function br(t){let e;for(e=0;t>Dn;t>>=Nr,e+=1);return e}function js(t,e){return t>>BigInt(e)&Nr}const Kt=t=>(Nr<<BigInt(t))-Nr;function Ws(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=I=>new Uint8Array(I),i=I=>Uint8Array.of(I);let f=n(t),s=n(t),u=0;const c=()=>{f.fill(1),s.fill(0),u=0},d=(...I)=>r(s,f,...I),g=(I=n(0))=>{s=d(i(0),I),f=d(),I.length!==0&&(s=d(i(1),I),f=d())},S=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let I=0;const H=[];for(;I<e;){f=d();const F=f.slice();H.push(F),I+=f.length}return ce(...H)};return(I,H)=>{c(),g(I);let F;for(;!(F=H(S()));)g();return c(),F}}function Qs(t){return typeof t=="function"&&Number.isSafeInteger(t.outputLen)}function Cr(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,f,s){const u=t[i];if(s&&u===void 0)return;const c=typeof u;if(c!==f||u===null)throw new Error(`param "${i}" is invalid: expected ${f}, got ${c}`)}Object.entries(e).forEach(([i,f])=>n(i,f,!1)),Object.entries(r).forEach(([i,f])=>n(i,f,!0))}const cf=()=>{throw new Error("not implemented")};function In(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const f=t(r,...n);return e.set(r,f),f}}const et=BigInt(0),We=BigInt(1),Yt=BigInt(2),uf=BigInt(3),lf=BigInt(4),df=BigInt(5),Js=BigInt(7),hf=BigInt(8),eo=BigInt(9),bf=BigInt(16);function ut(t,e){const r=t%e;return r>=et?r:e+r}function st(t,e,r){let n=t;for(;e-- >et;)n*=n,n%=r;return n}function Ei(t,e){if(t===et)throw new Error("invert: expected non-zero number");if(e<=et)throw new Error("invert: expected positive modulus, got "+e);let r=ut(t,e),n=e,i=et,f=We;for(;r!==et;){const u=n/r,c=n%r,d=i-f*u;n=r,r=c,i=f,f=d}if(n!==We)throw new Error("invert: does not exist");return ut(i,e)}function Pn(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function pf(t,e){const r=(t.ORDER+We)/lf,n=t.pow(e,r);return Pn(t,n,e),n}function to(t,e){const r=(t.ORDER-df)/hf,n=t.mul(e,Yt),i=t.pow(n,r),f=t.mul(e,i),s=t.mul(t.mul(f,Yt),i),u=t.mul(f,t.sub(s,t.ONE));return Pn(t,u,e),u}function ro(t){const e=_t(t),r=xf(t),n=r(e,e.neg(e.ONE)),i=r(e,n),f=r(e,e.neg(n)),s=(t+Js)/bf;return(u,c)=>{let d=u.pow(c,s),g=u.mul(d,n);const S=u.mul(d,i),_=u.mul(d,f),I=u.eql(u.sqr(g),c),H=u.eql(u.sqr(S),c);d=u.cmov(d,g,I),g=u.cmov(_,S,H);const F=u.eql(u.sqr(g),c),K=u.cmov(d,g,F);return Pn(u,K,c),K}}function xf(t){if(t<uf)throw new Error("sqrt is not defined for small field");let e=t-We,r=0;for(;e%Yt===et;)e/=Yt,r++;let n=Yt;const i=_t(t);for(;Fr(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return pf;let f=i.pow(n,e);const s=(e+We)/Yt;return function(c,d){if(c.is0(d))return d;if(Fr(c,d)!==1)throw new Error("Cannot find square root");let g=r,S=c.mul(c.ONE,f),_=c.pow(d,e),I=c.pow(d,s);for(;!c.eql(_,c.ONE);){if(c.is0(_))return c.ZERO;let H=1,F=c.sqr(_);for(;!c.eql(F,c.ONE);)if(H++,F=c.sqr(F),H===g)throw new Error("Cannot find square root");const K=We<<BigInt(g-H-1),Y=c.pow(S,K);g=H,S=c.sqr(Y),_=c.mul(_,S),I=c.mul(I,Y)}return I}}function no(t){return t%lf===uf?pf:t%hf===df?to:t%bf===eo?ro(t):xf(t)}const io=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wf(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=io.reduce((n,i)=>(n[i]="function",n),e);return Cr(t,r),t}function Kr(t,e,r){if(r<et)throw new Error("invalid exponent, negatives unsupported");if(r===et)return t.ONE;if(r===We)return e;let n=t.ONE,i=e;for(;r>et;)r&We&&(n=t.mul(n,i)),i=t.sqr(i),r>>=We;return n}function Qt(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((s,u,c)=>t.is0(u)?s:(n[c]=s,t.mul(s,u)),t.ONE),f=t.inv(i);return e.reduceRight((s,u,c)=>t.is0(u)?s:(n[c]=t.mul(s,n[c]),t.mul(s,u)),f),n}function Fr(t,e){const r=(t.ORDER-We)/Yt,n=t.pow(e,r),i=t.eql(n,t.ONE),f=t.eql(n,t.ZERO),s=t.eql(n,t.neg(t.ONE));if(!i&&!f&&!s)throw new Error("invalid Legendre symbol result");return i?1:f?0:-1}function yf(t,e){e!==void 0&&vn(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function _t(t,e,r=!1,n={}){if(t<=et)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,f,s=!1,u;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const _=e;_.BITS&&(i=_.BITS),_.sqrt&&(f=_.sqrt),typeof _.isLE=="boolean"&&(r=_.isLE),typeof _.modFromBytes=="boolean"&&(s=_.modFromBytes),u=_.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(f=n.sqrt);const{nBitLength:c,nByteLength:d}=yf(t,i);if(d>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let g;const S=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:d,MASK:Kt(c),ZERO:et,ONE:We,allowedLengths:u,create:_=>ut(_,t),isValid:_=>{if(typeof _!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof _);return et<=_&&_<t},is0:_=>_===et,isValidNot0:_=>!S.is0(_)&&S.isValid(_),isOdd:_=>(_&We)===We,neg:_=>ut(-_,t),eql:(_,I)=>_===I,sqr:_=>ut(_*_,t),add:(_,I)=>ut(_+I,t),sub:(_,I)=>ut(_-I,t),mul:(_,I)=>ut(_*I,t),pow:(_,I)=>Kr(S,_,I),div:(_,I)=>ut(_*Ei(I,t),t),sqrN:_=>_*_,addN:(_,I)=>_+I,subN:(_,I)=>_-I,mulN:(_,I)=>_*I,inv:_=>Ei(_,t),sqrt:f||(_=>(g||(g=no(t)),g(S,_))),toBytes:_=>r?of(_,d):Se(_,d),fromBytes:(_,I=!0)=>{if(u){if(!u.includes(_.length)||_.length>d)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+_.length);const F=new Uint8Array(d);F.set(_,r?0:F.length-_.length),_=F}if(_.length!==d)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+_.length);let H=r?sf(_):lt(_);if(s&&(H=ut(H,t)),!I&&!S.isValid(H))throw new Error("invalid field element: outside of range 0..ORDER");return H},invertBatch:_=>Qt(S,_),cmov:(_,I,H)=>H?I:_});return Object.freeze(S)}function gf(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Mn(t){const e=gf(t);return e+Math.ceil(e/2)}function mf(t,e,r=!1){const n=t.length,i=gf(e),f=Mn(e);if(n<16||n<f||n>1024)throw new Error("expected "+f+"-1024 bytes of input, got "+n);const s=r?sf(t):lt(t),u=ut(s,e-We)+We;return r?of(u,i):Se(u,i)}const or=BigInt(0),Vt=BigInt(1);function kr(t,e){const r=e.negate();return t?r:e}function hr(t,e){const r=Qt(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function Ef(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function wn(t,e){Ef(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,f=Kt(t),s=BigInt(t);return{windows:r,windowSize:n,mask:f,maxNumber:i,shiftBy:s}}function _i(t,e,r){const{windowSize:n,mask:i,maxNumber:f,shiftBy:s}=r;let u=Number(t&i),c=t>>s;u>n&&(u-=f,c+=Vt);const d=e*n,g=d+Math.abs(u)-1,S=u===0,_=u<0,I=e%2!==0;return{nextN:c,offset:g,isZero:S,isNeg:_,isNegF:I,offsetF:d}}function fo(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function so(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const yn=new WeakMap,_f=new WeakMap;function gn(t){return _f.get(t)||1}function Si(t){if(t!==or)throw new Error("invalid wNAF")}class oo{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>or;)r&Vt&&(n=n.add(i)),i=i.double(),r>>=Vt;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=wn(r,this.bits),f=[];let s=e,u=s;for(let c=0;c<n;c++){u=s,f.push(u);for(let d=1;d<i;d++)u=u.add(s),f.push(u);s=u.double()}return f}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,f=this.BASE;const s=wn(e,this.bits);for(let u=0;u<s.windows;u++){const{nextN:c,offset:d,isZero:g,isNeg:S,isNegF:_,offsetF:I}=_i(n,u,s);n=c,g?f=f.add(kr(_,r[I])):i=i.add(kr(S,r[d]))}return Si(n),{p:i,f}}wNAFUnsafe(e,r,n,i=this.ZERO){const f=wn(e,this.bits);for(let s=0;s<f.windows&&n!==or;s++){const{nextN:u,offset:c,isZero:d,isNeg:g}=_i(n,s,f);if(n=u,!d){const S=r[c];i=i.add(g?S.negate():S)}}return Si(n),i}getPrecomputes(e,r,n){let i=yn.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),yn.set(r,i))),i}cached(e,r,n){const i=gn(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const f=gn(e);return f===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(f,this.getPrecomputes(f,e,n),r,i)}createCache(e,r){Ef(r,this.bits),_f.set(e,r),yn.delete(e)}hasCache(e){return gn(e)!==1}}function ao(t,e,r,n){let i=e,f=t.ZERO,s=t.ZERO;for(;r>or||n>or;)r&Vt&&(f=f.add(i)),n&Vt&&(s=s.add(i)),i=i.double(),r>>=Vt,n>>=Vt;return{p1:f,p2:s}}function co(t,e,r,n){fo(r,t),so(n,e);const i=r.length,f=n.length;if(i!==f)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,u=br(BigInt(i));let c=1;u>12?c=u-3:u>4?c=u-2:u>0&&(c=2);const d=Kt(c),g=new Array(Number(d)+1).fill(s),S=Math.floor((e.BITS-1)/c)*c;let _=s;for(let I=S;I>=0;I-=c){g.fill(s);for(let F=0;F<f;F++){const K=n[F],Y=Number(K>>BigInt(I)&d);g[Y]=g[Y].add(r[F])}let H=s;for(let F=g.length-1,K=s;F>0;F--)K=K.add(g[F]),H=H.add(K);if(_=_.add(H),I!==0)for(let F=0;F<c;F++)_=_.double()}return _}function Bi(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return wf(e),e}else return _t(t,{isLE:r})}function uo(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const d=e[c];if(!(typeof d=="bigint"&&d>or))throw new Error(`CURVE.${c} must be positive bigint`)}const i=Bi(e.p,r.Fp,n),f=Bi(e.n,r.Fn,n),u=["Gx","Gy","a","b"];for(const c of u)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:f}}const Ai=(t,e)=>(t+(t>=0?e:-e)/gt)/e;function lo(t,e,r){const[[n,i],[f,s]]=e,u=Ai(s*t,r),c=Ai(-i*t,r);let d=t-u*n-c*f,g=-u*i-c*s;const S=d<xt,_=g<xt;S&&(d=-d),_&&(g=-g);const I=Kt(Math.ceil(br(r)/2))+_e;if(d<xt||d>=I||g<xt||g>=I)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:S,k1:d,k2neg:_,k2:g}}function Hn(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function mn(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Tr(r.lowS,"lowS"),Tr(r.prehash,"prehash"),r.format!==void 0&&Hn(r.format),r}class ho extends Error{constructor(e=""){super(e)}}const It={Err:ho,_tlv:{encode:(t,e)=>{const{Err:r}=It;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Lr(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const f=n>127?Lr(i.length/2|128):"";return Lr(t)+f+i+e},decode(t,e){const{Err:r}=It;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],f=!!(i&128);let s=0;if(!f)s=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const d=e.subarray(n,n+c);if(d.length!==c)throw new r("tlv.decode: length bytes not complete");if(d[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const g of d)s=s<<8|g;if(n+=c,s<128)throw new r("tlv.decode(long): not minimal encoding")}const u=e.subarray(n,n+s);if(u.length!==s)throw new r("tlv.decode: wrong value length");return{v:u,l:e.subarray(n+s)}}},_int:{encode(t){const{Err:e}=It;if(t<xt)throw new e("integer: negative integers are not allowed");let r=Lr(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=It;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return lt(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=It,i=ye("signature",t),{v:f,l:s}=n.decode(48,i);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:u,l:c}=n.decode(2,f),{v:d,l:g}=n.decode(2,c);if(g.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(u),s:r.decode(d)}},hexFromSig(t){const{_tlv:e,_int:r}=It,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),f=n+i;return e.encode(48,f)}},xt=BigInt(0),_e=BigInt(1),gt=BigInt(2),ir=BigInt(3),Ln=BigInt(4);function Ht(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let i=ye("private key",e);try{n=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function Sf(t,e={}){const r=uo("weierstrass",t,e),{Fp:n,Fn:i}=r;let f=r.CURVE;const{h:s,n:u}=f;Cr(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(f.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const d=vf(n,i);function g(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function S(B,w,p){const{x:o,y:l}=w.toAffine(),E=n.toBytes(o);if(Tr(p,"isCompressed"),p){g();const m=!n.isOdd(l);return ce(Bf(m),E)}else return ce(Uint8Array.of(4),E,n.toBytes(l))}function _(B){Zt(B,void 0,"Point");const{publicKey:w,publicKeyUncompressed:p}=d,o=B.length,l=B[0],E=B.subarray(1);if(o===w&&(l===2||l===3)){const m=n.fromBytes(E);if(!n.isValid(m))throw new Error("bad point: is not on curve, wrong x");const x=F(m);let v;try{v=n.sqrt(x)}catch(V){const X=V instanceof Error?": "+V.message:"";throw new Error("bad point: is not on curve, sqrt error"+X)}g();const L=n.isOdd(v);return(l&1)===1!==L&&(v=n.neg(v)),{x:m,y:v}}else if(o===p&&l===4){const m=n.BYTES,x=n.fromBytes(E.subarray(0,m)),v=n.fromBytes(E.subarray(m,m*2));if(!K(x,v))throw new Error("bad point: is not on curve");return{x,y:v}}else throw new Error(`bad point: got length ${o}, expected compressed=${w} or uncompressed=${p}`)}const I=e.toBytes||S,H=e.fromBytes||_;function F(B){const w=n.sqr(B),p=n.mul(w,B);return n.add(n.add(p,n.mul(B,f.a)),f.b)}function K(B,w){const p=n.sqr(w),o=F(B);return n.eql(p,o)}if(!K(f.Gx,f.Gy))throw new Error("bad curve params: generator point");const Y=n.mul(n.pow(f.a,ir),Ln),N=n.mul(n.sqr(f.b),BigInt(27));if(n.is0(n.add(Y,N)))throw new Error("bad curve params: a or b");function P(B,w,p=!1){if(!n.isValid(w)||p&&n.is0(w))throw new Error(`bad point coordinate ${B}`);return w}function G(B){if(!(B instanceof h))throw new Error("ProjectivePoint expected")}function D(B){if(!c||!c.basises)throw new Error("no endo");return lo(B,c.basises,i.ORDER)}const M=In((B,w)=>{const{X:p,Y:o,Z:l}=B;if(n.eql(l,n.ONE))return{x:p,y:o};const E=B.is0();w==null&&(w=E?n.ONE:n.inv(l));const m=n.mul(p,w),x=n.mul(o,w),v=n.mul(l,w);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(v,n.ONE))throw new Error("invZ was invalid");return{x:m,y:x}}),k=In(B=>{if(B.is0()){if(e.allowInfinityPoint&&!n.is0(B.Y))return;throw new Error("bad point: ZERO")}const{x:w,y:p}=B.toAffine();if(!n.isValid(w)||!n.isValid(p))throw new Error("bad point: x or y not field elements");if(!K(w,p))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function b(B,w,p,o,l){return p=new h(n.mul(p.X,B),p.Y,p.Z),w=kr(o,w),p=kr(l,p),w.add(p)}class h{constructor(w,p,o){this.X=P("x",w),this.Y=P("y",p,!0),this.Z=P("z",o),Object.freeze(this)}static CURVE(){return f}static fromAffine(w){const{x:p,y:o}=w||{};if(!w||!n.isValid(p)||!n.isValid(o))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");return n.is0(p)&&n.is0(o)?h.ZERO:new h(p,o,n.ONE)}static fromBytes(w){const p=h.fromAffine(H(Zt(w,void 0,"point")));return p.assertValidity(),p}static fromHex(w){return h.fromBytes(ye("pointHex",w))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(w=8,p=!0){return A.createCache(this,w),p||this.multiply(ir),this}assertValidity(){k(this)}hasEvenY(){const{y:w}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(w)}equals(w){G(w);const{X:p,Y:o,Z:l}=this,{X:E,Y:m,Z:x}=w,v=n.eql(n.mul(p,x),n.mul(E,l)),L=n.eql(n.mul(o,x),n.mul(m,l));return v&&L}negate(){return new h(this.X,n.neg(this.Y),this.Z)}double(){const{a:w,b:p}=f,o=n.mul(p,ir),{X:l,Y:E,Z:m}=this;let x=n.ZERO,v=n.ZERO,L=n.ZERO,q=n.mul(l,l),V=n.mul(E,E),X=n.mul(m,m),$=n.mul(l,E);return $=n.add($,$),L=n.mul(l,m),L=n.add(L,L),x=n.mul(w,L),v=n.mul(o,X),v=n.add(x,v),x=n.sub(V,v),v=n.add(V,v),v=n.mul(x,v),x=n.mul($,x),L=n.mul(o,L),X=n.mul(w,X),$=n.sub(q,X),$=n.mul(w,$),$=n.add($,L),L=n.add(q,q),q=n.add(L,q),q=n.add(q,X),q=n.mul(q,$),v=n.add(v,q),X=n.mul(E,m),X=n.add(X,X),q=n.mul(X,$),x=n.sub(x,q),L=n.mul(X,V),L=n.add(L,L),L=n.add(L,L),new h(x,v,L)}add(w){G(w);const{X:p,Y:o,Z:l}=this,{X:E,Y:m,Z:x}=w;let v=n.ZERO,L=n.ZERO,q=n.ZERO;const V=f.a,X=n.mul(f.b,ir);let $=n.mul(p,E),z=n.mul(o,m),T=n.mul(l,x),C=n.add(p,o),R=n.add(E,m);C=n.mul(C,R),R=n.add($,z),C=n.sub(C,R),R=n.add(p,l);let a=n.add(E,x);return R=n.mul(R,a),a=n.add($,T),R=n.sub(R,a),a=n.add(o,l),v=n.add(m,x),a=n.mul(a,v),v=n.add(z,T),a=n.sub(a,v),q=n.mul(V,R),v=n.mul(X,T),q=n.add(v,q),v=n.sub(z,q),q=n.add(z,q),L=n.mul(v,q),z=n.add($,$),z=n.add(z,$),T=n.mul(V,T),R=n.mul(X,R),z=n.add(z,T),T=n.sub($,T),T=n.mul(V,T),R=n.add(R,T),$=n.mul(z,R),L=n.add(L,$),$=n.mul(a,R),v=n.mul(C,v),v=n.sub(v,$),$=n.mul(C,z),q=n.mul(a,q),q=n.add(q,$),new h(v,L,q)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}multiply(w){const{endo:p}=e;if(!i.isValidNot0(w))throw new Error("invalid scalar: out of range");let o,l;const E=m=>A.cached(this,m,x=>hr(h,x));if(p){const{k1neg:m,k1:x,k2neg:v,k2:L}=D(w),{p:q,f:V}=E(x),{p:X,f:$}=E(L);l=V.add($),o=b(p.beta,q,X,m,v)}else{const{p:m,f:x}=E(w);o=m,l=x}return hr(h,[o,l])[0]}multiplyUnsafe(w){const{endo:p}=e,o=this;if(!i.isValid(w))throw new Error("invalid scalar: out of range");if(w===xt||o.is0())return h.ZERO;if(w===_e)return o;if(A.hasCache(this))return this.multiply(w);if(p){const{k1neg:l,k1:E,k2neg:m,k2:x}=D(w),{p1:v,p2:L}=ao(h,o,E,x);return b(p.beta,v,L,l,m)}else return A.unsafe(o,w)}multiplyAndAddUnsafe(w,p,o){const l=this.multiplyUnsafe(p).add(w.multiplyUnsafe(o));return l.is0()?void 0:l}toAffine(w){return M(this,w)}isTorsionFree(){const{isTorsionFree:w}=e;return s===_e?!0:w?w(h,this):A.unsafe(this,u).is0()}clearCofactor(){const{clearCofactor:w}=e;return s===_e?this:w?w(h,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(w=!0){return Tr(w,"isCompressed"),this.assertValidity(),I(h,this,w)}toHex(w=!0){return Ct(this.toBytes(w))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(w=!0){return this.toBytes(w)}_setWindowSize(w){this.precompute(w)}static normalizeZ(w){return hr(h,w)}static msm(w,p){return co(h,i,w,p)}static fromPrivateKey(w){return h.BASE.multiply(Ht(i,w))}}h.BASE=new h(f.Gx,f.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO),h.Fp=n,h.Fn=i;const y=i.BITS,A=new oo(h,e.endo?Math.ceil(y/2):y);return h.BASE.precompute(8),h}function Bf(t){return Uint8Array.of(t?2:3)}function bo(t,e){const r=t.ORDER;let n=xt;for(let H=r-_e;H%gt===xt;H/=gt)n+=_e;const i=n,f=gt<<i-_e-_e,s=f*gt,u=(r-_e)/s,c=(u-_e)/gt,d=s-_e,g=f,S=t.pow(e,u),_=t.pow(e,(u+_e)/gt);let I=(H,F)=>{let K=S,Y=t.pow(F,d),N=t.sqr(Y);N=t.mul(N,F);let P=t.mul(H,N);P=t.pow(P,c),P=t.mul(P,Y),Y=t.mul(P,F),N=t.mul(P,H);let G=t.mul(N,Y);P=t.pow(G,g);let D=t.eql(P,t.ONE);Y=t.mul(N,_),P=t.mul(G,K),N=t.cmov(Y,N,D),G=t.cmov(P,G,D);for(let M=i;M>_e;M--){let k=M-gt;k=gt<<k-_e;let b=t.pow(G,k);const h=t.eql(b,t.ONE);Y=t.mul(N,K),K=t.mul(K,K),b=t.mul(G,K),N=t.cmov(Y,N,h),G=t.cmov(b,G,h)}return{isValid:D,value:N}};if(t.ORDER%Ln===ir){const H=(t.ORDER-ir)/Ln,F=t.sqrt(t.neg(e));I=(K,Y)=>{let N=t.sqr(Y);const P=t.mul(K,Y);N=t.mul(N,P);let G=t.pow(N,H);G=t.mul(G,P);const D=t.mul(G,F),M=t.mul(t.sqr(G),Y),k=t.eql(M,K);let b=t.cmov(D,G,k);return{isValid:k,value:b}}}return I}function Af(t,e){wf(t);const{A:r,B:n,Z:i}=e;if(!t.isValid(r)||!t.isValid(n)||!t.isValid(i))throw new Error("mapToCurveSimpleSWU: invalid opts");const f=bo(t,i);if(!t.isOdd)throw new Error("Field does not have .isOdd()");return s=>{let u,c,d,g,S,_,I,H;u=t.sqr(s),u=t.mul(u,i),c=t.sqr(u),c=t.add(c,u),d=t.add(c,t.ONE),d=t.mul(d,n),g=t.cmov(i,t.neg(c),!t.eql(c,t.ZERO)),g=t.mul(g,r),c=t.sqr(d),_=t.sqr(g),S=t.mul(_,r),c=t.add(c,S),c=t.mul(c,d),_=t.mul(_,g),S=t.mul(_,n),c=t.add(c,S),I=t.mul(u,d);const{isValid:F,value:K}=f(c,_);H=t.mul(u,s),H=t.mul(H,K),I=t.cmov(I,d,F),H=t.cmov(H,K,F);const Y=t.isOdd(s)===t.isOdd(H);H=t.cmov(t.neg(H),H,Y);const N=Qt(t,[g],!0)[0];return I=t.mul(I,N),{x:I,y:H}}}function vf(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function po(t,e={}){const{Fn:r}=t,n=e.randomBytes||Fn,i=Object.assign(vf(t.Fp,r),{seed:Mn(r.ORDER)});function f(I){try{return!!Ht(r,I)}catch{return!1}}function s(I,H){const{publicKey:F,publicKeyUncompressed:K}=i;try{const Y=I.length;return H===!0&&Y!==F||H===!1&&Y!==K?!1:!!t.fromBytes(I)}catch{return!1}}function u(I=n(i.seed)){return mf(Zt(I,i.seed,"seed"),r.ORDER)}function c(I,H=!0){return t.BASE.multiply(Ht(r,I)).toBytes(H)}function d(I){const H=u(I);return{secretKey:H,publicKey:c(H)}}function g(I){if(typeof I=="bigint")return!1;if(I instanceof t)return!0;const{secretKey:H,publicKey:F,publicKeyUncompressed:K}=i;if(r.allowedLengths||H===F)return;const Y=ye("key",I).length;return Y===F||Y===K}function S(I,H,F=!0){if(g(I)===!0)throw new Error("first arg must be private key");if(g(H)===!1)throw new Error("second arg must be public key");const K=Ht(r,I);return t.fromHex(H).multiply(K).toBytes(F)}return Object.freeze({getPublicKey:c,getSharedSecret:S,keygen:d,Point:t,utils:{isValidSecretKey:f,isValidPublicKey:s,randomSecretKey:u,isValidPrivateKey:f,randomPrivateKey:u,normPrivateKeyToScalar:I=>Ht(r,I),precompute(I=8,H=t.BASE){return H.precompute(I,!1)}},lengths:i})}function xo(t,e,r={}){ji(e),Cr(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||Fn,i=r.hmac||((p,...o)=>nf(e,p,ce(...o))),{Fp:f,Fn:s}=t,{ORDER:u,BITS:c}=s,{keygen:d,getPublicKey:g,getSharedSecret:S,utils:_,lengths:I}=po(t,r),H={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},F="compact";function K(p){const o=u>>_e;return p>o}function Y(p,o){if(!s.isValidNot0(o))throw new Error(`invalid signature ${p}: out of range 1..Point.Fn.ORDER`);return o}function N(p,o){Hn(o);const l=I.signature,E=o==="compact"?l:o==="recovered"?l+1:void 0;return Zt(p,E,`${o} signature`)}class P{constructor(o,l,E){this.r=Y("r",o),this.s=Y("s",l),E!=null&&(this.recovery=E),Object.freeze(this)}static fromBytes(o,l=F){N(o,l);let E;if(l==="der"){const{r:L,s:q}=It.toSig(Zt(o));return new P(L,q)}l==="recovered"&&(E=o[0],l="compact",o=o.subarray(1));const m=s.BYTES,x=o.subarray(0,m),v=o.subarray(m,m*2);return new P(s.fromBytes(x),s.fromBytes(v),E)}static fromHex(o,l){return this.fromBytes(Rr(o),l)}addRecoveryBit(o){return new P(this.r,this.s,o)}recoverPublicKey(o){const l=f.ORDER,{r:E,s:m,recovery:x}=this;if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");if(u*gt<l&&x>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=x===2||x===3?E+u:E;if(!f.isValid(L))throw new Error("recovery id 2 or 3 invalid");const q=f.toBytes(L),V=t.fromBytes(ce(Bf((x&1)===0),q)),X=s.inv(L),$=D(ye("msgHash",o)),z=s.create(-$*X),T=s.create(m*X),C=t.BASE.multiplyUnsafe(z).add(V.multiplyUnsafe(T));if(C.is0())throw new Error("point at infinify");return C.assertValidity(),C}hasHighS(){return K(this.s)}toBytes(o=F){if(Hn(o),o==="der")return Rr(It.hexFromSig(this));const l=s.toBytes(this.r),E=s.toBytes(this.s);if(o==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ce(Uint8Array.of(this.recovery),l,E)}return ce(l,E)}toHex(o){return Ct(this.toBytes(o))}assertValidity(){}static fromCompact(o){return P.fromBytes(ye("sig",o),"compact")}static fromDER(o){return P.fromBytes(ye("sig",o),"der")}normalizeS(){return this.hasHighS()?new P(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ct(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ct(this.toBytes("compact"))}}const G=r.bits2int||function(o){if(o.length>8192)throw new Error("input is too large");const l=lt(o),E=o.length*8-c;return E>0?l>>BigInt(E):l},D=r.bits2int_modN||function(o){return s.create(G(o))},M=Kt(c);function k(p){return Xs("num < 2^"+c,p,xt,M),s.toBytes(p)}function b(p,o){return Zt(p,void 0,"message"),o?Zt(e(p),void 0,"prehashed message"):p}function h(p,o,l){if(["recovered","canonical"].some(z=>z in l))throw new Error("sign() legacy options not supported");const{lowS:E,prehash:m,extraEntropy:x}=mn(l,H);p=b(p,m);const v=D(p),L=Ht(s,o),q=[k(L),k(v)];if(x!=null&&x!==!1){const z=x===!0?n(I.secretKey):x;q.push(ye("extraEntropy",z))}const V=ce(...q),X=v;function $(z){const T=G(z);if(!s.isValidNot0(T))return;const C=s.inv(T),R=t.BASE.multiply(T).toAffine(),a=s.create(R.x);if(a===xt)return;const U=s.create(C*s.create(X+a*L));if(U===xt)return;let j=(R.x===a?0:2)|Number(R.y&_e),W=U;return E&&K(U)&&(W=s.neg(U),j^=1),new P(a,W,j)}return{seed:V,k2sig:$}}function y(p,o,l={}){p=ye("message",p);const{seed:E,k2sig:m}=h(p,o,l);return Ws(e.outputLen,s.BYTES,i)(E,m)}function A(p){let o;const l=typeof p=="string"||gr(p),E=!l&&p!==null&&typeof p=="object"&&typeof p.r=="bigint"&&typeof p.s=="bigint";if(!l&&!E)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(E)o=new P(p.r,p.s);else if(l){try{o=P.fromBytes(ye("sig",p),"der")}catch(m){if(!(m instanceof It.Err))throw m}if(!o)try{o=P.fromBytes(ye("sig",p),"compact")}catch{return!1}}return o||!1}function B(p,o,l,E={}){const{lowS:m,prehash:x,format:v}=mn(E,H);if(l=ye("publicKey",l),o=b(ye("message",o),x),"strict"in E)throw new Error("options.strict was renamed to lowS");const L=v===void 0?A(p):P.fromBytes(ye("sig",p),v);if(L===!1)return!1;try{const q=t.fromBytes(l);if(m&&L.hasHighS())return!1;const{r:V,s:X}=L,$=D(o),z=s.inv(X),T=s.create($*z),C=s.create(V*z),R=t.BASE.multiplyUnsafe(T).add(q.multiplyUnsafe(C));return R.is0()?!1:s.create(R.x)===V}catch{return!1}}function w(p,o,l={}){const{prehash:E}=mn(l,H);return o=b(o,E),P.fromBytes(p,"recovered").recoverPublicKey(o).toBytes()}return Object.freeze({keygen:d,getPublicKey:g,getSharedSecret:S,utils:_,lengths:I,Point:t,sign:y,verify:B,recoverPublicKey:w,Signature:P,hash:e})}function vi(t){const{CURVE:e,curveOpts:r}=If(t),n=Sf(e,r);return go(t,n)}function If(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0;const i=_t(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),f={Fp:r,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:f}}function wo(t){const{CURVE:e,curveOpts:r}=If(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function yo(t,e,r){function n(i){const f=t.sqr(i),s=t.mul(f,i);return t.add(t.add(s,t.mul(i,e)),r)}return n}function go(t,e){const{Fp:r,Fn:n}=e;function i(s){return af(s,_e,n.ORDER)}const f=yo(r,t.a,t.b);return Object.assign({},{CURVE:t,Point:e,ProjectivePoint:e,normPrivateKeyToScalar:s=>Ht(n,s),weierstrassEquation:f,isWithinCurveOrder:i})}function mo(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,yf(r.Fn.ORDER,r.Fn.BITS))})}function Eo(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:i}=wo(t),f=Sf(e,r),s=xo(f,n,i);return mo(t,s)}function qr(t,e){const r=n=>Eo({...t,hash:n});return{...r(e),create:r}}const _o=lt;function Pt(t,e){if(pr(t),pr(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function So(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function pr(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Hf(t){if(!gr(t)&&typeof t!="string")throw new Error("DST must be Uint8Array or string");return typeof t=="string"?mr(t):t}function Bo(t,e,r,n){nt(t),pr(r),e=Hf(e),e.length>255&&(e=n(ce(mr("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:f}=n,s=Math.ceil(r/i);if(r>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const u=ce(e,Pt(e.length,1)),c=Pt(0,f),d=Pt(r,2),g=new Array(s),S=n(ce(c,t,d,Pt(0,1),u));g[0]=n(ce(S,Pt(1,1),u));for(let I=1;I<=s;I++){const H=[So(S,g[I-1]),Pt(I+1,1),u];g[I]=n(ce(...H))}return ce(...g).slice(0,r)}function Ao(t,e,r,n,i){if(nt(t),pr(r),e=Hf(e),e.length>255){const f=Math.ceil(2*n/8);e=i.create({dkLen:f}).update(mr("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(Pt(r,2)).update(e).update(Pt(e.length,1)).digest()}function En(t,e,r){Cr(r,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:i,m:f,hash:s,expand:u,DST:c}=r;if(!Qs(r.hash))throw new Error("expected valid hash");nt(t),pr(e);const d=n.toString(2).length,g=Math.ceil((d+i)/8),S=e*f*g;let _;if(u==="xmd")_=Bo(t,c,S,s);else if(u==="xof")_=Ao(t,c,S,i,s);else if(u==="_internal_pass")_=t;else throw new Error('expand must be "xmd" or "xof"');const I=new Array(e);for(let H=0;H<e;H++){const F=new Array(f);for(let K=0;K<f;K++){const Y=g*(K+H*f),N=_.subarray(Y,Y+g);F[K]=ut(_o(N),n)}I[H]=F}return I}function Lf(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[f,s,u,c]=r.map(S=>S.reduce((_,I)=>t.add(t.mul(_,n),I))),[d,g]=Qt(t,[s,c],!0);return n=t.mul(f,d),i=t.mul(i,t.mul(u,g)),{x:n,y:i}}}const vo=mr("HashToScalar-");function Ii(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function n(f){return t.fromAffine(e(f))}function i(f){const s=f.clearCofactor();return s.equals(t.ZERO)?t.ZERO:(s.assertValidity(),s)}return{defaults:r,hashToCurve(f,s){const u=Object.assign({},r,s),c=En(f,2,u),d=n(c[0]),g=n(c[1]);return i(d.add(g))},encodeToCurve(f,s){const u=r.encodeDST?{DST:r.encodeDST}:{},c=Object.assign({},r,u,s),d=En(f,1,c),g=n(d[0]);return i(g)},mapToCurve(f){if(!Array.isArray(f))throw new Error("expected array of bigints");for(const s of f)if(typeof s!="bigint")throw new Error("expected array of bigints");return i(n(f))},hashToScalar(f,s){const u=t.Fn.ORDER,c=Object.assign({},r,{p:u,m:1,DST:vo},s);return En(f,1,c)[0][0]}}}const Cn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Io={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Hi=BigInt(2);function Ho(t){const e=Cn.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),f=BigInt(22),s=BigInt(23),u=BigInt(44),c=BigInt(88),d=t*t*t%e,g=d*d*t%e,S=st(g,r,e)*g%e,_=st(S,r,e)*g%e,I=st(_,Hi,e)*d%e,H=st(I,i,e)*I%e,F=st(H,f,e)*H%e,K=st(F,u,e)*F%e,Y=st(K,c,e)*K%e,N=st(Y,u,e)*F%e,P=st(N,r,e)*g%e,G=st(P,s,e)*H%e,D=st(G,n,e)*d%e,M=st(D,Hi,e);if(!Un.eql(Un.sqr(M),t))throw new Error("Cannot find square root");return M}const Un=_t(Cn.p,{sqrt:Ho}),Lo=qr({...Cn,Fp:Un,lowS:!0,endo:Io},kn);const Uf={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Of={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Rf={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Uo=_t(Uf.p),Oo=_t(Of.p),Ro=_t(Rf.p),No=qr({...Uf,Fp:Uo,lowS:!1},kn);qr({...Of,Fp:Oo,lowS:!1},zs);qr({...Rf,Fp:Ro,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},$s);const To=BigInt(0),Ur=BigInt(1),Li=BigInt(2),fr=BigInt(3);function Fo(t){const e=[];for(;t>Ur;t>>=Ur)(t&Ur)===To?e.unshift(0):(t&fr)===fr?(e.unshift(-1),t+=Ur):e.unshift(1);return e}function _n(t){if(!Array.isArray(t)||t.length===0)throw new Error("expected non-empty array")}function ko(t,e,r,n){const{Fp2:i,Fp12:f}=t,{twistType:s,ateLoopSize:u,xNegative:c,postPrecompute:d}=n;let g;if(s==="multiplicative")g=(P,G,D,M,k,b)=>f.mul014(M,P,i.mul(G,k),i.mul(D,b));else if(s==="divisive")g=(P,G,D,M,k,b)=>f.mul034(M,i.mul(D,b),i.mul(G,k),P);else throw new Error("bls: unknown twist type");const S=i.div(i.ONE,i.mul(i.ONE,Li));function _(P,G,D,M){const k=i.sqr(D),b=i.sqr(M),h=i.mulByB(i.mul(b,fr)),y=i.mul(h,fr),A=i.sub(i.sub(i.sqr(i.add(D,M)),b),k),B=i.sub(h,k),w=i.mul(i.sqr(G),fr),p=i.neg(A);return P.push([B,w,p]),G=i.mul(i.mul(i.mul(i.sub(k,y),G),D),S),D=i.sub(i.sqr(i.mul(i.add(k,y),S)),i.mul(i.sqr(h),fr)),M=i.mul(k,A),{Rx:G,Ry:D,Rz:M}}function I(P,G,D,M,k,b){const h=i.sub(D,i.mul(b,M)),y=i.sub(G,i.mul(k,M)),A=i.sub(i.mul(h,k),i.mul(y,b)),B=i.neg(h),w=y;P.push([A,B,w]);const p=i.sqr(y),o=i.mul(p,y),l=i.mul(p,G),E=i.add(i.sub(o,i.mul(l,Li)),i.mul(i.sqr(h),M));return G=i.mul(y,E),D=i.sub(i.mul(i.sub(l,E),h),i.mul(o,D)),M=i.mul(M,o),{Rx:G,Ry:D,Rz:M}}const H=Fo(u),F=In(P=>{const G=P,{x:D,y:M}=G.toAffine(),k=D,b=M,h=i.neg(M);let y=k,A=b,B=i.ONE;const w=[];for(const p of H){const o=[];({Rx:y,Ry:A,Rz:B}=_(o,y,A,B)),p&&({Rx:y,Ry:A,Rz:B}=I(o,y,A,B,k,p===-1?h:b)),w.push(o)}if(d){const p=w[w.length-1];d(y,A,B,k,b,I.bind(null,p))}return w});function K(P,G=!1){let D=f.ONE;if(P.length){const M=P[0][0].length;for(let k=0;k<M;k++){D=f.sqr(D);for(const[b,h,y]of P)for(const[A,B,w]of b[k])D=g(A,B,w,D,h,y)}}return c&&(D=f.conjugate(D)),G?f.finalExponentiate(D):D}function Y(P,G=!0){const D=[];hr(e,P.map(({g1:M})=>M)),hr(r,P.map(({g2:M})=>M));for(const{g1:M,g2:k}of P){if(M.is0()||k.is0())throw new Error("pairing is not available for ZERO point");M.assertValidity(),k.assertValidity();const b=M.toAffine();D.push([F(k),b.x,b.y])}return K(D,G)}function N(P,G,D=!0){return Y([{g1:P,g2:G}],D)}return{Fp12:f,millerLoopBatch:K,pairing:N,pairingBatch:Y,calcPairingPrecomputes:F}}function Ui(t,e,r,n,i){const{Fp12:f,pairingBatch:s}=t;function u(S){return S instanceof e.Point?S:e.Point.fromHex(S)}function c(S){return S instanceof r.Point?S:r.Point.fromHex(S)}function d(S){if(!(S instanceof r.Point))throw new Error(`expected valid message hashed to ${i?"G1":"G2"} curve`);return S}const g=i?(S,_)=>({g1:_,g2:S}):(S,_)=>({g1:S,g2:_});return{getPublicKey(S){const _=Ht(e.Point.Fn,S);return e.Point.BASE.multiply(_)},sign(S,_,I){if(I!=null)throw new Error("sign() expects 2 arguments");const H=Ht(e.Point.Fn,_);return d(S).assertValidity(),S.multiply(H)},verify(S,_,I,H){if(H!=null)throw new Error("verify() expects 3 arguments");S=c(S),I=u(I);const F=I.negate(),K=e.Point.BASE,Y=d(_),N=S,P=s([g(F,Y),g(K,N)]);return f.eql(P,f.ONE)},verifyBatch(S,_,I){if(_n(_),I.length!==_.length)throw new Error("amount of public keys and messages should be equal");const H=c(S),F=_,K=I.map(u),Y=new Map;for(let G=0;G<K.length;G++){const D=K[G],M=F[G];let k=Y.get(M);k===void 0&&(k=[],Y.set(M,k)),k.push(D)}const N=[],P=e.Point.BASE;try{for(const[G,D]of Y){const M=D.reduce((k,b)=>k.add(b));N.push(g(M,G))}return N.push(g(P.negate(),H)),f.eql(s(N),f.ONE)}catch{return!1}},aggregatePublicKeys(S){_n(S),S=S.map(I=>u(I));const _=S.reduce((I,H)=>I.add(H),e.Point.ZERO);return _.assertValidity(),_},aggregateSignatures(S){_n(S),S=S.map(I=>c(I));const _=S.reduce((I,H)=>I.add(H),r.Point.ZERO);return _.assertValidity(),_},hash(S,_){nt(S);const I=_?{DST:_}:void 0;return r.hashToCurve(S,I)},Signature:n}}function Do(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:f}=t.fields,s=vi(t.G1),u=Object.assign(s,Ii(s.Point,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),c=vi(t.G2),d=Object.assign(c,Ii(c.Point,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults})),g=ko(t.fields,u.Point,d.Point,{...t.params,postPrecompute:t.postPrecompute}),{millerLoopBatch:S,pairing:_,pairingBatch:I,calcPairingPrecomputes:H}=g,F=Ui(g,u,d,t.G2.Signature,!1),K=Ui(g,d,u,t.G1.ShortSignature,!0),Y=t.randomBytes||Fn,N=()=>{const m=Mn(r.ORDER);return mf(Y(m),r.ORDER)},P={randomSecretKey:N,randomPrivateKey:N,calcPairingPrecomputes:H},{ShortSignature:G}=t.G1,{Signature:D}=t.G2;function M(m,x){return m instanceof u.Point?m:K.hash(ye("point",m),x?.DST)}function k(m,x){return m instanceof d.Point?m:F.hash(ye("point",m),x?.DST)}function b(m){return F.getPublicKey(m).toBytes(!0)}function h(m){return K.getPublicKey(m).toBytes(!0)}function y(m,x,v){const L=k(m,v),q=F.sign(L,x);return m instanceof d.Point?q:D.toBytes(q)}function A(m,x,v){const L=M(m,v),q=K.sign(L,x);return m instanceof u.Point?q:G.toBytes(q)}function B(m,x,v,L){const q=k(x,L);return F.verify(m,q,v)}function w(m,x,v,L){const q=M(x,L);return K.verify(m,q,v)}function p(m){const x=F.aggregatePublicKeys(m);return m[0]instanceof u.Point?x:x.toBytes(!0)}function o(m){const x=F.aggregateSignatures(m);return m[0]instanceof d.Point?x:D.toBytes(x)}function l(m){const x=K.aggregateSignatures(m);return m[0]instanceof u.Point?x:G.toBytes(x)}function E(m,x,v,L){const q=x.map(V=>k(V,L));return F.verifyBatch(m,q,v)}return u.Point.BASE.precompute(4),{longSignatures:F,shortSignatures:K,millerLoopBatch:S,pairing:_,pairingBatch:I,verifyBatch:E,fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:f},params:{ateLoopSize:t.params.ateLoopSize,twistType:t.params.twistType,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:P,getPublicKey:b,getPublicKeyForShortSignatures:h,sign:y,signShortSignature:A,verify:B,verifyShortSignature:w,aggregatePublicKeys:p,aggregateSignatures:o,aggregateShortSignatures:l,G1:u,G2:d,Signature:D,ShortSignature:G}}const Oi=BigInt(0),Lt=BigInt(1),je=BigInt(2),Ri=BigInt(3);function Kn(t,e,r,n,i=1,f){const s=BigInt(f===void 0?n:f),u=r**BigInt(n),c=[];for(let d=0;d<i;d++){const g=BigInt(d+1),S=[];for(let _=0,I=Lt;_<n;_++){const H=(g*I-g)/s%u;S.push(t.pow(e,H)),I*=r}c.push(S)}return c}function Po(t,e,r){const n=e.pow(r,(t.ORDER-Lt)/Ri),i=e.pow(r,(t.ORDER-Lt)/je);function f(_,I){const H=e.mul(e.frobeniusMap(_,1),n),F=e.mul(e.frobeniusMap(I,1),i);return[H,F]}const s=e.pow(r,(t.ORDER**je-Lt)/Ri),u=e.pow(r,(t.ORDER**je-Lt)/je);if(!e.eql(u,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function c(_,I){return[e.mul(_,s),e.neg(I)]}const d=_=>(I,H)=>{const F=H.toAffine(),K=_(F.x,F.y);return I.fromAffine({x:K[0],y:K[1]})},g=d(f),S=d(c);return{psi:f,psi2:c,G2psi:g,G2psi2:S,PSI_X:n,PSI_Y:i,PSI2_X:s,PSI2_Y:u}}const Ni=(t,e)=>{if(e.length!==2)throw new Error("invalid tuple");const r=e.map(n=>t.create(n));return{c0:r[0],c1:r[1]}};class Mo{constructor(e,r={}){this.MASK=Lt;const n=e.ORDER,i=n*n;this.Fp=e,this.ORDER=i,this.BITS=br(i),this.BYTES=Math.ceil(br(i)/8),this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.Fp_NONRESIDUE=e.create(r.NONRESIDUE||BigInt(-1)),this.Fp_div2=e.div(e.ONE,je),this.NONRESIDUE=Ni(e,r.FP2_NONRESIDUE),this.FROBENIUS_COEFFICIENTS=Kn(e,this.Fp_NONRESIDUE,e.ORDER,2)[0],this.mulByB=r.Fp2mulByB,Object.seal(this)}fromBigTuple(e){return Ni(this.Fp,e)}create(e){return e}isValid({c0:e,c1:r}){function n(i,f){return typeof i=="bigint"&&Oi<=i&&i<f}return n(e,this.ORDER)&&n(r,this.ORDER)}is0({c0:e,c1:r}){return this.Fp.is0(e)&&this.Fp.is0(r)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}eql({c0:e,c1:r},{c0:n,c1:i}){return this.Fp.eql(e,n)&&this.Fp.eql(r,i)}neg({c0:e,c1:r}){return{c0:this.Fp.neg(e),c1:this.Fp.neg(r)}}pow(e,r){return Kr(this,e,r)}invertBatch(e){return Qt(this,e)}add(e,r){const{c0:n,c1:i}=e,{c0:f,c1:s}=r;return{c0:this.Fp.add(n,f),c1:this.Fp.add(i,s)}}sub({c0:e,c1:r},{c0:n,c1:i}){return{c0:this.Fp.sub(e,n),c1:this.Fp.sub(r,i)}}mul({c0:e,c1:r},n){const{Fp:i}=this;if(typeof n=="bigint")return{c0:i.mul(e,n),c1:i.mul(r,n)};const{c0:f,c1:s}=n;let u=i.mul(e,f),c=i.mul(r,s);const d=i.sub(u,c),g=i.sub(i.mul(i.add(e,r),i.add(f,s)),i.add(u,c));return{c0:d,c1:g}}sqr({c0:e,c1:r}){const{Fp:n}=this,i=n.add(e,r),f=n.sub(e,r),s=n.add(e,e);return{c0:n.mul(i,f),c1:n.mul(s,r)}}addN(e,r){return this.add(e,r)}subN(e,r){return this.sub(e,r)}mulN(e,r){return this.mul(e,r)}sqrN(e){return this.sqr(e)}div(e,r){const{Fp:n}=this;return this.mul(e,typeof r=="bigint"?n.inv(n.create(r)):this.inv(r))}inv({c0:e,c1:r}){const{Fp:n}=this,i=n.inv(n.create(e*e+r*r));return{c0:n.mul(i,n.create(e)),c1:n.mul(i,n.create(-r))}}sqrt(e){const{Fp:r}=this,n=this,{c0:i,c1:f}=e;if(r.is0(f))return Fr(r,i)===1?n.create({c0:r.sqrt(i),c1:r.ZERO}):n.create({c0:r.ZERO,c1:r.sqrt(r.div(i,this.Fp_NONRESIDUE))});const s=r.sqrt(r.sub(r.sqr(i),r.mul(r.sqr(f),this.Fp_NONRESIDUE)));let u=r.mul(r.add(s,i),this.Fp_div2);Fr(r,u)===-1&&(u=r.sub(u,s));const d=r.sqrt(u),g=n.create({c0:d,c1:r.div(r.mul(f,this.Fp_div2),d)});if(!n.eql(n.sqr(g),e))throw new Error("Cannot find square root");const S=g,_=n.neg(S),{re:I,im:H}=n.reim(S),{re:F,im:K}=n.reim(_);return H>K||H===K&&I>F?S:_}isOdd(e){const{re:r,im:n}=this.reim(e),i=r%je,f=r===Oi,s=n%je;return BigInt(i||f&&s)==Lt}fromBytes(e){const{Fp:r}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:r.fromBytes(e.subarray(0,r.BYTES)),c1:r.fromBytes(e.subarray(r.BYTES))}}toBytes({c0:e,c1:r}){return ce(this.Fp.toBytes(e),this.Fp.toBytes(r))}cmov({c0:e,c1:r},{c0:n,c1:i},f){return{c0:this.Fp.cmov(e,n,f),c1:this.Fp.cmov(r,i,f)}}reim({c0:e,c1:r}){return{re:e,im:r}}Fp4Square(e,r){const n=this,i=n.sqr(e),f=n.sqr(r);return{first:n.add(n.mulByNonresidue(f),i),second:n.sub(n.sub(n.sqr(n.add(e,r)),i),f)}}mulByNonresidue({c0:e,c1:r}){return this.mul({c0:e,c1:r},this.NONRESIDUE)}frobeniusMap({c0:e,c1:r},n){return{c0:e,c1:this.Fp.mul(r,this.FROBENIUS_COEFFICIENTS[n%2])}}}class Co{constructor(e){this.MASK=Lt,this.Fp2=e,this.ORDER=e.ORDER,this.BITS=3*e.BITS,this.BYTES=3*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO,c2:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO,c2:e.ZERO};const{Fp:r}=e,n=Kn(e,e.NONRESIDUE,r.ORDER,6,2,3);this.FROBENIUS_COEFFICIENTS_1=n[0],this.FROBENIUS_COEFFICIENTS_2=n[1],Object.seal(this)}add({c0:e,c1:r,c2:n},{c0:i,c1:f,c2:s}){const{Fp2:u}=this;return{c0:u.add(e,i),c1:u.add(r,f),c2:u.add(n,s)}}sub({c0:e,c1:r,c2:n},{c0:i,c1:f,c2:s}){const{Fp2:u}=this;return{c0:u.sub(e,i),c1:u.sub(r,f),c2:u.sub(n,s)}}mul({c0:e,c1:r,c2:n},i){const{Fp2:f}=this;if(typeof i=="bigint")return{c0:f.mul(e,i),c1:f.mul(r,i),c2:f.mul(n,i)};const{c0:s,c1:u,c2:c}=i,d=f.mul(e,s),g=f.mul(r,u),S=f.mul(n,c);return{c0:f.add(d,f.mulByNonresidue(f.sub(f.mul(f.add(r,n),f.add(u,c)),f.add(g,S)))),c1:f.add(f.sub(f.mul(f.add(e,r),f.add(s,u)),f.add(d,g)),f.mulByNonresidue(S)),c2:f.sub(f.add(g,f.mul(f.add(e,n),f.add(s,c))),f.add(d,S))}}sqr({c0:e,c1:r,c2:n}){const{Fp2:i}=this;let f=i.sqr(e),s=i.mul(i.mul(e,r),je),u=i.mul(i.mul(r,n),je),c=i.sqr(n);return{c0:i.add(i.mulByNonresidue(u),f),c1:i.add(i.mulByNonresidue(c),s),c2:i.sub(i.sub(i.add(i.add(s,i.sqr(i.add(i.sub(e,r),n))),u),f),c)}}addN(e,r){return this.add(e,r)}subN(e,r){return this.sub(e,r)}mulN(e,r){return this.mul(e,r)}sqrN(e){return this.sqr(e)}create(e){return e}isValid({c0:e,c1:r,c2:n}){const{Fp2:i}=this;return i.isValid(e)&&i.isValid(r)&&i.isValid(n)}is0({c0:e,c1:r,c2:n}){const{Fp2:i}=this;return i.is0(e)&&i.is0(r)&&i.is0(n)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:r,c2:n}){const{Fp2:i}=this;return{c0:i.neg(e),c1:i.neg(r),c2:i.neg(n)}}eql({c0:e,c1:r,c2:n},{c0:i,c1:f,c2:s}){const{Fp2:u}=this;return u.eql(e,i)&&u.eql(r,f)&&u.eql(n,s)}sqrt(e){return cf()}div(e,r){const{Fp2:n}=this,{Fp:i}=n;return this.mul(e,typeof r=="bigint"?i.inv(i.create(r)):this.inv(r))}pow(e,r){return Kr(this,e,r)}invertBatch(e){return Qt(this,e)}inv({c0:e,c1:r,c2:n}){const{Fp2:i}=this;let f=i.sub(i.sqr(e),i.mulByNonresidue(i.mul(n,r))),s=i.sub(i.mulByNonresidue(i.sqr(n)),i.mul(e,r)),u=i.sub(i.sqr(r),i.mul(e,n)),c=i.inv(i.add(i.mulByNonresidue(i.add(i.mul(n,s),i.mul(r,u))),i.mul(e,f)));return{c0:i.mul(c,f),c1:i.mul(c,s),c2:i.mul(c,u)}}fromBytes(e){const{Fp2:r}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);const n=r.BYTES;return{c0:r.fromBytes(e.subarray(0,n)),c1:r.fromBytes(e.subarray(n,n*2)),c2:r.fromBytes(e.subarray(2*n))}}toBytes({c0:e,c1:r,c2:n}){const{Fp2:i}=this;return ce(i.toBytes(e),i.toBytes(r),i.toBytes(n))}cmov({c0:e,c1:r,c2:n},{c0:i,c1:f,c2:s},u){const{Fp2:c}=this;return{c0:c.cmov(e,i,u),c1:c.cmov(r,f,u),c2:c.cmov(n,s,u)}}fromBigSix(e){const{Fp2:r}=this;if(!Array.isArray(e)||e.length!==6)throw new Error("invalid Fp6 usage");return{c0:r.fromBigTuple(e.slice(0,2)),c1:r.fromBigTuple(e.slice(2,4)),c2:r.fromBigTuple(e.slice(4,6))}}frobeniusMap({c0:e,c1:r,c2:n},i){const{Fp2:f}=this;return{c0:f.frobeniusMap(e,i),c1:f.mul(f.frobeniusMap(r,i),this.FROBENIUS_COEFFICIENTS_1[i%6]),c2:f.mul(f.frobeniusMap(n,i),this.FROBENIUS_COEFFICIENTS_2[i%6])}}mulByFp2({c0:e,c1:r,c2:n},i){const{Fp2:f}=this;return{c0:f.mul(e,i),c1:f.mul(r,i),c2:f.mul(n,i)}}mulByNonresidue({c0:e,c1:r,c2:n}){const{Fp2:i}=this;return{c0:i.mulByNonresidue(n),c1:e,c2:r}}mul1({c0:e,c1:r,c2:n},i){const{Fp2:f}=this;return{c0:f.mulByNonresidue(f.mul(n,i)),c1:f.mul(e,i),c2:f.mul(r,i)}}mul01({c0:e,c1:r,c2:n},i,f){const{Fp2:s}=this;let u=s.mul(e,i),c=s.mul(r,f);return{c0:s.add(s.mulByNonresidue(s.sub(s.mul(s.add(r,n),f),c)),u),c1:s.sub(s.sub(s.mul(s.add(i,f),s.add(e,r)),u),c),c2:s.add(s.sub(s.mul(s.add(e,n),i),u),c)}}}class Ko{constructor(e,r){this.MASK=Lt;const{Fp2:n}=e,{Fp:i}=n;this.Fp6=e,this.ORDER=n.ORDER,this.BITS=2*e.BITS,this.BYTES=2*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.FROBENIUS_COEFFICIENTS=Kn(n,n.NONRESIDUE,i.ORDER,12,1,6)[0],this.X_LEN=r.X_LEN,this.finalExponentiate=r.Fp12finalExponentiate}create(e){return e}isValid({c0:e,c1:r}){const{Fp6:n}=this;return n.isValid(e)&&n.isValid(r)}is0({c0:e,c1:r}){const{Fp6:n}=this;return n.is0(e)&&n.is0(r)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:r}){const{Fp6:n}=this;return{c0:n.neg(e),c1:n.neg(r)}}eql({c0:e,c1:r},{c0:n,c1:i}){const{Fp6:f}=this;return f.eql(e,n)&&f.eql(r,i)}sqrt(e){cf()}inv({c0:e,c1:r}){const{Fp6:n}=this;let i=n.inv(n.sub(n.sqr(e),n.mulByNonresidue(n.sqr(r))));return{c0:n.mul(e,i),c1:n.neg(n.mul(r,i))}}div(e,r){const{Fp6:n}=this,{Fp2:i}=n,{Fp:f}=i;return this.mul(e,typeof r=="bigint"?f.inv(f.create(r)):this.inv(r))}pow(e,r){return Kr(this,e,r)}invertBatch(e){return Qt(this,e)}add({c0:e,c1:r},{c0:n,c1:i}){const{Fp6:f}=this;return{c0:f.add(e,n),c1:f.add(r,i)}}sub({c0:e,c1:r},{c0:n,c1:i}){const{Fp6:f}=this;return{c0:f.sub(e,n),c1:f.sub(r,i)}}mul({c0:e,c1:r},n){const{Fp6:i}=this;if(typeof n=="bigint")return{c0:i.mul(e,n),c1:i.mul(r,n)};let{c0:f,c1:s}=n,u=i.mul(e,f),c=i.mul(r,s);return{c0:i.add(u,i.mulByNonresidue(c)),c1:i.sub(i.mul(i.add(e,r),i.add(f,s)),i.add(u,c))}}sqr({c0:e,c1:r}){const{Fp6:n}=this;let i=n.mul(e,r);return{c0:n.sub(n.sub(n.mul(n.add(n.mulByNonresidue(r),e),n.add(e,r)),i),n.mulByNonresidue(i)),c1:n.add(i,i)}}addN(e,r){return this.add(e,r)}subN(e,r){return this.sub(e,r)}mulN(e,r){return this.mul(e,r)}sqrN(e){return this.sqr(e)}fromBytes(e){const{Fp6:r}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:r.fromBytes(e.subarray(0,r.BYTES)),c1:r.fromBytes(e.subarray(r.BYTES))}}toBytes({c0:e,c1:r}){const{Fp6:n}=this;return ce(n.toBytes(e),n.toBytes(r))}cmov({c0:e,c1:r},{c0:n,c1:i},f){const{Fp6:s}=this;return{c0:s.cmov(e,n,f),c1:s.cmov(r,i,f)}}fromBigTwelve(e){const{Fp6:r}=this;return{c0:r.fromBigSix(e.slice(0,6)),c1:r.fromBigSix(e.slice(6,12))}}frobeniusMap(e,r){const{Fp6:n}=this,{Fp2:i}=n,{c0:f,c1:s,c2:u}=n.frobeniusMap(e.c1,r),c=this.FROBENIUS_COEFFICIENTS[r%12];return{c0:n.frobeniusMap(e.c0,r),c1:n.create({c0:i.mul(f,c),c1:i.mul(s,c),c2:i.mul(u,c)})}}mulByFp2({c0:e,c1:r},n){const{Fp6:i}=this;return{c0:i.mulByFp2(e,n),c1:i.mulByFp2(r,n)}}conjugate({c0:e,c1:r}){return{c0:e,c1:this.Fp6.neg(r)}}mul014({c0:e,c1:r},n,i,f){const{Fp6:s}=this,{Fp2:u}=s;let c=s.mul01(e,n,i),d=s.mul1(r,f);return{c0:s.add(s.mulByNonresidue(d),c),c1:s.sub(s.sub(s.mul01(s.add(r,e),n,u.add(i,f)),c),d)}}mul034({c0:e,c1:r},n,i,f){const{Fp6:s}=this,{Fp2:u}=s,c=s.create({c0:u.mul(e.c0,n),c1:u.mul(e.c1,n),c2:u.mul(e.c2,n)}),d=s.mul01(r,i,f),g=s.mul01(s.add(e,r),u.add(n,i),f);return{c0:s.add(s.mulByNonresidue(d),c),c1:s.sub(g,s.add(c,d))}}_cyclotomicSquare({c0:e,c1:r}){const{Fp6:n}=this,{Fp2:i}=n,{c0:f,c1:s,c2:u}=e,{c0:c,c1:d,c2:g}=r,{first:S,second:_}=i.Fp4Square(f,d),{first:I,second:H}=i.Fp4Square(c,u),{first:F,second:K}=i.Fp4Square(s,g),Y=i.mulByNonresidue(K);return{c0:n.create({c0:i.add(i.mul(i.sub(S,f),je),S),c1:i.add(i.mul(i.sub(I,s),je),I),c2:i.add(i.mul(i.sub(F,u),je),F)}),c1:n.create({c0:i.add(i.mul(i.add(Y,c),je),Y),c1:i.add(i.mul(i.add(_,d),je),_),c2:i.add(i.mul(i.add(H,g),je),H)})}}_cyclotomicExp(e,r){let n=this.ONE;for(let i=this.X_LEN-1;i>=0;i--)n=this._cyclotomicSquare(n),js(r,i)&&(n=this.mul(n,e));return n}}function qo(t){const e=_t(t.ORDER),r=new Mo(e,t),n=new Co(r),i=new Ko(n,t);return{Fp:e,Fp2:r,Fp6:n,Fp12:i}}const Ve=BigInt(0),Dr=BigInt(1),dt=BigInt(2),Gr=BigInt(3),xr=BigInt(4),Mt=BigInt("0xd201000000010000"),Go=br(Mt),Xt={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:Ve,b:xr,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},Zo=_t(Xt.n,{modFromBytes:!0,isLE:!0}),{Fp:Q,Fp2:ie,Fp6:Yo,Fp12:fe}=qo({ORDER:Xt.p,X_LEN:Go,FP2_NONRESIDUE:[Dr,Dr],Fp2mulByB:({c0:t,c1:e})=>{const r=Q.mul(t,xr),n=Q.mul(e,xr);return{c0:Q.sub(r,n),c1:Q.add(r,n)}},Fp12finalExponentiate:t=>{const e=Mt,r=fe.div(fe.frobeniusMap(t,6),t),n=fe.mul(fe.frobeniusMap(r,2),r),i=fe.conjugate(fe._cyclotomicExp(n,e)),f=fe.mul(fe.conjugate(fe._cyclotomicSquare(n)),i),s=fe.conjugate(fe._cyclotomicExp(f,e)),u=fe.conjugate(fe._cyclotomicExp(s,e)),c=fe.mul(fe.conjugate(fe._cyclotomicExp(u,e)),fe._cyclotomicSquare(i)),d=fe.conjugate(fe._cyclotomicExp(c,e)),g=fe.frobeniusMap(fe.mul(i,u),2),S=fe.frobeniusMap(fe.mul(s,n),3),_=fe.frobeniusMap(fe.mul(c,fe.conjugate(n)),1),I=fe.mul(fe.mul(d,fe.conjugate(f)),n);return fe.mul(fe.mul(fe.mul(g,S),_),I)}}),{G2psi:Ti,G2psi2:Vo}=Po(Q,ie,ie.div(ie.ONE,ie.NONRESIDUE)),Sn=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:Q.ORDER,m:2,k:128,expand:"xmd",hash:kn}),qn={p:ie.ORDER,n:Xt.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:ie.ZERO,b:ie.fromBigTuple([xr,xr]),Gx:ie.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:ie.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},Zr=Er(Q.toBytes(Ve),{infinity:!0,compressed:!0});function Yr(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function Er(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function $o(t,e,r){const{BYTES:n,ORDER:i}=Q,f=e.is0(),{x:s,y:u}=e.toAffine();if(r){if(f)return Zr.slice();const c=!!(u*dt/i);return Er(Se(s,n),{compressed:!0,sort:c})}else return f?ce(Uint8Array.of(64),new Uint8Array(2*n-1)):ce(Se(s,n),Se(u,n))}function Bn(t){t.assertValidity();const{BYTES:e,ORDER:r}=Q,{x:n,y:i}=t.toAffine();if(t.is0())return Zr.slice();const f=!!(i*dt/r);return Er(Se(n,e),{compressed:!0,sort:f})}function zo(t){const{compressed:e,infinity:r,sort:n,value:i}=Yr(t),{BYTES:f,ORDER:s}=Q;if(i.length===48&&e){const u=lt(i),c=Q.create(u&Kt(Q.BITS));if(r){if(c!==Ve)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:Ve,y:Ve}}const d=Q.add(Q.pow(c,Gr),Q.create(Xt.b));let g=Q.sqrt(d);if(!g)throw new Error("invalid G1 point: compressed point");return g*dt/s!==BigInt(n)&&(g=Q.neg(g)),{x:Q.create(c),y:Q.create(g)}}else if(i.length===96&&!e){const u=lt(i.subarray(0,f)),c=lt(i.subarray(f));if(r){if(u!==Ve||c!==Ve)throw new Error("G1: non-empty point at infinity");return Vr.G1.Point.ZERO.toAffine()}return{x:Q.create(u),y:Q.create(c)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function Fi(t){const{infinity:e,sort:r,value:n}=Yr(ye("signatureHex",t,48)),i=Q.ORDER,f=Vr.G1.Point,s=lt(n);if(e)return f.ZERO;const u=Q.create(s&Kt(Q.BITS)),c=Q.add(Q.pow(u,Gr),Q.create(Xt.b));let d=Q.sqrt(c);if(!d)throw new Error("invalid G1 point: compressed");const g=BigInt(r);d*dt/i!==g&&(d=Q.neg(d));const S=f.fromAffine({x:u,y:d});return S.assertValidity(),S}function Xo(t,e,r){const{BYTES:n,ORDER:i}=Q,f=e.is0(),{x:s,y:u}=e.toAffine();if(r){if(f)return ce(Zr,Se(Ve,n));const c=!!(u.c1===Ve?u.c0*dt/i:u.c1*dt/i);return ce(Er(Se(s.c1,n),{compressed:!0,sort:c}),Se(s.c0,n))}else{if(f)return ce(Uint8Array.of(64),new Uint8Array(4*n-1));const{re:c,im:d}=ie.reim(s),{re:g,im:S}=ie.reim(u);return ce(Se(d,n),Se(c,n),Se(S,n),Se(g,n))}}function An(t){t.assertValidity();const{BYTES:e}=Q;if(t.is0())return ce(Zr,Se(Ve,e));const{x:r,y:n}=t.toAffine(),{re:i,im:f}=ie.reim(r),{re:s,im:u}=ie.reim(n),d=!!((u>Ve?u*dt:s*dt)/Q.ORDER&Dr),g=i;return ce(Er(Se(f,e),{sort:d,compressed:!0}),Se(g,e))}function jo(t){const{BYTES:e,ORDER:r}=Q,{compressed:n,infinity:i,sort:f,value:s}=Yr(t);if(!n&&!i&&f||!n&&i&&f||f&&i&&n)throw new Error("invalid encoding flag: "+(t[0]&224));const u=(c,d,g)=>lt(c.slice(d,g));if(s.length===96&&n){if(i){if(s.reduce((H,F)=>H!==0?F+1:F,0)>0)throw new Error("invalid G2 point: compressed");return{x:ie.ZERO,y:ie.ZERO}}const c=u(s,0,e),d=u(s,e,2*e),g=ie.create({c0:Q.create(d),c1:Q.create(c)}),S=ie.add(ie.pow(g,Gr),qn.b);let _=ie.sqrt(S);const I=_.c1===Ve?_.c0*dt/r:_.c1*dt/r?Dr:Ve;return _=f&&I>0?_:ie.neg(_),{x:g,y:_}}else if(s.length===192&&!n){if(i){if(s.reduce((_,I)=>_!==0?I+1:I,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:ie.ZERO,y:ie.ZERO}}const c=u(s,0*e,1*e),d=u(s,1*e,2*e),g=u(s,2*e,3*e),S=u(s,3*e,4*e);return{x:ie.fromBigTuple([d,c]),y:ie.fromBigTuple([S,g])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function ki(t){const{ORDER:e}=Q,{infinity:r,sort:n,value:i}=Yr(ye("signatureHex",t)),f=Vr.G2.Point,s=i.length/2;if(s!==48&&s!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const u=lt(i.slice(0,s)),c=lt(i.slice(s));if(r)return f.ZERO;const d=Q.create(u&Kt(Q.BITS)),g=Q.create(c),S=ie.create({c0:g,c1:d}),_=ie.add(ie.pow(S,Gr),qn.b);let I=ie.sqrt(_);if(!I)throw new Error("Failed to find a square root");const{re:H,im:F}=ie.reim(I),K=BigInt(n),Y=F>Ve&&F*dt/e!==K,N=F===Ve&&H*dt/e!==K;(Y||N)&&(I=ie.neg(I));const P=f.fromAffine({x:S,y:I});return P.assertValidity(),P}const Vr=Do({fields:{Fp:Q,Fp2:ie,Fp6:Yo,Fp12:fe,Fr:Zo},G1:{...Xt,Fp:Q,htfDefaults:{...Sn,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(Q.mul(e.X,r),e.Y,e.Z);return e.multiplyUnsafe(Mt).negate().multiplyUnsafe(Mt).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(Mt).add(e),mapToCurve:t0,fromBytes:zo,toBytes:$o,ShortSignature:{fromBytes(t){return nt(t),Fi(t)},fromHex(t){return Fi(t)},toBytes(t){return Bn(t)},toRawBytes(t){return Bn(t)},toHex(t){return Ct(Bn(t))}}},G2:{...qn,Fp:ie,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Sn},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:r0,isTorsionFree:(t,e)=>e.multiplyUnsafe(Mt).negate().equals(Ti(t,e)),clearCofactor:(t,e)=>{const r=Mt;let n=e.multiplyUnsafe(r).negate(),i=Ti(t,e),f=e.double();return f=Vo(t,f),f=f.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),f=f.add(i),f=f.subtract(n),f.subtract(e)},fromBytes:jo,toBytes:Xo,Signature:{fromBytes(t){return nt(t),ki(t)},fromHex(t){return ki(t)},toBytes(t){return An(t)},toRawBytes(t){return An(t)},toHex(t){return Ct(An(t))}}},params:{ateLoopSize:Mt,r:Xt.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:Sn}),Wo=Lf(ie,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>ie.fromBigTuple(e.map(BigInt))))),Qo=Lf(Q,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),Jo=Af(Q,{A:Q.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:Q.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:Q.create(BigInt(11))}),e0=Af(ie,{A:ie.create({c0:Q.create(Ve),c1:Q.create(BigInt(240))}),B:ie.create({c0:Q.create(BigInt(1012)),c1:Q.create(BigInt(1012))}),Z:ie.create({c0:Q.create(BigInt(-2)),c1:Q.create(BigInt(-1))})});function t0(t){const{x:e,y:r}=Jo(Q.create(t[0]));return Qo(e,r)}function r0(t){const{x:e,y:r}=e0(ie.fromBigTuple(t));return Wo(e,r)}var Di=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},mt=[],ct=[],n0=typeof Uint8Array<"u"?Uint8Array:Array,Gn=!1;function Nf(){Gn=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)mt[e]=t[e],ct[t.charCodeAt(e)]=e;ct[45]=62,ct[95]=63}function i0(t){Gn||Nf();var e,r,n,i,f,s,u=t.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");f=t[u-2]==="="?2:t[u-1]==="="?1:0,s=new n0(u*3/4-f),n=f>0?u-4:u;var c=0;for(e=0,r=0;e<n;e+=4,r+=3)i=ct[t.charCodeAt(e)]<<18|ct[t.charCodeAt(e+1)]<<12|ct[t.charCodeAt(e+2)]<<6|ct[t.charCodeAt(e+3)],s[c++]=i>>16&255,s[c++]=i>>8&255,s[c++]=i&255;return f===2?(i=ct[t.charCodeAt(e)]<<2|ct[t.charCodeAt(e+1)]>>4,s[c++]=i&255):f===1&&(i=ct[t.charCodeAt(e)]<<10|ct[t.charCodeAt(e+1)]<<4|ct[t.charCodeAt(e+2)]>>2,s[c++]=i>>8&255,s[c++]=i&255),s}function f0(t){return mt[t>>18&63]+mt[t>>12&63]+mt[t>>6&63]+mt[t&63]}function s0(t,e,r){for(var n,i=[],f=e;f<r;f+=3)n=(t[f]<<16)+(t[f+1]<<8)+t[f+2],i.push(f0(n));return i.join("")}function Pi(t){Gn||Nf();for(var e,r=t.length,n=r%3,i="",f=[],s=16383,u=0,c=r-n;u<c;u+=s)f.push(s0(t,u,u+s>c?c:u+s));return n===1?(e=t[r-1],i+=mt[e>>2],i+=mt[e<<4&63],i+="=="):n===2&&(e=(t[r-2]<<8)+t[r-1],i+=mt[e>>10],i+=mt[e>>4&63],i+=mt[e<<2&63],i+="="),f.push(i),f.join("")}function $r(t,e,r,n,i){var f,s,u=i*8-n-1,c=(1<<u)-1,d=c>>1,g=-7,S=r?i-1:0,_=r?-1:1,I=t[e+S];for(S+=_,f=I&(1<<-g)-1,I>>=-g,g+=u;g>0;f=f*256+t[e+S],S+=_,g-=8);for(s=f&(1<<-g)-1,f>>=-g,g+=n;g>0;s=s*256+t[e+S],S+=_,g-=8);if(f===0)f=1-d;else{if(f===c)return s?NaN:(I?-1:1)*(1/0);s=s+Math.pow(2,n),f=f-d}return(I?-1:1)*s*Math.pow(2,f-n)}function Tf(t,e,r,n,i,f){var s,u,c,d=f*8-i-1,g=(1<<d)-1,S=g>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=n?0:f-1,H=n?1:-1,F=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=g):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+S>=1?e+=_/c:e+=_*Math.pow(2,1-S),e*c>=2&&(s++,c/=2),s+S>=g?(u=0,s=g):s+S>=1?(u=(e*c-1)*Math.pow(2,i),s=s+S):(u=e*Math.pow(2,S-1)*Math.pow(2,i),s=0));i>=8;t[r+I]=u&255,I+=H,u/=256,i-=8);for(s=s<<i|u,d+=i;d>0;t[r+I]=s&255,I+=H,s/=256,d-=8);t[r+I-H]|=F*128}var o0={}.toString,Ff=Array.isArray||function(t){return o0.call(t)=="[object Array]"};var a0=50;Z.TYPED_ARRAY_SUPPORT=Di.TYPED_ARRAY_SUPPORT!==void 0?Di.TYPED_ARRAY_SUPPORT:!0;Pr();function Pr(){return Z.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ut(t,e){if(Pr()<e)throw new RangeError("Invalid typed array length");return Z.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Z.prototype):(t===null&&(t=new Z(e)),t.length=e),t}function Z(t,e,r){if(!Z.TYPED_ARRAY_SUPPORT&&!(this instanceof Z))return new Z(t,e,r);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Zn(this,t)}return kf(this,t,e,r)}Z.poolSize=8192;Z._augment=function(t){return t.__proto__=Z.prototype,t};function kf(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?l0(t,e,r,n):typeof e=="string"?u0(t,e,r):d0(t,e)}Z.from=function(t,e,r){return kf(null,t,e,r)};Z.TYPED_ARRAY_SUPPORT&&(Z.prototype.__proto__=Uint8Array.prototype,Z.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Z[Symbol.species]);function Df(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c0(t,e,r,n){return Df(e),e<=0?Ut(t,e):r!==void 0?typeof n=="string"?Ut(t,e).fill(r,n):Ut(t,e).fill(r):Ut(t,e)}Z.alloc=function(t,e,r){return c0(null,t,e,r)};function Zn(t,e){if(Df(e),t=Ut(t,e<0?0:Yn(e)|0),!Z.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}Z.allocUnsafe=function(t){return Zn(null,t)};Z.allocUnsafeSlow=function(t){return Zn(null,t)};function u0(t,e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!Z.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=Pf(e,r)|0;t=Ut(t,n);var i=t.write(e,r);return i!==n&&(t=t.slice(0,i)),t}function On(t,e){var r=e.length<0?0:Yn(e.length)|0;t=Ut(t,r);for(var n=0;n<r;n+=1)t[n]=e[n]&255;return t}function l0(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,r):e=new Uint8Array(e,r,n),Z.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Z.prototype):t=On(t,e),t}function d0(t,e){if(Et(e)){var r=Yn(e.length)|0;return t=Ut(t,r),t.length===0||e.copy(t,0,0,r),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||O0(e.length)?Ut(t,0):On(t,e);if(e.type==="Buffer"&&Ff(e.data))return On(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Yn(t){if(t>=Pr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Pr().toString(16)+" bytes");return t|0}Z.isBuffer=R0;function Et(t){return!!(t!=null&&t._isBuffer)}Z.compare=function(e,r){if(!Et(e)||!Et(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,f=0,s=Math.min(n,i);f<s;++f)if(e[f]!==r[f]){n=e[f],i=r[f];break}return n<i?-1:i<n?1:0};Z.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Z.concat=function(e,r){if(!Ff(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Z.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=Z.allocUnsafe(r),f=0;for(n=0;n<e.length;++n){var s=e[n];if(!Et(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,f),f+=s.length}return i};function Pf(t,e){if(Et(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var r=t.length;if(r===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Mr(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Yf(t).length;default:if(n)return Mr(t).length;e=(""+e).toLowerCase(),n=!0}}Z.byteLength=Pf;function h0(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return S0(this,e,r);case"utf8":case"utf-8":return Kf(this,e,r);case"ascii":return E0(this,e,r);case"latin1":case"binary":return _0(this,e,r);case"base64":return g0(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B0(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}Z.prototype._isBuffer=!0;function $t(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}Z.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)$t(this,r,r+1);return this};Z.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)$t(this,r,r+3),$t(this,r+1,r+2);return this};Z.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)$t(this,r,r+7),$t(this,r+1,r+6),$t(this,r+2,r+5),$t(this,r+3,r+4);return this};Z.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Kf(this,0,e):h0.apply(this,arguments)};Z.prototype.equals=function(e){if(!Et(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Z.compare(this,e)===0};Z.prototype.inspect=function(){var e="",r=a0;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"};Z.prototype.compare=function(e,r,n,i,f){if(!Et(e))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),f===void 0&&(f=this.length),r<0||n>e.length||i<0||f>this.length)throw new RangeError("out of range index");if(i>=f&&r>=n)return 0;if(i>=f)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,f>>>=0,this===e)return 0;for(var s=f-i,u=n-r,c=Math.min(s,u),d=this.slice(i,f),g=e.slice(r,n),S=0;S<c;++S)if(d[S]!==g[S]){s=d[S],u=g[S];break}return s<u?-1:u<s?1:0};function Mf(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=Z.from(e,n)),Et(e))return e.length===0?-1:Mi(t,e,r,n,i);if(typeof e=="number")return e=e&255,Z.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Mi(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Mi(t,e,r,n,i){var f=1,s=t.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;f=2,s/=2,u/=2,r/=2}function c(I,H){return f===1?I[H]:I.readUInt16BE(H*f)}var d;if(i){var g=-1;for(d=r;d<s;d++)if(c(t,d)===c(e,g===-1?0:d-g)){if(g===-1&&(g=d),d-g+1===u)return g*f}else g!==-1&&(d-=d-g),g=-1}else for(r+u>s&&(r=s-u),d=r;d>=0;d--){for(var S=!0,_=0;_<u;_++)if(c(t,d+_)!==c(e,_)){S=!1;break}if(S)return d}return-1}Z.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};Z.prototype.indexOf=function(e,r,n){return Mf(this,e,r,n,!0)};Z.prototype.lastIndexOf=function(e,r,n){return Mf(this,e,r,n,!1)};function b0(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var f=e.length;if(f%2!==0)throw new TypeError("Invalid hex string");n>f/2&&(n=f/2);for(var s=0;s<n;++s){var u=parseInt(e.substr(s*2,2),16);if(isNaN(u))return s;t[r+s]=u}return s}function p0(t,e,r,n){return jr(Mr(e,t.length-r),t,r,n)}function Cf(t,e,r,n){return jr(L0(e),t,r,n)}function x0(t,e,r,n){return Cf(t,e,r,n)}function w0(t,e,r,n){return jr(Yf(e),t,r,n)}function y0(t,e,r,n){return jr(U0(e,t.length-r),t,r,n)}Z.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var f=this.length-r;if((n===void 0||n>f)&&(n=f),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return b0(this,e,r,n);case"utf8":case"utf-8":return p0(this,e,r,n);case"ascii":return Cf(this,e,r,n);case"latin1":case"binary":return x0(this,e,r,n);case"base64":return w0(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y0(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};Z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function g0(t,e,r){return e===0&&r===t.length?Pi(t):Pi(t.slice(e,r))}function Kf(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var f=t[i],s=null,u=f>239?4:f>223?3:f>191?2:1;if(i+u<=r){var c,d,g,S;switch(u){case 1:f<128&&(s=f);break;case 2:c=t[i+1],(c&192)===128&&(S=(f&31)<<6|c&63,S>127&&(s=S));break;case 3:c=t[i+1],d=t[i+2],(c&192)===128&&(d&192)===128&&(S=(f&15)<<12|(c&63)<<6|d&63,S>2047&&(S<55296||S>57343)&&(s=S));break;case 4:c=t[i+1],d=t[i+2],g=t[i+3],(c&192)===128&&(d&192)===128&&(g&192)===128&&(S=(f&15)<<18|(c&63)<<12|(d&63)<<6|g&63,S>65535&&S<1114112&&(s=S))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=u}return m0(n)}var Ci=4096;function m0(t){var e=t.length;if(e<=Ci)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Ci));return r}function E0(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function _0(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function S0(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",f=e;f<r;++f)i+=H0(t[f]);return i}function B0(t,e,r){for(var n=t.slice(e,r),i="",f=0;f<n.length;f+=2)i+=String.fromCharCode(n[f]+n[f+1]*256);return i}Z.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(Z.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=Z.prototype;else{var f=r-e;i=new Z(f,void 0);for(var s=0;s<f;++s)i[s]=this[s+e]}return i};function ge(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}Z.prototype.readUIntLE=function(e,r,n){e=e|0,r=r|0,n||ge(e,r,this.length);for(var i=this[e],f=1,s=0;++s<r&&(f*=256);)i+=this[e+s]*f;return i};Z.prototype.readUIntBE=function(e,r,n){e=e|0,r=r|0,n||ge(e,r,this.length);for(var i=this[e+--r],f=1;r>0&&(f*=256);)i+=this[e+--r]*f;return i};Z.prototype.readUInt8=function(e,r){return r||ge(e,1,this.length),this[e]};Z.prototype.readUInt16LE=function(e,r){return r||ge(e,2,this.length),this[e]|this[e+1]<<8};Z.prototype.readUInt16BE=function(e,r){return r||ge(e,2,this.length),this[e]<<8|this[e+1]};Z.prototype.readUInt32LE=function(e,r){return r||ge(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Z.prototype.readUInt32BE=function(e,r){return r||ge(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Z.prototype.readIntLE=function(e,r,n){e=e|0,r=r|0,n||ge(e,r,this.length);for(var i=this[e],f=1,s=0;++s<r&&(f*=256);)i+=this[e+s]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*r)),i};Z.prototype.readIntBE=function(e,r,n){e=e|0,r=r|0,n||ge(e,r,this.length);for(var i=r,f=1,s=this[e+--i];i>0&&(f*=256);)s+=this[e+--i]*f;return f*=128,s>=f&&(s-=Math.pow(2,8*r)),s};Z.prototype.readInt8=function(e,r){return r||ge(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Z.prototype.readInt16LE=function(e,r){r||ge(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Z.prototype.readInt16BE=function(e,r){r||ge(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Z.prototype.readInt32LE=function(e,r){return r||ge(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Z.prototype.readInt32BE=function(e,r){return r||ge(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Z.prototype.readFloatLE=function(e,r){return r||ge(e,4,this.length),$r(this,e,!0,23,4)};Z.prototype.readFloatBE=function(e,r){return r||ge(e,4,this.length),$r(this,e,!1,23,4)};Z.prototype.readDoubleLE=function(e,r){return r||ge(e,8,this.length),$r(this,e,!0,52,8)};Z.prototype.readDoubleBE=function(e,r){return r||ge(e,8,this.length),$r(this,e,!1,52,8)};function tt(t,e,r,n,i,f){if(!Et(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<f)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}Z.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var f=Math.pow(2,8*n)-1;tt(this,e,r,n,f,0)}var s=1,u=0;for(this[r]=e&255;++u<n&&(s*=256);)this[r+u]=e/s&255;return r+n};Z.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var f=Math.pow(2,8*n)-1;tt(this,e,r,n,f,0)}var s=n-1,u=1;for(this[r+s]=e&255;--s>=0&&(u*=256);)this[r+s]=e/u&255;return r+n};Z.prototype.writeUInt8=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,1,255,0),Z.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e&255,r+1};function zr(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,f=Math.min(t.length-r,2);i<f;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}Z.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,2,65535,0),Z.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):zr(this,e,r,!0),r+2};Z.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,2,65535,0),Z.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):zr(this,e,r,!1),r+2};function Xr(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,f=Math.min(t.length-r,4);i<f;++i)t[r+i]=e>>>(n?i:3-i)*8&255}Z.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,4,4294967295,0),Z.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255):Xr(this,e,r,!0),r+4};Z.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,4,4294967295,0),Z.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):Xr(this,e,r,!1),r+4};Z.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r|0,!i){var f=Math.pow(2,8*n-1);tt(this,e,r,n,f-1,-f)}var s=0,u=1,c=0;for(this[r]=e&255;++s<n&&(u*=256);)e<0&&c===0&&this[r+s-1]!==0&&(c=1),this[r+s]=(e/u>>0)-c&255;return r+n};Z.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r|0,!i){var f=Math.pow(2,8*n-1);tt(this,e,r,n,f-1,-f)}var s=n-1,u=1,c=0;for(this[r+s]=e&255;--s>=0&&(u*=256);)e<0&&c===0&&this[r+s+1]!==0&&(c=1),this[r+s]=(e/u>>0)-c&255;return r+n};Z.prototype.writeInt8=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,1,127,-128),Z.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=e&255,r+1};Z.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,2,32767,-32768),Z.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):zr(this,e,r,!0),r+2};Z.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,2,32767,-32768),Z.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):zr(this,e,r,!1),r+2};Z.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,4,2147483647,-2147483648),Z.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):Xr(this,e,r,!0),r+4};Z.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r|0,n||tt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Z.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):Xr(this,e,r,!1),r+4};function qf(t,e,r,n,i,f){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Gf(t,e,r,n,i){return i||qf(t,e,r,4),Tf(t,e,r,n,23,4),r+4}Z.prototype.writeFloatLE=function(e,r,n){return Gf(this,e,r,!0,n)};Z.prototype.writeFloatBE=function(e,r,n){return Gf(this,e,r,!1,n)};function Zf(t,e,r,n,i){return i||qf(t,e,r,8),Tf(t,e,r,n,52,8),r+8}Z.prototype.writeDoubleLE=function(e,r,n){return Zf(this,e,r,!0,n)};Z.prototype.writeDoubleBE=function(e,r,n){return Zf(this,e,r,!1,n)};Z.prototype.copy=function(e,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var f=i-n,s;if(this===e&&n<r&&r<i)for(s=f-1;s>=0;--s)e[s+r]=this[s+n];else if(f<1e3||!Z.TYPED_ARRAY_SUPPORT)for(s=0;s<f;++s)e[s+r]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+f),r);return f};Z.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var f=e.charCodeAt(0);f<256&&(e=f)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Z.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{var u=Et(e)?e:Mr(new Z(e,i).toString()),c=u.length;for(s=0;s<n-r;++s)this[s+r]=u[s%c]}return this};var A0=/[^+\/0-9A-Za-z-_]/g;function v0(t){if(t=I0(t).replace(A0,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function I0(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H0(t){return t<16?"0"+t.toString(16):t.toString(16)}function Mr(t,e){e=e||1/0;for(var r,n=t.length,i=null,f=[],s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&f.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&f.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&f.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&f.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;f.push(r)}else if(r<2048){if((e-=2)<0)break;f.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;f.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;f.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return f}function L0(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function U0(t,e){for(var r,n,i,f=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,f.push(i),f.push(n);return f}function Yf(t){return i0(v0(t))}function jr(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function O0(t){return t!==t}function R0(t){return t!=null&&(!!t._isBuffer||Vf(t)||N0(t))}function Vf(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function N0(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&Vf(t.slice(0,0))}var O;(function(t){t.BlockHash="B",t.OperationHash="o",t.OperationListHash="Lo",t.OperationListListHash="LLo",t.ProtocolHash="P",t.ContextHash="Co",t.BlockMetadataHash="bm",t.OperationMetadataHash="r",t.OperationMetadataListHash="Lr",t.OperationMetadataListListHash="LLr",t.Ed25519PublicKeyHash="tz1",t.Secp256k1PublicKeyHash="tz2",t.P256PublicKeyHash="tz3",t.ContractHash="KT1",t.BlindedPublicKeyHash="btz1",t.BLS12_381PublicKeyHash="tz4",t.TXRollupAddress="txr1",t.ZkRollupHash="epx1",t.ScRollupHash="scr1",t.SmartRollupHash="sr1",t.CryptoboxPublicKeyHash="id",t.Ed25519Seed="edsk",t.Ed25519PublicKey="edpk",t.Secp256k1SecretKey="spsk",t.P256SecretKey="p2sk",t.BLS12_381SecretKey="BLsk",t.ValueHash="vh",t.CycleNonce="nce",t.ScriptExpr="expr",t.InboxHash="txi",t.MessageHash="txm",t.CommitmentHash="txc",t.MessageResultHash="txmr",t.MessageResultListHash="txM",t.WithdrawListHash="txw",t.ScRollupStateHash="scs1",t.ScRollupCommitmentHash="scc1",t.SmartRollupStateHash="srs1",t.SmartRollupCommitmentHash="src1",t.Ed25519EncryptedSeed="edesk",t.Secp256k1EncryptedSecretKey="spesk",t.P256EncryptedSecretKey="p2esk",t.BLS12_381EncryptedSecretKey="BLesk",t.Secp256k1EncryptedScalar="seesk",t.Secp256k1PublicKey="sppk",t.P256PublicKey="p2pk",t.Secp256k1Scalar="SSp",t.Secp256k1Element="GSp",t.Ed25519SecretKey="_edsk",t.Ed25519Signature="edsig",t.Secp256k1Signature="spsig1",t.P256Signature="p2sig",t.GenericSignature="sig",t.ChainID="Net",t.SaplingSpendingKey="sask",t.EncryptedSaplingSpendingKey="_sask",t.SaplingAddress="zet1",t.GenericAggregateSignature="asig",t.BLS12_381Signature="BLsig",t.BLS12_381PublicKey="BLpk",t.SlotHeader="sh"})(O||(O={}));const $f={[O.BlockHash]:new Uint8Array([1,52]),[O.OperationHash]:new Uint8Array([5,116]),[O.OperationListHash]:new Uint8Array([133,233]),[O.OperationListListHash]:new Uint8Array([29,159,109]),[O.ProtocolHash]:new Uint8Array([2,170]),[O.ContextHash]:new Uint8Array([79,199]),[O.BlockMetadataHash]:new Uint8Array([234,249]),[O.OperationMetadataHash]:new Uint8Array([5,183]),[O.OperationMetadataListHash]:new Uint8Array([134,39]),[O.OperationMetadataListListHash]:new Uint8Array([29,159,182]),[O.Ed25519PublicKeyHash]:new Uint8Array([6,161,159]),[O.Secp256k1PublicKeyHash]:new Uint8Array([6,161,161]),[O.P256PublicKeyHash]:new Uint8Array([6,161,164]),[O.ContractHash]:new Uint8Array([2,90,121]),[O.BlindedPublicKeyHash]:new Uint8Array([1,2,49,223]),[O.BLS12_381PublicKeyHash]:new Uint8Array([6,161,166]),[O.TXRollupAddress]:new Uint8Array([1,128,120,31]),[O.ZkRollupHash]:new Uint8Array([1,23,224,125]),[O.ScRollupHash]:new Uint8Array([1,118,132,217]),[O.SmartRollupHash]:new Uint8Array([6,124,117]),[O.CryptoboxPublicKeyHash]:new Uint8Array([153,103]),[O.Ed25519Seed]:new Uint8Array([13,15,58,7]),[O.Ed25519PublicKey]:new Uint8Array([13,15,37,217]),[O.Secp256k1SecretKey]:new Uint8Array([17,162,224,201]),[O.P256SecretKey]:new Uint8Array([16,81,238,189]),[O.BLS12_381SecretKey]:new Uint8Array([3,150,192,40]),[O.ValueHash]:new Uint8Array([1,106,242]),[O.CycleNonce]:new Uint8Array([69,220,169]),[O.ScriptExpr]:new Uint8Array([13,44,64,27]),[O.InboxHash]:new Uint8Array([79,148,196]),[O.MessageHash]:new Uint8Array([79,149,30]),[O.CommitmentHash]:new Uint8Array([79,148,17]),[O.MessageResultHash]:new Uint8Array([18,7,206,87]),[O.MessageResultListHash]:new Uint8Array([79,146,82]),[O.WithdrawListHash]:new Uint8Array([79,150,72]),[O.ScRollupStateHash]:new Uint8Array([17,144,122,202]),[O.ScRollupCommitmentHash]:new Uint8Array([17,144,21,100]),[O.SmartRollupStateHash]:new Uint8Array([17,165,235,240]),[O.SmartRollupCommitmentHash]:new Uint8Array([17,165,134,138]),[O.Ed25519EncryptedSeed]:new Uint8Array([7,90,60,179,41]),[O.Secp256k1EncryptedSecretKey]:new Uint8Array([9,237,241,174,150]),[O.P256EncryptedSecretKey]:new Uint8Array([9,48,57,115,171]),[O.BLS12_381EncryptedSecretKey]:new Uint8Array([2,5,30,53,25]),[O.Secp256k1EncryptedScalar]:new Uint8Array([1,131,36,86,248]),[O.Secp256k1PublicKey]:new Uint8Array([3,254,226,86]),[O.P256PublicKey]:new Uint8Array([3,178,139,127]),[O.Secp256k1Scalar]:new Uint8Array([38,248,136]),[O.Secp256k1Element]:new Uint8Array([5,92,0]),[O.Ed25519SecretKey]:new Uint8Array([43,246,78,7]),[O.Ed25519Signature]:new Uint8Array([9,245,205,134,18]),[O.Secp256k1Signature]:new Uint8Array([13,115,101,19,63]),[O.P256Signature]:new Uint8Array([54,240,44,52]),[O.GenericSignature]:new Uint8Array([4,130,43]),[O.ChainID]:new Uint8Array([87,82,0]),[O.SaplingSpendingKey]:new Uint8Array([11,237,20,92]),[O.EncryptedSaplingSpendingKey]:new Uint8Array([11,237,20,92]),[O.SaplingAddress]:new Uint8Array([18,71,40,223]),[O.GenericAggregateSignature]:new Uint8Array([2,75,234,101]),[O.BLS12_381Signature]:new Uint8Array([40,171,64,207]),[O.BLS12_381PublicKey]:new Uint8Array([6,149,135,204]),[O.SlotHeader]:new Uint8Array([2,116,180])},T0={[O.BlockHash]:32,[O.OperationHash]:32,[O.OperationListHash]:32,[O.OperationListListHash]:32,[O.ProtocolHash]:32,[O.ContextHash]:32,[O.BlockMetadataHash]:32,[O.OperationMetadataHash]:32,[O.OperationMetadataListHash]:32,[O.OperationMetadataListListHash]:32,[O.Ed25519PublicKeyHash]:20,[O.Secp256k1PublicKeyHash]:20,[O.P256PublicKeyHash]:20,[O.ContractHash]:20,[O.BlindedPublicKeyHash]:20,[O.BLS12_381PublicKeyHash]:20,[O.TXRollupAddress]:20,[O.ZkRollupHash]:20,[O.ScRollupHash]:20,[O.SmartRollupHash]:20,[O.CryptoboxPublicKeyHash]:16,[O.Ed25519Seed]:32,[O.Ed25519PublicKey]:32,[O.Secp256k1SecretKey]:32,[O.P256SecretKey]:32,[O.BLS12_381SecretKey]:32,[O.ValueHash]:32,[O.CycleNonce]:32,[O.ScriptExpr]:32,[O.InboxHash]:32,[O.MessageHash]:32,[O.CommitmentHash]:32,[O.MessageResultHash]:32,[O.MessageResultListHash]:32,[O.WithdrawListHash]:32,[O.ScRollupStateHash]:32,[O.ScRollupCommitmentHash]:32,[O.SmartRollupStateHash]:32,[O.SmartRollupCommitmentHash]:32,[O.Ed25519EncryptedSeed]:56,[O.Secp256k1EncryptedSecretKey]:56,[O.P256EncryptedSecretKey]:56,[O.BLS12_381EncryptedSecretKey]:56,[O.Secp256k1EncryptedScalar]:60,[O.Secp256k1PublicKey]:33,[O.P256PublicKey]:33,[O.Secp256k1Scalar]:33,[O.Secp256k1Element]:33,[O.Ed25519SecretKey]:64,[O.Ed25519Signature]:64,[O.Secp256k1Signature]:64,[O.P256Signature]:64,[O.GenericSignature]:64,[O.ChainID]:4,[O.SaplingSpendingKey]:169,[O.EncryptedSaplingSpendingKey]:193,[O.SaplingAddress]:43,[O.GenericAggregateSignature]:96,[O.BLS12_381Signature]:96,[O.BLS12_381PublicKey]:48,[O.SlotHeader]:48},zf=[O.P256PublicKeyHash,O.Secp256k1PublicKeyHash,O.Ed25519PublicKeyHash,O.BLS12_381PublicKeyHash,O.ContractHash,O.SmartRollupHash],Vn=[O.P256PublicKey,O.Secp256k1PublicKey,O.Ed25519PublicKey,O.BLS12_381PublicKey],Xf=[O.P256PublicKeyHash,O.Secp256k1PublicKeyHash,O.Ed25519PublicKeyHash,O.BLS12_381PublicKeyHash],jf=[O.P256Signature,O.Secp256k1Signature,O.Ed25519Signature,O.BLS12_381Signature,O.GenericSignature];function jt(t,e,r){const n=(()=>{try{return Xi.decode(t)}catch(f){throw f instanceof Error?f.message.includes("checksum")?new ae(Be.INVALID_CHECKSUM):new ae(Be.INVALID_ENCODING):f}})();let i;for(i in O){const f=O[i],s=$f[f];if(n.length===s.length+T0[f]&&n.slice(0,s.length).every((u,c)=>u==s[c])){if(e!==void 0&&e.indexOf(f)<0)throw new ae(Be.PREFIX_NOT_ALLOWED);return[n.slice(s.length),f]}}throw new ae(Be.NO_PREFIX_MATCHED)}function ua(t,e){const[r,n]=jt(t,Vn);let i;switch(n){case O.Ed25519PublicKey:i=0;break;case O.Secp256k1PublicKey:i=1;break;case O.P256PublicKey:i=2;break;case O.BLS12_381PublicKey:i=3;break;default:throw new rs(Be.NO_PREFIX_MATCHED)}const f=new Uint8Array(r.length+1);return f[0]=i,f.set(r,1),Wr(f)}function la(t,e){const[r,n]=jt(t,Xf),i=new Uint8Array(21);let f;switch(n){case O.Ed25519PublicKeyHash:f=0;break;case O.Secp256k1PublicKeyHash:f=1;break;case O.P256PublicKeyHash:f=2;break;case O.BLS12_381PublicKeyHash:f=3;break;default:throw new Yi(t,Be.NO_PREFIX_MATCHED)}return i[0]=f,i.set(r,1),e!==void 0&&e==="array"?i:Wr(i)}function da(t,e){const r=t.indexOf("%");r>=0&&(t=t.slice(0,r));const[n,i]=jt(t,zf),f=new Uint8Array(22);if(i===O.ContractHash||i===O.SmartRollupHash||i===O.ZkRollupHash){let s;switch(i){case O.ContractHash:s=1;break;case O.SmartRollupHash:s=3;break;case O.ZkRollupHash:s=4;break}f[0]=s,f.set(n,1)}else{let s;switch(i){case O.Ed25519PublicKeyHash:s=0;break;case O.Secp256k1PublicKeyHash:s=1;break;case O.P256PublicKeyHash:s=2;break;case O.BLS12_381PublicKeyHash:s=3;break;default:throw new Yi(t,Be.NO_PREFIX_MATCHED)}f[0]=0,f[1]=s,f.set(n,2)}return e!==void 0&&e==="array"?f:Wr(f)}function ha(t){const[e,r]=jt(t);let n;switch(r){case O.P256PublicKey:n=O.P256PublicKeyHash;break;case O.Secp256k1PublicKey:n=O.Secp256k1PublicKeyHash;break;case O.Ed25519PublicKey:n=O.Ed25519PublicKeyHash;break;case O.BLS12_381PublicKey:n=O.BLS12_381PublicKeyHash;break;default:throw new Vi(t,Be.NO_PREFIX_MATCHED)}const i=yr.hash(e,20);return zt(i,n)}function zt(t,e){const r=typeof t=="string"?Jt(t):t,n=$f[e],i=new Uint8Array(n.length+r.length);return i.set(n),i.set(r,n.length),Xi.encode(ms(i))}function ba(t){let e;typeof t=="string"?e=Jt(t):e=t;let r;switch(e[0]){case 0:r=O.Ed25519PublicKey;break;case 1:r=O.Secp256k1PublicKey;break;case 2:r=O.P256PublicKey;break;case 3:r=O.BLS12_381PublicKey;break;default:throw new Error("invalid address format")}return zt(e.slice(1),r)}function F0(t){let e;typeof t=="string"?e=Jt(t):e=t;let r;switch(e[0]){case 0:r=O.Ed25519PublicKeyHash;break;case 1:r=O.Secp256k1PublicKeyHash;break;case 2:r=O.P256PublicKeyHash;break;case 3:r=O.BLS12_381PublicKeyHash;break;default:throw new Error("invalid address format")}return zt(e.slice(1,21),r)}function pa(t){let e;switch(typeof t=="string"?e=Jt(t):e=t,e[0]){case 0:return F0(e.slice(1));case 1:return zt(e.slice(1,21),O.ContractHash);case 3:return zt(e.slice(1,21),O.SmartRollupHash);case 4:return zt(e.slice(1,21),O.ZkRollupHash);default:throw new Error("invalid address format")}}function xa(t){const e=yr.hash(Jt(t),32);return zt(e,O.ScriptExpr)}function Jt(t){if(t=t.startsWith("0x")?t.slice(2):t,t.length%2!==0)throw new Jr(t,"Expecting even number of characters");if(!t.match(/^([\da-f]{2})*$/gi))throw new Jr(t,"Only characters 0-9, a-f and A-F are expected. Optionally, it can be prefixed with '0x'");const e=new Uint8Array(t.length/2);let r=0;for(let n=0;n<t.length;n+=2){const i=t.slice(n,n+2),f=parseInt(i,16);if(Number.isNaN(f))throw new Jr(t,"Only characters 0-9, a-f and A-F are expected. Optionally, it can be prefixed with '0x'");e[r++]=f}return e}function wa(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Wr(t){return Array.from(t).map(e=>(e>>4&15).toString(16)+(e&15).toString(16)).join("")}function ya(t){return Z.from(t,"utf8").toString("hex")}function ga(t){return Z.from(Jt(t)).toString("utf8")}function ma(t){return t.startsWith("0x")?t.slice(2):t}function k0(t){const e=t.indexOf("%");return e>=0?[t.slice(0,e),t.slice(e)]:[t,null]}function Ea(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;const n=r<t.length?t[r]:0,i=r<e.length?e[r]:0;return n<i?-1:n>i?1:0}function Ot(t,e){try{jt(t,e)}catch(r){return r instanceof ae&&r.result!==void 0?r.result:Be.OTHER}return Be.VALID}function _a(t){const[e]=k0(t??"");return Ot(e,zf)}function Sa(t){return Ot(t,[O.ChainID])}function Ba(t){return Ot(t,[O.ContractHash])}function Aa(t){return Ot(t,Xf)}function va(t){return Ot(t,jf)}function Ia(t){return Ot(t,Vn)}function Ha(t){return Ot(t,[O.OperationHash])}function La(t){return Ot(t,[O.ProtocolHash])}function Ua(t){return Ot(t,[O.BlockHash])}const D0="BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_POP_",Oa="BLS_POP_BLS12381G2_XMD:SHA-256_SSWU_RO_POP_";function Ra(t,e,r,n,i){const[f,s]=(()=>{try{return jt(e,Vn)}catch(d){throw d instanceof ae?new Vi(e,d.result):d}})(),u=(()=>{try{const[d]=jt(r,jf);return d}catch(d){throw d instanceof ae?new ns(r,d.result):d}})();let c;if(typeof t=="string"?c=Jt(t):c=t,c.length===0)throw new ts(Wr(c),"can't be empty");switch(s){case O.P256PublicKey:return C0(u,c,f);case O.Secp256k1PublicKey:return M0(u,c,f);case O.Ed25519PublicKey:return P0(u,c,f);default:return K0(u,c,f)}}function P0(t,e,r){const n=yr.hash(e,32);try{return Hs.verify(r,n,t)}catch{return!1}}function M0(t,e,r){const n=yr.hash(e,32);try{return Lo.verify(t,n,r)}catch{return!1}}function C0(t,e,r){const n=yr.hash(e,32);try{return No.verify(t,n,r)}catch{return!1}}const Ki=Vr.longSignatures;function K0(t,e,r){try{const n=Ki.hash(e,D0);return Ki.verify(t,n,r)}catch{return!1}}class Na extends ae{constructor(e,r){super(`The protocol hash '${e}' is invalid`,r),this.protocolHash=e,this.name="InvalidProtocolHashError",this.name=this.constructor.name}}const q0=6,G0=3;function qi(t){switch(t){case"tz":return q0;case"mtz":return G0;default:return 0}}function Ta(t="mutez",e="mutez",r){const n=new fs(r);return n.isNaN()?r:n.multipliedBy(Math.pow(10,qi(t))).dividedBy(Math.pow(10,qi(e)))}export{ma as $,Hs as A,fs as B,Wf as C,Yi as D,Ba as E,ra as F,La as G,Na as H,ia as I,As as J,wr as K,Rn as L,vs as M,$0 as N,rs as O,ca as P,D0 as Q,Oa as R,Ea as S,Wt as T,Zi as U,Be as V,Vi as W,Jr as X,da as Y,pa as Z,k0 as _,Ia as a,ba as a0,F0 as a1,la as a2,va as a3,Sa as a4,ts as a5,Ua as a6,Q0 as a7,sa as a8,ua as a9,T0 as aa,jf as ab,Ha as ac,fa as ad,J0 as ae,Vn as af,X0 as ag,oa as ah,Y0 as ai,Ta as aj,xa as ak,j0 as al,W0 as am,Xf as an,na as ao,Aa as b,aa as c,Wr as d,jt as e,O as f,Gi as g,Jt as h,ae as i,ns as j,Ra as k,zt as l,wa as m,ha as n,z0 as o,yr as p,ea as q,Z0 as r,_s as s,ms as t,es as u,_a as v,ga as w,V0 as x,ta as y,ya as z};
