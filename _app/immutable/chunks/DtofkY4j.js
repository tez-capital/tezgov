import"./CWj6FrbW.js";import{p as He,f as d,d as r,s,r as a,t as f,b as v,c as Re,m as t,a3 as p,a as C,al as te}from"./C-S9Tcds.js";import{s as c,d as Fe}from"./DwdxVzkQ.js";import{i as N}from"./BOcg6rm_.js";import{e as Je,i as Me}from"./DbHg6iZr.js";import{s as re,B as ae}from"./DzBZffJn.js";import{g as j,S as fe}from"./DyjjU98_.js";import{s as Ke,y as pe,n as ye,p as me,T as Ze,F as Qe}from"./IWdSMuF1.js";import{n as We}from"./CSRtKrTj.js";import{T as Xe}from"./BMX1muvm.js";import{w as $e}from"./B9UkGA8o.js";import{P as he}from"./g92R8rUf.js";import{f as ne}from"./D2Je3nFC.js";import{c as et}from"./CZpU4jDA.js";const tt=()=>"Signal yay",rt=()=>"Señalar si",at=()=>"Signalizovat ano",nt=()=>"Signaali kyllä",st=()=>"賛成シグナル",it=()=>"Exprimați „Da”",ot=()=>"Сигнал 'так'",lt=()=>"Indiquer pour",vt=(y={},n={})=>{const e=n.locale??j();return e==="en"?tt():e==="es"?rt():e==="cs"?at():e==="fi"?nt():e==="jp"?st():e==="ro"?it():e==="ua"?ot():lt()},ct=()=>"Signal nay",ut=()=>"Señalar no",_t=()=>"Signalizovat ne",dt=()=>"Signaali ei",gt=()=>"反対シグナル",ft=()=>"Exprimați „Nu”",pt=()=>"Сигнал 'ні'",yt=()=>"Indiquer contre",mt=(y={},n={})=>{const e=n.locale??j();return e==="en"?ct():e==="es"?ut():e==="cs"?_t():e==="fi"?dt():e==="jp"?gt():e==="ro"?ft():e==="ua"?pt():yt()},ht=()=>"Signal pass",zt=()=>"Señalar abstención",wt=()=>"Signalizovat zdržení se",bt=()=>"Signaali ohita",xt=()=>"棄権シグナル",St=()=>"Exprimați abținere",kt=()=>"Сигнал 'пропустити'",jt=()=>"Indiquer passer",Vt=(y={},n={})=>{const e=n.locale??j();return e==="en"?ht():e==="es"?zt():e==="cs"?wt():e==="fi"?bt():e==="jp"?xt():e==="ro"?St():e==="ua"?kt():jt()},Pt=()=>"You signaled",Nt=()=>"Has señalado",Dt=()=>"Signalizovali jste",Et=()=>"Sinä annoit signaalin",Lt=()=>"シグナルしました",Ot=()=>"Ați exprimat",Tt=()=>"Ви подали сигнал",At=()=>"Vous avez indiqué",It=(y={},n={})=>{const e=n.locale??j();return e==="en"?Pt():e==="es"?Nt():e==="cs"?Dt():e==="fi"?Et():e==="jp"?Lt():e==="ro"?Ot():e==="ua"?Tt():At()},qt=()=>"Graphs of signal votes display only the votes within the scope of a baker. Votes from other bakers and their delegators/stakers are not shown.",Bt=()=>"Los gráficos de votos solo muestran votos referentes a un baker. No se muestran los votos de otros bakers ni de sus delegadores o apiladores(stakers).",Gt=()=>"Grafy signalizačních hlasů zobrazují pouze hlasy v rámci jednoho bakera. Hlasy jiných bakerů a jejich delegátorů či stakerů nejsou zobrazeny.",Ut=()=>"Signaaliäänten kaaviot näyttävät vain leipurin toimialueeseen kuuluvat äänet. Muiden leipureiden ja heidän delegaattiensa/panostajiensa ääniä ei näytetä.",Yt=()=>"シグナル投票のグラフは、1人のベーカー内の投票のみ表示します。他のベーカーやその委任者/ステーカーの投票は表示されません。",Ct=()=>"Graficele voturilor de exprimare afișează doar voturile în cadrul aceluiași validator (baker). Voturile altor validatori (bakeri) și ale delegatarilor/stakerilor lor nu sunt afișate.",Ht=()=>"Графіки сигналів відображають голоси лише у межах одного пекаря. Голоси інших пекарів і їхніх делегатів не показуються.",Rt=()=>"Les gaphs d'indications de vote n'affichent que celles concernant un baker donné. Les votes d'autres bakers ou de leurs délégateurs ou stakers ne sont pas affichés.",Ft=(y={},n={})=>{const e=n.locale??j();return e==="en"?qt():e==="es"?Bt():e==="cs"?Gt():e==="fi"?Ut():e==="jp"?Yt():e==="ro"?Ct():e==="ua"?Ht():Rt()},Jt=()=>"Signal votes",Mt=()=>"Votos señalados",Kt=()=>"Signalizační hlasy",Zt=()=>"Signaaliäänet",Qt=()=>"シグナル投票",Wt=()=>"Voturi de exprimare",Xt=()=>"Сигнали голосування",$t=()=>"Indications de votes",er=(y={},n={})=>{const e=n.locale??j();return e==="en"?Jt():e==="es"?Mt():e==="cs"?Kt():e==="fi"?Zt():e==="jp"?Qt():e==="ro"?Wt():e==="ua"?Xt():$t()},tr=()=>"Loading signal votes...",rr=()=>"Cargando votos señalados...",ar=()=>"Načítání signalizačních hlasů...",nr=()=>"Ladataan signaaliääniä...",sr=()=>"シグナル投票を読み込み中...",ir=()=>"Se încarcă voturile de exprimare...",or=()=>"Завантаження сигналів голосування...",lr=()=>"chargement des indications de votes...",ze=(y={},n={})=>{const e=n.locale??j();return e==="en"?tr():e==="es"?rr():e==="cs"?ar():e==="fi"?nr():e==="jp"?sr():e==="ro"?ir():e==="ua"?or():lr()},vr=()=>"You can signal only ONCE per period (for only ONE proposal). Your signal is not binding or protocol-enforced.",cr=()=>"Puedes señalar SOLO UNA VEZ por período (y solo para UNA propuesta). Tu señal no es vinculante ni impuesta por el protocolo.",ur=()=>"Signalizovat můžete pouze JEDNOU za období (a pouze pro JEDEN návrh). Váš signál není závazný ani vynucený protokolem.",_r=()=>"Voit antaa signaalin VAIN KERRAN kaudessa (vain YHTEEN ehdotukseen). Signaalisi ei ole sitova eikä protokollan valvoma.",dr=()=>"1期間につき1つの提案だけに1回だけシグナルできます。シグナルは拘束力のある投票ではありません。",gr=()=>"Puteți exprima doar O DATĂ pe perioadă (și doar pentru O SINGURĂ propunere). Exprimarea dvs. nu este obligatorie și nici impusă de protocol.",fr=()=>"Ви можете подати сигнал лише РАЗ за період (лише за ОДНУ пропозицію). Ваш сигнал не є обов'язковим або примусовим за протоколом.",pr=()=>"Vous ne pouvez fournir une indication qu'une fois par période, pour une seule proposition. Votre indication n'est ni contraignante ni gérée par le protocole.",yr=(y={},n={})=>{const e=n.locale??j();return e==="en"?vr():e==="es"?cr():e==="cs"?ur():e==="fi"?_r():e==="jp"?dr():e==="ro"?gr():e==="ua"?fr():pr()};var mr=d('<div class="row sl-card"><!></div>'),hr=d('<div class="row"></div> <div class="no-proposals svelte-c7wvzv"> </div>',1),zr=(y,n)=>$e(t(n).proposal),wr=d('<div class="loading-signal-votes svelte-c7wvzv"><!></div>'),br=d('<div class="existing-vote svelte-c7wvzv"><div class="ballot svelte-c7wvzv"> <!></div></div>'),xr=d('<div class="button-content svelte-c7wvzv"><div class="label svelte-c7wvzv"> </div> <div class="icon svelte-c7wvzv"><!></div></div>'),Sr=d('<div class="button-content svelte-c7wvzv"><div class="label svelte-c7wvzv"> </div> <div class="icon svelte-c7wvzv"><!></div></div>'),kr=d('<div class="button-content svelte-c7wvzv"><div class="label svelte-c7wvzv"> </div> <div class="icon svelte-c7wvzv"><!></div></div>'),jr=d('<div class="nay svelte-c7wvzv"><!></div> <div class="pass svelte-c7wvzv"><!></div> <div class="yay svelte-c7wvzv"><!></div>',1),Vr=d('<div class="bar svelte-c7wvzv"><div class="bar-title svelte-c7wvzv"> </div> <div class="bar-description svelte-c7wvzv"> </div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect></svg></div> <!>',1),Pr=d('<div class="separator svelte-c7wvzv"><!></div> <div class="proposal svelte-c7wvzv"><div class="title svelte-c7wvzv"><button class="unstyle-button"> </button></div> <!></div>',1),Nr=d('<div class="scope-notice svelte-c7wvzv"> </div> <div class="limit-notice svelte-c7wvzv"> </div> <!>',1),Dr=d('<div class="signaling-votes svelte-c7wvzv"><!></div>'),Er=d('<div class="signaling-votes-wrap svelte-c7wvzv"><!> <div class="row"></div> <div class="row"></div> <div class="separator"><!></div> <div class="note svelte-c7wvzv"> </div></div>');function Jr(y,n){He(n,!0);let e=p(()=>n.session.account),se=p(()=>Object.values(t(e).delegateDelegators??[]).reduce((l,i)=>l+BigInt(i.toString()),0n)),we=p(()=>n.period.kind==="proposal"?n.period.proposals.map(l=>l.proposal):[n.period.proposal]);const be=p(()=>et(t(e).delegateDelegators??{},t(e).delegateDelegatorsVotes??{}));let ie=p(()=>t(we).map(l=>{const i=t(be)[l]||{yay:0n,nay:0n,pass:0n},V=t(se)>0n?t(se):1n;return{proposal:l,yay:i.yay,yayPercentage:Number(i.yay*100n/V),nay:i.nay,nayPercentage:Number(i.nay*100n/V),pass:i.pass,passPercentage:Number(i.pass*100n/V)}}));async function R(l,i){await n.onNewOperation(async()=>await n.session.signalVote(l,i,n.period.index))}let H=p(()=>t(e).delegateDelegatorsVotes?.[t(e).id]);var F=Er(),oe=r(F);{var xe=l=>{var i=mr(),V=r(i);const M=p(()=>ze());he(V,{progress:"indeterminate",get message(){return t(M)}}),a(i),v(l,i)},Se=l=>{var i=Dr(),V=r(i);{var M=D=>{var q=hr(),E=s(C(q),2),K=r(E,!0);a(E),f(B=>c(K,B),[()=>We()]),v(D,q)},Ve=D=>{var q=Nr(),E=C(q),K=r(E,!0);a(E);var B=s(E,2),Pe=r(B,!0);a(B);var Ne=s(B,2);Je(Ne,17,()=>t(ie),Me,(Z,u)=>{var ve=Pr();const De=p(()=>t(u).yayPercentage||0),Q=p(()=>t(u).nayPercentage||0),ce=p(()=>t(u).passPercentage||0);var W=C(ve),Ee=r(W);fe(Ee),a(W);var ue=s(W,2),X=r(ue),$=r(X);$.__click=[zr,u];var Le=r($,!0);a($),a(X);var Oe=s(X,2);{var Te=L=>{var O=wr(),G=r(O);const U=p(()=>ze());he(G,{progress:"indeterminate",get message(){return t(U)}}),a(O),v(L,O)},Ae=L=>{var O=Vr(),G=C(O),U=r(G),Ie=r(U,!0);a(U);var ee=s(U,2),qe=r(ee);a(ee);var _e=s(ee,2),de=s(r(_e)),ge=s(de),Be=s(ge);a(_e),a(G);var Ge=s(G,2);{var Ue=b=>{var x=br(),S=r(x),T=r(S),P=s(T);{var Y=m=>{var h=te();f(I=>c(h,I),[()=>pe()]),v(m,h)},A=(m,h)=>{{var I=o=>{var z=te();f(g=>c(z,g),[()=>ye()]),v(o,z)},_=(o,z)=>{{var g=w=>{var k=te();f(Ce=>c(k,Ce),[()=>me()]),v(w,k)};N(o,w=>{t(H).vote==="pass"&&w(g)},z)}};N(m,o=>{t(H).vote==="nay"?o(I):o(_,!1)},h)}};N(P,m=>{t(H).vote==="yay"?m(Y):m(A,!1)})}a(S),a(x),f(m=>c(T,`${m??""}: `),[()=>It()]),v(b,x)},Ye=b=>{var x=jr(),S=C(x),T=r(S);ae(T,{onclick:()=>R(t(u).proposal,"nay"),children:(h,I)=>{var _=xr(),o=r(_),z=r(o,!0);a(o);var g=s(o,2),w=r(g);Ze(w),a(g),a(_),f(k=>c(z,k),[()=>mt()]),v(h,_)},$$slots:{default:!0}}),a(S);var P=s(S,2),Y=r(P);ae(Y,{onclick:()=>R(t(u).proposal,"pass"),children:(h,I)=>{var _=Sr(),o=r(_),z=r(o,!0);a(o);var g=s(o,2),w=r(g);Qe(w),a(g),a(_),f(k=>c(z,k),[()=>Vt()]),v(h,_)},$$slots:{default:!0}}),a(P);var A=s(P,2),m=r(A);ae(m,{onclick:()=>R(t(u).proposal,"yay"),children:(h,I)=>{var _=kr(),o=r(_),z=r(o,!0);a(o);var g=s(o,2),w=r(g);Xe(w),a(g),a(_),f(k=>c(z,k),[()=>vt()]),v(h,_)},$$slots:{default:!0}}),a(A),v(b,x)};N(Ge,b=>{t(H)?b(Ue):b(Ye,!1)})}f((b,x,S,T,P,Y,A)=>{c(Ie,b),c(qe,`${x??""}: ${S??""} | ${T??""}
									${P??""} | ${Y??""}
									${A??""}`),re(de,"width",`${t(Q)+t(ce)+t(De)}%`),re(ge,"width",`${t(Q)+t(ce)}%`),re(Be,"width",`${t(Q)}%`)},[()=>er(),()=>pe(),()=>ne(t(u).yay,0),()=>ye(),()=>ne(t(u).nay,0),()=>me(),()=>ne(t(u).pass,0)]),v(L,O)};N(Oe,L=>{n.session.state.isLoadingDelegateDelegatorsVotes?L(Te):L(Ae,!1)})}a(ue),f(()=>c(Le,t(u).proposal)),v(Z,ve)}),f((Z,u)=>{c(K,Z),c(Pe,u)},[()=>Ft(),()=>yr()]),v(D,q)};N(V,D=>{t(ie).length===0?D(M):D(Ve,!1)})}a(i),v(l,i)};N(oe,l=>{n.session.state.isLoadingDelegateDelegators?l(xe):l(Se,!1)})}var J=s(oe,6),ke=r(J);fe(ke),a(J);var le=s(J,2),je=r(le,!0);a(le),a(F),f(l=>c(je,l),[()=>Ke()]),v(y,F),Re()}Fe(["click"]);export{Jr as default};
