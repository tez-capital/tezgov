import"./CWj6FrbW.js";import{p as Je,f as g,d as t,s,r,t as f,b as o,c as Me,m as a,a5 as y,a as N,as as te,a9 as me}from"./BRl2jpNx.js";import{s as d,d as Ke}from"./sbBntvV9.js";import{i as D}from"./Bho5j6Xg.js";import{e as Ze,i as Qe}from"./D9XpezzW.js";import{s as re,B as ne}from"./A78a6S06.js";import{g as z,S as ye}from"./CWuJKFCW.js";import{s as We,y as he,n as be,p as xe,T as Xe,F as $e}from"./LHR9pGQ2.js";import{n as ea}from"./Brrbsjxx.js";import{T as aa}from"./CmJZTAgw.js";import{w as ta}from"./B9UkGA8o.js";import{P as Se}from"./DpjZ6PcS.js";import{f as se}from"./D2gv8AuZ.js";import{c as ra}from"./YYVph8jf.js";const na=()=>"Signal yay",sa=()=>"Señalar si",ia=()=>"Signalizovat ano",oa=()=>"Signaali kyllä",la=()=>"賛成シグナル",va=()=>"Exprimați „Da”",da=()=>"Сигнал 'так'",ca=()=>"Indiquer pour",ua=(h={},n={})=>{const e=n.locale??z();return e==="en"?na():e==="es"?sa():e==="cs"?ia():e==="fi"?oa():e==="ja"?la():e==="ro"?va():e==="ua"?da():ca()},_a=()=>"Signal nay",ga=()=>"Señalar no",pa=()=>"Signalizovat ne",fa=()=>"Signaali ei",ma=()=>"反対シグナル",ya=()=>"Exprimați „Nu”",ha=()=>"Сигнал 'ні'",ba=()=>"Indiquer contre",xa=(h={},n={})=>{const e=n.locale??z();return e==="en"?_a():e==="es"?ga():e==="cs"?pa():e==="fi"?fa():e==="ja"?ma():e==="ro"?ya():e==="ua"?ha():ba()},Sa=()=>"Signal pass",ka=()=>"Señalar abstención",ja=()=>"Signalizovat zdržení se",za=()=>"Signaali ohita",Va=()=>"棄権シグナル",wa=()=>"Exprimați abținere",Pa=()=>"Сигнал 'пропустити'",Na=()=>"Indiquer passer",Da=(h={},n={})=>{const e=n.locale??z();return e==="en"?Sa():e==="es"?ka():e==="cs"?ja():e==="fi"?za():e==="ja"?Va():e==="ro"?wa():e==="ua"?Pa():Na()},Ea=()=>"You signaled",La=()=>"Has señalado",Oa=()=>"Signalizovali jste",Ta=()=>"Sinä annoit signaalin",Aa=()=>"シグナルしました",Ia=()=>"Ați exprimat",qa=()=>"Ви подали сигнал",Ba=()=>"Vous avez indiqué",Ga=(h={},n={})=>{const e=n.locale??z();return e==="en"?Ea():e==="es"?La():e==="cs"?Oa():e==="fi"?Ta():e==="ja"?Aa():e==="ro"?Ia():e==="ua"?qa():Ba()},Ua=()=>"Graphs of signal votes display only the votes within the scope of a baker. Votes from other bakers and their delegators/stakers are not shown.",Ya=()=>"Los gráficos de votos solo muestran votos referentes a un baker. No se muestran los votos de otros bakers ni de sus delegadores o apiladores(stakers).",Ca=()=>"Grafy signalizačních hlasů zobrazují pouze hlasy v rámci jednoho bakera. Hlasy jiných bakerů a jejich delegátorů či stakerů nejsou zobrazeny.",Ha=()=>"Signaaliäänten kaaviot näyttävät vain leipurin toimialueeseen kuuluvat äänet. Muiden leipureiden ja heidän delegaattiensa/panostajiensa ääniä ei näytetä.",Ra=()=>"シグナル投票のグラフは、1人のベーカー内の投票のみ表示します。他のベーカーやその委任者/ステーカーの投票は表示されません。",Fa=()=>"Graficele voturilor de exprimare afișează doar voturile în cadrul aceluiași validator (baker). Voturile altor validatori (bakeri) și ale delegatarilor/stakerilor lor nu sunt afișate.",Ja=()=>"Графіки сигналів відображають голоси лише у межах одного пекаря. Голоси інших пекарів і їхніх делегатів не показуються.",Ma=()=>"Les gaphs d'indications de vote n'affichent que celles concernant un baker donné. Les votes d'autres bakers ou de leurs délégateurs ou stakers ne sont pas affichés.",Ka=(h={},n={})=>{const e=n.locale??z();return e==="en"?Ua():e==="es"?Ya():e==="cs"?Ca():e==="fi"?Ha():e==="ja"?Ra():e==="ro"?Fa():e==="ua"?Ja():Ma()},Za=()=>"Signal votes",Qa=()=>"Votos señalados",Wa=()=>"Signalizační hlasy",Xa=()=>"Signaaliäänet",$a=()=>"シグナル投票",et=()=>"Voturi de exprimare",at=()=>"Сигнали голосування",tt=()=>"Indications de votes",rt=(h={},n={})=>{const e=n.locale??z();return e==="en"?Za():e==="es"?Qa():e==="cs"?Wa():e==="fi"?Xa():e==="ja"?$a():e==="ro"?et():e==="ua"?at():tt()},nt=()=>"Loading signal votes...",st=()=>"Cargando votos señalados...",it=()=>"Načítání signalizačních hlasů...",ot=()=>"Ladataan signaaliääniä...",lt=()=>"シグナル投票を読み込み中...",vt=()=>"Se încarcă voturile de exprimare...",dt=()=>"Завантаження сигналів голосування...",ct=()=>"chargement des indications de votes...",ke=(h={},n={})=>{const e=n.locale??z();return e==="en"?nt():e==="es"?st():e==="cs"?it():e==="fi"?ot():e==="ja"?lt():e==="ro"?vt():e==="ua"?dt():ct()},ut=()=>"You can signal only ONCE per period (for only ONE proposal). Your signal is not binding or protocol-enforced.",_t=()=>"Puedes señalar SOLO UNA VEZ por período (y solo para UNA propuesta). Tu señal no es vinculante ni impuesta por el protocolo.",gt=()=>"Signalizovat můžete pouze JEDNOU za období (a pouze pro JEDEN návrh). Váš signál není závazný ani vynucený protokolem.",pt=()=>"Voit antaa signaalin VAIN KERRAN kaudessa (vain YHTEEN ehdotukseen). Signaalisi ei ole sitova eikä protokollan valvoma.",ft=()=>"1期間につき1つの提案だけに1回だけシグナルできます。シグナルは拘束力のある投票ではありません。",mt=()=>"Puteți exprima doar O DATĂ pe perioadă (și doar pentru O SINGURĂ propunere). Exprimarea dvs. nu este obligatorie și nici impusă de protocol.",yt=()=>"Ви можете подати сигнал лише РАЗ за період (лише за ОДНУ пропозицію). Ваш сигнал не є обов'язковим або примусовим за протоколом.",ht=()=>"Vous ne pouvez fournir une indication qu'une fois par période, pour une seule proposition. Votre indication n'est ni contraignante ni gérée par le protocole.",bt=(h={},n={})=>{const e=n.locale??z();return e==="en"?ut():e==="es"?_t():e==="cs"?gt():e==="fi"?pt():e==="ja"?ft():e==="ro"?mt():e==="ua"?yt():ht()};var xt=g('<div class="row sl-card"><!></div>'),St=g('<div class="row"></div> <div class="no-proposals svelte-dg0mpd"> </div>',1),kt=(h,n)=>ta(a(n).proposal),jt=g('<div class="loading-signal-votes svelte-dg0mpd"><!></div>'),zt=g('<div class="existing-vote svelte-dg0mpd"><div class="ballot svelte-dg0mpd"> <!></div></div>'),Vt=g('<div class="button-content svelte-dg0mpd"><div class="label svelte-dg0mpd"> </div> <div class="icon svelte-dg0mpd"><!></div></div>'),wt=g('<div class="button-content svelte-dg0mpd"><div class="label svelte-dg0mpd"> </div> <div class="icon svelte-dg0mpd"><!></div></div>'),Pt=g('<div class="button-content svelte-dg0mpd"><div class="label svelte-dg0mpd"> </div> <div class="icon svelte-dg0mpd"><!></div></div>'),Nt=g('<div class="nay svelte-dg0mpd"><!></div> <div class="pass svelte-dg0mpd"><!></div> <div class="yay svelte-dg0mpd"><!></div>',1),Dt=g('<div class="bar svelte-dg0mpd"><div class="bar-title svelte-dg0mpd"> </div> <div class="bar-description svelte-dg0mpd"> </div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect></svg></div> <!>',1),Et=g('<div class="separator svelte-dg0mpd"><!></div> <div class="proposal svelte-dg0mpd"><div class="title svelte-dg0mpd"><button class="unstyle-button"> </button></div> <!></div>',1),Lt=g('<div class="scope-notice svelte-dg0mpd"> </div> <div class="limit-notice svelte-dg0mpd"> </div> <!>',1),Ot=g('<div class="signaling-votes svelte-dg0mpd"><!></div>'),Tt=g('<div class="signaling-votes-wrap svelte-dg0mpd"><!> <div class="row"></div> <div class="row"></div> <div class="separator"><!></div> <div class="note svelte-dg0mpd"> </div></div>');function Zt(h,n){Je(n,!0);let e=y(()=>n.session.account),ie=y(()=>Object.values(a(e).delegateDelegators??[]).reduce((l,i)=>l+BigInt(i.toString()),0n)),je=y(()=>n.period.kind==="proposal"?n.period.proposals.map(l=>l.proposal):[n.period.proposal]);const ze=y(()=>ra(a(e).delegateDelegators??{},a(e).delegateDelegatorsVotes??{}));let oe=y(()=>a(je).map(l=>{const i=a(ze)[l]||{yay:0n,nay:0n,pass:0n},V=a(ie)>0n?a(ie):1n;return{proposal:l,yay:i.yay,yayPercentage:Number(i.yay*100n/V),nay:i.nay,nayPercentage:Number(i.nay*100n/V),pass:i.pass,passPercentage:Number(i.pass*100n/V)}}));async function R(l,i){await n.onNewOperation(async()=>await n.session.signalVote(l,i,n.period.index))}let H=y(()=>a(e).delegateDelegatorsVotes?.[a(e).id]);var F=Tt(),le=t(F);{var Ve=l=>{var i=xt(),V=t(i);{let M=y(()=>ke());Se(V,{progress:"indeterminate",get message(){return a(M)}})}r(i),o(l,i)},we=l=>{var i=Ot(),V=t(i);{var M=E=>{var B=St(),L=s(N(B),2),K=t(L,!0);r(L),f(G=>d(K,G),[()=>ea()]),o(E,B)},De=E=>{var B=Lt(),L=N(B),K=t(L,!0);r(L);var G=s(L,2),Ee=t(G,!0);r(G);var Le=s(G,2);Ze(Le,17,()=>a(oe),Qe,(Z,c)=>{const Oe=y(()=>a(c).yayPercentage||0),Q=y(()=>a(c).nayPercentage||0),de=y(()=>a(c).passPercentage||0);var ce=Et(),W=N(ce),Te=t(W);ye(Te),r(W);var ue=s(W,2),X=t(ue),$=t(X);$.__click=[kt,c];var Ae=t($,!0);r($),r(X);var Ie=s(X,2);{var qe=O=>{var T=jt(),U=t(T);{let Y=y(()=>ke());Se(U,{progress:"indeterminate",get message(){return a(Y)}})}r(T),o(O,T)},Be=O=>{var T=Dt(),U=N(T),Y=t(U),Ge=t(Y,!0);r(Y);var ee=s(Y,2),Ue=t(ee);r(ee);var _e=s(ee,2),ge=s(t(_e)),pe=s(ge),Ye=s(pe);r(_e),r(U);var Ce=s(U,2);{var He=S=>{var k=zt(),j=t(k),A=t(j),w=s(A);{var C=b=>{var m=te();f(q=>d(m,q),[()=>he()]),o(b,m)},I=b=>{var m=me(),q=N(m);{var u=p=>{var v=te();f(x=>d(v,x),[()=>be()]),o(p,v)},_=p=>{var v=me(),x=N(v);{var P=ae=>{var fe=te();f(Fe=>d(fe,Fe),[()=>xe()]),o(ae,fe)};D(x,ae=>{a(H).vote==="pass"&&ae(P)},!0)}o(p,v)};D(q,p=>{a(H).vote==="nay"?p(u):p(_,!1)},!0)}o(b,m)};D(w,b=>{a(H).vote==="yay"?b(C):b(I,!1)})}r(j),r(k),f(b=>d(A,`${b??""}: `),[()=>Ga()]),o(S,k)},Re=S=>{var k=Nt(),j=N(k),A=t(j);ne(A,{onclick:()=>R(a(c).proposal,"nay"),children:(m,q)=>{var u=Vt(),_=t(u),p=t(_,!0);r(_);var v=s(_,2),x=t(v);Xe(x),r(v),r(u),f(P=>d(p,P),[()=>xa()]),o(m,u)},$$slots:{default:!0}}),r(j);var w=s(j,2),C=t(w);ne(C,{onclick:()=>R(a(c).proposal,"pass"),children:(m,q)=>{var u=wt(),_=t(u),p=t(_,!0);r(_);var v=s(_,2),x=t(v);$e(x),r(v),r(u),f(P=>d(p,P),[()=>Da()]),o(m,u)},$$slots:{default:!0}}),r(w);var I=s(w,2),b=t(I);ne(b,{onclick:()=>R(a(c).proposal,"yay"),children:(m,q)=>{var u=Pt(),_=t(u),p=t(_,!0);r(_);var v=s(_,2),x=t(v);aa(x),r(v),r(u),f(P=>d(p,P),[()=>ua()]),o(m,u)},$$slots:{default:!0}}),r(I),o(S,k)};D(Ce,S=>{a(H)?S(He):S(Re,!1)})}f((S,k,j,A,w,C,I)=>{d(Ge,S),d(Ue,`${k??""}: ${j??""} | ${A??""}
									${w??""} | ${C??""}
									${I??""}`),re(ge,"width",`${a(Q)+a(de)+a(Oe)}%`),re(pe,"width",`${a(Q)+a(de)}%`),re(Ye,"width",`${a(Q)}%`)},[()=>rt(),()=>he(),()=>se(a(c).yay,0),()=>be(),()=>se(a(c).nay,0),()=>xe(),()=>se(a(c).pass,0)]),o(O,T)};D(Ie,O=>{n.session.state.isLoadingDelegateDelegatorsVotes?O(qe):O(Be,!1)})}r(ue),f(()=>d(Ae,a(c).proposal)),o(Z,ce)}),f((Z,c)=>{d(K,Z),d(Ee,c)},[()=>Ka(),()=>bt()]),o(E,B)};D(V,E=>{a(oe).length===0?E(M):E(De,!1)})}r(i),o(l,i)};D(le,l=>{n.session.state.isLoadingDelegateDelegators?l(Ve):l(we,!1)})}var J=s(le,6),Pe=t(J);ye(Pe),r(J);var ve=s(J,2),Ne=t(ve,!0);r(ve),r(F),f(l=>d(Ne,l),[()=>We()]),o(h,F),Me()}Ke(["click"]);export{Zt as default};
