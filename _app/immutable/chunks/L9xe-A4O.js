import"./CWj6FrbW.js";import{p as be,f as P,d as r,r as e,s as o,m as i,a5 as y,t as g,b as l,c as je,aR as w,a as or,a9 as Sr}from"./zf1WrKjG.js";import{s as u,d as pe}from"./C4ZcjmJS.js";import{i as q}from"./CG0HDjPF.js";import{B as E,s as N}from"./Bb7xfo9i.js";import{g as L,S as Or,a as Tr,P as Lr,E as he,A as xe}from"./BkPAUj_K.js";import{S as ke,e as we,B as Pe,a as qe}from"./BYPH7NLH.js";import{T as Mr,F as Vr,n as Ur,p as Yr,y as Cr,s as Be}from"./B2oLgtOS.js";import{r as Fr,a as Gr}from"./CHe_ulit.js";import{T as Qr}from"./D4TYd8Eh.js";import{w as Re}from"./B9UkGA8o.js";import{s as Ie}from"./BL1FD6PC.js";const Ne=()=>"You voted",Ae=()=>"Usted votó",Ee=()=>"Hlasovali jste",Se=()=>"Äänestit",Oe=()=>"あなたは投票しました",Te=()=>"Ați votat",Le=()=>"Ви проголосували",Me=()=>"Vous avez voté",Ve=(c={},t={})=>{const s=t.locale??L();return s==="en"?Ne():s==="es"?Ae():s==="cs"?Ee():s==="fi"?Se():s==="ja"?Oe():s==="ro"?Te():s==="ua"?Le():Me()},Ue=()=>"quorum",Ye=()=>"quórum",Ce=()=>"kvorum",Fe=()=>"päätösvaltaisuus",Ge=()=>"定足数",Qe=()=>"cvorum",ze=()=>"кворум",De=()=>"quorum",He=(c={},t={})=>{const s=t.locale??L();return s==="en"?Ue():s==="es"?Ye():s==="cs"?Ce():s==="fi"?Fe():s==="ja"?Ge():s==="ro"?Qe():s==="ua"?ze():De()},Je=()=>"supermajority",Xe=()=>"supermayoría",Ke=()=>"supervětšina",We=()=>"määräenemmistö",Ze=()=>"特別多数",$e=()=>"supermajoritate",rt=()=>"абсолютна більшість",et=()=>"super-majorité",tt=(c={},t={})=>{const s=t.locale??L();return s==="en"?Je():s==="es"?Xe():s==="cs"?Ke():s==="fi"?We():s==="ja"?Ze():s==="ro"?$e():s==="ua"?rt():et()},at=()=>"Your baker voted",it=()=>"Tu baker ha votado",st=()=>"Váš baker hlasoval",ot=()=>"Leipurisi äänesti",vt=()=>"あなたのベーカーが投票しました",nt=()=>"Validatorul (baker) dvs. a votat",dt=()=>"Ваш пекар проголосував",ut=()=>"Votre baker a voté",lt=(c={},t={})=>{const s=t.locale??L();return s==="en"?at():s==="es"?it():s==="cs"?st():s==="fi"?ot():s==="ja"?vt():s==="ro"?nt():s==="ua"?dt():ut()};function vr(c){return typeof c=="bigint"&&(c=c.toString()),!c||typeof c!="string"?"N/A":c==="0"?"0 ꜩ":`${c.substring(0,c.length-6)}.${c.substring(c.length-6)} ꜩ`}var _t=(c,t)=>Re(t.period.proposal),ct=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),ft=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),gt=P('<div class="existing-vote svelte-g0fgbj"><!> <div class="ballot svelte-g0fgbj"><!></div></div>'),mt=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),yt=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),bt=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),jt=P('<div class="nay svelte-g0fgbj"><!></div> <div class="pass svelte-g0fgbj"><!></div> <div class="yay svelte-g0fgbj"><!></div>',1),pt=P('<div class="note svelte-g0fgbj"> </div>'),ht=P('<div><div class="period svelte-g0fgbj"><div class="proposal svelte-g0fgbj"><div class="title svelte-g0fgbj"><button class="unstyle-button"> </button></div> <div class="vote-summary svelte-g0fgbj"><div class="nay value svelte-g0fgbj"> <div class="icon svelte-g0fgbj"><!></div></div> <div class="pass value svelte-g0fgbj"> <div class="icon svelte-g0fgbj"><!></div></div> <div class="yay value svelte-g0fgbj"> <div class="icon svelte-g0fgbj"><!></div></div></div> <div class="separator svelte-g0fgbj"><!></div> <div class="bar svelte-g0fgbj"><div class="bar-title svelte-g0fgbj"> </div> <div class="bar-description svelte-g0fgbj"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--quorum-color)" rx="2" ry="2"></rect></svg></div> <div class="bar svelte-g0fgbj"><div class="bar-title svelte-g0fgbj"> </div> <div class="bar-description svelte-g0fgbj"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--majority-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--majority-color)" rx="2" ry="2"></rect></svg></div> <!> <!> <div class="separator svelte-g0fgbj"><!></div> <div><!></div></div></div> <!></div>');function Ot(c,t){be(t,!0);let s=y(()=>t.session.account),A=y(()=>t.period.voters.reduce((a,v)=>a+BigInt(v.votingPower.toString()),0n)),M=y(()=>t.period.summary.yay+t.period.summary.nay||1n),nr=y(()=>Math.round(Number(BigInt(t.period.summary.yay)*100000n/i(A))/10)/100),S=y(()=>Math.round(Number(BigInt(t.period.summary.nay)*100000n/i(A))/10)/100),V=y(()=>Math.round(Number(BigInt(t.period.summary.pass)*100000n/i(A))/10)/100);const zr=y(()=>i(M)+BigInt(t.period.summary.pass));let dr=y(()=>i(zr)>i(A)*BigInt(t.period.quorum)/10000n),Dr=y(()=>Math.min(Number(BigInt(t.period.summary.yay+t.period.summary.nay+t.period.summary.pass)*100000n/i(A))/1e3,100)),U=Number(t.period.quorum)/100,ur=y(()=>BigInt(t.period.summary.yay)>=i(M)*Lr/100n),lr=y(()=>Math.round(Number(BigInt(t.period.summary.yay)*100000n/i(M))/10)/100),Y=y(()=>Number(Lr));function Hr(){window.open(`${he}/${t.period.proposal}`,"_blank")}function Jr(){window.open(`${xe}/${t.period.proposal}/${t.period.index}`,"_blank")}async function C(a){await t.onNewOperation(async()=>await t.session.vote(t.period.proposal,a,t.period.index))}let O=y(()=>t.period.ballots.find(a=>a.pkh===i(s).delegate?.pkh)),F=y(()=>Ie(t.period.voters,a=>a.pkh===i(s).id));var T=ht();let _r;var G=r(T),cr=r(G),Q=r(cr),z=r(Q);z.__click=[_t,t];var Xr=r(z,!0);e(z),e(Q);var D=o(Q,2),H=r(D),fr=r(H),gr=o(fr),Kr=r(gr);Mr(Kr),e(gr),e(H);var J=o(H,2),mr=r(J),yr=o(mr),Wr=r(yr);Vr(Wr),e(yr),e(J);var br=o(J,2),jr=r(br),pr=o(jr),Zr=r(pr);Qr(Zr),e(pr),e(br),e(D);var X=o(D,2),$r=r(X);Or($r),e(X);var K=o(X,2),W=r(K),re=r(W,!0);e(W);var Z=o(W,2),hr=r(Z),ee=o(hr);{var te=a=>{var v=w();g(n=>u(v,`(${U}% ${n??""})`),[()=>Fr()]),l(a,v)},ae=a=>{var v=w();g(n=>u(v,`(${n??""} ${U}%)`),[()=>Gr()]),l(a,v)};q(ee,a=>{i(dr)?a(te):a(ae,!1)})}e(Z);var xr=o(Z,2),kr=o(r(xr)),wr=o(kr),Pr=o(wr),ie=o(Pr);e(xr),e(K);var $=o(K,2),rr=r($),se=r(rr,!0);e(rr);var er=o(rr,2),qr=r(er),oe=o(qr);{var ve=a=>{var v=w();g(n=>u(v,`(${i(Y)??""}% ${n??""})`),[()=>Fr()]),l(a,v)},ne=a=>{var v=w();g(n=>u(v,`(${n??""} ${i(Y)??""}%)`),[()=>Gr()]),l(a,v)};q(oe,a=>{i(ur)?a(ve):a(ne,!1)})}e(er);var Br=o(er,2),Rr=o(r(Br)),de=o(Rr);e(Br),e($);var Ir=o($,2);E(Ir,{onclick:()=>Hr(),children:(a,v)=>{var n=ct(),m=r(n),p=r(m,!0);e(m);var b=o(m,2),x=r(b);ke(x),e(b),e(n),g(B=>u(p,B),[()=>we()]),l(a,n)},$$slots:{default:!0}});var Nr=o(Ir,2);E(Nr,{onclick:()=>Jr(),children:(a,v)=>{var n=ft(),m=r(n),p=r(m,!0);e(m);var b=o(m,2),x=r(b);Pe(x),e(b),e(n),g(B=>u(p,B),[()=>qe()]),l(a,n)},$$slots:{default:!0}});var tr=o(Nr,2),ue=r(tr);Or(ue),e(tr);var ar=o(tr,2);let Ar;var le=r(ar);{var _e=a=>{var v=gt(),n=r(v);{var m=f=>{var d=w();g(_=>u(d,`${_??""}:`),[()=>lt()]),l(f,d)},p=f=>{var d=w();g(_=>u(d,_),[()=>Ve()]),l(f,d)};q(n,f=>{i(F)?f(m):f(p,!1)})}var b=o(n,2),x=r(b);{var B=f=>{var d=w();g(_=>u(d,_),[()=>Cr()]),l(f,d)},R=f=>{var d=Sr(),_=or(d);{var I=j=>{var h=w();g(ir=>u(h,ir),[()=>Ur()]),l(j,h)},k=j=>{var h=Sr(),ir=or(h);{var me=sr=>{var Er=w();g(ye=>u(Er,ye),[()=>Yr()]),l(sr,Er)};q(ir,sr=>{i(O).ballot==="pass"&&sr(me)},!0)}l(j,h)};q(_,j=>{i(O).ballot==="nay"?j(I):j(k,!1)},!0)}l(f,d)};q(x,f=>{i(O).ballot==="yay"?f(B):f(R,!1)})}e(b),e(v),l(a,v)},ce=a=>{var v=jt(),n=or(v),m=r(n);E(m,{onclick:()=>C("nay"),children:(R,f)=>{var d=mt(),_=r(d),I=r(_,!0);e(_);var k=o(_,2),j=r(k);Mr(j),e(k),e(d),g(h=>u(I,h),[()=>Ur()]),l(R,d)},$$slots:{default:!0}}),e(n);var p=o(n,2),b=r(p);E(b,{onclick:()=>C("pass"),children:(R,f)=>{var d=yt(),_=r(d),I=r(_,!0);e(_);var k=o(_,2),j=r(k);Vr(j),e(k),e(d),g(h=>u(I,h),[()=>Yr()]),l(R,d)},$$slots:{default:!0}}),e(p);var x=o(p,2),B=r(x);E(B,{onclick:()=>C("yay"),children:(R,f)=>{var d=bt(),_=r(d),I=r(_,!0);e(_);var k=o(_,2),j=r(k);Qr(j),e(k),e(d),g(h=>u(I,h),[()=>Cr()]),l(R,d)},$$slots:{default:!0}}),e(x),l(a,v)};q(le,a=>{i(O)?a(_e):a(ce,!1)})}e(ar),e(cr),e(G);var fe=o(G,2);{var ge=a=>{var v=pt(),n=r(v,!0);e(v),g(m=>u(n,m),[()=>Be()]),l(a,v)};q(fe,a=>{i(F)||a(ge)})}e(T),g((a,v,n,m,p,b,x)=>{_r=Tr(T,1,"period-wrap svelte-g0fgbj",null,_r,a),u(Xr,t.period.proposal),u(fr,`${v??""} (${i(S)??""} %) `),u(mr,`${n??""} (${i(V)??""} %) `),u(jr,`${m??""} (${i(nr)??""} %) `),u(re,p),u(hr,`${i(Dr)??""} % `),N(kr,"width",`${i(S)+i(V)+i(nr)}%`),N(wr,"width",`${i(S)+i(V)}%`),N(Pr,"width",`${i(S)}%`),N(ie,"x",`${U}%`),u(se,b),u(qr,`${i(lr)??""} `),N(Rr,"width",`${i(lr)}%`),N(de,"x",`${i(Y)}%`),Ar=Tr(ar,1,"vote-section svelte-g0fgbj",null,Ar,x)},[()=>({"quorum-reached":i(dr),"majority-reached":i(ur)}),()=>vr(t.period.summary.nay),()=>vr(t.period.summary.pass),()=>vr(t.period.summary.yay),()=>He(),()=>tt(),()=>({disabled:!i(F)})]),l(c,T),je()}pe(["click"]);export{Ot as default};
