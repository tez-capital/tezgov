import{N as No,u as Ja,v as ye,V as se,D as Te,E as _o,F as wo,B as te,G as Qb,H as ev,g as Nl,J as I0,K as vn,L as L0,r as Ke,M as tv,l as kt,f as X,e as Ge,O as N0,t as rv,i as we,Q as iv,R as nv,p as Bo,A as xa,q as B0,U as ov,S as Mo,W as jo,X as Bl,h as av,m as Ws,d as Sa,c as Ht,T as qe,y as M0,Y as po,Z as tl,_ as oh,$ as ah,a0 as sv,a as cv,a1 as sh,b as Ml,a2 as rl,a3 as uv,a4 as j0,a5 as lv,a6 as fv,a7 as hv,a8 as Di,I as jl,a9 as dv,aa as il,ab as pv,j as gv,ac as C0,ad as z0,ae as ai,af as Ui,ag as qi,ah as H0,ai as Ya,aj as Cl,x as Xa,ak as mv,al as Hn,am as D0,an as go,ao as bv,P as Zs}from"./DGoT_QbE.js";import{r as Co}from"./BYo-N0RE.js";class ch{}function vv(r,e,t,i){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(p){try{u(i.next(p))}catch(f){a(f)}}function c(p){try{u(i.throw(p))}catch(f){a(f)}}function u(p){p.done?o(p.value):n(p.value).then(s,c)}u((i=i.apply(r,e||[])).next())})}class yv extends No{constructor(e,t,i){super(),this.method=e,this.url=t,this.cause=i,this.name="HttpRequestFailed",this.message=`${e} ${t} ${String(i)}`}}class dn extends No{constructor(e,t,i,n,o){super(),this.message=e,this.status=t,this.statusText=i,this.body=n,this.url=o,this.name="HttpResponseError"}}class _v extends No{constructor(e,t){super(),this.timeout=e,this.url=t,this.name="HttpTimeoutError",this.message=`HTTP request timeout of ${e}ms exceeded`}}var Eo;(function(r){r[r.CONTINUE=100]="CONTINUE",r[r.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",r[r.PROCESSING=102]="PROCESSING",r[r.OK=200]="OK",r[r.CREATED=201]="CREATED",r[r.ACCEPTED=202]="ACCEPTED",r[r.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",r[r.NO_CONTENT=204]="NO_CONTENT",r[r.RESET_CONTENT=205]="RESET_CONTENT",r[r.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",r[r.MULTI_STATUS=207]="MULTI_STATUS",r[r.ALREADY_REPORTED=208]="ALREADY_REPORTED",r[r.IM_USED=226]="IM_USED",r[r.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",r[r.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",r[r.FOUND=302]="FOUND",r[r.SEE_OTHER=303]="SEE_OTHER",r[r.NOT_MODIFIED=304]="NOT_MODIFIED",r[r.USE_PROXY=305]="USE_PROXY",r[r.SWITCH_PROXY=306]="SWITCH_PROXY",r[r.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",r[r.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",r[r.BAD_REQUEST=400]="BAD_REQUEST",r[r.UNAUTHORIZED=401]="UNAUTHORIZED",r[r.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",r[r.FORBIDDEN=403]="FORBIDDEN",r[r.NOT_FOUND=404]="NOT_FOUND",r[r.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",r[r.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",r[r.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",r[r.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",r[r.CONFLICT=409]="CONFLICT",r[r.GONE=410]="GONE",r[r.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",r[r.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",r[r.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",r[r.URI_TOO_LONG=414]="URI_TOO_LONG",r[r.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",r[r.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",r[r.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",r[r.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",r[r.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",r[r.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",r[r.LOCKED=423]="LOCKED",r[r.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",r[r.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",r[r.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",r[r.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",r[r.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",r[r.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",r[r.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",r[r.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",r[r.BAD_GATEWAY=502]="BAD_GATEWAY",r[r.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",r[r.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",r[r.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",r[r.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",r[r.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",r[r.LOOP_DETECTED=508]="LOOP_DETECTED",r[r.NOT_EXTENDED=510]="NOT_EXTENDED",r[r.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(Eo||(Eo={}));var Js;let U0=globalThis?.fetch,nl;const q0=typeof process<"u"&&!!(!((Js=process==null?void 0:process.versions)===null||Js===void 0)&&Js.node);if(q0){const r=Ja;U0=r.default||r,Number(process.versions.node.split(".")[0])>=19&&(nl=e=>e.startsWith("https")?new ch({keepAlive:!1}):new ch({keepAlive:!1}))}class wv{constructor(e=3e4){this.timeout=e}serialize(e){if(!e)return"";const t=[];for(const n in e)if(e.hasOwnProperty(n)&&typeof e[n]<"u"){const o=typeof e[n].toJSON=="function"?e[n].toJSON():e[n];if(o===null){t.push(encodeURIComponent(n));continue}if(Array.isArray(o)){o.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))});continue}t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}const i=t.join("&");return i?`?${i}`:""}createRequest(e,t){return vv(this,arguments,void 0,function*({url:i,method:n,timeout:o=this.timeout,query:a,headers:s={},json:c=!0},u){const p=i+this.serialize(a);s["Content-Type"]||(s["Content-Type"]="application/json");const f=new AbortController,l=setTimeout(()=>f.abort(),o);try{const d=yield U0(p,Object.assign({keepalive:!1,method:n,headers:s,body:JSON.stringify(u),signal:f.signal},q0&&nl?{agent:nl(p)}:{}));if(typeof d>"u")throw new Error("Response is undefined");if(d.status>=400){const g=yield d.text();throw new dn(`Http error response: (${d.status}) ${g}`,d.status,d.statusText,g,p)}return c?d.json():d.text()}catch(d){throw d instanceof Error&&d.name==="AbortError"?new _v(o,p):d instanceof dn?d:new yv(String(n),p,d)}finally{clearTimeout(l)}})}}function to(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}function ae(r,e,t,i){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(p){try{u(i.next(p))}catch(f){a(f)}}function c(p){try{u(i.throw(p))}catch(f){a(f)}}function u(p){p.done?o(p.value):n(p.value).then(s,c)}u((i=i.apply(r,e||[])).next())})}const Ev="main",ce={block:"head"};var uh;(function(r){r.GET_BAKING_RIGHTS="getBakingRights",r.GET_BALLOTS="getBallots",r.GET_BALLOT_LIST="getBallotList",r.GET_BIG_MAP_EXPR="getBigMapExpr",r.GET_BLOCK_HASH="getBlockHash",r.GET_BLOCK="getBlock",r.GET_BLOCK_HEADER="getBlockHeader",r.GET_BLOCK_METADATA="getBlockMetadata",r.GET_BALANCE="getBalance",r.GET_SPENDABLE="getSpendable",r.GET_BALANCE_AND_FROZEN_BONDS="getBalanceAndFrozenBonds",r.GET_SPENDABLE_AND_FROZEN_BONDS="getSpendableAndFrozenBonds",r.GET_FULL_BALANCE="getFullBalance",r.GET_STAKED_BALANCE="getStakedBalance",r.GET_UNSTAKED_FINALIZABLE_BALANCE="getUnstakedFinalizableBalance",r.GET_UNSTAKED_FROZEN_BALANCE="getUnstakedFrozenBalance",r.GET_UNSTAKE_REQUESTS="getUnstakeRequests",r.GET_CHAIN_ID="getChainId",r.GET_CONSTANTS="getConstants",r.GET_CONTRACT="getContract",r.GET_CURRENT_PERIOD="getCurrentPeriod",r.GET_CURRENT_PROPOSAL="getCurrentProposal",r.GET_CURRENT_QUORUM="getCurrentQuorum",r.GET_DELEGATE="getDelegate",r.GET_ALL_DELEGATES="getAllDelegates",r.GET_DELEGATES="getDelegates",r.GET_VOTING_INFO="getVotingInfo",r.GET_ACTIVE_STAKING_PARAMETERS="getActiveStakingParameters",r.GET_PENDING_STAKING_PARAMETERS="getPendingStakingParameters",r.GET_ATTESTATION_RIGHTS="getAttestationRights",r.GET_ENTRYPOINTS="getEntrypoints",r.GET_LIVE_BLOCKS="getLiveBlocks",r.GET_MANAGER_KEY="getManagerKey",r.GET_NORMALIZED_SCRIPT="getNormalizedScript",r.GET_PROPOSALS="getProposals",r.GET_PROTOCOLS="getProtocols",r.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",r.GET_PROTOCOL_ACTIVATIONS="getProtocolActivations",r.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",r.GET_SCRIPT="getScript",r.GET_STORAGE="getStorage",r.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",r.GET_VOTES_LISTINGS="getVotesListings",r.PACK_DATA="packData",r.GET_STORAGE_USED_SPACE="getStorageUsedSpace",r.GET_STORAGE_PAID_SPACE="getStoragePaidSpace",r.GET_TICKET_BALANCE="getTicketBalance",r.GET_ALL_TICKET_BALANCES="getAllTicketBalances",r.GET_ADAPTIVE_ISSUANCE_LAUNCH_CYCLE="getAdaptiveIssuanceLaunchCycle",r.GET_PENDING_OPERATIONS="getPendingOperations",r.GET_DESTINATION_INDEX="getDestinationIndex"})(uh||(uh={}));function Yi(r,e){const t=Array.isArray(r);typeof e>"u"&&(e=Object.keys(r));const i=t?[]:{};return e.forEach(n=>{const o=r[n];let a;if(!(typeof o>"u")){if(Array.isArray(o)){a=Yi(o),i[n]=a;return}a=new te(o),i[n]=a}}),i}var lh;(function(r){r.TOO_LARGE="too large"})(lh||(lh={}));var fh;(function(r){r.ACTIVATION="activation",r.ATTESTATION="attestation",r.ATTESTATIONS_AGGREGATE="attestations_aggregate",r.ATTESTATION_WITH_DAL="attestation_with_dal",r.ATTESTING_REWARDS="attesting rewards",r.BAKING_BONUSES="baking bonuses",r.BAKING_REWARDS="baking rewards",r.BALLOT="ballot",r.BLOCK_FEES="block fees",r.BONDS="bonds",r.BOOTSTRAP="bootstrap",r.BURNED="burned",r.COMMITMENT="commitment",r.DAL_ATTESTING_REWARDS="dal attesting rewards",r.DAL_ENTRAPMENT_EVIDENCE="dal_entrapment_evidence",r.DAL_PUBLISH_COMMITMENT="dal_publish_commitment",r.DELEGATE_DENOMINATOR="delegate_denominator",r.DELEGATION="delegation",r.DELEGATOR_NUMERATOR="delegator_numerator",r.DEPOSITS="deposits",r.DOUBLE_ATTESTATION_EVIDENCE="double_attestation_evidence",r.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",r.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",r.DOUBLE_PREATTESTATION_EVIDENCE="double_preattestation_evidence",r.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",r.DRAIN_DELEGATE="drain_delegate",r.ENDORSEMENT="endorsement",r.ENDORSEMENT_WITH_DAL="endorsement_with_dal",r.EVENT="event",r.FAILING_NOOP="failing_noop",r.INCREASE_PAID_STORAGE="increase_paid_storage",r.INVOICE="invoice",r.LOST_ATTESTING_REWARDS="lost attesting rewards",r.LOST_DAL_ATTESTING_REWARDS="lost dal attesting rewards",r.MINTED="minted",r.NONCE_REVELATION_REWARDS="nonce revelation rewards",r.ORIGINATION="origination",r.PREATTESTATION="preattestation",r.PREATTESTATIONS_AGGREGATE="preattestations_aggregate",r.PREENDORSEMENT="preendorsement",r.PROPOSALS="proposals",r.PUNISHMENTS="punishments",r.REGISTER_GLOBAL_CONSTANT="register_global_constant",r.REVEAL="reveal",r.SEED_NONCE_REVELATION="seed_nonce_revelation",r.SET_DEPOSITS_LIMIT="set_deposits_limit",r.SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",r.SMART_ROLLUP_CEMENT="smart_rollup_cement",r.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message",r.SMART_ROLLUP_ORIGINATE="smart_rollup_originate",r.SMART_ROLLUP_PUBLISH="smart_rollup_publish",r.SMART_ROLLUP_RECOVER_BOND="smart_rollup_recover_bond",r.SMART_ROLLUP_REFUTATION_PUNISHMENTS="smart_rollup_refutation_punishments",r.SMART_ROLLUP_REFUTATION_REWARDS="smart_rollup_refutation_rewards",r.SMART_ROLLUP_REFUTE="smart_rollup_refute",r.SMART_ROLLUP_TIMEOUT="smart_rollup_timeout",r.STORAGE_FEES="storage fees",r.SUBSIDY="subsidy",r.TICKET_UPDATES="ticket_updates",r.TRANSACTION="transaction",r.TRANSFER_TICKET="transfer_ticket",r.UNSTAKED_DEPOSITS="unstaked_deposits",r.UPDATE_COMPANION_KEY="update_companion_key",r.UPDATE_CONSENSUS_KEY="update_consensus_key",r.VDF_REVELATION="vdf_revelation"})(fh||(fh={}));var hh;(function(r){r.WASM2="wasm_2_0_0",r.ARITH="arith",r.RISCV="riscv"})(hh||(hh={}));var dh;(function(r){r.START="start",r.MOVE="move"})(dh||(dh={}));var ph;(function(r){r.INBOX_PROOF="inbox_proof",r.REVEAL_PROOF="reveal_proof",r.FIRST_INPUT="first_input"})(ph||(ph={}));var gh;(function(r){r.RAW_DATA_PROOF="raw_data_proof",r.METADATA_PROOF="metadata_proof",r.DAL_PAGE_PROOF="dal_page_proof",r.DAL_PARAMETERS_PROOF="dal_parameters_proof"})(gh||(gh={}));var mh;(function(r){r.ONGOING="ongoing",r.ENDED="ended"})(mh||(mh={}));var bh;(function(r){r.LOSER="loser",r.DRAW="draw"})(bh||(bh={}));var vh;(function(r){r.CONFLICT_RESOLVED="conflict_resolved",r.TIMEOUT="timeout"})(vh||(vh={}));var V;(function(r){r.ORIGINATION="origination",r.DELEGATION="delegation",r.REVEAL="reveal",r.TRANSACTION="transaction",r.ACTIVATION="activate_account",r.ATTESTATION="attestation",r.ENDORSEMENT="endorsement",r.PREATTESTATION="preattestation",r.PREENDORSEMENT="preendorsement",r.SET_DEPOSITS_LIMIT="set_deposits_limit",r.DOUBLE_PREATTESTATION_EVIDENCE="double_preattestation_evidence",r.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",r.ATTESTATION_WITH_DAL="attestation_with_dal",r.ENDORSEMENT_WITH_DAL="endorsement_with_dal",r.SEED_NONCE_REVELATION="seed_nonce_revelation",r.DOUBLE_ATTESTATION_EVIDENCE="double_attestation_evidence",r.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",r.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",r.PROPOSALS="proposals",r.BALLOT="ballot",r.FAILING_NOOP="failing_noop",r.REGISTER_GLOBAL_CONSTANT="register_global_constant",r.TRANSFER_TICKET="transfer_ticket",r.INCREASE_PAID_STORAGE="increase_paid_storage",r.UPDATE_CONSENSUS_KEY="update_consensus_key",r.DRAIN_DELEGATE="drain_delegate",r.VDF_REVELATION="vdf_revelation",r.EVENT="event",r.TICKET_UPDATES="ticket_updates",r.SMART_ROLLUP_ORIGINATE="smart_rollup_originate",r.SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",r.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message",r.SMART_ROLLUP_PUBLISH="smart_rollup_publish",r.SMART_ROLLUP_CEMENT="smart_rollup_cement",r.SMART_ROLLUP_RECOVER_BOND="smart_rollup_recover_bond",r.SMART_ROLLUP_REFUTE="smart_rollup_refute",r.SMART_ROLLUP_TIMEOUT="smart_rollup_timeout",r.DAL_PUBLISH_COMMITMENT="dal_publish_commitment",r.DAL_ENTRAPMENT_EVIDENCE="dal_entrapment_evidence",r.PREATTESTATIONS_AGGREGATE="preattestations_aggregate",r.ATTESTATIONS_AGGREGATE="attestations_aggregate",r.UPDATE_COMPANION_KEY="update_companion_key",r.DOUBLE_CONSENSUS_OPERATION_EVIDENCE="double_consensus_operation_evidence"})(V||(V={}));class ma{constructor(e,t=Ev,i=new wv){this.url=e,this.chain=t,this.httpBackend=i}createURL(e){let t=this.url;for(;t.endsWith("/");)t=t.slice(0,-1);return`${t}${e}`}validateAddress(e){const t=ye(e);if(t!==se.VALID)throw new Te(e,t)}validateContract(e){const t=_o(e);if(t!==se.VALID)throw new wo(e,t)}getBlockHash(){return ae(this,arguments,void 0,function*({block:e}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/hash`),method:"GET"})})}getLiveBlocks(){return ae(this,arguments,void 0,function*({block:e}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/live_blocks`),method:"GET"})})}getBalance(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/balance`),method:"GET"});return new te(n)})}getSpendable(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/spendable`),method:"GET"});return new te(n)})}getBalanceAndFrozenBonds(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/balance_and_frozen_bonds`),method:"GET"});return new te(n)})}getSpendableAndFrozenBonds(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/spendable_and_frozen_bonds`),method:"GET"});return new te(n)})}getFullBalance(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/full_balance`),method:"GET"});return new te(n)})}getStakedBalance(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/staked_balance`),method:"GET"});return new te(n)})}getUnstakedFinalizableBalance(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/unstaked_finalizable_balance`),method:"GET"});return new te(n)})}getUnstakedFrozenBalance(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/unstaked_frozen_balance`),method:"GET"});return new te(n)})}getUnstakeRequests(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/unstake_requests`),method:"GET"});return n===null?null:{finalizable:n.finalizable.map(o=>{var{amount:a}=o,s=to(o,["amount"]);const c=Yi({amount:a},["amount"]);return Object.assign(Object.assign({},s),{amount:c.amount})}),unfinalizable:{delegate:n.unfinalizable.delegate,requests:n.unfinalizable.requests.map(({amount:o,cycle:a})=>{const s=Yi({amount:o},["amount"]);return{cycle:a,amount:s.amount}})}}})}getStorage(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.validateContract(t),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/storage`),method:"GET"})})}getScript(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.validateContract(t),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/script`),method:"GET"})})}getNormalizedScript(e){return ae(this,arguments,void 0,function*(t,i={unparsing_mode:"Readable"},{block:n}=ce){return this.validateContract(t),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${t}/script/normalized`),method:"POST"},i)})}getContract(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}`),method:"GET"});return Object.assign(Object.assign({},n),{balance:new te(n.balance)})})}getManagerKey(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.validateAddress(t),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/manager_key`),method:"GET"})})}getDelegate(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);let n;try{n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/delegate`),method:"GET"})}catch(o){if(o instanceof dn&&o.status===Eo.NOT_FOUND)n=null;else throw o}return n})}getBigMapExpr(e,t){return ae(this,arguments,void 0,function*(i,n,{block:o}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${o}/context/big_maps/${i}/${n}`),method:"GET"})})}getAllDelegates(){return ae(this,arguments,void 0,function*(e={},{block:t}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/context/delegates`),method:"GET",query:e})})}getDelegates(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/delegates/${t}`),method:"GET"}),o=Yi(n,["balance","full_balance","current_frozen_deposits","frozen_deposits","frozen_balance","frozen_deposits_limit","staking_balance","delegated_balance","voting_power","total_delegated_stake","staking_denominator"]);return n.frozen_balance_by_cycle?Object.assign(Object.assign(Object.assign({},n),o),{frozen_balance_by_cycle:n.frozen_balance_by_cycle.map(a=>{var{deposit:s,deposits:c,fees:u,rewards:p}=a,f=to(a,["deposit","deposits","fees","rewards"]);const l=Yi({deposit:s,deposits:c,fees:u,rewards:p},["deposit","deposits","fees","rewards"]);return Object.assign(Object.assign({},f),{deposit:l.deposit,deposits:l.deposits,fees:l.fees,rewards:l.rewards})})}):Object.assign(Object.assign({},n),o)})}getVotingInfo(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.validateAddress(t),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/delegates/${t}/voting_info`),method:"GET"})})}getConstants(){return ae(this,arguments,void 0,function*({block:e}=ce){const t=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/context/constants`),method:"GET"}),i=Yi(t,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement","minimal_block_delay","liquidity_baking_subsidy","cache_layout","baking_reward_fixed_portion","baking_reward_bonus_per_slot","endorsing_reward_per_slot","double_baking_punishment","delay_increment_per_round","tx_rollup_commitment_bond","vdf_difficulty","sc_rollup_stake_amount","minimal_stake"]);return Object.assign(Object.assign({},t),i)})}getBlock(){return ae(this,arguments,void 0,function*({block:e,version:t}=ce){const i={url:this.createURL(`/chains/${this.chain}/blocks/${e}`),method:"GET"};return t!==void 0&&(i.query={version:t}),yield this.httpBackend.createRequest(i)})}getBlockHeader(){return ae(this,arguments,void 0,function*({block:e}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/header`),method:"GET"})})}getBlockMetadata(){return ae(this,arguments,void 0,function*({block:e,version:t}=ce){const i={url:this.createURL(`/chains/${this.chain}/blocks/${e}/metadata`),method:"GET"};return t!==void 0&&(i.query={version:t}),yield this.httpBackend.createRequest(i)})}getBakingRights(){return ae(this,arguments,void 0,function*(e={},{block:t}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/helpers/baking_rights`),method:"GET",query:e})})}getAttestationRights(){return ae(this,arguments,void 0,function*(e={},{block:t}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/helpers/attestation_rights`),method:"GET",query:e})})}getBallotList(){return ae(this,arguments,void 0,function*({block:e}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballot_list`),method:"GET"})})}getBallots(){return ae(this,arguments,void 0,function*({block:e}=ce){const t=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballots`),method:"GET"});return Yi(t,["yay","nay","pass"])})}getCurrentProposal(){return ae(this,arguments,void 0,function*({block:e}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_proposal`),method:"GET"})})}getCurrentQuorum(){return ae(this,arguments,void 0,function*({block:e}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_quorum`),method:"GET"})})}getVotesListings(){return ae(this,arguments,void 0,function*({block:e}=ce){const t=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/listings`),method:"GET"});return t.map(i=>(i.voting_power&&(i.voting_power=new te(i.voting_power)),i)),t})}getProposals(){return ae(this,arguments,void 0,function*({block:e}=ce){const t=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/proposals`),method:"GET"});return t.map(i=>i[1]=new te(i[1])),t})}forgeOperations(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/helpers/forge/operations`),method:"POST"},t)})}injectOperation(e){return ae(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},e)})}preapplyOperations(e){return ae(this,arguments,void 0,function*(t,{block:i,version:n}=ce){const o={url:this.createURL(`/chains/${this.chain}/blocks/${i}/helpers/preapply/operations`),method:"POST"};return n!==void 0&&(o.query={version:n}),yield this.httpBackend.createRequest(o,t)})}getEntrypoints(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.validateContract(t),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/entrypoints`),method:"GET"})})}simulateOperation(e){return ae(this,arguments,void 0,function*(t,{block:i,version:n}=ce){const o={url:this.createURL(`/chains/${this.chain}/blocks/${i}/helpers/scripts/simulate_operation`),method:"POST"};return n!==void 0&&(o.query={version:n}),yield this.httpBackend.createRequest(o,t)})}runCode(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/helpers/scripts/run_code`),method:"POST"},t)})}runScriptView(e,t){return ae(this,void 0,void 0,function*(){var{unparsing_mode:i="Readable"}=e,n=to(e,["unparsing_mode"]),o=t===void 0?ce:t,a=o.block;return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${a}/helpers/scripts/run_script_view`),method:"POST"},Object.assign({unparsing_mode:i},n))})}runView(e,t){return ae(this,void 0,void 0,function*(){var{unparsing_mode:i="Readable"}=e,n=to(e,["unparsing_mode"]),o=t===void 0?ce:t,a=o.block;return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${a}/helpers/scripts/run_view`),method:"POST"},Object.assign({unparsing_mode:i},n))})}getChainId(){return ae(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/chain_id`),method:"GET"})})}packData(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/helpers/scripts/pack_data`),method:"POST"},t),{gas:o}=n,a=to(n,["gas"]);let s=o;const c=new te(o||"");return c.isNaN()||(s=c),Object.assign({gas:s},a)})}getRpcUrl(){return this.url}getCurrentPeriod(){return ae(this,arguments,void 0,function*({block:e}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_period`),method:"GET"})})}getSuccessorPeriod(){return ae(this,arguments,void 0,function*({block:e}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/successor_period`),method:"GET"})})}getSaplingDiffById(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/sapling/${t}/get_diff`),method:"GET"})})}getSaplingDiffByContract(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/single_sapling_get_diff`),method:"GET"})})}getProtocols(){return ae(this,arguments,void 0,function*({block:e}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/protocols`),method:"GET"})})}getProtocolActivations(){return ae(this,arguments,void 0,function*(e=""){if(e){const t=Qb(e);if(t!==se.VALID)throw new ev(e,t)}return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/protocols/${e}`),method:"GET"})})}getStorageUsedSpace(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/storage/used_space`),method:"GET"})})}getStoragePaidSpace(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/storage/paid_space`),method:"GET"})})}getTicketBalance(e,t){return ae(this,arguments,void 0,function*(i,n,{block:o}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${o}/context/contracts/${i}/ticket_balance`),method:"POST"},n)})}getAllTicketBalances(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${t}/all_ticket_balances`),method:"GET"})})}getAdaptiveIssuanceLaunchCycle(){return ae(this,arguments,void 0,function*({block:e}=ce){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/context/adaptive_issuance_launch_cycle`),method:"GET"})})}getPendingOperations(){return ae(this,arguments,void 0,function*(e={}){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/mempool/pending_operations`),method:"GET",query:e})})}getActiveStakingParameters(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/delegates/${t}/active_staking_parameters`),method:"GET"})})}getPendingStakingParameters(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/delegates/${t}/pending_staking_parameters`),method:"GET"})})}getDestinationIndex(e){return ae(this,arguments,void 0,function*(t,{block:i}=ce){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/destination/${t}/index`),method:"GET"})})}}var ol=function(r,e){return ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},ol(r,e)};function Br(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ol(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function xv(r,e,t,i){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(p){try{u(i.next(p))}catch(f){a(f)}}function c(p){try{u(i.throw(p))}catch(f){a(f)}}function u(p){p.done?o(p.value):n(p.value).then(s,c)}u((i=i.apply(r,e||[])).next())})}function F0(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(p){return c([u,p])}}function c(u){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(i=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,n=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(p){u=[6,p],n=0}finally{i=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Dn(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pn(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,o=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o}function gn(r,e,t){if(t||arguments.length===2)for(var i=0,n=e.length,o;i<n;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return r.concat(o||Array.prototype.slice.call(e))}function Nn(r){return this instanceof Nn?(this.v=r,this):new Nn(r)}function Sv(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,o=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),n[Symbol.asyncIterator]=function(){return this},n;function a(d){return function(g){return Promise.resolve(g).then(d,f)}}function s(d,g){i[d]&&(n[d]=function(b){return new Promise(function(x,_){o.push([d,b,x,_])>1||c(d,b)})},g&&(n[d]=g(n[d])))}function c(d,g){try{u(i[d](g))}catch(b){l(o[0][3],b)}}function u(d){d.value instanceof Nn?Promise.resolve(d.value.v).then(p,f):l(o[0][2],d)}function p(d){c("next",d)}function f(d){c("throw",d)}function l(d,g){d(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Av(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Dn=="function"?Dn(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=r[o]&&function(a){return new Promise(function(s,c){a=r[o](a),n(s,c,a.done,a.value)})}}function n(o,a,s,c){Promise.resolve(c).then(function(u){o({value:u,done:s})},a)}}function Xe(r){return typeof r=="function"}function Qa(r){var e=function(i){Error.call(i),i.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ys=Qa(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(i,n){return n+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Aa(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var zo=(function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,i,n,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=Dn(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.remove(this)}}catch(b){e={error:b}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else a.remove(this);var p=this.initialTeardown;if(Xe(p))try{p()}catch(b){o=b instanceof Ys?b.errors:[b]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var l=Dn(f),d=l.next();!d.done;d=l.next()){var g=d.value;try{yh(g)}catch(b){o=o??[],b instanceof Ys?o=gn(gn([],pn(o)),pn(b.errors)):o.push(b)}}}catch(b){i={error:b}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}}if(o)throw new Ys(o)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)yh(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Aa(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&Aa(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=(function(){var e=new r;return e.closed=!0,e})(),r})(),G0=zo.EMPTY;function K0(r){return r instanceof zo||r&&"closed"in r&&Xe(r.remove)&&Xe(r.add)&&Xe(r.unsubscribe)}function yh(r){Xe(r)?r():r.unsubscribe()}var Rv={Promise:void 0},Ov={setTimeout:function(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return setTimeout.apply(void 0,gn([r,e],pn(t)))},clearTimeout:function(r){return clearTimeout(r)},delegate:void 0};function $0(r){Ov.setTimeout(function(){throw r})}function Ra(){}function ba(r){r()}var zl=(function(r){Br(e,r);function e(t){var i=r.call(this)||this;return i.isStopped=!1,t?(i.destination=t,K0(t)&&t.add(i)):i.destination=kv,i}return e.create=function(t,i,n){return new xo(t,i,n)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(zo),Pv=(function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(i){Wo(i)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(i){Wo(i)}else Wo(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Wo(t)}},r})(),xo=(function(r){Br(e,r);function e(t,i,n){var o=r.call(this)||this,a;return Xe(t)||!t?a={next:t??void 0,error:i??void 0,complete:n??void 0}:a=t,o.destination=new Pv(a),o}return e})(zl);function Wo(r){$0(r)}function Tv(r){throw r}var kv={closed:!0,next:Ra,error:Tv,complete:Ra},Hl=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Ki(r){return r}function Iv(r){return r.length===0?Ki:r.length===1?r[0]:function(t){return r.reduce(function(i,n){return n(i)},t)}}var it=(function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,i){var n=this,o=Nv(e)?e:new xo(e,t,i);return ba(function(){var a=n,s=a.operator,c=a.source;o.add(s?s.call(o,c):c?n._subscribe(o):n._trySubscribe(o))}),o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var i=this;return t=_h(t),new t(function(n,o){var a=new xo({next:function(s){try{e(s)}catch(c){o(c),a.unsubscribe()}},error:o,complete:n});i.subscribe(a)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[Hl]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Iv(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=_h(e),new e(function(i,n){var o;t.subscribe(function(a){return o=a},function(a){return n(a)},function(){return i(o)})})},r.create=function(e){return new r(e)},r})();function _h(r){var e;return(e=r??Rv.Promise)!==null&&e!==void 0?e:Promise}function Lv(r){return r&&Xe(r.next)&&Xe(r.error)&&Xe(r.complete)}function Nv(r){return r&&r instanceof zl||Lv(r)&&K0(r)}function Bv(r){return Xe(r?.lift)}function Bt(r){return function(e){if(Bv(e))return e.lift(function(t){try{return r(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function It(r,e,t,i,n){return new Mv(r,e,t,i,n)}var Mv=(function(r){Br(e,r);function e(t,i,n,o,a,s){var c=r.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=i?function(u){try{i(u)}catch(p){t.error(p)}}:r.prototype._next,c._error=o?function(u){try{o(u)}catch(p){t.error(p)}finally{this.unsubscribe()}}:r.prototype._error,c._complete=n?function(){try{n()}catch(u){t.error(u)}finally{this.unsubscribe()}}:r.prototype._complete,c}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;r.prototype.unsubscribe.call(this),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e})(zl),jv=Qa(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ho=(function(r){Br(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var i=new wh(this,this);return i.operator=t,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new jv},e.prototype.next=function(t){var i=this;ba(function(){var n,o;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var a=Dn(i.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(t)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}})},e.prototype.error=function(t){var i=this;ba(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=t;for(var n=i.observers;n.length;)n.shift().error(t)}})},e.prototype.complete=function(){var t=this;ba(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var i=t.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var i=this,n=this,o=n.hasError,a=n.isStopped,s=n.observers;return o||a?G0:(this.currentObservers=null,s.push(t),new zo(function(){i.currentObservers=null,Aa(s,t)}))},e.prototype._checkFinalizedStatuses=function(t){var i=this,n=i.hasError,o=i.thrownError,a=i.isStopped;n?t.error(o):a&&t.complete()},e.prototype.asObservable=function(){var t=new it;return t.source=this,t},e.create=function(t,i){return new wh(t,i)},e})(it),wh=(function(r){Br(e,r);function e(t,i){var n=r.call(this)||this;return n.destination=t,n.source=i,n}return e.prototype.next=function(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.next)===null||n===void 0||n.call(i,t)},e.prototype.error=function(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.error)===null||n===void 0||n.call(i,t)},e.prototype.complete=function(){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||i===void 0||i.call(t)},e.prototype._subscribe=function(t){var i,n;return(n=(i=this.source)===null||i===void 0?void 0:i.subscribe(t))!==null&&n!==void 0?n:G0},e})(Ho),es=(function(r){Br(e,r);function e(t){var i=r.call(this)||this;return i._value=t,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var i=r.prototype._subscribe.call(this,t);return!i.closed&&t.next(this._value),i},e.prototype.getValue=function(){var t=this,i=t.hasError,n=t.thrownError,o=t._value;if(i)throw n;return this._throwIfClosed(),o},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e})(Ho),Dl={now:function(){return(Dl.delegate||Date).now()},delegate:void 0},en=(function(r){Br(e,r);function e(t,i,n){t===void 0&&(t=1/0),i===void 0&&(i=1/0),n===void 0&&(n=Dl);var o=r.call(this)||this;return o._bufferSize=t,o._windowTime=i,o._timestampProvider=n,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=i===1/0,o._bufferSize=Math.max(1,t),o._windowTime=Math.max(1,i),o}return e.prototype.next=function(t){var i=this,n=i.isStopped,o=i._buffer,a=i._infiniteTimeWindow,s=i._timestampProvider,c=i._windowTime;n||(o.push(t),!a&&o.push(s.now()+c)),this._trimBuffer(),r.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var i=this._innerSubscribe(t),n=this,o=n._infiniteTimeWindow,a=n._buffer,s=a.slice(),c=0;c<s.length&&!t.closed;c+=o?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),i},e.prototype._trimBuffer=function(){var t=this,i=t._bufferSize,n=t._timestampProvider,o=t._buffer,a=t._infiniteTimeWindow,s=(a?1:2)*i;if(i<1/0&&s<o.length&&o.splice(0,o.length-s),!a){for(var c=n.now(),u=0,p=1;p<o.length&&o[p]<=c;p+=2)u=p;u&&o.splice(0,u+1)}},e})(Ho),Cv=(function(r){Br(e,r);function e(t,i){return r.call(this)||this}return e.prototype.schedule=function(t,i){return this},e})(zo),Eh={setInterval:function(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return setInterval.apply(void 0,gn([r,e],pn(t)))},clearInterval:function(r){return clearInterval(r)},delegate:void 0},zv=(function(r){Br(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n.pending=!1,n}return e.prototype.schedule=function(t,i){var n;if(i===void 0&&(i=0),this.closed)return this;this.state=t;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,i)),this.pending=!0,this.delay=i,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(a,this.id,i),this},e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),Eh.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,i,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return i;i!=null&&Eh.clearInterval(i)},e.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,i);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,i){var n=!1,o;try{this.work(t)}catch(a){n=!0,o=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,i=t.id,n=t.scheduler,o=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Aa(o,this),i!=null&&(this.id=this.recycleAsyncId(n,i,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},e})(Cv),xh=(function(){function r(e,t){t===void 0&&(t=r.now),this.schedulerActionCtor=e,this.now=t}return r.prototype.schedule=function(e,t,i){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(i,t)},r.now=Dl.now,r})(),Hv=(function(r){Br(e,r);function e(t,i){i===void 0&&(i=xh.now);var n=r.call(this,t,i)||this;return n.actions=[],n._active=!1,n}return e.prototype.flush=function(t){var i=this.actions;if(this._active){i.push(t);return}var n;this._active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=i.shift());if(this._active=!1,n){for(;t=i.shift();)t.unsubscribe();throw n}},e})(xh),V0=new Hv(zv),Dv=V0,Ul=new it(function(r){return r.complete()});function W0(r){return r&&Xe(r.schedule)}function Z0(r){return r[r.length-1]}function Uv(r){return Xe(Z0(r))?r.pop():void 0}function ts(r){return W0(Z0(r))?r.pop():void 0}var J0=(function(r){return r&&typeof r.length=="number"&&typeof r!="function"});function Y0(r){return Xe(r?.then)}function X0(r){return Xe(r[Hl])}function Q0(r){return Symbol.asyncIterator&&Xe(r?.[Symbol.asyncIterator])}function eg(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function qv(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tg=qv();function rg(r){return Xe(r?.[tg])}function ig(r){return Sv(this,arguments,function(){var t,i,n,o;return F0(this,function(a){switch(a.label){case 0:t=r.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Nn(t.read())];case 3:return i=a.sent(),n=i.value,o=i.done,o?[4,Nn(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Nn(n)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function ng(r){return Xe(r?.getReader)}function or(r){if(r instanceof it)return r;if(r!=null){if(X0(r))return Fv(r);if(J0(r))return Gv(r);if(Y0(r))return Kv(r);if(Q0(r))return og(r);if(rg(r))return $v(r);if(ng(r))return Vv(r)}throw eg(r)}function Fv(r){return new it(function(e){var t=r[Hl]();if(Xe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gv(r){return new it(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function Kv(r){return new it(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,$0)})}function $v(r){return new it(function(e){var t,i;try{for(var n=Dn(r),o=n.next();!o.done;o=n.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(s){t={error:s}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}e.complete()})}function og(r){return new it(function(e){Wv(r,e).catch(function(t){return e.error(t)})})}function Vv(r){return og(ig(r))}function Wv(r,e){var t,i,n,o;return xv(this,void 0,void 0,function(){var a,s;return F0(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=Av(r),c.label=1;case 1:return[4,t.next()];case 2:if(i=c.sent(),!!i.done)return[3,4];if(a=i.value,e.next(a),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),n={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),i&&!i.done&&(o=t.return)?[4,o.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function hi(r,e,t,i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var o=e.schedule(function(){t(),n?r.add(this.schedule(null,i)):this.unsubscribe()},i);if(r.add(o),!n)return o}function ag(r,e){return e===void 0&&(e=0),Bt(function(t,i){t.subscribe(It(i,function(n){return hi(i,r,function(){return i.next(n)},e)},function(){return hi(i,r,function(){return i.complete()},e)},function(n){return hi(i,r,function(){return i.error(n)},e)}))})}function sg(r,e){return e===void 0&&(e=0),Bt(function(t,i){i.add(r.schedule(function(){return t.subscribe(i)},e))})}function Zv(r,e){return or(r).pipe(sg(e),ag(e))}function Jv(r,e){return or(r).pipe(sg(e),ag(e))}function Yv(r,e){return new it(function(t){var i=0;return e.schedule(function(){i===r.length?t.complete():(t.next(r[i++]),t.closed||this.schedule())})})}function Xv(r,e){return new it(function(t){var i;return hi(t,e,function(){i=r[tg](),hi(t,e,function(){var n,o,a;try{n=i.next(),o=n.value,a=n.done}catch(s){t.error(s);return}a?t.complete():t.next(o)},0,!0)}),function(){return Xe(i?.return)&&i.return()}})}function cg(r,e){if(!r)throw new Error("Iterable cannot be null");return new it(function(t){hi(t,e,function(){var i=r[Symbol.asyncIterator]();hi(t,e,function(){i.next().then(function(n){n.done?t.complete():t.next(n.value)})},0,!0)})})}function Qv(r,e){return cg(ig(r),e)}function ey(r,e){if(r!=null){if(X0(r))return Zv(r,e);if(J0(r))return Yv(r,e);if(Y0(r))return Jv(r,e);if(Q0(r))return cg(r,e);if(rg(r))return Xv(r,e);if(ng(r))return Qv(r,e)}throw eg(r)}function $i(r,e){return e?ey(r,e):or(r)}function rs(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=ts(r);return $i(r,t)}function ug(r,e){var t=Xe(r)?r:function(){return r},i=function(n){return n.error(t())};return new it(i)}var lg=Qa(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}});function fg(r){return r instanceof Date&&!isNaN(r)}var ty=Qa(function(r){return function(t){t===void 0&&(t=null),r(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function hg(r,e){var t=fg(r)?{first:r}:typeof r=="number"?{each:r}:r,i=t.first,n=t.each,o=t.with,a=o===void 0?ry:o,s=t.scheduler,c=s===void 0?V0:s,u=t.meta,p=u===void 0?null:u;if(i==null&&n==null)throw new TypeError("No timeout provided.");return Bt(function(f,l){var d,g,b=null,x=0,_=function(E){g=hi(l,c,function(){try{d.unsubscribe(),or(a({meta:p,lastValue:b,seen:x})).subscribe(l)}catch(O){l.error(O)}},E)};d=f.subscribe(It(l,function(E){g?.unsubscribe(),x++,l.next(b=E),n>0&&_(n)},void 0,void 0,function(){g?.closed||g?.unsubscribe(),b=null})),!x&&_(i!=null?typeof i=="number"?i:+i-c.now():n)})}function ry(r){throw new ty(r)}function ji(r,e){return Bt(function(t,i){var n=0;t.subscribe(It(i,function(o){i.next(r.call(e,o,n++))}))})}var iy=Array.isArray;function ny(r,e){return iy(e)?r.apply(void 0,gn([],pn(e))):r(e)}function oy(r){return ji(function(e){return ny(r,e)})}var ay=Array.isArray,sy=Object.getPrototypeOf,cy=Object.prototype,uy=Object.keys;function ly(r){if(r.length===1){var e=r[0];if(ay(e))return{args:e,keys:null};if(fy(e)){var t=uy(e);return{args:t.map(function(i){return e[i]}),keys:t}}}return{args:r,keys:null}}function fy(r){return r&&typeof r=="object"&&sy(r)===cy}function hy(r,e){return r.reduce(function(t,i,n){return t[i]=e[n],t},{})}function Sh(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=ts(r),i=Uv(r),n=ly(r),o=n.args,a=n.keys;if(o.length===0)return $i([],t);var s=new it(dy(o,t,a?function(c){return hy(a,c)}:Ki));return i?s.pipe(oy(i)):s}function dy(r,e,t){return t===void 0&&(t=Ki),function(i){Ah(e,function(){for(var n=r.length,o=new Array(n),a=n,s=n,c=function(p){Ah(e,function(){var f=$i(r[p],e),l=!1;f.subscribe(It(i,function(d){o[p]=d,l||(l=!0,s--),s||i.next(t(o.slice()))},function(){--a||i.complete()}))},i)},u=0;u<n;u++)c(u)},i)}}function Ah(r,e,t){r?hi(t,r,e):e()}function py(r,e,t,i,n,o,a,s){var c=[],u=0,p=0,f=!1,l=function(){f&&!c.length&&!u&&e.complete()},d=function(b){return u<i?g(b):c.push(b)},g=function(b){u++;var x=!1;or(t(b,p++)).subscribe(It(e,function(_){e.next(_)},function(){x=!0},void 0,function(){if(x)try{u--;for(var _=function(){var E=c.shift();a||g(E)};c.length&&u<i;)_();l()}catch(E){e.error(E)}}))};return r.subscribe(It(e,d,function(){f=!0,l()})),function(){}}function So(r,e,t){return t===void 0&&(t=1/0),Xe(e)?So(function(i,n){return ji(function(o,a){return e(i,o,n,a)})(or(r(i,n)))},t):(typeof e=="number"&&(t=e),Bt(function(i,n){return py(i,n,r,t)}))}function gy(r){return So(Ki,r)}function my(){return gy(1)}function Oa(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return my()($i(r,ts(r)))}function dg(r){return new it(function(e){or(r()).subscribe(e)})}function al(r,e,t){r===void 0&&(r=0),t===void 0&&(t=Dv);var i=-1;return e!=null&&(W0(e)?t=e:i=e),new it(function(n){var o=fg(r)?+r-t.now():r;o<0&&(o=0);var a=0;return t.schedule(function(){n.closed||(n.next(a++),0<=i?this.schedule(void 0,i):n.complete())},o)})}var by=new it(Ra);function sl(r,e){return Bt(function(t,i){var n=0;t.subscribe(It(i,function(o){return r.call(e,o,n++)&&i.next(o)}))})}function ql(r,e,t){if(e==null&&(e=r,r=0),e<=0)return Ul;var i=e+r;return new it(function(n){for(var o=r;o<i&&!n.closed;)n.next(o++);n.complete()})}function is(r){return Bt(function(e,t){var i=null,n=!1,o;i=e.subscribe(It(t,void 0,void 0,function(a){o=or(r(a,is(r)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):n=!0})),n&&(i.unsubscribe(),i=null,o.subscribe(t))})}function Do(r,e){return Xe(e)?So(r,e,1):So(r,1)}function vy(r){return Bt(function(e,t){var i=!1;e.subscribe(It(t,function(n){i=!0,t.next(n)},function(){i||t.next(r),t.complete()}))})}function yy(r){return r<=0?function(){return Ul}:Bt(function(e,t){var i=0;e.subscribe(It(t,function(n){++i<=r&&(t.next(n),r<=i&&t.complete())}))})}function pg(r,e){return e===void 0&&(e=Ki),r=r??_y,Bt(function(t,i){var n,o=!0;t.subscribe(It(i,function(a){var s=e(a);(o||!r(n,s))&&(o=!1,n=s,i.next(a))}))})}function _y(r,e){return r===e}function wy(r,e){return pg(function(t,i){return t[r]===i[r]})}function Ey(r){return r===void 0&&(r=xy),Bt(function(e,t){var i=!1;e.subscribe(It(t,function(n){i=!0,t.next(n)},function(){return i?t.complete():t.error(r())}))})}function xy(){return new lg}function gg(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return Oa(t,rs.apply(void 0,gn([],pn(r))))}}function ri(r,e){var t=arguments.length>=2;return function(i){return i.pipe(Ki,yy(1),t?vy(e):Ey(function(){return new lg}))}}function mg(r){r===void 0&&(r=1/0);var e;r&&typeof r=="object"?e=r:e={count:r};var t=e.count,i=t===void 0?1/0:t,n=e.delay,o=e.resetOnSuccess,a=o===void 0?!1:o;return i<=0?Ki:Bt(function(s,c){var u=0,p,f=function(){var l=!1;p=s.subscribe(It(c,function(d){a&&(u=0),c.next(d)},void 0,function(d){if(u++<i){var g=function(){p?(p.unsubscribe(),p=null,f()):l=!0};if(n!=null){var b=typeof n=="number"?al(n):or(n(d,u)),x=It(c,function(){x.unsubscribe(),g()},function(){c.complete()});b.subscribe(x)}else g()}else c.error(d)})),l&&(p.unsubscribe(),p=null,f())};f()})}function Ao(r){r===void 0&&(r={});var e=r.connector,t=e===void 0?function(){return new Ho}:e,i=r.resetOnError,n=i===void 0?!0:i,o=r.resetOnComplete,a=o===void 0?!0:o,s=r.resetOnRefCountZero,c=s===void 0?!0:s;return function(u){var p,f,l,d=0,g=!1,b=!1,x=function(){f?.unsubscribe(),f=void 0},_=function(){x(),p=l=void 0,g=b=!1},E=function(){var O=p;_(),O?.unsubscribe()};return Bt(function(O,A){d++,!b&&!g&&x();var B=l=l??t();A.add(function(){d--,d===0&&!b&&!g&&(f=Xs(E,c))}),B.subscribe(A),!p&&d>0&&(p=new xo({next:function(N){return B.next(N)},error:function(N){b=!0,x(),f=Xs(_,n,N),B.error(N)},complete:function(){g=!0,x(),f=Xs(_,a),B.complete()}}),or(O).subscribe(p))})(u)}}function Xs(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];if(e===!0){r();return}if(e!==!1){var n=new xo({next:function(){n.unsubscribe(),r()}});return or(e.apply(void 0,gn([],pn(t)))).subscribe(n)}}function Rh(r,e,t){var i,n,o,a,s=!1;return r&&typeof r=="object"?(i=r.bufferSize,a=i===void 0?1/0:i,n=r.windowTime,e=n===void 0?1/0:n,o=r.refCount,s=o===void 0?!1:o,t=r.scheduler):a=r??1/0,Ao({connector:function(){return new en(a,e,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Sy(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=ts(r);return Bt(function(i,n){(t?Oa(r,i,t):Oa(r,i)).subscribe(n)})}function si(r,e){return Bt(function(t,i){var n=null,o=0,a=!1,s=function(){return a&&!n&&i.complete()};t.subscribe(It(i,function(c){n?.unsubscribe();var u=0,p=o++;or(r(c,p)).subscribe(n=It(i,function(f){return i.next(e?e(c,f,p,u++):f)},function(){n=null,s()}))},function(){a=!0,s()}))})}function Ay(r){return Bt(function(e,t){or(r).subscribe(It(t,function(){return t.complete()},Ra)),!t.closed&&e.subscribe(t)})}function Ry(r,e){return Bt(function(t,i){var n=0;t.subscribe(It(i,function(o){var a=r(o,n++);(a||e)&&i.next(o),!a&&i.complete()}))})}function Pa(r,e,t){var i=Xe(r)||e||t?{next:r,error:e,complete:t}:r;return i?Bt(function(n,o){var a;(a=i.subscribe)===null||a===void 0||a.call(i);var s=!0;n.subscribe(It(o,function(c){var u;(u=i.next)===null||u===void 0||u.call(i,c),o.next(c)},function(){var c;s=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},function(c){var u;s=!1,(u=i.error)===null||u===void 0||u.call(i,c),o.error(c)},function(){var c,u;s&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):Ki}var Qs,Oh;function Oy(){return Oh||(Oh=1,Qs=function(r,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,i=e.cmp&&(function(o){return function(a){return function(s,c){var u={key:s,value:a[s]},p={key:c,value:a[c]};return o(u,p)}}})(e.cmp),n=[];return(function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var s,c;if(Array.isArray(a)){for(c="[",s=0;s<a.length;s++)s&&(c+=","),c+=o(a[s])||"null";return c+"]"}if(a===null)return"null";if(n.indexOf(a)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=n.push(a)-1,p=Object.keys(a).sort(i&&i(a));for(c="",s=0;s<p.length;s++){var f=p[s],l=o(a[f]);l&&(c&&(c+=","),c+=JSON.stringify(f)+":"+l)}return n.splice(u,1),"{"+c+"}"}})(r)}),Qs}var Py=Oy();const Ty=Nl(Py);var Wi={},ec={},tc={},Ph;function Th(){return Ph||(Ph=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=I0(),t=vn();r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function i(A){const B=new Float64Array(16);if(A)for(let N=0;N<A.length;N++)B[N]=A[N];return B}const n=new Uint8Array(32);n[0]=9;const o=i([56129,1]);function a(A){let B=1;for(let N=0;N<16;N++){let v=A[N]+B+65535;B=Math.floor(v/65536),A[N]=v-B*65536}A[0]+=B-1+37*(B-1)}function s(A,B,N){const v=~(N-1);for(let j=0;j<16;j++){const D=v&(A[j]^B[j]);A[j]^=D,B[j]^=D}}function c(A,B){const N=i(),v=i();for(let j=0;j<16;j++)v[j]=B[j];a(v),a(v),a(v);for(let j=0;j<2;j++){N[0]=v[0]-65517;for(let R=1;R<15;R++)N[R]=v[R]-65535-(N[R-1]>>16&1),N[R-1]&=65535;N[15]=v[15]-32767-(N[14]>>16&1);const D=N[15]>>16&1;N[14]&=65535,s(v,N,1-D)}for(let j=0;j<16;j++)A[2*j]=v[j]&255,A[2*j+1]=v[j]>>8}function u(A,B){for(let N=0;N<16;N++)A[N]=B[2*N]+(B[2*N+1]<<8);A[15]&=32767}function p(A,B,N){for(let v=0;v<16;v++)A[v]=B[v]+N[v]}function f(A,B,N){for(let v=0;v<16;v++)A[v]=B[v]-N[v]}function l(A,B,N){let v,j,D=0,R=0,M=0,q=0,P=0,h=0,y=0,m=0,S=0,T=0,k=0,U=0,I=0,w=0,L=0,J=0,Y=0,C=0,K=0,$=0,Z=0,Q=0,z=0,H=0,W=0,ee=0,ne=0,ie=0,oe=0,Ee=0,jt=0,fe=N[0],re=N[1],ke=N[2],he=N[3],ge=N[4],Je=N[5],ve=N[6],be=N[7],Fe=N[8],Se=N[9],Ae=N[10],St=N[11],Re=N[12],Oe=N[13],At=N[14],Pe=N[15];v=B[0],D+=v*fe,R+=v*re,M+=v*ke,q+=v*he,P+=v*ge,h+=v*Je,y+=v*ve,m+=v*be,S+=v*Fe,T+=v*Se,k+=v*Ae,U+=v*St,I+=v*Re,w+=v*Oe,L+=v*At,J+=v*Pe,v=B[1],R+=v*fe,M+=v*re,q+=v*ke,P+=v*he,h+=v*ge,y+=v*Je,m+=v*ve,S+=v*be,T+=v*Fe,k+=v*Se,U+=v*Ae,I+=v*St,w+=v*Re,L+=v*Oe,J+=v*At,Y+=v*Pe,v=B[2],M+=v*fe,q+=v*re,P+=v*ke,h+=v*he,y+=v*ge,m+=v*Je,S+=v*ve,T+=v*be,k+=v*Fe,U+=v*Se,I+=v*Ae,w+=v*St,L+=v*Re,J+=v*Oe,Y+=v*At,C+=v*Pe,v=B[3],q+=v*fe,P+=v*re,h+=v*ke,y+=v*he,m+=v*ge,S+=v*Je,T+=v*ve,k+=v*be,U+=v*Fe,I+=v*Se,w+=v*Ae,L+=v*St,J+=v*Re,Y+=v*Oe,C+=v*At,K+=v*Pe,v=B[4],P+=v*fe,h+=v*re,y+=v*ke,m+=v*he,S+=v*ge,T+=v*Je,k+=v*ve,U+=v*be,I+=v*Fe,w+=v*Se,L+=v*Ae,J+=v*St,Y+=v*Re,C+=v*Oe,K+=v*At,$+=v*Pe,v=B[5],h+=v*fe,y+=v*re,m+=v*ke,S+=v*he,T+=v*ge,k+=v*Je,U+=v*ve,I+=v*be,w+=v*Fe,L+=v*Se,J+=v*Ae,Y+=v*St,C+=v*Re,K+=v*Oe,$+=v*At,Z+=v*Pe,v=B[6],y+=v*fe,m+=v*re,S+=v*ke,T+=v*he,k+=v*ge,U+=v*Je,I+=v*ve,w+=v*be,L+=v*Fe,J+=v*Se,Y+=v*Ae,C+=v*St,K+=v*Re,$+=v*Oe,Z+=v*At,Q+=v*Pe,v=B[7],m+=v*fe,S+=v*re,T+=v*ke,k+=v*he,U+=v*ge,I+=v*Je,w+=v*ve,L+=v*be,J+=v*Fe,Y+=v*Se,C+=v*Ae,K+=v*St,$+=v*Re,Z+=v*Oe,Q+=v*At,z+=v*Pe,v=B[8],S+=v*fe,T+=v*re,k+=v*ke,U+=v*he,I+=v*ge,w+=v*Je,L+=v*ve,J+=v*be,Y+=v*Fe,C+=v*Se,K+=v*Ae,$+=v*St,Z+=v*Re,Q+=v*Oe,z+=v*At,H+=v*Pe,v=B[9],T+=v*fe,k+=v*re,U+=v*ke,I+=v*he,w+=v*ge,L+=v*Je,J+=v*ve,Y+=v*be,C+=v*Fe,K+=v*Se,$+=v*Ae,Z+=v*St,Q+=v*Re,z+=v*Oe,H+=v*At,W+=v*Pe,v=B[10],k+=v*fe,U+=v*re,I+=v*ke,w+=v*he,L+=v*ge,J+=v*Je,Y+=v*ve,C+=v*be,K+=v*Fe,$+=v*Se,Z+=v*Ae,Q+=v*St,z+=v*Re,H+=v*Oe,W+=v*At,ee+=v*Pe,v=B[11],U+=v*fe,I+=v*re,w+=v*ke,L+=v*he,J+=v*ge,Y+=v*Je,C+=v*ve,K+=v*be,$+=v*Fe,Z+=v*Se,Q+=v*Ae,z+=v*St,H+=v*Re,W+=v*Oe,ee+=v*At,ne+=v*Pe,v=B[12],I+=v*fe,w+=v*re,L+=v*ke,J+=v*he,Y+=v*ge,C+=v*Je,K+=v*ve,$+=v*be,Z+=v*Fe,Q+=v*Se,z+=v*Ae,H+=v*St,W+=v*Re,ee+=v*Oe,ne+=v*At,ie+=v*Pe,v=B[13],w+=v*fe,L+=v*re,J+=v*ke,Y+=v*he,C+=v*ge,K+=v*Je,$+=v*ve,Z+=v*be,Q+=v*Fe,z+=v*Se,H+=v*Ae,W+=v*St,ee+=v*Re,ne+=v*Oe,ie+=v*At,oe+=v*Pe,v=B[14],L+=v*fe,J+=v*re,Y+=v*ke,C+=v*he,K+=v*ge,$+=v*Je,Z+=v*ve,Q+=v*be,z+=v*Fe,H+=v*Se,W+=v*Ae,ee+=v*St,ne+=v*Re,ie+=v*Oe,oe+=v*At,Ee+=v*Pe,v=B[15],J+=v*fe,Y+=v*re,C+=v*ke,K+=v*he,$+=v*ge,Z+=v*Je,Q+=v*ve,z+=v*be,H+=v*Fe,W+=v*Se,ee+=v*Ae,ne+=v*St,ie+=v*Re,oe+=v*Oe,Ee+=v*At,jt+=v*Pe,D+=38*Y,R+=38*C,M+=38*K,q+=38*$,P+=38*Z,h+=38*Q,y+=38*z,m+=38*H,S+=38*W,T+=38*ee,k+=38*ne,U+=38*ie,I+=38*oe,w+=38*Ee,L+=38*jt,j=1,v=D+j+65535,j=Math.floor(v/65536),D=v-j*65536,v=R+j+65535,j=Math.floor(v/65536),R=v-j*65536,v=M+j+65535,j=Math.floor(v/65536),M=v-j*65536,v=q+j+65535,j=Math.floor(v/65536),q=v-j*65536,v=P+j+65535,j=Math.floor(v/65536),P=v-j*65536,v=h+j+65535,j=Math.floor(v/65536),h=v-j*65536,v=y+j+65535,j=Math.floor(v/65536),y=v-j*65536,v=m+j+65535,j=Math.floor(v/65536),m=v-j*65536,v=S+j+65535,j=Math.floor(v/65536),S=v-j*65536,v=T+j+65535,j=Math.floor(v/65536),T=v-j*65536,v=k+j+65535,j=Math.floor(v/65536),k=v-j*65536,v=U+j+65535,j=Math.floor(v/65536),U=v-j*65536,v=I+j+65535,j=Math.floor(v/65536),I=v-j*65536,v=w+j+65535,j=Math.floor(v/65536),w=v-j*65536,v=L+j+65535,j=Math.floor(v/65536),L=v-j*65536,v=J+j+65535,j=Math.floor(v/65536),J=v-j*65536,D+=j-1+37*(j-1),j=1,v=D+j+65535,j=Math.floor(v/65536),D=v-j*65536,v=R+j+65535,j=Math.floor(v/65536),R=v-j*65536,v=M+j+65535,j=Math.floor(v/65536),M=v-j*65536,v=q+j+65535,j=Math.floor(v/65536),q=v-j*65536,v=P+j+65535,j=Math.floor(v/65536),P=v-j*65536,v=h+j+65535,j=Math.floor(v/65536),h=v-j*65536,v=y+j+65535,j=Math.floor(v/65536),y=v-j*65536,v=m+j+65535,j=Math.floor(v/65536),m=v-j*65536,v=S+j+65535,j=Math.floor(v/65536),S=v-j*65536,v=T+j+65535,j=Math.floor(v/65536),T=v-j*65536,v=k+j+65535,j=Math.floor(v/65536),k=v-j*65536,v=U+j+65535,j=Math.floor(v/65536),U=v-j*65536,v=I+j+65535,j=Math.floor(v/65536),I=v-j*65536,v=w+j+65535,j=Math.floor(v/65536),w=v-j*65536,v=L+j+65535,j=Math.floor(v/65536),L=v-j*65536,v=J+j+65535,j=Math.floor(v/65536),J=v-j*65536,D+=j-1+37*(j-1),A[0]=D,A[1]=R,A[2]=M,A[3]=q,A[4]=P,A[5]=h,A[6]=y,A[7]=m,A[8]=S,A[9]=T,A[10]=k,A[11]=U,A[12]=I,A[13]=w,A[14]=L,A[15]=J}function d(A,B){l(A,B,B)}function g(A,B){const N=i();for(let v=0;v<16;v++)N[v]=B[v];for(let v=253;v>=0;v--)d(N,N),v!==2&&v!==4&&l(N,N,B);for(let v=0;v<16;v++)A[v]=N[v]}function b(A,B){const N=new Uint8Array(32),v=new Float64Array(80),j=i(),D=i(),R=i(),M=i(),q=i(),P=i();for(let S=0;S<31;S++)N[S]=A[S];N[31]=A[31]&127|64,N[0]&=248,u(v,B);for(let S=0;S<16;S++)D[S]=v[S];j[0]=M[0]=1;for(let S=254;S>=0;--S){const T=N[S>>>3]>>>(S&7)&1;s(j,D,T),s(R,M,T),p(q,j,R),f(j,j,R),p(R,D,M),f(D,D,M),d(M,q),d(P,j),l(j,R,j),l(R,D,q),p(q,j,R),f(j,j,R),d(D,j),f(R,M,P),l(j,R,o),p(j,j,M),l(R,R,j),l(j,M,P),l(M,D,v),d(D,q),s(j,D,T),s(R,M,T)}for(let S=0;S<16;S++)v[S+16]=j[S],v[S+32]=R[S],v[S+48]=D[S],v[S+64]=M[S];const h=v.subarray(32),y=v.subarray(16);g(h,h),l(y,y,h);const m=new Uint8Array(32);return c(m,y),m}r.scalarMult=b;function x(A){return b(A,n)}r.scalarMultBase=x;function _(A){if(A.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const B=new Uint8Array(A);return{publicKey:x(B),secretKey:B}}r.generateKeyPairFromSeed=_;function E(A){const B=(0,e.randomBytes)(32,A),N=_(B);return(0,t.wipe)(B),N}r.generateKeyPair=E;function O(A,B,N=!1){if(A.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(B.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const v=b(A,B);if(N){let j=0;for(let D=0;D<v.length;D++)j|=v[D];if(j===0)throw new Error("X25519: invalid shared key")}return v}r.sharedKey=O})(tc)),tc}var xn={},ro={},kh;function ky(){if(kh)return ro;kh=1,Object.defineProperty(ro,"__esModule",{value:!0});var r=L0(),e=vn(),t=20;function i(s,c,u){for(var p=1634760805,f=u[3]<<24|u[2]<<16|u[1]<<8|u[0],l=u[7]<<24|u[6]<<16|u[5]<<8|u[4],d=u[11]<<24|u[10]<<16|u[9]<<8|u[8],g=u[15]<<24|u[14]<<16|u[13]<<8|u[12],b=857760878,x=c[3]<<24|c[2]<<16|c[1]<<8|c[0],_=c[7]<<24|c[6]<<16|c[5]<<8|c[4],E=c[11]<<24|c[10]<<16|c[9]<<8|c[8],O=c[15]<<24|c[14]<<16|c[13]<<8|c[12],A=2036477234,B=u[19]<<24|u[18]<<16|u[17]<<8|u[16],N=u[23]<<24|u[22]<<16|u[21]<<8|u[20],v=u[27]<<24|u[26]<<16|u[25]<<8|u[24],j=u[31]<<24|u[30]<<16|u[29]<<8|u[28],D=1797285236,R=p,M=f,q=l,P=d,h=g,y=b,m=x,S=_,T=E,k=O,U=A,I=B,w=N,L=v,J=j,Y=D,C,K=0;K<t;K+=2)C=R+w|0,h^=C<<7|C>>>25,C=h+R|0,T^=C<<9|C>>>23,C=T+h|0,w^=C<<13|C>>>19,C=w+T|0,R^=C<<18|C>>>14,C=y+M|0,k^=C<<7|C>>>25,C=k+y|0,L^=C<<9|C>>>23,C=L+k|0,M^=C<<13|C>>>19,C=M+L|0,y^=C<<18|C>>>14,C=U+m|0,J^=C<<7|C>>>25,C=J+U|0,q^=C<<9|C>>>23,C=q+J|0,m^=C<<13|C>>>19,C=m+q|0,U^=C<<18|C>>>14,C=Y+I|0,P^=C<<7|C>>>25,C=P+Y|0,S^=C<<9|C>>>23,C=S+P|0,I^=C<<13|C>>>19,C=I+S|0,Y^=C<<18|C>>>14,C=R+P|0,M^=C<<7|C>>>25,C=M+R|0,q^=C<<9|C>>>23,C=q+M|0,P^=C<<13|C>>>19,C=P+q|0,R^=C<<18|C>>>14,C=y+h|0,m^=C<<7|C>>>25,C=m+y|0,S^=C<<9|C>>>23,C=S+m|0,h^=C<<13|C>>>19,C=h+S|0,y^=C<<18|C>>>14,C=U+k|0,I^=C<<7|C>>>25,C=I+U|0,T^=C<<9|C>>>23,C=T+I|0,k^=C<<13|C>>>19,C=k+T|0,U^=C<<18|C>>>14,C=Y+J|0,w^=C<<7|C>>>25,C=w+Y|0,L^=C<<9|C>>>23,C=L+w|0,J^=C<<13|C>>>19,C=J+L|0,Y^=C<<18|C>>>14;r.writeUint32LE(R+p|0,s,0),r.writeUint32LE(M+f|0,s,4),r.writeUint32LE(q+l|0,s,8),r.writeUint32LE(P+d|0,s,12),r.writeUint32LE(h+g|0,s,16),r.writeUint32LE(y+b|0,s,20),r.writeUint32LE(m+x|0,s,24),r.writeUint32LE(S+_|0,s,28),r.writeUint32LE(T+E|0,s,32),r.writeUint32LE(k+O|0,s,36),r.writeUint32LE(U+A|0,s,40),r.writeUint32LE(I+B|0,s,44),r.writeUint32LE(w+N|0,s,48),r.writeUint32LE(L+v|0,s,52),r.writeUint32LE(J+j|0,s,56),r.writeUint32LE(Y+D|0,s,60)}function n(s,c,u,p,f){if(f===void 0&&(f=0),s.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(p.length<u.length)throw new Error("Salsa20: destination is shorter than source");var l,d;if(f===0){if(c.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");l=new Uint8Array(16),l.set(c),d=c.length}else{if(c.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");l=c,d=16-f}for(var g=new Uint8Array(64),b=0;b<u.length;b+=64){i(g,l,s);for(var x=b;x<b+64&&x<u.length;x++)p[x]=u[x]^g[x-b];a(l,d,l.length-d)}return e.wipe(g),f===0&&e.wipe(l),p}ro.streamXOR=n;function o(s,c,u,p){return p===void 0&&(p=0),e.wipe(u),n(s,c,u,u,p)}ro.stream=o;function a(s,c,u){for(var p=1;u--;)p=p+(s[c]&255)|0,s[c]=p&255,p>>>=8,c++;if(p>0)throw new Error("Salsa20: counter overflow")}return ro}var Ih;function bg(){if(Ih)return xn;Ih=1,Object.defineProperty(xn,"__esModule",{value:!0});var r=L0(),e=ky(),t=vn();function i(s,c,u,p,f){if(f===void 0&&(f=0),f===0){if(c.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(c.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var l=a(s,c.subarray(0,16),new Uint8Array(32)),d=e.streamXOR(l,c.subarray(16),u,p,f);return t.wipe(l),d}xn.streamXOR=i;function n(s,c,u,p){return p===void 0&&(p=0),t.wipe(u),i(s,c,u,u,p)}xn.stream=n;var o=20;function a(s,c,u){for(var p=1634760805,f=s[3]<<24|s[2]<<16|s[1]<<8|s[0],l=s[7]<<24|s[6]<<16|s[5]<<8|s[4],d=s[11]<<24|s[10]<<16|s[9]<<8|s[8],g=s[15]<<24|s[14]<<16|s[13]<<8|s[12],b=857760878,x=c[3]<<24|c[2]<<16|c[1]<<8|c[0],_=c[7]<<24|c[6]<<16|c[5]<<8|c[4],E=c[11]<<24|c[10]<<16|c[9]<<8|c[8],O=c[15]<<24|c[14]<<16|c[13]<<8|c[12],A=2036477234,B=s[19]<<24|s[18]<<16|s[17]<<8|s[16],N=s[23]<<24|s[22]<<16|s[21]<<8|s[20],v=s[27]<<24|s[26]<<16|s[25]<<8|s[24],j=s[31]<<24|s[30]<<16|s[29]<<8|s[28],D=1797285236,R,M=0;M<o;M+=2)R=p+N|0,g^=R<<7|R>>>25,R=g+p|0,E^=R<<9|R>>>23,R=E+g|0,N^=R<<13|R>>>19,R=N+E|0,p^=R<<18|R>>>14,R=b+f|0,O^=R<<7|R>>>25,R=O+b|0,v^=R<<9|R>>>23,R=v+O|0,f^=R<<13|R>>>19,R=f+v|0,b^=R<<18|R>>>14,R=A+x|0,j^=R<<7|R>>>25,R=j+A|0,l^=R<<9|R>>>23,R=l+j|0,x^=R<<13|R>>>19,R=x+l|0,A^=R<<18|R>>>14,R=D+B|0,d^=R<<7|R>>>25,R=d+D|0,_^=R<<9|R>>>23,R=_+d|0,B^=R<<13|R>>>19,R=B+_|0,D^=R<<18|R>>>14,R=p+d|0,f^=R<<7|R>>>25,R=f+p|0,l^=R<<9|R>>>23,R=l+f|0,d^=R<<13|R>>>19,R=d+l|0,p^=R<<18|R>>>14,R=b+g|0,x^=R<<7|R>>>25,R=x+b|0,_^=R<<9|R>>>23,R=_+x|0,g^=R<<13|R>>>19,R=g+_|0,b^=R<<18|R>>>14,R=A+O|0,B^=R<<7|R>>>25,R=B+A|0,E^=R<<9|R>>>23,R=E+B|0,O^=R<<13|R>>>19,R=O+E|0,A^=R<<18|R>>>14,R=D+j|0,N^=R<<7|R>>>25,R=N+D|0,v^=R<<9|R>>>23,R=v+N|0,j^=R<<13|R>>>19,R=j+v|0,D^=R<<18|R>>>14;return r.writeUint32LE(p,u,0),r.writeUint32LE(b,u,4),r.writeUint32LE(A,u,8),r.writeUint32LE(D,u,12),r.writeUint32LE(x,u,16),r.writeUint32LE(_,u,20),r.writeUint32LE(E,u,24),r.writeUint32LE(O,u,28),u}return xn.hsalsa=a,xn}var jr={},rc={},Zi={},Lh;function vg(){if(Lh)return Zi;Lh=1,Object.defineProperty(Zi,"__esModule",{value:!0});function r(n,o,a){return~(n-1)&o|n-1&a}Zi.select=r;function e(n,o){return(n|0)-(o|0)-1>>>31&1}Zi.lessOrEqual=e;function t(n,o){if(n.length!==o.length)return 0;for(var a=0,s=0;s<n.length;s++)a|=n[s]^o[s];return 1&a-1>>>8}Zi.compare=t;function i(n,o){return n.length===0||o.length===0?!1:t(n,o)!==0}return Zi.equal=i,Zi}var Nh;function Iy(){return Nh||(Nh=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=vg(),t=vn();r.DIGEST_LENGTH=16;var i=(function(){function a(s){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=s[0]|s[1]<<8;this._r[0]=c&8191;var u=s[2]|s[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var p=s[4]|s[5]<<8;this._r[2]=(u>>>10|p<<6)&7939;var f=s[6]|s[7]<<8;this._r[3]=(p>>>7|f<<9)&8191;var l=s[8]|s[9]<<8;this._r[4]=(f>>>4|l<<12)&255,this._r[5]=l>>>1&8190;var d=s[10]|s[11]<<8;this._r[6]=(l>>>14|d<<2)&8191;var g=s[12]|s[13]<<8;this._r[7]=(d>>>11|g<<5)&8065;var b=s[14]|s[15]<<8;this._r[8]=(g>>>8|b<<8)&8191,this._r[9]=b>>>5&127,this._pad[0]=s[16]|s[17]<<8,this._pad[1]=s[18]|s[19]<<8,this._pad[2]=s[20]|s[21]<<8,this._pad[3]=s[22]|s[23]<<8,this._pad[4]=s[24]|s[25]<<8,this._pad[5]=s[26]|s[27]<<8,this._pad[6]=s[28]|s[29]<<8,this._pad[7]=s[30]|s[31]<<8}return a.prototype._blocks=function(s,c,u){for(var p=this._fin?0:2048,f=this._h[0],l=this._h[1],d=this._h[2],g=this._h[3],b=this._h[4],x=this._h[5],_=this._h[6],E=this._h[7],O=this._h[8],A=this._h[9],B=this._r[0],N=this._r[1],v=this._r[2],j=this._r[3],D=this._r[4],R=this._r[5],M=this._r[6],q=this._r[7],P=this._r[8],h=this._r[9];u>=16;){var y=s[c+0]|s[c+1]<<8;f+=y&8191;var m=s[c+2]|s[c+3]<<8;l+=(y>>>13|m<<3)&8191;var S=s[c+4]|s[c+5]<<8;d+=(m>>>10|S<<6)&8191;var T=s[c+6]|s[c+7]<<8;g+=(S>>>7|T<<9)&8191;var k=s[c+8]|s[c+9]<<8;b+=(T>>>4|k<<12)&8191,x+=k>>>1&8191;var U=s[c+10]|s[c+11]<<8;_+=(k>>>14|U<<2)&8191;var I=s[c+12]|s[c+13]<<8;E+=(U>>>11|I<<5)&8191;var w=s[c+14]|s[c+15]<<8;O+=(I>>>8|w<<8)&8191,A+=w>>>5|p;var L=0,J=L;J+=f*B,J+=l*(5*h),J+=d*(5*P),J+=g*(5*q),J+=b*(5*M),L=J>>>13,J&=8191,J+=x*(5*R),J+=_*(5*D),J+=E*(5*j),J+=O*(5*v),J+=A*(5*N),L+=J>>>13,J&=8191;var Y=L;Y+=f*N,Y+=l*B,Y+=d*(5*h),Y+=g*(5*P),Y+=b*(5*q),L=Y>>>13,Y&=8191,Y+=x*(5*M),Y+=_*(5*R),Y+=E*(5*D),Y+=O*(5*j),Y+=A*(5*v),L+=Y>>>13,Y&=8191;var C=L;C+=f*v,C+=l*N,C+=d*B,C+=g*(5*h),C+=b*(5*P),L=C>>>13,C&=8191,C+=x*(5*q),C+=_*(5*M),C+=E*(5*R),C+=O*(5*D),C+=A*(5*j),L+=C>>>13,C&=8191;var K=L;K+=f*j,K+=l*v,K+=d*N,K+=g*B,K+=b*(5*h),L=K>>>13,K&=8191,K+=x*(5*P),K+=_*(5*q),K+=E*(5*M),K+=O*(5*R),K+=A*(5*D),L+=K>>>13,K&=8191;var $=L;$+=f*D,$+=l*j,$+=d*v,$+=g*N,$+=b*B,L=$>>>13,$&=8191,$+=x*(5*h),$+=_*(5*P),$+=E*(5*q),$+=O*(5*M),$+=A*(5*R),L+=$>>>13,$&=8191;var Z=L;Z+=f*R,Z+=l*D,Z+=d*j,Z+=g*v,Z+=b*N,L=Z>>>13,Z&=8191,Z+=x*B,Z+=_*(5*h),Z+=E*(5*P),Z+=O*(5*q),Z+=A*(5*M),L+=Z>>>13,Z&=8191;var Q=L;Q+=f*M,Q+=l*R,Q+=d*D,Q+=g*j,Q+=b*v,L=Q>>>13,Q&=8191,Q+=x*N,Q+=_*B,Q+=E*(5*h),Q+=O*(5*P),Q+=A*(5*q),L+=Q>>>13,Q&=8191;var z=L;z+=f*q,z+=l*M,z+=d*R,z+=g*D,z+=b*j,L=z>>>13,z&=8191,z+=x*v,z+=_*N,z+=E*B,z+=O*(5*h),z+=A*(5*P),L+=z>>>13,z&=8191;var H=L;H+=f*P,H+=l*q,H+=d*M,H+=g*R,H+=b*D,L=H>>>13,H&=8191,H+=x*j,H+=_*v,H+=E*N,H+=O*B,H+=A*(5*h),L+=H>>>13,H&=8191;var W=L;W+=f*h,W+=l*P,W+=d*q,W+=g*M,W+=b*R,L=W>>>13,W&=8191,W+=x*D,W+=_*j,W+=E*v,W+=O*N,W+=A*B,L+=W>>>13,W&=8191,L=(L<<2)+L|0,L=L+J|0,J=L&8191,L=L>>>13,Y+=L,f=J,l=Y,d=C,g=K,b=$,x=Z,_=Q,E=z,O=H,A=W,c+=16,u-=16}this._h[0]=f,this._h[1]=l,this._h[2]=d,this._h[3]=g,this._h[4]=b,this._h[5]=x,this._h[6]=_,this._h[7]=E,this._h[8]=O,this._h[9]=A},a.prototype.finish=function(s,c){c===void 0&&(c=0);var u=new Uint16Array(10),p,f,l,d;if(this._leftover){for(d=this._leftover,this._buffer[d++]=1;d<16;d++)this._buffer[d]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(p=this._h[1]>>>13,this._h[1]&=8191,d=2;d<10;d++)this._h[d]+=p,p=this._h[d]>>>13,this._h[d]&=8191;for(this._h[0]+=p*5,p=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=p,p=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=p,u[0]=this._h[0]+5,p=u[0]>>>13,u[0]&=8191,d=1;d<10;d++)u[d]=this._h[d]+p,p=u[d]>>>13,u[d]&=8191;for(u[9]-=8192,f=(p^1)-1,d=0;d<10;d++)u[d]&=f;for(f=~f,d=0;d<10;d++)this._h[d]=this._h[d]&f|u[d];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,l=this._h[0]+this._pad[0],this._h[0]=l&65535,d=1;d<8;d++)l=(this._h[d]+this._pad[d]|0)+(l>>>16)|0,this._h[d]=l&65535;return s[c+0]=this._h[0]>>>0,s[c+1]=this._h[0]>>>8,s[c+2]=this._h[1]>>>0,s[c+3]=this._h[1]>>>8,s[c+4]=this._h[2]>>>0,s[c+5]=this._h[2]>>>8,s[c+6]=this._h[3]>>>0,s[c+7]=this._h[3]>>>8,s[c+8]=this._h[4]>>>0,s[c+9]=this._h[4]>>>8,s[c+10]=this._h[5]>>>0,s[c+11]=this._h[5]>>>8,s[c+12]=this._h[6]>>>0,s[c+13]=this._h[6]>>>8,s[c+14]=this._h[7]>>>0,s[c+15]=this._h[7]>>>8,this._finished=!0,this},a.prototype.update=function(s){var c=0,u=s.length,p;if(this._leftover){p=16-this._leftover,p>u&&(p=u);for(var f=0;f<p;f++)this._buffer[this._leftover+f]=s[c+f];if(u-=p,c+=p,this._leftover+=p,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(p=u-u%16,this._blocks(s,c,p),c+=p,u-=p),u){for(var f=0;f<u;f++)this._buffer[this._leftover+f]=s[c+f];this._leftover+=u}return this},a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var s=new Uint8Array(16);return this.finish(s),s},a.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},a})();r.Poly1305=i;function n(a,s){var c=new i(a);c.update(s);var u=c.digest();return c.clean(),u}r.oneTimeAuth=n;function o(a,s){return a.length!==r.DIGEST_LENGTH||s.length!==r.DIGEST_LENGTH?!1:e.equal(a,s)}r.equal=o})(rc)),rc}var Bh;function yg(){if(Bh)return jr;Bh=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.generateKey=jr.openSecretBox=jr.secretBox=void 0;const r=bg(),e=Iy(),t=vn(),i=I0();function n(s,c,u){if(c.length!==24)throw new Error("secretBox nonce must be 24 bytes");const p=new Uint8Array(64),f=new Uint8Array(32);f.set(c),(0,r.stream)(s,f,p,8);const l=new Uint8Array(16+u.length);for(let g=0;g<32&&g<u.length;g++)l[16+g]=u[g]^p[32+g];u.length>32&&(0,r.streamXOR)(s,f,u.subarray(32),l.subarray(48),8);const d=(0,e.oneTimeAuth)(p.subarray(0,32),l.subarray(16));for(let g=0;g<d.length;g++)l[g]=d[g];return(0,t.wipe)(d),(0,t.wipe)(p),(0,t.wipe)(f),l}jr.secretBox=n;function o(s,c,u){if(c.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(u.length<16)throw new Error("secretBox data must be at least 16 bytes");const p=new Uint8Array(64),f=new Uint8Array(32);f.set(c),(0,r.stream)(s,f,p,8);const l=(0,e.oneTimeAuth)(p.subarray(0,32),u.subarray(16));if(!(0,e.equal)(l,u.subarray(0,16)))return null;const d=u.subarray(16),g=new Uint8Array(d.length);for(let b=0;b<32&&b<d.length;b++)g[b]=d[b]^p[32+b];return d.length>32&&(0,r.streamXOR)(s,f,d.subarray(32),g.subarray(32),8),(0,t.wipe)(l),(0,t.wipe)(p),(0,t.wipe)(f),g}jr.openSecretBox=o;function a(s){return(0,i.randomBytes)(32,s)}return jr.generateKey=a,jr}var Mh;function Ly(){return Mh||(Mh=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.openBox=r.box=r.precomputeSharedKey=r.generateKeyPair=void 0;const e=Th(),t=bg(),i=yg(),n=vn();var o=Th();Object.defineProperty(r,"generateKeyPair",{enumerable:!0,get:function(){return o.generateKeyPair}});const a=new Uint8Array(16);function s(p,f){const l=(0,e.scalarMult)(f,p);return(0,t.hsalsa)(l,a,l),l}r.precomputeSharedKey=s;function c(p,f,l,d){const g=s(p,f),b=(0,i.secretBox)(g,l,d);return(0,n.wipe)(g),b}r.box=c;function u(p,f,l,d){const g=s(p,f),b=(0,i.openSecretBox)(g,l,d);return(0,n.wipe)(g),b}r.openBox=u})(ec)),ec}var jh;function Ny(){return jh||(jh=1,(function(r){var e=Wi&&Wi.__createBinding||(Object.create?(function(i,n,o,a){a===void 0&&(a=o);var s=Object.getOwnPropertyDescriptor(n,o);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[o]}}),Object.defineProperty(i,a,s)}):(function(i,n,o,a){a===void 0&&(a=o),i[a]=n[o]})),t=Wi&&Wi.__exportStar||function(i,n){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(n,o)&&e(n,i,o)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ly(),r),t(yg(),r)})(Wi)),Wi}var By=Ny();const Sn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Uo(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function cl(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function nr(r,...e){if(!Uo(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function _g(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");cl(r.outputLen),cl(r.blockLen)}function Ta(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function My(r,e){nr(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Un(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function ic(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function xr(r,e){return r<<32-e|r>>>e}const wg=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",jy=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Ci(r){if(nr(r),wg)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=jy[r[t]];return e}const Cr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ch(r){if(r>=Cr._0&&r<=Cr._9)return r-Cr._0;if(r>=Cr.A&&r<=Cr.F)return r-(Cr.A-10);if(r>=Cr.a&&r<=Cr.f)return r-(Cr.a-10)}function ka(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(wg)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(t);for(let n=0,o=0;n<t;n++,o+=2){const a=Ch(r.charCodeAt(o)),s=Ch(r.charCodeAt(o+1));if(a===void 0||s===void 0){const c=r[o]+r[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}i[n]=a*16+s}return i}function qo(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Fl(r){return typeof r=="string"&&(r=qo(r)),nr(r),r}function Ve(...r){let e=0;for(let i=0;i<r.length;i++){const n=r[i];nr(n),e+=n.length}const t=new Uint8Array(e);for(let i=0,n=0;i<r.length;i++){const o=r[i];t.set(o,n),n+=o.length}return t}class Eg{}function Gl(r){const e=i=>r().update(Fl(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Kl(r=32){if(Sn&&typeof Sn.getRandomValues=="function")return Sn.getRandomValues(new Uint8Array(r));if(Sn&&typeof Sn.randomBytes=="function")return Uint8Array.from(Sn.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Cy(r,e,t,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,i);const n=BigInt(32),o=BigInt(4294967295),a=Number(t>>n&o),s=Number(t&o),c=i?4:0,u=i?0:4;r.setUint32(e+c,a,i),r.setUint32(e+u,s,i)}function zy(r,e,t){return r&e^~r&t}function Hy(r,e,t){return r&e^r&t^e&t}class xg extends Eg{constructor(e,t,i,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=i,this.isLE=n,this.buffer=new Uint8Array(e),this.view=ic(this.buffer)}update(e){Ta(this),e=Fl(e),nr(e);const{view:t,buffer:i,blockLen:n}=this,o=e.length;for(let a=0;a<o;){const s=Math.min(n-this.pos,o-a);if(s===n){const c=ic(e);for(;n<=o-a;a+=n)this.process(c,a);continue}i.set(e.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ta(this),My(e,this),this.finished=!0;const{buffer:t,view:i,blockLen:n,isLE:o}=this;let{pos:a}=this;t[a++]=128,Un(this.buffer.subarray(a)),this.padOffset>n-a&&(this.process(i,0),a=0);for(let f=a;f<n;f++)t[f]=0;Cy(i,n-8,BigInt(this.length*8),o),this.process(i,0);const s=ic(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,p=this.get();if(u>p.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)s.setUint32(4*f,p[f],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const i=e.slice(0,t);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:i,length:n,finished:o,destroyed:a,pos:s}=this;return e.destroyed=a,e.finished=o,e.length=n,e.pos=s,n%t&&e.buffer.set(i),e}clone(){return this._cloneInto()}}const pi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ut=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),qt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Zo=BigInt(2**32-1),zh=BigInt(32);function Dy(r,e=!1){return e?{h:Number(r&Zo),l:Number(r>>zh&Zo)}:{h:Number(r>>zh&Zo)|0,l:Number(r&Zo)|0}}function Uy(r,e=!1){const t=r.length;let i=new Uint32Array(t),n=new Uint32Array(t);for(let o=0;o<t;o++){const{h:a,l:s}=Dy(r[o],e);[i[o],n[o]]=[a,s]}return[i,n]}const Hh=(r,e,t)=>r>>>t,Dh=(r,e,t)=>r<<32-t|e>>>t,An=(r,e,t)=>r>>>t|e<<32-t,Rn=(r,e,t)=>r<<32-t|e>>>t,Jo=(r,e,t)=>r<<64-t|e>>>t-32,Yo=(r,e,t)=>r>>>t-32|e<<64-t;function zr(r,e,t,i){const n=(e>>>0)+(i>>>0);return{h:r+t+(n/2**32|0)|0,l:n|0}}const qy=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),Fy=(r,e,t,i)=>e+t+i+(r/2**32|0)|0,Gy=(r,e,t,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0),Ky=(r,e,t,i,n)=>e+t+i+n+(r/2**32|0)|0,$y=(r,e,t,i,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0)+(n>>>0),Vy=(r,e,t,i,n,o)=>e+t+i+n+o+(r/2**32|0)|0,Wy=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gi=new Uint32Array(64);class Zy extends xg{constructor(e=32){super(64,e,8,!1),this.A=pi[0]|0,this.B=pi[1]|0,this.C=pi[2]|0,this.D=pi[3]|0,this.E=pi[4]|0,this.F=pi[5]|0,this.G=pi[6]|0,this.H=pi[7]|0}get(){const{A:e,B:t,C:i,D:n,E:o,F:a,G:s,H:c}=this;return[e,t,i,n,o,a,s,c]}set(e,t,i,n,o,a,s,c){this.A=e|0,this.B=t|0,this.C=i|0,this.D=n|0,this.E=o|0,this.F=a|0,this.G=s|0,this.H=c|0}process(e,t){for(let f=0;f<16;f++,t+=4)gi[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const l=gi[f-15],d=gi[f-2],g=xr(l,7)^xr(l,18)^l>>>3,b=xr(d,17)^xr(d,19)^d>>>10;gi[f]=b+gi[f-7]+g+gi[f-16]|0}let{A:i,B:n,C:o,D:a,E:s,F:c,G:u,H:p}=this;for(let f=0;f<64;f++){const l=xr(s,6)^xr(s,11)^xr(s,25),d=p+l+zy(s,c,u)+Wy[f]+gi[f]|0,b=(xr(i,2)^xr(i,13)^xr(i,22))+Hy(i,n,o)|0;p=u,u=c,c=s,s=a+d|0,a=o,o=n,n=i,i=d+b|0}i=i+this.A|0,n=n+this.B|0,o=o+this.C|0,a=a+this.D|0,s=s+this.E|0,c=c+this.F|0,u=u+this.G|0,p=p+this.H|0,this.set(i,n,o,a,s,c,u,p)}roundClean(){Un(gi)}destroy(){this.set(0,0,0,0,0,0,0,0),Un(this.buffer)}}const Sg=Uy(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Jy=Sg[0],Yy=Sg[1],mi=new Uint32Array(80),bi=new Uint32Array(80);class Ag extends xg{constructor(e=64){super(128,e,16,!1),this.Ah=qt[0]|0,this.Al=qt[1]|0,this.Bh=qt[2]|0,this.Bl=qt[3]|0,this.Ch=qt[4]|0,this.Cl=qt[5]|0,this.Dh=qt[6]|0,this.Dl=qt[7]|0,this.Eh=qt[8]|0,this.El=qt[9]|0,this.Fh=qt[10]|0,this.Fl=qt[11]|0,this.Gh=qt[12]|0,this.Gl=qt[13]|0,this.Hh=qt[14]|0,this.Hl=qt[15]|0}get(){const{Ah:e,Al:t,Bh:i,Bl:n,Ch:o,Cl:a,Dh:s,Dl:c,Eh:u,El:p,Fh:f,Fl:l,Gh:d,Gl:g,Hh:b,Hl:x}=this;return[e,t,i,n,o,a,s,c,u,p,f,l,d,g,b,x]}set(e,t,i,n,o,a,s,c,u,p,f,l,d,g,b,x){this.Ah=e|0,this.Al=t|0,this.Bh=i|0,this.Bl=n|0,this.Ch=o|0,this.Cl=a|0,this.Dh=s|0,this.Dl=c|0,this.Eh=u|0,this.El=p|0,this.Fh=f|0,this.Fl=l|0,this.Gh=d|0,this.Gl=g|0,this.Hh=b|0,this.Hl=x|0}process(e,t){for(let O=0;O<16;O++,t+=4)mi[O]=e.getUint32(t),bi[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const A=mi[O-15]|0,B=bi[O-15]|0,N=An(A,B,1)^An(A,B,8)^Hh(A,B,7),v=Rn(A,B,1)^Rn(A,B,8)^Dh(A,B,7),j=mi[O-2]|0,D=bi[O-2]|0,R=An(j,D,19)^Jo(j,D,61)^Hh(j,D,6),M=Rn(j,D,19)^Yo(j,D,61)^Dh(j,D,6),q=Gy(v,M,bi[O-7],bi[O-16]),P=Ky(q,N,R,mi[O-7],mi[O-16]);mi[O]=P|0,bi[O]=q|0}let{Ah:i,Al:n,Bh:o,Bl:a,Ch:s,Cl:c,Dh:u,Dl:p,Eh:f,El:l,Fh:d,Fl:g,Gh:b,Gl:x,Hh:_,Hl:E}=this;for(let O=0;O<80;O++){const A=An(f,l,14)^An(f,l,18)^Jo(f,l,41),B=Rn(f,l,14)^Rn(f,l,18)^Yo(f,l,41),N=f&d^~f&b,v=l&g^~l&x,j=$y(E,B,v,Yy[O],bi[O]),D=Vy(j,_,A,N,Jy[O],mi[O]),R=j|0,M=An(i,n,28)^Jo(i,n,34)^Jo(i,n,39),q=Rn(i,n,28)^Yo(i,n,34)^Yo(i,n,39),P=i&o^i&s^o&s,h=n&a^n&c^a&c;_=b|0,E=x|0,b=d|0,x=g|0,d=f|0,g=l|0,{h:f,l}=zr(u|0,p|0,D|0,R|0),u=s|0,p=c|0,s=o|0,c=a|0,o=i|0,a=n|0;const y=qy(R,q,h);i=Fy(y,D,M,P),n=y|0}({h:i,l:n}=zr(this.Ah|0,this.Al|0,i|0,n|0)),{h:o,l:a}=zr(this.Bh|0,this.Bl|0,o|0,a|0),{h:s,l:c}=zr(this.Ch|0,this.Cl|0,s|0,c|0),{h:u,l:p}=zr(this.Dh|0,this.Dl|0,u|0,p|0),{h:f,l}=zr(this.Eh|0,this.El|0,f|0,l|0),{h:d,l:g}=zr(this.Fh|0,this.Fl|0,d|0,g|0),{h:b,l:x}=zr(this.Gh|0,this.Gl|0,b|0,x|0),{h:_,l:E}=zr(this.Hh|0,this.Hl|0,_|0,E|0),this.set(i,n,o,a,s,c,u,p,f,l,d,g,b,x,_,E)}roundClean(){Un(mi,bi)}destroy(){Un(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Xy extends Ag{constructor(){super(48),this.Ah=Ut[0]|0,this.Al=Ut[1]|0,this.Bh=Ut[2]|0,this.Bl=Ut[3]|0,this.Ch=Ut[4]|0,this.Cl=Ut[5]|0,this.Dh=Ut[6]|0,this.Dl=Ut[7]|0,this.Eh=Ut[8]|0,this.El=Ut[9]|0,this.Fh=Ut[10]|0,this.Fl=Ut[11]|0,this.Gh=Ut[12]|0,this.Gl=Ut[13]|0,this.Hh=Ut[14]|0,this.Hl=Ut[15]|0}}const $l=Gl(()=>new Zy),Qy=Gl(()=>new Ag),e1=Gl(()=>new Xy);class Rg extends Eg{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,_g(e);const i=Fl(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,o=new Uint8Array(n);o.set(i.length>n?e.create().update(i).digest():i);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=e.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),Un(o)}update(e){return Ta(this),this.iHash.update(e),this}digestInto(e){Ta(this),nr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:i,finished:n,destroyed:o,blockLen:a,outputLen:s}=this;return e=e,e.finished=n,e.destroyed=o,e.blockLen=a,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Og=(r,e,t)=>new Rg(r,e).update(t).digest();Og.create=(r,e)=>new Rg(r,e);const Vl=BigInt(0),Ia=BigInt(1);function La(r,e=""){if(typeof r!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function tn(r,e,t=""){const i=Uo(r),n=r?.length,o=e!==void 0;if(!i||o&&n!==e){const a=t&&`"${t}" `,s=o?` of length ${e}`:"",c=i?`length=${n}`:`type=${typeof r}`;throw new Error(a+"expected Uint8Array"+s+", got "+c)}return r}function Xo(r){const e=r.toString(16);return e.length&1?"0"+e:e}function Pg(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Vl:BigInt("0x"+r)}function hr(r){return Pg(Ci(r))}function Tg(r){return nr(r),Pg(Ci(Uint8Array.from(r).reverse()))}function zt(r,e){return ka(r.toString(16).padStart(e*2,"0"))}function kg(r,e){return zt(r,e).reverse()}function Lt(r,e,t){let i;if(typeof e=="string")try{i=ka(e)}catch(o){throw new Error(r+" must be hex string or Uint8Array, cause: "+o)}else if(Uo(e))i=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const n=i.length;if(typeof t=="number"&&n!==t)throw new Error(r+" of length "+t+" expected, got "+n);return i}const nc=r=>typeof r=="bigint"&&Vl<=r;function Ig(r,e,t){return nc(r)&&nc(e)&&nc(t)&&e<=r&&r<t}function t1(r,e,t,i){if(!Ig(e,t,i))throw new Error("expected valid "+r+": "+t+" <= n < "+i+", got "+e)}function Ro(r){let e;for(e=0;r>Vl;r>>=Ia,e+=1);return e}function r1(r,e){return r>>BigInt(e)&Ia}const Vi=r=>(Ia<<BigInt(r))-Ia;function i1(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const i=d=>new Uint8Array(d),n=d=>Uint8Array.of(d);let o=i(r),a=i(r),s=0;const c=()=>{o.fill(1),a.fill(0),s=0},u=(...d)=>t(a,o,...d),p=(d=i(0))=>{a=u(n(0),d),o=u(),d.length!==0&&(a=u(n(1),d),o=u())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const g=[];for(;d<e;){o=u();const b=o.slice();g.push(b),d+=o.length}return Ve(...g)};return(d,g)=>{c(),p(d);let b;for(;!(b=g(f()));)p();return c(),b}}function n1(r){return typeof r=="function"&&Number.isSafeInteger(r.outputLen)}function ns(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function i(n,o,a){const s=r[n];if(a&&s===void 0)return;const c=typeof s;if(c!==o||s===null)throw new Error(`param "${n}" is invalid: expected ${o}, got ${c}`)}Object.entries(e).forEach(([n,o])=>i(n,o,!1)),Object.entries(t).forEach(([n,o])=>i(n,o,!0))}const Lg=()=>{throw new Error("not implemented")};function ul(r){const e=new WeakMap;return(t,...i)=>{const n=e.get(t);if(n!==void 0)return n;const o=r(t,...i);return e.set(t,o),o}}const Xt=BigInt(0),Zt=BigInt(1),rn=BigInt(2),Ng=BigInt(3),Bg=BigInt(4),Mg=BigInt(5),o1=BigInt(7),jg=BigInt(8),a1=BigInt(9),Cg=BigInt(16);function ur(r,e){const t=r%e;return t>=Xt?t:e+t}function sr(r,e,t){let i=r;for(;e-- >Xt;)i*=i,i%=t;return i}function Uh(r,e){if(r===Xt)throw new Error("invert: expected non-zero number");if(e<=Xt)throw new Error("invert: expected positive modulus, got "+e);let t=ur(r,e),i=e,n=Xt,o=Zt;for(;t!==Xt;){const s=i/t,c=i%t,u=n-o*s;i=t,t=c,n=o,o=u}if(i!==Zt)throw new Error("invert: does not exist");return ur(n,e)}function Wl(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function zg(r,e){const t=(r.ORDER+Zt)/Bg,i=r.pow(e,t);return Wl(r,i,e),i}function s1(r,e){const t=(r.ORDER-Mg)/jg,i=r.mul(e,rn),n=r.pow(i,t),o=r.mul(e,n),a=r.mul(r.mul(o,rn),n),s=r.mul(o,r.sub(a,r.ONE));return Wl(r,s,e),s}function c1(r){const e=Mr(r),t=Hg(r),i=t(e,e.neg(e.ONE)),n=t(e,i),o=t(e,e.neg(i)),a=(r+o1)/Cg;return(s,c)=>{let u=s.pow(c,a),p=s.mul(u,i);const f=s.mul(u,n),l=s.mul(u,o),d=s.eql(s.sqr(p),c),g=s.eql(s.sqr(f),c);u=s.cmov(u,p,d),p=s.cmov(l,f,g);const b=s.eql(s.sqr(p),c),x=s.cmov(u,p,b);return Wl(s,x,c),x}}function Hg(r){if(r<Ng)throw new Error("sqrt is not defined for small field");let e=r-Zt,t=0;for(;e%rn===Xt;)e/=rn,t++;let i=rn;const n=Mr(r);for(;Na(n,i)===1;)if(i++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return zg;let o=n.pow(i,e);const a=(e+Zt)/rn;return function(c,u){if(c.is0(u))return u;if(Na(c,u)!==1)throw new Error("Cannot find square root");let p=t,f=c.mul(c.ONE,o),l=c.pow(u,e),d=c.pow(u,a);for(;!c.eql(l,c.ONE);){if(c.is0(l))return c.ZERO;let g=1,b=c.sqr(l);for(;!c.eql(b,c.ONE);)if(g++,b=c.sqr(b),g===p)throw new Error("Cannot find square root");const x=Zt<<BigInt(p-g-1),_=c.pow(f,x);p=g,f=c.sqr(_),l=c.mul(l,f),d=c.mul(d,_)}return d}}function u1(r){return r%Bg===Ng?zg:r%jg===Mg?s1:r%Cg===a1?c1(r):Hg(r)}const l1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Dg(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=l1.reduce((i,n)=>(i[n]="function",i),e);return ns(r,t),r}function os(r,e,t){if(t<Xt)throw new Error("invalid exponent, negatives unsupported");if(t===Xt)return r.ONE;if(t===Zt)return e;let i=r.ONE,n=e;for(;t>Xt;)t&Zt&&(i=r.mul(i,n)),n=r.sqr(n),t>>=Zt;return i}function yn(r,e,t=!1){const i=new Array(e.length).fill(t?r.ZERO:void 0),n=e.reduce((a,s,c)=>r.is0(s)?a:(i[c]=a,r.mul(a,s)),r.ONE),o=r.inv(n);return e.reduceRight((a,s,c)=>r.is0(s)?a:(i[c]=r.mul(a,i[c]),r.mul(a,s)),o),i}function Na(r,e){const t=(r.ORDER-Zt)/rn,i=r.pow(e,t),n=r.eql(i,r.ONE),o=r.eql(i,r.ZERO),a=r.eql(i,r.neg(r.ONE));if(!n&&!o&&!a)throw new Error("invalid Legendre symbol result");return n?1:o?0:-1}function Ug(r,e){e!==void 0&&cl(e);const t=e!==void 0?e:r.toString(2).length,i=Math.ceil(t/8);return{nBitLength:t,nByteLength:i}}function Mr(r,e,t=!1,i={}){if(r<=Xt)throw new Error("invalid field: expected ORDER > 0, got "+r);let n,o,a=!1,s;if(typeof e=="object"&&e!=null){if(i.sqrt||t)throw new Error("cannot specify opts in two arguments");const l=e;l.BITS&&(n=l.BITS),l.sqrt&&(o=l.sqrt),typeof l.isLE=="boolean"&&(t=l.isLE),typeof l.modFromBytes=="boolean"&&(a=l.modFromBytes),s=l.allowedLengths}else typeof e=="number"&&(n=e),i.sqrt&&(o=i.sqrt);const{nBitLength:c,nByteLength:u}=Ug(r,n);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let p;const f=Object.freeze({ORDER:r,isLE:t,BITS:c,BYTES:u,MASK:Vi(c),ZERO:Xt,ONE:Zt,allowedLengths:s,create:l=>ur(l,r),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Xt<=l&&l<r},is0:l=>l===Xt,isValidNot0:l=>!f.is0(l)&&f.isValid(l),isOdd:l=>(l&Zt)===Zt,neg:l=>ur(-l,r),eql:(l,d)=>l===d,sqr:l=>ur(l*l,r),add:(l,d)=>ur(l+d,r),sub:(l,d)=>ur(l-d,r),mul:(l,d)=>ur(l*d,r),pow:(l,d)=>os(f,l,d),div:(l,d)=>ur(l*Uh(d,r),r),sqrN:l=>l*l,addN:(l,d)=>l+d,subN:(l,d)=>l-d,mulN:(l,d)=>l*d,inv:l=>Uh(l,r),sqrt:o||(l=>(p||(p=u1(r)),p(f,l))),toBytes:l=>t?kg(l,u):zt(l,u),fromBytes:(l,d=!0)=>{if(s){if(!s.includes(l.length)||l.length>u)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+l.length);const b=new Uint8Array(u);b.set(l,t?0:b.length-l.length),l=b}if(l.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+l.length);let g=t?Tg(l):hr(l);if(a&&(g=ur(g,r)),!d&&!f.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:l=>yn(f,l),cmov:(l,d,g)=>g?d:l});return Object.freeze(f)}function qg(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function Zl(r){const e=qg(r);return e+Math.ceil(e/2)}function Fg(r,e,t=!1){const i=r.length,n=qg(e),o=Zl(e);if(i<16||i<o||i>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+i);const a=t?Tg(r):hr(r),s=ur(a,e-Zt)+Zt;return t?kg(s,n):zt(s,n)}const qn=BigInt(0),nn=BigInt(1);function Ba(r,e){const t=e.negate();return r?t:e}function mo(r,e){const t=yn(r.Fp,e.map(i=>i.Z));return e.map((i,n)=>r.fromAffine(i.toAffine(t[n])))}function Gg(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function oc(r,e){Gg(r,e);const t=Math.ceil(e/r)+1,i=2**(r-1),n=2**r,o=Vi(r),a=BigInt(r);return{windows:t,windowSize:i,mask:o,maxNumber:n,shiftBy:a}}function qh(r,e,t){const{windowSize:i,mask:n,maxNumber:o,shiftBy:a}=t;let s=Number(r&n),c=r>>a;s>i&&(s-=o,c+=nn);const u=e*i,p=u+Math.abs(s)-1,f=s===0,l=s<0,d=e%2!==0;return{nextN:c,offset:p,isZero:f,isNeg:l,isNegF:d,offsetF:u}}function f1(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,i)=>{if(!(t instanceof e))throw new Error("invalid point at index "+i)})}function h1(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,i)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+i)})}const ac=new WeakMap,Kg=new WeakMap;function sc(r){return Kg.get(r)||1}function Fh(r){if(r!==qn)throw new Error("invalid wNAF")}class d1{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,i=this.ZERO){let n=e;for(;t>qn;)t&nn&&(i=i.add(n)),n=n.double(),t>>=nn;return i}precomputeWindow(e,t){const{windows:i,windowSize:n}=oc(t,this.bits),o=[];let a=e,s=a;for(let c=0;c<i;c++){s=a,o.push(s);for(let u=1;u<n;u++)s=s.add(a),o.push(s);a=s.double()}return o}wNAF(e,t,i){if(!this.Fn.isValid(i))throw new Error("invalid scalar");let n=this.ZERO,o=this.BASE;const a=oc(e,this.bits);for(let s=0;s<a.windows;s++){const{nextN:c,offset:u,isZero:p,isNeg:f,isNegF:l,offsetF:d}=qh(i,s,a);i=c,p?o=o.add(Ba(l,t[d])):n=n.add(Ba(f,t[u]))}return Fh(i),{p:n,f:o}}wNAFUnsafe(e,t,i,n=this.ZERO){const o=oc(e,this.bits);for(let a=0;a<o.windows&&i!==qn;a++){const{nextN:s,offset:c,isZero:u,isNeg:p}=qh(i,a,o);if(i=s,!u){const f=t[c];n=n.add(p?f.negate():f)}}return Fh(i),n}getPrecomputes(e,t,i){let n=ac.get(t);return n||(n=this.precomputeWindow(t,e),e!==1&&(typeof i=="function"&&(n=i(n)),ac.set(t,n))),n}cached(e,t,i){const n=sc(e);return this.wNAF(n,this.getPrecomputes(n,e,i),t)}unsafe(e,t,i,n){const o=sc(e);return o===1?this._unsafeLadder(e,t,n):this.wNAFUnsafe(o,this.getPrecomputes(o,e,i),t,n)}createCache(e,t){Gg(t,this.bits),Kg.set(e,t),ac.delete(e)}hasCache(e){return sc(e)!==1}}function p1(r,e,t,i){let n=e,o=r.ZERO,a=r.ZERO;for(;t>qn||i>qn;)t&nn&&(o=o.add(n)),i&nn&&(a=a.add(n)),n=n.double(),t>>=nn,i>>=nn;return{p1:o,p2:a}}function g1(r,e,t,i){f1(t,r),h1(i,e);const n=t.length,o=i.length;if(n!==o)throw new Error("arrays of points and scalars must have equal length");const a=r.ZERO,s=Ro(BigInt(n));let c=1;s>12?c=s-3:s>4?c=s-2:s>0&&(c=2);const u=Vi(c),p=new Array(Number(u)+1).fill(a),f=Math.floor((e.BITS-1)/c)*c;let l=a;for(let d=f;d>=0;d-=c){p.fill(a);for(let b=0;b<o;b++){const x=i[b],_=Number(x>>BigInt(d)&u);p[_]=p[_].add(t[b])}let g=a;for(let b=p.length-1,x=a;b>0;b--)x=x.add(p[b]),g=g.add(x);if(l=l.add(g),d!==0)for(let b=0;b<c;b++)l=l.double()}return l}function Gh(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Dg(e),e}else return Mr(r,{isLE:t})}function m1(r,e,t={},i){if(i===void 0&&(i=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>qn))throw new Error(`CURVE.${c} must be positive bigint`)}const n=Gh(e.p,t.Fp,i),o=Gh(e.n,t.Fn,i),s=["Gx","Gy","a","b"];for(const c of s)if(!n.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:n,Fn:o}}const Kh=(r,e)=>(r+(r>=0?e:-e)/Rr)/e;function b1(r,e,t){const[[i,n],[o,a]]=e,s=Kh(a*r,t),c=Kh(-n*r,t);let u=r-s*i-c*o,p=-s*n-c*a;const f=u<mr,l=p<mr;f&&(u=-u),l&&(p=-p);const d=Vi(Math.ceil(Ro(t)/2))+Ct;if(u<mr||u>=d||p<mr||p>=d)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:f,k1:u,k2neg:l,k2:p}}function ll(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function cc(r,e){const t={};for(let i of Object.keys(e))t[i]=r[i]===void 0?e[i]:r[i];return La(t.lowS,"lowS"),La(t.prehash,"prehash"),t.format!==void 0&&ll(t.format),t}class v1 extends Error{constructor(e=""){super(e)}}const qr={Err:v1,_tlv:{encode:(r,e)=>{const{Err:t}=qr;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const i=e.length/2,n=Xo(i);if(n.length/2&128)throw new t("tlv.encode: long form length too big");const o=i>127?Xo(n.length/2|128):"";return Xo(r)+o+n+e},decode(r,e){const{Err:t}=qr;let i=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[i++]!==r)throw new t("tlv.decode: wrong tlv");const n=e[i++],o=!!(n&128);let a=0;if(!o)a=n;else{const c=n&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const u=e.subarray(i,i+c);if(u.length!==c)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const p of u)a=a<<8|p;if(i+=c,a<128)throw new t("tlv.decode(long): not minimal encoding")}const s=e.subarray(i,i+a);if(s.length!==a)throw new t("tlv.decode: wrong value length");return{v:s,l:e.subarray(i+a)}}},_int:{encode(r){const{Err:e}=qr;if(r<mr)throw new e("integer: negative integers are not allowed");let t=Xo(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=qr;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return hr(r)}},toSig(r){const{Err:e,_int:t,_tlv:i}=qr,n=Lt("signature",r),{v:o,l:a}=i.decode(48,n);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:s,l:c}=i.decode(2,o),{v:u,l:p}=i.decode(2,c);if(p.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(s),s:t.decode(u)}},hexFromSig(r){const{_tlv:e,_int:t}=qr,i=e.encode(2,t.encode(r.r)),n=e.encode(2,t.encode(r.s)),o=i+n;return e.encode(48,o)}},mr=BigInt(0),Ct=BigInt(1),Rr=BigInt(2),Tn=BigInt(3),fl=BigInt(4);function ci(r,e){const{BYTES:t}=r;let i;if(typeof e=="bigint")i=e;else{let n=Lt("private key",e);try{i=r.fromBytes(n)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}function $g(r,e={}){const t=m1("weierstrass",r,e),{Fp:i,Fn:n}=t;let o=t.CURVE;const{h:a,n:s}=o;ns(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!i.is0(o.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=Zg(i,n);function p(){if(!i.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(q,P,h){const{x:y,y:m}=P.toAffine(),S=i.toBytes(y);if(La(h,"isCompressed"),h){p();const T=!i.isOdd(m);return Ve(Vg(T),S)}else return Ve(Uint8Array.of(4),S,i.toBytes(m))}function l(q){tn(q,void 0,"Point");const{publicKey:P,publicKeyUncompressed:h}=u,y=q.length,m=q[0],S=q.subarray(1);if(y===P&&(m===2||m===3)){const T=i.fromBytes(S);if(!i.isValid(T))throw new Error("bad point: is not on curve, wrong x");const k=b(T);let U;try{U=i.sqrt(k)}catch(L){const J=L instanceof Error?": "+L.message:"";throw new Error("bad point: is not on curve, sqrt error"+J)}p();const I=i.isOdd(U);return(m&1)===1!==I&&(U=i.neg(U)),{x:T,y:U}}else if(y===h&&m===4){const T=i.BYTES,k=i.fromBytes(S.subarray(0,T)),U=i.fromBytes(S.subarray(T,T*2));if(!x(k,U))throw new Error("bad point: is not on curve");return{x:k,y:U}}else throw new Error(`bad point: got length ${y}, expected compressed=${P} or uncompressed=${h}`)}const d=e.toBytes||f,g=e.fromBytes||l;function b(q){const P=i.sqr(q),h=i.mul(P,q);return i.add(i.add(h,i.mul(q,o.a)),o.b)}function x(q,P){const h=i.sqr(P),y=b(q);return i.eql(h,y)}if(!x(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const _=i.mul(i.pow(o.a,Tn),fl),E=i.mul(i.sqr(o.b),BigInt(27));if(i.is0(i.add(_,E)))throw new Error("bad curve params: a or b");function O(q,P,h=!1){if(!i.isValid(P)||h&&i.is0(P))throw new Error(`bad point coordinate ${q}`);return P}function A(q){if(!(q instanceof D))throw new Error("ProjectivePoint expected")}function B(q){if(!c||!c.basises)throw new Error("no endo");return b1(q,c.basises,n.ORDER)}const N=ul((q,P)=>{const{X:h,Y:y,Z:m}=q;if(i.eql(m,i.ONE))return{x:h,y};const S=q.is0();P==null&&(P=S?i.ONE:i.inv(m));const T=i.mul(h,P),k=i.mul(y,P),U=i.mul(m,P);if(S)return{x:i.ZERO,y:i.ZERO};if(!i.eql(U,i.ONE))throw new Error("invZ was invalid");return{x:T,y:k}}),v=ul(q=>{if(q.is0()){if(e.allowInfinityPoint&&!i.is0(q.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:h}=q.toAffine();if(!i.isValid(P)||!i.isValid(h))throw new Error("bad point: x or y not field elements");if(!x(P,h))throw new Error("bad point: equation left != right");if(!q.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function j(q,P,h,y,m){return h=new D(i.mul(h.X,q),h.Y,h.Z),P=Ba(y,P),h=Ba(m,h),P.add(h)}class D{constructor(P,h,y){this.X=O("x",P),this.Y=O("y",h,!0),this.Z=O("z",y),Object.freeze(this)}static CURVE(){return o}static fromAffine(P){const{x:h,y}=P||{};if(!P||!i.isValid(h)||!i.isValid(y))throw new Error("invalid affine point");if(P instanceof D)throw new Error("projective point not allowed");return i.is0(h)&&i.is0(y)?D.ZERO:new D(h,y,i.ONE)}static fromBytes(P){const h=D.fromAffine(g(tn(P,void 0,"point")));return h.assertValidity(),h}static fromHex(P){return D.fromBytes(Lt("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,h=!0){return M.createCache(this,P),h||this.multiply(Tn),this}assertValidity(){v(this)}hasEvenY(){const{y:P}=this.toAffine();if(!i.isOdd)throw new Error("Field doesn't support isOdd");return!i.isOdd(P)}equals(P){A(P);const{X:h,Y:y,Z:m}=this,{X:S,Y:T,Z:k}=P,U=i.eql(i.mul(h,k),i.mul(S,m)),I=i.eql(i.mul(y,k),i.mul(T,m));return U&&I}negate(){return new D(this.X,i.neg(this.Y),this.Z)}double(){const{a:P,b:h}=o,y=i.mul(h,Tn),{X:m,Y:S,Z:T}=this;let k=i.ZERO,U=i.ZERO,I=i.ZERO,w=i.mul(m,m),L=i.mul(S,S),J=i.mul(T,T),Y=i.mul(m,S);return Y=i.add(Y,Y),I=i.mul(m,T),I=i.add(I,I),k=i.mul(P,I),U=i.mul(y,J),U=i.add(k,U),k=i.sub(L,U),U=i.add(L,U),U=i.mul(k,U),k=i.mul(Y,k),I=i.mul(y,I),J=i.mul(P,J),Y=i.sub(w,J),Y=i.mul(P,Y),Y=i.add(Y,I),I=i.add(w,w),w=i.add(I,w),w=i.add(w,J),w=i.mul(w,Y),U=i.add(U,w),J=i.mul(S,T),J=i.add(J,J),w=i.mul(J,Y),k=i.sub(k,w),I=i.mul(J,L),I=i.add(I,I),I=i.add(I,I),new D(k,U,I)}add(P){A(P);const{X:h,Y:y,Z:m}=this,{X:S,Y:T,Z:k}=P;let U=i.ZERO,I=i.ZERO,w=i.ZERO;const L=o.a,J=i.mul(o.b,Tn);let Y=i.mul(h,S),C=i.mul(y,T),K=i.mul(m,k),$=i.add(h,y),Z=i.add(S,T);$=i.mul($,Z),Z=i.add(Y,C),$=i.sub($,Z),Z=i.add(h,m);let Q=i.add(S,k);return Z=i.mul(Z,Q),Q=i.add(Y,K),Z=i.sub(Z,Q),Q=i.add(y,m),U=i.add(T,k),Q=i.mul(Q,U),U=i.add(C,K),Q=i.sub(Q,U),w=i.mul(L,Z),U=i.mul(J,K),w=i.add(U,w),U=i.sub(C,w),w=i.add(C,w),I=i.mul(U,w),C=i.add(Y,Y),C=i.add(C,Y),K=i.mul(L,K),Z=i.mul(J,Z),C=i.add(C,K),K=i.sub(Y,K),K=i.mul(L,K),Z=i.add(Z,K),Y=i.mul(C,Z),I=i.add(I,Y),Y=i.mul(Q,Z),U=i.mul($,U),U=i.sub(U,Y),Y=i.mul($,C),w=i.mul(Q,w),w=i.add(w,Y),new D(U,I,w)}subtract(P){return this.add(P.negate())}is0(){return this.equals(D.ZERO)}multiply(P){const{endo:h}=e;if(!n.isValidNot0(P))throw new Error("invalid scalar: out of range");let y,m;const S=T=>M.cached(this,T,k=>mo(D,k));if(h){const{k1neg:T,k1:k,k2neg:U,k2:I}=B(P),{p:w,f:L}=S(k),{p:J,f:Y}=S(I);m=L.add(Y),y=j(h.beta,w,J,T,U)}else{const{p:T,f:k}=S(P);y=T,m=k}return mo(D,[y,m])[0]}multiplyUnsafe(P){const{endo:h}=e,y=this;if(!n.isValid(P))throw new Error("invalid scalar: out of range");if(P===mr||y.is0())return D.ZERO;if(P===Ct)return y;if(M.hasCache(this))return this.multiply(P);if(h){const{k1neg:m,k1:S,k2neg:T,k2:k}=B(P),{p1:U,p2:I}=p1(D,y,S,k);return j(h.beta,U,I,m,T)}else return M.unsafe(y,P)}multiplyAndAddUnsafe(P,h,y){const m=this.multiplyUnsafe(h).add(P.multiplyUnsafe(y));return m.is0()?void 0:m}toAffine(P){return N(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return a===Ct?!0:P?P(D,this):M.unsafe(this,s).is0()}clearCofactor(){const{clearCofactor:P}=e;return a===Ct?this:P?P(D,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(P=!0){return La(P,"isCompressed"),this.assertValidity(),d(D,this,P)}toHex(P=!0){return Ci(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return mo(D,P)}static msm(P,h){return g1(D,n,P,h)}static fromPrivateKey(P){return D.BASE.multiply(ci(n,P))}}D.BASE=new D(o.Gx,o.Gy,i.ONE),D.ZERO=new D(i.ZERO,i.ONE,i.ZERO),D.Fp=i,D.Fn=n;const R=n.BITS,M=new d1(D,e.endo?Math.ceil(R/2):R);return D.BASE.precompute(8),D}function Vg(r){return Uint8Array.of(r?2:3)}function y1(r,e){const t=r.ORDER;let i=mr;for(let g=t-Ct;g%Rr===mr;g/=Rr)i+=Ct;const n=i,o=Rr<<n-Ct-Ct,a=o*Rr,s=(t-Ct)/a,c=(s-Ct)/Rr,u=a-Ct,p=o,f=r.pow(e,s),l=r.pow(e,(s+Ct)/Rr);let d=(g,b)=>{let x=f,_=r.pow(b,u),E=r.sqr(_);E=r.mul(E,b);let O=r.mul(g,E);O=r.pow(O,c),O=r.mul(O,_),_=r.mul(O,b),E=r.mul(O,g);let A=r.mul(E,_);O=r.pow(A,p);let B=r.eql(O,r.ONE);_=r.mul(E,l),O=r.mul(A,x),E=r.cmov(_,E,B),A=r.cmov(O,A,B);for(let N=n;N>Ct;N--){let v=N-Rr;v=Rr<<v-Ct;let j=r.pow(A,v);const D=r.eql(j,r.ONE);_=r.mul(E,x),x=r.mul(x,x),j=r.mul(A,x),E=r.cmov(_,E,D),A=r.cmov(j,A,D)}return{isValid:B,value:E}};if(r.ORDER%fl===Tn){const g=(r.ORDER-Tn)/fl,b=r.sqrt(r.neg(e));d=(x,_)=>{let E=r.sqr(_);const O=r.mul(x,_);E=r.mul(E,O);let A=r.pow(E,g);A=r.mul(A,O);const B=r.mul(A,b),N=r.mul(r.sqr(A),_),v=r.eql(N,x);let j=r.cmov(B,A,v);return{isValid:v,value:j}}}return d}function Wg(r,e){Dg(r);const{A:t,B:i,Z:n}=e;if(!r.isValid(t)||!r.isValid(i)||!r.isValid(n))throw new Error("mapToCurveSimpleSWU: invalid opts");const o=y1(r,n);if(!r.isOdd)throw new Error("Field does not have .isOdd()");return a=>{let s,c,u,p,f,l,d,g;s=r.sqr(a),s=r.mul(s,n),c=r.sqr(s),c=r.add(c,s),u=r.add(c,r.ONE),u=r.mul(u,i),p=r.cmov(n,r.neg(c),!r.eql(c,r.ZERO)),p=r.mul(p,t),c=r.sqr(u),l=r.sqr(p),f=r.mul(l,t),c=r.add(c,f),c=r.mul(c,u),l=r.mul(l,p),f=r.mul(l,i),c=r.add(c,f),d=r.mul(s,u);const{isValid:b,value:x}=o(c,l);g=r.mul(s,a),g=r.mul(g,x),d=r.cmov(d,u,b),g=r.cmov(g,x,b);const _=r.isOdd(a)===r.isOdd(g);g=r.cmov(r.neg(g),g,_);const E=yn(r,[p],!0)[0];return d=r.mul(d,E),{x:d,y:g}}}function Zg(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function _1(r,e={}){const{Fn:t}=r,i=e.randomBytes||Kl,n=Object.assign(Zg(r.Fp,t),{seed:Zl(t.ORDER)});function o(d){try{return!!ci(t,d)}catch{return!1}}function a(d,g){const{publicKey:b,publicKeyUncompressed:x}=n;try{const _=d.length;return g===!0&&_!==b||g===!1&&_!==x?!1:!!r.fromBytes(d)}catch{return!1}}function s(d=i(n.seed)){return Fg(tn(d,n.seed,"seed"),t.ORDER)}function c(d,g=!0){return r.BASE.multiply(ci(t,d)).toBytes(g)}function u(d){const g=s(d);return{secretKey:g,publicKey:c(g)}}function p(d){if(typeof d=="bigint")return!1;if(d instanceof r)return!0;const{secretKey:g,publicKey:b,publicKeyUncompressed:x}=n;if(t.allowedLengths||g===b)return;const _=Lt("key",d).length;return _===b||_===x}function f(d,g,b=!0){if(p(d)===!0)throw new Error("first arg must be private key");if(p(g)===!1)throw new Error("second arg must be public key");const x=ci(t,d);return r.fromHex(g).multiply(x).toBytes(b)}return Object.freeze({getPublicKey:c,getSharedSecret:f,keygen:u,Point:r,utils:{isValidSecretKey:o,isValidPublicKey:a,randomSecretKey:s,isValidPrivateKey:o,randomPrivateKey:s,normPrivateKeyToScalar:d=>ci(t,d),precompute(d=8,g=r.BASE){return g.precompute(d,!1)}},lengths:n})}function w1(r,e,t={}){_g(e),ns(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const i=t.randomBytes||Kl,n=t.hmac||((h,...y)=>Og(e,h,Ve(...y))),{Fp:o,Fn:a}=r,{ORDER:s,BITS:c}=a,{keygen:u,getPublicKey:p,getSharedSecret:f,utils:l,lengths:d}=_1(r,t),g={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},b="compact";function x(h){const y=s>>Ct;return h>y}function _(h,y){if(!a.isValidNot0(y))throw new Error(`invalid signature ${h}: out of range 1..Point.Fn.ORDER`);return y}function E(h,y){ll(y);const m=d.signature,S=y==="compact"?m:y==="recovered"?m+1:void 0;return tn(h,S,`${y} signature`)}class O{constructor(y,m,S){this.r=_("r",y),this.s=_("s",m),S!=null&&(this.recovery=S),Object.freeze(this)}static fromBytes(y,m=b){E(y,m);let S;if(m==="der"){const{r:I,s:w}=qr.toSig(tn(y));return new O(I,w)}m==="recovered"&&(S=y[0],m="compact",y=y.subarray(1));const T=a.BYTES,k=y.subarray(0,T),U=y.subarray(T,T*2);return new O(a.fromBytes(k),a.fromBytes(U),S)}static fromHex(y,m){return this.fromBytes(ka(y),m)}addRecoveryBit(y){return new O(this.r,this.s,y)}recoverPublicKey(y){const m=o.ORDER,{r:S,s:T,recovery:k}=this;if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");if(s*Rr<m&&k>1)throw new Error("recovery id is ambiguous for h>1 curve");const I=k===2||k===3?S+s:S;if(!o.isValid(I))throw new Error("recovery id 2 or 3 invalid");const w=o.toBytes(I),L=r.fromBytes(Ve(Vg((k&1)===0),w)),J=a.inv(I),Y=B(Lt("msgHash",y)),C=a.create(-Y*J),K=a.create(T*J),$=r.BASE.multiplyUnsafe(C).add(L.multiplyUnsafe(K));if($.is0())throw new Error("point at infinify");return $.assertValidity(),$}hasHighS(){return x(this.s)}toBytes(y=b){if(ll(y),y==="der")return ka(qr.hexFromSig(this));const m=a.toBytes(this.r),S=a.toBytes(this.s);if(y==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ve(Uint8Array.of(this.recovery),m,S)}return Ve(m,S)}toHex(y){return Ci(this.toBytes(y))}assertValidity(){}static fromCompact(y){return O.fromBytes(Lt("sig",y),"compact")}static fromDER(y){return O.fromBytes(Lt("sig",y),"der")}normalizeS(){return this.hasHighS()?new O(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ci(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ci(this.toBytes("compact"))}}const A=t.bits2int||function(y){if(y.length>8192)throw new Error("input is too large");const m=hr(y),S=y.length*8-c;return S>0?m>>BigInt(S):m},B=t.bits2int_modN||function(y){return a.create(A(y))},N=Vi(c);function v(h){return t1("num < 2^"+c,h,mr,N),a.toBytes(h)}function j(h,y){return tn(h,void 0,"message"),y?tn(e(h),void 0,"prehashed message"):h}function D(h,y,m){if(["recovered","canonical"].some(C=>C in m))throw new Error("sign() legacy options not supported");const{lowS:S,prehash:T,extraEntropy:k}=cc(m,g);h=j(h,T);const U=B(h),I=ci(a,y),w=[v(I),v(U)];if(k!=null&&k!==!1){const C=k===!0?i(d.secretKey):k;w.push(Lt("extraEntropy",C))}const L=Ve(...w),J=U;function Y(C){const K=A(C);if(!a.isValidNot0(K))return;const $=a.inv(K),Z=r.BASE.multiply(K).toAffine(),Q=a.create(Z.x);if(Q===mr)return;const z=a.create($*a.create(J+Q*I));if(z===mr)return;let H=(Z.x===Q?0:2)|Number(Z.y&Ct),W=z;return S&&x(z)&&(W=a.neg(z),H^=1),new O(Q,W,H)}return{seed:L,k2sig:Y}}function R(h,y,m={}){h=Lt("message",h);const{seed:S,k2sig:T}=D(h,y,m);return i1(e.outputLen,a.BYTES,n)(S,T)}function M(h){let y;const m=typeof h=="string"||Uo(h),S=!m&&h!==null&&typeof h=="object"&&typeof h.r=="bigint"&&typeof h.s=="bigint";if(!m&&!S)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(S)y=new O(h.r,h.s);else if(m){try{y=O.fromBytes(Lt("sig",h),"der")}catch(T){if(!(T instanceof qr.Err))throw T}if(!y)try{y=O.fromBytes(Lt("sig",h),"compact")}catch{return!1}}return y||!1}function q(h,y,m,S={}){const{lowS:T,prehash:k,format:U}=cc(S,g);if(m=Lt("publicKey",m),y=j(Lt("message",y),k),"strict"in S)throw new Error("options.strict was renamed to lowS");const I=U===void 0?M(h):O.fromBytes(Lt("sig",h),U);if(I===!1)return!1;try{const w=r.fromBytes(m);if(T&&I.hasHighS())return!1;const{r:L,s:J}=I,Y=B(y),C=a.inv(J),K=a.create(Y*C),$=a.create(L*C),Z=r.BASE.multiplyUnsafe(K).add(w.multiplyUnsafe($));return Z.is0()?!1:a.create(Z.x)===L}catch{return!1}}function P(h,y,m={}){const{prehash:S}=cc(m,g);return y=j(y,S),O.fromBytes(h,"recovered").recoverPublicKey(y).toBytes()}return Object.freeze({keygen:u,getPublicKey:p,getSharedSecret:f,utils:l,lengths:d,Point:r,sign:R,verify:q,recoverPublicKey:P,Signature:O,hash:e})}function $h(r){const{CURVE:e,curveOpts:t}=Jg(r),i=$g(e,t);return S1(r,i)}function Jg(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp;let i=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const n=Mr(e.n,{BITS:r.nBitLength,allowedLengths:i,modFromBytes:r.wrapPrivateKey}),o={Fp:t,Fn:n,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:o}}function E1(r){const{CURVE:e,curveOpts:t}=Jg(r),i={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:i}}function x1(r,e,t){function i(n){const o=r.sqr(n),a=r.mul(o,n);return r.add(r.add(a,r.mul(n,e)),t)}return i}function S1(r,e){const{Fp:t,Fn:i}=e;function n(a){return Ig(a,Ct,i.ORDER)}const o=x1(t,r.a,r.b);return Object.assign({},{CURVE:r,Point:e,ProjectivePoint:e,normPrivateKeyToScalar:a=>ci(i,a),weierstrassEquation:o,isWithinCurveOrder:n})}function A1(r,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,Ug(t.Fn.ORDER,t.Fn.BITS))})}function R1(r){const{CURVE:e,curveOpts:t,hash:i,ecdsaOpts:n}=E1(r),o=$g(e,t),a=w1(o,i,n);return A1(r,a)}function as(r,e){const t=i=>R1({...r,hash:i});return{...t(e),create:t}}const O1=hr;function wi(r,e){if(Oo(r),Oo(e),r<0||r>=1<<8*e)throw new Error("invalid I2OSP input: "+r);const t=Array.from({length:e}).fill(0);for(let i=e-1;i>=0;i--)t[i]=r&255,r>>>=8;return new Uint8Array(t)}function P1(r,e){const t=new Uint8Array(r.length);for(let i=0;i<r.length;i++)t[i]=r[i]^e[i];return t}function Oo(r){if(!Number.isSafeInteger(r))throw new Error("number expected")}function Yg(r){if(!Uo(r)&&typeof r!="string")throw new Error("DST must be Uint8Array or string");return typeof r=="string"?qo(r):r}function T1(r,e,t,i){nr(r),Oo(t),e=Yg(e),e.length>255&&(e=i(Ve(qo("H2C-OVERSIZE-DST-"),e)));const{outputLen:n,blockLen:o}=i,a=Math.ceil(t/n);if(t>65535||a>255)throw new Error("expand_message_xmd: invalid lenInBytes");const s=Ve(e,wi(e.length,1)),c=wi(0,o),u=wi(t,2),p=new Array(a),f=i(Ve(c,r,u,wi(0,1),s));p[0]=i(Ve(f,wi(1,1),s));for(let d=1;d<=a;d++){const g=[P1(f,p[d-1]),wi(d+1,1),s];p[d]=i(Ve(...g))}return Ve(...p).slice(0,t)}function k1(r,e,t,i,n){if(nr(r),Oo(t),e=Yg(e),e.length>255){const o=Math.ceil(2*i/8);e=n.create({dkLen:o}).update(qo("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return n.create({dkLen:t}).update(r).update(wi(t,2)).update(e).update(wi(e.length,1)).digest()}function uc(r,e,t){ns(t,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:i,k:n,m:o,hash:a,expand:s,DST:c}=t;if(!n1(t.hash))throw new Error("expected valid hash");nr(r),Oo(e);const u=i.toString(2).length,p=Math.ceil((u+n)/8),f=e*o*p;let l;if(s==="xmd")l=T1(r,c,f,a);else if(s==="xof")l=k1(r,c,f,n,a);else if(s==="_internal_pass")l=r;else throw new Error('expand must be "xmd" or "xof"');const d=new Array(e);for(let g=0;g<e;g++){const b=new Array(o);for(let x=0;x<o;x++){const _=p*(x+g*o),E=l.subarray(_,_+p);b[x]=ur(O1(E),i)}d[g]=b}return d}function Xg(r,e){const t=e.map(i=>Array.from(i).reverse());return(i,n)=>{const[o,a,s,c]=t.map(f=>f.reduce((l,d)=>r.add(r.mul(l,i),d))),[u,p]=yn(r,[a,c],!0);return i=r.mul(o,u),n=r.mul(n,r.mul(s,p)),{x:i,y:n}}}const I1=qo("HashToScalar-");function Vh(r,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function i(o){return r.fromAffine(e(o))}function n(o){const a=o.clearCofactor();return a.equals(r.ZERO)?r.ZERO:(a.assertValidity(),a)}return{defaults:t,hashToCurve(o,a){const s=Object.assign({},t,a),c=uc(o,2,s),u=i(c[0]),p=i(c[1]);return n(u.add(p))},encodeToCurve(o,a){const s=t.encodeDST?{DST:t.encodeDST}:{},c=Object.assign({},t,s,a),u=uc(o,1,c),p=i(u[0]);return n(p)},mapToCurve(o){if(!Array.isArray(o))throw new Error("expected array of bigints");for(const a of o)if(typeof a!="bigint")throw new Error("expected array of bigints");return n(i(o))},hashToScalar(o,a){const s=r.Fn.ORDER,c=Object.assign({},t,{p:s,m:1,DST:I1},a);return uc(o,1,c)[0][0]}}}const Jl={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},L1={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Wh=BigInt(2);function N1(r){const e=Jl.p,t=BigInt(3),i=BigInt(6),n=BigInt(11),o=BigInt(22),a=BigInt(23),s=BigInt(44),c=BigInt(88),u=r*r*r%e,p=u*u*r%e,f=sr(p,t,e)*p%e,l=sr(f,t,e)*p%e,d=sr(l,Wh,e)*u%e,g=sr(d,n,e)*d%e,b=sr(g,o,e)*g%e,x=sr(b,s,e)*b%e,_=sr(x,c,e)*x%e,E=sr(_,s,e)*b%e,O=sr(E,t,e)*p%e,A=sr(O,a,e)*g%e,B=sr(A,i,e)*u%e,N=sr(B,Wh,e);if(!hl.eql(hl.sqr(N),r))throw new Error("Cannot find square root");return N}const hl=Mr(Jl.p,{sqrt:N1}),Bn=as({...Jl,Fp:hl,lowS:!0,endo:L1},$l);const Qg={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},em={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},tm={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},B1=Mr(Qg.p),M1=Mr(em.p),j1=Mr(tm.p),Mn=as({...Qg,Fp:B1,lowS:!1},$l);as({...em,Fp:M1,lowS:!1},e1);as({...tm,Fp:j1,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Qy);var Qo={},ea={exports:{}};var Zh;function Er(){return Zh||(Zh=1,(function(r,e){var t=Co(),i=t.Buffer;function n(a,s){for(var c in a)s[c]=a[c]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=t:(n(t,e),e.Buffer=o);function o(a,s,c){return i(a,s,c)}o.prototype=Object.create(i.prototype),n(i,o),o.from=function(a,s,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return i(a,s,c)},o.alloc=function(a,s,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=i(a);return s!==void 0?typeof c=="string"?u.fill(s,c):u.fill(s):u.fill(0),u},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(ea,ea.exports)),ea.exports}var lc,Jh;function rm(){if(Jh)return lc;Jh=1;var r=Math.pow(2,30)-1;return lc=function(e,t){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof t!="number")throw new TypeError("Key length not a number");if(t<0||t>r||t!==t)throw new TypeError("Bad key length")},lc}var fc,Yh;function im(){if(Yh)return fc;Yh=1;var r;if(Ke.process&&Ke.process.browser)r="utf-8";else if(Ke.process&&Ke.process.version){var e=parseInt(process.version.split(".")[0].slice(1),10);r=e>=6?"utf-8":"binary"}else r="utf-8";return fc=r,fc}var hc,Xh;function C1(){if(Xh)return hc;Xh=1;var r=4,e=new Buffer(r);e.fill(0);var t=8,i=16;function n(o){if(o.length%r!==0){var a=o.length+(r-o.length%r);o=Buffer.concat([o,e],a)}for(var s=new Array(o.length>>>2),c=0,u=0;c<o.length;c+=r,u++)s[u]=o.readInt32LE(c);return s}return hc=function(a,s){var c=s(n(a),a.length*t);a=new Buffer(i);for(var u=0;u<c.length;u++)a.writeInt32LE(c[u],u<<2,!0);return a},hc}var dc,Qh;function z1(){if(Qh)return dc;Qh=1;var r=C1();function e(u,p){u[p>>5]|=128<<p%32,u[(p+64>>>9<<4)+14]=p;for(var f=1732584193,l=-271733879,d=-1732584194,g=271733878,b=0;b<u.length;b+=16){var x=f,_=l,E=d,O=g;f=i(f,l,d,g,u[b+0],7,-680876936),g=i(g,f,l,d,u[b+1],12,-389564586),d=i(d,g,f,l,u[b+2],17,606105819),l=i(l,d,g,f,u[b+3],22,-1044525330),f=i(f,l,d,g,u[b+4],7,-176418897),g=i(g,f,l,d,u[b+5],12,1200080426),d=i(d,g,f,l,u[b+6],17,-1473231341),l=i(l,d,g,f,u[b+7],22,-45705983),f=i(f,l,d,g,u[b+8],7,1770035416),g=i(g,f,l,d,u[b+9],12,-1958414417),d=i(d,g,f,l,u[b+10],17,-42063),l=i(l,d,g,f,u[b+11],22,-1990404162),f=i(f,l,d,g,u[b+12],7,1804603682),g=i(g,f,l,d,u[b+13],12,-40341101),d=i(d,g,f,l,u[b+14],17,-1502002290),l=i(l,d,g,f,u[b+15],22,1236535329),f=n(f,l,d,g,u[b+1],5,-165796510),g=n(g,f,l,d,u[b+6],9,-1069501632),d=n(d,g,f,l,u[b+11],14,643717713),l=n(l,d,g,f,u[b+0],20,-373897302),f=n(f,l,d,g,u[b+5],5,-701558691),g=n(g,f,l,d,u[b+10],9,38016083),d=n(d,g,f,l,u[b+15],14,-660478335),l=n(l,d,g,f,u[b+4],20,-405537848),f=n(f,l,d,g,u[b+9],5,568446438),g=n(g,f,l,d,u[b+14],9,-1019803690),d=n(d,g,f,l,u[b+3],14,-187363961),l=n(l,d,g,f,u[b+8],20,1163531501),f=n(f,l,d,g,u[b+13],5,-1444681467),g=n(g,f,l,d,u[b+2],9,-51403784),d=n(d,g,f,l,u[b+7],14,1735328473),l=n(l,d,g,f,u[b+12],20,-1926607734),f=o(f,l,d,g,u[b+5],4,-378558),g=o(g,f,l,d,u[b+8],11,-2022574463),d=o(d,g,f,l,u[b+11],16,1839030562),l=o(l,d,g,f,u[b+14],23,-35309556),f=o(f,l,d,g,u[b+1],4,-1530992060),g=o(g,f,l,d,u[b+4],11,1272893353),d=o(d,g,f,l,u[b+7],16,-155497632),l=o(l,d,g,f,u[b+10],23,-1094730640),f=o(f,l,d,g,u[b+13],4,681279174),g=o(g,f,l,d,u[b+0],11,-358537222),d=o(d,g,f,l,u[b+3],16,-722521979),l=o(l,d,g,f,u[b+6],23,76029189),f=o(f,l,d,g,u[b+9],4,-640364487),g=o(g,f,l,d,u[b+12],11,-421815835),d=o(d,g,f,l,u[b+15],16,530742520),l=o(l,d,g,f,u[b+2],23,-995338651),f=a(f,l,d,g,u[b+0],6,-198630844),g=a(g,f,l,d,u[b+7],10,1126891415),d=a(d,g,f,l,u[b+14],15,-1416354905),l=a(l,d,g,f,u[b+5],21,-57434055),f=a(f,l,d,g,u[b+12],6,1700485571),g=a(g,f,l,d,u[b+3],10,-1894986606),d=a(d,g,f,l,u[b+10],15,-1051523),l=a(l,d,g,f,u[b+1],21,-2054922799),f=a(f,l,d,g,u[b+8],6,1873313359),g=a(g,f,l,d,u[b+15],10,-30611744),d=a(d,g,f,l,u[b+6],15,-1560198380),l=a(l,d,g,f,u[b+13],21,1309151649),f=a(f,l,d,g,u[b+4],6,-145523070),g=a(g,f,l,d,u[b+11],10,-1120210379),d=a(d,g,f,l,u[b+2],15,718787259),l=a(l,d,g,f,u[b+9],21,-343485551),f=s(f,x),l=s(l,_),d=s(d,E),g=s(g,O)}return[f,l,d,g]}function t(u,p,f,l,d,g){return s(c(s(s(p,u),s(l,g)),d),f)}function i(u,p,f,l,d,g,b){return t(p&f|~p&l,u,p,d,g,b)}function n(u,p,f,l,d,g,b){return t(p&l|f&~l,u,p,d,g,b)}function o(u,p,f,l,d,g,b){return t(p^f^l,u,p,d,g,b)}function a(u,p,f,l,d,g,b){return t(f^(p|~l),u,p,d,g,b)}function s(u,p){var f=(u&65535)+(p&65535),l=(u>>16)+(p>>16)+(f>>16);return l<<16|f&65535}function c(u,p){return u<<p|u>>>32-p}return dc=function(p){return r(p,e)},dc}var ta={exports:{}},ed;function ar(){return ed||(ed=1,typeof Object.create=="function"?ta.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ta.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}),ta.exports}var ra={exports:{}},pc,td;function Zn(){return td||(td=1,pc={}),pc}var rd={},ia={exports:{}},id;function nm(){if(id)return ia.exports;id=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(B,N,v){return Function.prototype.apply.call(B,N,v)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:t=function(B){return Object.getOwnPropertyNames(B)};function i(A){console&&console.warn&&console.warn(A)}var n=Number.isNaN||function(B){return B!==B};function o(){o.init.call(this)}ia.exports=o,ia.exports.once=_,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(A){if(typeof A!="number"||A<0||n(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");a=A}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(B){if(typeof B!="number"||B<0||n(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this};function c(A){return A._maxListeners===void 0?o.defaultMaxListeners:A._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(B){for(var N=[],v=1;v<arguments.length;v++)N.push(arguments[v]);var j=B==="error",D=this._events;if(D!==void 0)j=j&&D.error===void 0;else if(!j)return!1;if(j){var R;if(N.length>0&&(R=N[0]),R instanceof Error)throw R;var M=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw M.context=R,M}var q=D[B];if(q===void 0)return!1;if(typeof q=="function")e(q,this,N);else for(var P=q.length,h=g(q,P),v=0;v<P;++v)e(h[v],this,N);return!0};function u(A,B,N,v){var j,D,R;if(s(N),D=A._events,D===void 0?(D=A._events=Object.create(null),A._eventsCount=0):(D.newListener!==void 0&&(A.emit("newListener",B,N.listener?N.listener:N),D=A._events),R=D[B]),R===void 0)R=D[B]=N,++A._eventsCount;else if(typeof R=="function"?R=D[B]=v?[N,R]:[R,N]:v?R.unshift(N):R.push(N),j=c(A),j>0&&R.length>j&&!R.warned){R.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+R.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=A,M.type=B,M.count=R.length,i(M)}return A}o.prototype.addListener=function(B,N){return u(this,B,N,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(B,N){return u(this,B,N,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(A,B,N){var v={fired:!1,wrapFn:void 0,target:A,type:B,listener:N},j=p.bind(v);return j.listener=N,v.wrapFn=j,j}o.prototype.once=function(B,N){return s(N),this.on(B,f(this,B,N)),this},o.prototype.prependOnceListener=function(B,N){return s(N),this.prependListener(B,f(this,B,N)),this},o.prototype.removeListener=function(B,N){var v,j,D,R,M;if(s(N),j=this._events,j===void 0)return this;if(v=j[B],v===void 0)return this;if(v===N||v.listener===N)--this._eventsCount===0?this._events=Object.create(null):(delete j[B],j.removeListener&&this.emit("removeListener",B,v.listener||N));else if(typeof v!="function"){for(D=-1,R=v.length-1;R>=0;R--)if(v[R]===N||v[R].listener===N){M=v[R].listener,D=R;break}if(D<0)return this;D===0?v.shift():b(v,D),v.length===1&&(j[B]=v[0]),j.removeListener!==void 0&&this.emit("removeListener",B,M||N)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(B){var N,v,j;if(v=this._events,v===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[B]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete v[B]),this;if(arguments.length===0){var D=Object.keys(v),R;for(j=0;j<D.length;++j)R=D[j],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(N=v[B],typeof N=="function")this.removeListener(B,N);else if(N!==void 0)for(j=N.length-1;j>=0;j--)this.removeListener(B,N[j]);return this};function l(A,B,N){var v=A._events;if(v===void 0)return[];var j=v[B];return j===void 0?[]:typeof j=="function"?N?[j.listener||j]:[j]:N?x(j):g(j,j.length)}o.prototype.listeners=function(B){return l(this,B,!0)},o.prototype.rawListeners=function(B){return l(this,B,!1)},o.listenerCount=function(A,B){return typeof A.listenerCount=="function"?A.listenerCount(B):d.call(A,B)},o.prototype.listenerCount=d;function d(A){var B=this._events;if(B!==void 0){var N=B[A];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function g(A,B){for(var N=new Array(B),v=0;v<B;++v)N[v]=A[v];return N}function b(A,B){for(;B+1<A.length;B++)A[B]=A[B+1];A.pop()}function x(A){for(var B=new Array(A.length),N=0;N<B.length;++N)B[N]=A[N].listener||A[N];return B}function _(A,B){return new Promise(function(N,v){function j(R){A.removeListener(B,D),v(R)}function D(){typeof A.removeListener=="function"&&A.removeListener("error",j),N([].slice.call(arguments))}O(A,B,D,{once:!0}),B!=="error"&&E(A,j,{once:!0})})}function E(A,B,N){typeof A.on=="function"&&O(A,"error",B,N)}function O(A,B,N,v){if(typeof A.on=="function")v.once?A.once(B,N):A.on(B,N);else if(typeof A.addEventListener=="function")A.addEventListener(B,function j(D){v.once&&A.removeEventListener(B,j),N(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return ia.exports}var gc,nd;function om(){return nd||(nd=1,gc=nm().EventEmitter),gc}var mc,od;function H1(){if(od)return mc;od=1;function r(l,d){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(l);d&&(b=b.filter(function(x){return Object.getOwnPropertyDescriptor(l,x).enumerable})),g.push.apply(g,b)}return g}function e(l){for(var d=1;d<arguments.length;d++){var g=arguments[d]!=null?arguments[d]:{};d%2?r(Object(g),!0).forEach(function(b){t(l,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(g)):r(Object(g)).forEach(function(b){Object.defineProperty(l,b,Object.getOwnPropertyDescriptor(g,b))})}return l}function t(l,d,g){return d in l?Object.defineProperty(l,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):l[d]=g,l}function i(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}function n(l,d){for(var g=0;g<d.length;g++){var b=d[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(l,b.key,b)}}function o(l,d,g){return d&&n(l.prototype,d),l}var a=Co(),s=a.Buffer,c=Ja,u=c.inspect,p=u&&u.custom||"inspect";function f(l,d,g){s.prototype.copy.call(l,d,g)}return mc=(function(){function l(){i(this,l),this.head=null,this.tail=null,this.length=0}return o(l,[{key:"push",value:function(g){var b={data:g,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(g){var b={data:g,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var b=this.head,x=""+b.data;b=b.next;)x+=g+b.data;return x}},{key:"concat",value:function(g){if(this.length===0)return s.alloc(0);for(var b=s.allocUnsafe(g>>>0),x=this.head,_=0;x;)f(x.data,b,_),_+=x.data.length,x=x.next;return b}},{key:"consume",value:function(g,b){var x;return g<this.head.data.length?(x=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):g===this.head.data.length?x=this.shift():x=b?this._getString(g):this._getBuffer(g),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var b=this.head,x=1,_=b.data;for(g-=_.length;b=b.next;){var E=b.data,O=g>E.length?E.length:g;if(O===E.length?_+=E:_+=E.slice(0,g),g-=O,g===0){O===E.length?(++x,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=E.slice(O));break}++x}return this.length-=x,_}},{key:"_getBuffer",value:function(g){var b=s.allocUnsafe(g),x=this.head,_=1;for(x.data.copy(b),g-=x.data.length;x=x.next;){var E=x.data,O=g>E.length?E.length:g;if(E.copy(b,b.length-g,0,O),g-=O,g===0){O===E.length?(++_,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=E.slice(O));break}++_}return this.length-=_,b}},{key:p,value:function(g,b){return u(this,e({},b,{depth:0,customInspect:!1}))}}]),l})(),mc}var bc,ad;function am(){if(ad)return bc;ad=1;function r(a,s){var c=this,u=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return u||p?(s?s(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,a)):process.nextTick(n,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(f){!s&&f?c._writableState?c._writableState.errorEmitted?process.nextTick(t,c):(c._writableState.errorEmitted=!0,process.nextTick(e,c,f)):process.nextTick(e,c,f):s?(process.nextTick(t,c),s(f)):process.nextTick(t,c)}),this)}function e(a,s){n(a,s),t(a)}function t(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function n(a,s){a.emit("error",s)}function o(a,s){var c=a._readableState,u=a._writableState;c&&c.autoDestroy||u&&u.autoDestroy?a.destroy(s):a.emit("error",s)}return bc={destroy:r,undestroy:i,errorOrDestroy:o},bc}var vc={},sd;function Jn(){if(sd)return vc;sd=1;function r(s,c){s.prototype=Object.create(c.prototype),s.prototype.constructor=s,s.__proto__=c}var e={};function t(s,c,u){u||(u=Error);function p(l,d,g){return typeof c=="string"?c:c(l,d,g)}var f=(function(l){r(d,l);function d(g,b,x){return l.call(this,p(g,b,x))||this}return d})(u);f.prototype.name=u.name,f.prototype.code=s,e[s]=f}function i(s,c){if(Array.isArray(s)){var u=s.length;return s=s.map(function(p){return String(p)}),u>2?"one of ".concat(c," ").concat(s.slice(0,u-1).join(", "),", or ")+s[u-1]:u===2?"one of ".concat(c," ").concat(s[0]," or ").concat(s[1]):"of ".concat(c," ").concat(s[0])}else return"of ".concat(c," ").concat(String(s))}function n(s,c,u){return s.substr(0,c.length)===c}function o(s,c,u){return(u===void 0||u>s.length)&&(u=s.length),s.substring(u-c.length,u)===c}function a(s,c,u){return typeof u!="number"&&(u=0),u+c.length>s.length?!1:s.indexOf(c,u)!==-1}return t("ERR_INVALID_OPT_VALUE",function(s,c){return'The value "'+c+'" is invalid for option "'+s+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(s,c,u){var p;typeof c=="string"&&n(c,"not ")?(p="must not be",c=c.replace(/^not /,"")):p="must be";var f;if(o(s," argument"))f="The ".concat(s," ").concat(p," ").concat(i(c,"type"));else{var l=a(s,".")?"property":"argument";f='The "'.concat(s,'" ').concat(l," ").concat(p," ").concat(i(c,"type"))}return f+=". Received type ".concat(typeof u),f},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),vc.codes=e,vc}var yc,cd;function sm(){if(cd)return yc;cd=1;var r=Jn().codes.ERR_INVALID_OPT_VALUE;function e(i,n,o){return i.highWaterMark!=null?i.highWaterMark:n?i[o]:null}function t(i,n,o,a){var s=e(n,a,o);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var c=a?o:"highWaterMark";throw new r(c,s)}return Math.floor(s)}return i.objectMode?16:16*1024}return yc={getHighWaterMark:t},yc}var _c={},na={exports:{}},ud;function D1(){return ud||(ud=1,(function(r,e){var t=Co(),i=t.Buffer;function n(a,s){for(var c in a)s[c]=a[c]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=t:(n(t,e),e.Buffer=o);function o(a,s,c){return i(a,s,c)}n(i,o),o.from=function(a,s,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return i(a,s,c)},o.alloc=function(a,s,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=i(a);return s!==void 0?typeof c=="string"?u.fill(s,c):u.fill(s):u.fill(0),u},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(na,na.exports)),na.exports}var ld;function fd(){if(ld)return _c;ld=1;var r=D1().Buffer,e=r.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(_){if(!_)return"utf8";for(var E;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(E)return;_=(""+_).toLowerCase(),E=!0}}function i(_){var E=t(_);if(typeof E!="string"&&(r.isEncoding===e||!e(_)))throw new Error("Unknown encoding: "+_);return E||_}_c.StringDecoder=n;function n(_){this.encoding=i(_);var E;switch(this.encoding){case"utf16le":this.text=f,this.end=l,E=4;break;case"utf8":this.fillLast=c,E=4;break;case"base64":this.text=d,this.end=g,E=3;break;default:this.write=b,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(E)}n.prototype.write=function(_){if(_.length===0)return"";var E,O;if(this.lastNeed){if(E=this.fillLast(_),E===void 0)return"";O=this.lastNeed,this.lastNeed=0}else O=0;return O<_.length?E?E+this.text(_,O):this.text(_,O):E||""},n.prototype.end=p,n.prototype.text=u,n.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length};function o(_){return _<=127?0:_>>5===6?2:_>>4===14?3:_>>3===30?4:_>>6===2?-1:-2}function a(_,E,O){var A=E.length-1;if(A<O)return 0;var B=o(E[A]);return B>=0?(B>0&&(_.lastNeed=B-1),B):--A<O||B===-2?0:(B=o(E[A]),B>=0?(B>0&&(_.lastNeed=B-2),B):--A<O||B===-2?0:(B=o(E[A]),B>=0?(B>0&&(B===2?B=0:_.lastNeed=B-3),B):0))}function s(_,E,O){if((E[0]&192)!==128)return _.lastNeed=0,"";if(_.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return _.lastNeed=1,"";if(_.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return _.lastNeed=2,""}}function c(_){var E=this.lastTotal-this.lastNeed,O=s(this,_);if(O!==void 0)return O;if(this.lastNeed<=_.length)return _.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,E,0,_.length),this.lastNeed-=_.length}function u(_,E){var O=a(this,_,E);if(!this.lastNeed)return _.toString("utf8",E);this.lastTotal=O;var A=_.length-(O-this.lastNeed);return _.copy(this.lastChar,0,A),_.toString("utf8",E,A)}function p(_){var E=_&&_.length?this.write(_):"";return this.lastNeed?E+"":E}function f(_,E){if((_.length-E)%2===0){var O=_.toString("utf16le",E);if(O){var A=O.charCodeAt(O.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],O.slice(0,-1)}return O}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",E,_.length-1)}function l(_){var E=_&&_.length?this.write(_):"";if(this.lastNeed){var O=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,O)}return E}function d(_,E){var O=(_.length-E)%3;return O===0?_.toString("base64",E):(this.lastNeed=3-O,this.lastTotal=3,O===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",E,_.length-O))}function g(_){var E=_&&_.length?this.write(_):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function b(_){return _.toString(this.encoding)}function x(_){return _&&_.length?this.write(_):""}return _c}var wc,hd;function Yl(){if(hd)return wc;hd=1;var r=Jn().codes.ERR_STREAM_PREMATURE_CLOSE;function e(o){var a=!1;return function(){if(!a){a=!0;for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];o.apply(this,c)}}}function t(){}function i(o){return o.setHeader&&typeof o.abort=="function"}function n(o,a,s){if(typeof a=="function")return n(o,null,a);a||(a={}),s=e(s||t);var c=a.readable||a.readable!==!1&&o.readable,u=a.writable||a.writable!==!1&&o.writable,p=function(){o.writable||l()},f=o._writableState&&o._writableState.finished,l=function(){u=!1,f=!0,c||s.call(o)},d=o._readableState&&o._readableState.endEmitted,g=function(){c=!1,d=!0,u||s.call(o)},b=function(O){s.call(o,O)},x=function(){var O;if(c&&!d)return(!o._readableState||!o._readableState.ended)&&(O=new r),s.call(o,O);if(u&&!f)return(!o._writableState||!o._writableState.ended)&&(O=new r),s.call(o,O)},_=function(){o.req.on("finish",l)};return i(o)?(o.on("complete",l),o.on("abort",x),o.req?_():o.on("request",_)):u&&!o._writableState&&(o.on("end",p),o.on("close",p)),o.on("end",g),o.on("finish",l),a.error!==!1&&o.on("error",b),o.on("close",x),function(){o.removeListener("complete",l),o.removeListener("abort",x),o.removeListener("request",_),o.req&&o.req.removeListener("finish",l),o.removeListener("end",p),o.removeListener("close",p),o.removeListener("finish",l),o.removeListener("end",g),o.removeListener("error",b),o.removeListener("close",x)}}return wc=n,wc}var Ec,dd;function U1(){if(dd)return Ec;dd=1;var r;function e(_,E,O){return E in _?Object.defineProperty(_,E,{value:O,enumerable:!0,configurable:!0,writable:!0}):_[E]=O,_}var t=Yl(),i=Symbol("lastResolve"),n=Symbol("lastReject"),o=Symbol("error"),a=Symbol("ended"),s=Symbol("lastPromise"),c=Symbol("handlePromise"),u=Symbol("stream");function p(_,E){return{value:_,done:E}}function f(_){var E=_[i];if(E!==null){var O=_[u].read();O!==null&&(_[s]=null,_[i]=null,_[n]=null,E(p(O,!1)))}}function l(_){process.nextTick(f,_)}function d(_,E){return function(O,A){_.then(function(){if(E[a]){O(p(void 0,!0));return}E[c](O,A)},A)}}var g=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((r={get stream(){return this[u]},next:function(){var E=this,O=this[o];if(O!==null)return Promise.reject(O);if(this[a])return Promise.resolve(p(void 0,!0));if(this[u].destroyed)return new Promise(function(v,j){process.nextTick(function(){E[o]?j(E[o]):v(p(void 0,!0))})});var A=this[s],B;if(A)B=new Promise(d(A,this));else{var N=this[u].read();if(N!==null)return Promise.resolve(p(N,!1));B=new Promise(this[c])}return this[s]=B,B}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var E=this;return new Promise(function(O,A){E[u].destroy(null,function(B){if(B){A(B);return}O(p(void 0,!0))})})}),r),g),x=function(E){var O,A=Object.create(b,(O={},e(O,u,{value:E,writable:!0}),e(O,i,{value:null,writable:!0}),e(O,n,{value:null,writable:!0}),e(O,o,{value:null,writable:!0}),e(O,a,{value:E._readableState.endEmitted,writable:!0}),e(O,c,{value:function(N,v){var j=A[u].read();j?(A[s]=null,A[i]=null,A[n]=null,N(p(j,!1))):(A[i]=N,A[n]=v)},writable:!0}),O));return A[s]=null,t(E,function(B){if(B&&B.code!=="ERR_STREAM_PREMATURE_CLOSE"){var N=A[n];N!==null&&(A[s]=null,A[i]=null,A[n]=null,N(B)),A[o]=B;return}var v=A[i];v!==null&&(A[s]=null,A[i]=null,A[n]=null,v(p(void 0,!0))),A[a]=!0}),E.on("readable",l.bind(null,A)),A};return Ec=x,Ec}var xc,pd;function q1(){return pd||(pd=1,xc=function(){throw new Error("Readable.from is not available in the browser")}),xc}var gd;function F1(){if(gd)return rd;gd=1;const r=Zn();r.Readable=D,D.ReadableState=j,nm().EventEmitter;var e=function(H,W){return H.listeners(W).length},t=om(),i=Co().Buffer,n=Ke.Uint8Array||function(){};function o(z){return i.from(z)}function a(z){return i.isBuffer(z)||z instanceof n}var s=Ja,c;s&&s.debuglog?c=s.debuglog("stream"):c=function(){};var u=H1(),p=am(),f=sm(),l=f.getHighWaterMark,d=Jn().codes,g=d.ERR_INVALID_ARG_TYPE,b=d.ERR_STREAM_PUSH_AFTER_EOF,x=d.ERR_METHOD_NOT_IMPLEMENTED,_=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,O,A;ar()(D,t);var B=p.errorOrDestroy,N=["error","close","destroy","pause","resume"];function v(z,H,W){if(typeof z.prependListener=="function")return z.prependListener(H,W);!z._events||!z._events[H]?z.on(H,W):Array.isArray(z._events[H])?z._events[H].unshift(W):z._events[H]=[W,z._events[H]]}function j(z,H,W){z=z||{},typeof W!="boolean"&&(W=H instanceof r.Duplex),this.objectMode=!!z.objectMode,W&&(this.objectMode=this.objectMode||!!z.readableObjectMode),this.highWaterMark=l(this,z,"readableHighWaterMark",W),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.destroyed=!1,this.defaultEncoding=z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,z.encoding&&(E||(E=fd().StringDecoder),this.decoder=new E(z.encoding),this.encoding=z.encoding)}function D(z){if(!(this instanceof D))return new D(z);var H=this instanceof r.Duplex;this._readableState=new j(z,this,H),this.readable=!0,z&&(typeof z.read=="function"&&(this._read=z.read),typeof z.destroy=="function"&&(this._destroy=z.destroy)),t.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),D.prototype.destroy=p.destroy,D.prototype._undestroy=p.undestroy,D.prototype._destroy=function(z,H){H(z)},D.prototype.push=function(z,H){var W=this._readableState,ee;return W.objectMode?ee=!0:typeof z=="string"&&(H=H||W.defaultEncoding,H!==W.encoding&&(z=i.from(z,H),H=""),ee=!0),R(this,z,H,!1,ee)},D.prototype.unshift=function(z){return R(this,z,null,!0,!1)};function R(z,H,W,ee,ne){c("readableAddChunk",H);var ie=z._readableState;if(H===null)ie.reading=!1,m(z,ie);else{var oe;if(ne||(oe=q(ie,H)),oe)B(z,oe);else if(ie.objectMode||H&&H.length>0)if(typeof H!="string"&&!ie.objectMode&&Object.getPrototypeOf(H)!==i.prototype&&(H=o(H)),ee)ie.endEmitted?B(z,new _):M(z,ie,H,!0);else if(ie.ended)B(z,new b);else{if(ie.destroyed)return!1;ie.reading=!1,ie.decoder&&!W?(H=ie.decoder.write(H),ie.objectMode||H.length!==0?M(z,ie,H,!1):k(z,ie)):M(z,ie,H,!1)}else ee||(ie.reading=!1,k(z,ie))}return!ie.ended&&(ie.length<ie.highWaterMark||ie.length===0)}function M(z,H,W,ee){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,z.emit("data",W)):(H.length+=H.objectMode?1:W.length,ee?H.buffer.unshift(W):H.buffer.push(W),H.needReadable&&S(z)),k(z,H)}function q(z,H){var W;return!a(H)&&typeof H!="string"&&H!==void 0&&!z.objectMode&&(W=new g("chunk",["string","Buffer","Uint8Array"],H)),W}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(z){E||(E=fd().StringDecoder);var H=new E(z);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,ee="";W!==null;)ee+=H.write(W.data),W=W.next;return this._readableState.buffer.clear(),ee!==""&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this};var P=1073741824;function h(z){return z>=P?z=P:(z--,z|=z>>>1,z|=z>>>2,z|=z>>>4,z|=z>>>8,z|=z>>>16,z++),z}function y(z,H){return z<=0||H.length===0&&H.ended?0:H.objectMode?1:z!==z?H.flowing&&H.length?H.buffer.head.data.length:H.length:(z>H.highWaterMark&&(H.highWaterMark=h(z)),z<=H.length?z:H.ended?H.length:(H.needReadable=!0,0))}D.prototype.read=function(z){c("read",z),z=parseInt(z,10);var H=this._readableState,W=z;if(z!==0&&(H.emittedReadable=!1),z===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return c("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?$(this):S(this),null;if(z=y(z,H),z===0&&H.ended)return H.length===0&&$(this),null;var ee=H.needReadable;c("need readable",ee),(H.length===0||H.length-z<H.highWaterMark)&&(ee=!0,c("length less than watermark",ee)),H.ended||H.reading?(ee=!1,c("reading or ended",ee)):ee&&(c("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(z=y(W,H)));var ne;return z>0?ne=K(z,H):ne=null,ne===null?(H.needReadable=H.length<=H.highWaterMark,z=0):(H.length-=z,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),W!==z&&H.ended&&$(this)),ne!==null&&this.emit("data",ne),ne};function m(z,H){if(c("onEofChunk"),!H.ended){if(H.decoder){var W=H.decoder.end();W&&W.length&&(H.buffer.push(W),H.length+=H.objectMode?1:W.length)}H.ended=!0,H.sync?S(z):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,T(z)))}}function S(z){var H=z._readableState;c("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(c("emitReadable",H.flowing),H.emittedReadable=!0,process.nextTick(T,z))}function T(z){var H=z._readableState;c("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&(z.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,C(z)}function k(z,H){H.readingMore||(H.readingMore=!0,process.nextTick(U,z,H))}function U(z,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var W=H.length;if(c("maybeReadMore read 0"),z.read(0),W===H.length)break}H.readingMore=!1}D.prototype._read=function(z){B(this,new x("_read()"))},D.prototype.pipe=function(z,H){var W=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=z;break;case 1:ee.pipes=[ee.pipes,z];break;default:ee.pipes.push(z);break}ee.pipesCount+=1,c("pipe count=%d opts=%j",ee.pipesCount,H);var ne=(!H||H.end!==!1)&&z!==process.stdout&&z!==process.stderr,ie=ne?Ee:ve;ee.endEmitted?process.nextTick(ie):W.once("end",ie),z.on("unpipe",oe);function oe(be,Fe){c("onunpipe"),be===W&&Fe&&Fe.hasUnpiped===!1&&(Fe.hasUnpiped=!0,re())}function Ee(){c("onend"),z.end()}var jt=I(W);z.on("drain",jt);var fe=!1;function re(){c("cleanup"),z.removeListener("close",ge),z.removeListener("finish",Je),z.removeListener("drain",jt),z.removeListener("error",he),z.removeListener("unpipe",oe),W.removeListener("end",Ee),W.removeListener("end",ve),W.removeListener("data",ke),fe=!0,ee.awaitDrain&&(!z._writableState||z._writableState.needDrain)&&jt()}W.on("data",ke);function ke(be){c("ondata");var Fe=z.write(be);c("dest.write",Fe),Fe===!1&&((ee.pipesCount===1&&ee.pipes===z||ee.pipesCount>1&&Q(ee.pipes,z)!==-1)&&!fe&&(c("false write response, pause",ee.awaitDrain),ee.awaitDrain++),W.pause())}function he(be){c("onerror",be),ve(),z.removeListener("error",he),e(z,"error")===0&&B(z,be)}v(z,"error",he);function ge(){z.removeListener("finish",Je),ve()}z.once("close",ge);function Je(){c("onfinish"),z.removeListener("close",ge),ve()}z.once("finish",Je);function ve(){c("unpipe"),W.unpipe(z)}return z.emit("pipe",W),ee.flowing||(c("pipe resume"),W.resume()),z};function I(z){return function(){var W=z._readableState;c("pipeOnDrain",W.awaitDrain),W.awaitDrain&&W.awaitDrain--,W.awaitDrain===0&&e(z,"data")&&(W.flowing=!0,C(z))}}D.prototype.unpipe=function(z){var H=this._readableState,W={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return z&&z!==H.pipes?this:(z||(z=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,z&&z.emit("unpipe",this,W),this);if(!z){var ee=H.pipes,ne=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var ie=0;ie<ne;ie++)ee[ie].emit("unpipe",this,{hasUnpiped:!1});return this}var oe=Q(H.pipes,z);return oe===-1?this:(H.pipes.splice(oe,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),z.emit("unpipe",this,W),this)},D.prototype.on=function(z,H){var W=t.prototype.on.call(this,z,H),ee=this._readableState;return z==="data"?(ee.readableListening=this.listenerCount("readable")>0,ee.flowing!==!1&&this.resume()):z==="readable"&&!ee.endEmitted&&!ee.readableListening&&(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,c("on readable",ee.length,ee.reading),ee.length?S(this):ee.reading||process.nextTick(L,this)),W},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(z,H){var W=t.prototype.removeListener.call(this,z,H);return z==="readable"&&process.nextTick(w,this),W},D.prototype.removeAllListeners=function(z){var H=t.prototype.removeAllListeners.apply(this,arguments);return(z==="readable"||z===void 0)&&process.nextTick(w,this),H};function w(z){var H=z._readableState;H.readableListening=z.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:z.listenerCount("data")>0&&z.resume()}function L(z){c("readable nexttick read 0"),z.read(0)}D.prototype.resume=function(){var z=this._readableState;return z.flowing||(c("resume"),z.flowing=!z.readableListening,J(this,z)),z.paused=!1,this};function J(z,H){H.resumeScheduled||(H.resumeScheduled=!0,process.nextTick(Y,z,H))}function Y(z,H){c("resume",H.reading),H.reading||z.read(0),H.resumeScheduled=!1,z.emit("resume"),C(z),H.flowing&&!H.reading&&z.read(0)}D.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function C(z){var H=z._readableState;for(c("flow",H.flowing);H.flowing&&z.read()!==null;);}D.prototype.wrap=function(z){var H=this,W=this._readableState,ee=!1;z.on("end",function(){if(c("wrapped end"),W.decoder&&!W.ended){var oe=W.decoder.end();oe&&oe.length&&H.push(oe)}H.push(null)}),z.on("data",function(oe){if(c("wrapped data"),W.decoder&&(oe=W.decoder.write(oe)),!(W.objectMode&&oe==null)&&!(!W.objectMode&&(!oe||!oe.length))){var Ee=H.push(oe);Ee||(ee=!0,z.pause())}});for(var ne in z)this[ne]===void 0&&typeof z[ne]=="function"&&(this[ne]=(function(Ee){return function(){return z[Ee].apply(z,arguments)}})(ne));for(var ie=0;ie<N.length;ie++)z.on(N[ie],this.emit.bind(this,N[ie]));return this._read=function(oe){c("wrapped _read",oe),ee&&(ee=!1,z.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return O===void 0&&(O=U1()),O(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),D._fromList=K,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function K(z,H){if(H.length===0)return null;var W;return H.objectMode?W=H.buffer.shift():!z||z>=H.length?(H.decoder?W=H.buffer.join(""):H.buffer.length===1?W=H.buffer.first():W=H.buffer.concat(H.length),H.buffer.clear()):W=H.buffer.consume(z,H.decoder),W}function $(z){var H=z._readableState;c("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,process.nextTick(Z,H,z))}function Z(z,H){if(c("endReadableNT",z.endEmitted,z.length),!z.endEmitted&&z.length===0&&(z.endEmitted=!0,H.readable=!1,H.emit("end"),z.autoDestroy)){var W=H._writableState;(!W||W.autoDestroy&&W.finished)&&H.destroy()}}typeof Symbol=="function"&&(D.from=function(z,H){return A===void 0&&(A=q1()),A(D,z,H)});function Q(z,H){for(var W=0,ee=z.length;W<ee;W++)if(z[W]===H)return W;return-1}return rd}var md={},Sc,bd;function G1(){if(bd)return Sc;bd=1,Sc=r;function r(t,i){if(e("noDeprecation"))return t;var n=!1;function o(){if(!n){if(e("throwDeprecation"))throw new Error(i);e("traceDeprecation")?console.trace(i):console.warn(i),n=!0}return t.apply(this,arguments)}return o}function e(t){try{if(!Ke.localStorage)return!1}catch{return!1}var i=Ke.localStorage[t];return i==null?!1:String(i).toLowerCase()==="true"}return Sc}var vd;function K1(){if(vd)return md;vd=1;const r=Zn();r.Writable=j;function e(C){var K=this;this.next=null,this.entry=null,this.finish=function(){Y(K,C)}}j.WritableState=N;var t={deprecate:G1()},i=om(),n=Co().Buffer,o=Ke.Uint8Array||function(){};function a(C){return n.from(C)}function s(C){return n.isBuffer(C)||C instanceof o}var c=am(),u=sm(),p=u.getHighWaterMark,f=Jn().codes,l=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,b=f.ERR_STREAM_CANNOT_PIPE,x=f.ERR_STREAM_DESTROYED,_=f.ERR_STREAM_NULL_VALUES,E=f.ERR_STREAM_WRITE_AFTER_END,O=f.ERR_UNKNOWN_ENCODING,A=c.errorOrDestroy;ar()(j,i);function B(){}function N(C,K,$){C=C||{},typeof $!="boolean"&&($=K instanceof r.Duplex),this.objectMode=!!C.objectMode,$&&(this.objectMode=this.objectMode||!!C.writableObjectMode),this.highWaterMark=p(this,C,"writableHighWaterMark",$),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Z=C.decodeStrings===!1;this.decodeStrings=!Z,this.defaultEncoding=C.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Q){m(K,Q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=C.emitClose!==!1,this.autoDestroy=!!C.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}N.prototype.getBuffer=function(){for(var K=this.bufferedRequest,$=[];K;)$.push(K),K=K.next;return $},(function(){try{Object.defineProperty(N.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var v;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(j,Symbol.hasInstance,{value:function(K){return v.call(this,K)?!0:this!==j?!1:K&&K._writableState instanceof N}})):v=function(K){return K instanceof this};function j(C){var K=this instanceof r.Duplex;if(!K&&!v.call(j,this))return new j(C);this._writableState=new N(C,this,K),this.writable=!0,C&&(typeof C.write=="function"&&(this._write=C.write),typeof C.writev=="function"&&(this._writev=C.writev),typeof C.destroy=="function"&&(this._destroy=C.destroy),typeof C.final=="function"&&(this._final=C.final)),i.call(this)}j.prototype.pipe=function(){A(this,new b)};function D(C,K){var $=new E;A(C,$),process.nextTick(K,$)}function R(C,K,$,Z){var Q;return $===null?Q=new _:typeof $!="string"&&!K.objectMode&&(Q=new l("chunk",["string","Buffer"],$)),Q?(A(C,Q),process.nextTick(Z,Q),!1):!0}j.prototype.write=function(C,K,$){var Z=this._writableState,Q=!1,z=!Z.objectMode&&s(C);return z&&!n.isBuffer(C)&&(C=a(C)),typeof K=="function"&&($=K,K=null),z?K="buffer":K||(K=Z.defaultEncoding),typeof $!="function"&&($=B),Z.ending?D(this,$):(z||R(this,Z,C,$))&&(Z.pendingcb++,Q=q(this,Z,z,C,K,$)),Q},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){var C=this._writableState;C.corked&&(C.corked--,!C.writing&&!C.corked&&!C.bufferProcessing&&C.bufferedRequest&&k(this,C))},j.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new O(K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function M(C,K,$){return!C.objectMode&&C.decodeStrings!==!1&&typeof K=="string"&&(K=n.from(K,$)),K}Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function q(C,K,$,Z,Q,z){if(!$){var H=M(K,Z,Q);Z!==H&&($=!0,Q="buffer",Z=H)}var W=K.objectMode?1:Z.length;K.length+=W;var ee=K.length<K.highWaterMark;if(ee||(K.needDrain=!0),K.writing||K.corked){var ne=K.lastBufferedRequest;K.lastBufferedRequest={chunk:Z,encoding:Q,isBuf:$,callback:z,next:null},ne?ne.next=K.lastBufferedRequest:K.bufferedRequest=K.lastBufferedRequest,K.bufferedRequestCount+=1}else P(C,K,!1,W,Z,Q,z);return ee}function P(C,K,$,Z,Q,z,H){K.writelen=Z,K.writecb=H,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new x("write")):$?C._writev(Q,K.onwrite):C._write(Q,z,K.onwrite),K.sync=!1}function h(C,K,$,Z,Q){--K.pendingcb,$?(process.nextTick(Q,Z),process.nextTick(L,C,K),C._writableState.errorEmitted=!0,A(C,Z)):(Q(Z),C._writableState.errorEmitted=!0,A(C,Z),L(C,K))}function y(C){C.writing=!1,C.writecb=null,C.length-=C.writelen,C.writelen=0}function m(C,K){var $=C._writableState,Z=$.sync,Q=$.writecb;if(typeof Q!="function")throw new g;if(y($),K)h(C,$,Z,K,Q);else{var z=U($)||C.destroyed;!z&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest&&k(C,$),Z?process.nextTick(S,C,$,z,Q):S(C,$,z,Q)}}function S(C,K,$,Z){$||T(C,K),K.pendingcb--,Z(),L(C,K)}function T(C,K){K.length===0&&K.needDrain&&(K.needDrain=!1,C.emit("drain"))}function k(C,K){K.bufferProcessing=!0;var $=K.bufferedRequest;if(C._writev&&$&&$.next){var Z=K.bufferedRequestCount,Q=new Array(Z),z=K.corkedRequestsFree;z.entry=$;for(var H=0,W=!0;$;)Q[H]=$,$.isBuf||(W=!1),$=$.next,H+=1;Q.allBuffers=W,P(C,K,!0,K.length,Q,"",z.finish),K.pendingcb++,K.lastBufferedRequest=null,z.next?(K.corkedRequestsFree=z.next,z.next=null):K.corkedRequestsFree=new e(K),K.bufferedRequestCount=0}else{for(;$;){var ee=$.chunk,ne=$.encoding,ie=$.callback,oe=K.objectMode?1:ee.length;if(P(C,K,!1,oe,ee,ne,ie),$=$.next,K.bufferedRequestCount--,K.writing)break}$===null&&(K.lastBufferedRequest=null)}K.bufferedRequest=$,K.bufferProcessing=!1}j.prototype._write=function(C,K,$){$(new d("_write()"))},j.prototype._writev=null,j.prototype.end=function(C,K,$){var Z=this._writableState;return typeof C=="function"?($=C,C=null,K=null):typeof K=="function"&&($=K,K=null),C!=null&&this.write(C,K),Z.corked&&(Z.corked=1,this.uncork()),Z.ending||J(this,Z,$),this},Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function U(C){return C.ending&&C.length===0&&C.bufferedRequest===null&&!C.finished&&!C.writing}function I(C,K){C._final(function($){K.pendingcb--,$&&A(C,$),K.prefinished=!0,C.emit("prefinish"),L(C,K)})}function w(C,K){!K.prefinished&&!K.finalCalled&&(typeof C._final=="function"&&!K.destroyed?(K.pendingcb++,K.finalCalled=!0,process.nextTick(I,C,K)):(K.prefinished=!0,C.emit("prefinish")))}function L(C,K){var $=U(K);if($&&(w(C,K),K.pendingcb===0&&(K.finished=!0,C.emit("finish"),K.autoDestroy))){var Z=C._readableState;(!Z||Z.autoDestroy&&Z.endEmitted)&&C.destroy()}return $}function J(C,K,$){K.ending=!0,L(C,K),$&&(K.finished?process.nextTick($):C.once("finish",$)),K.ended=!0,C.writable=!1}function Y(C,K,$){var Z=C.entry;for(C.entry=null;Z;){var Q=Z.callback;K.pendingcb--,Q($),Z=Z.next}K.corkedRequestsFree.next=C}return Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),j.prototype.destroy=c.destroy,j.prototype._undestroy=c.undestroy,j.prototype._destroy=function(C,K){K(C)},md}var yd={},_d;function $1(){if(_d)return yd;_d=1;var r=Object.keys||function(c){var u=[];for(var p in c)u.push(p);return u};const e=Zn();e.Duplex=o,ar()(o,e.Readable);for(var t=r(e.Writable.prototype),i=0;i<t.length;i++){var n=t[i];o.prototype[n]||(o.prototype[n]=e.Writable.prototype[n])}function o(c){if(!(this instanceof o))return new o(c);e.Readable.call(this,c),e.Writable.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(s,this)}function s(c){c.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),yd}var wd={},Ed;function V1(){if(Ed)return wd;Ed=1;const r=Zn();r.Transform=s;var e=Jn().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,i=e.ERR_MULTIPLE_CALLBACK,n=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=e.ERR_TRANSFORM_WITH_LENGTH_0;ar()(s,r.Duplex);function a(p,f){var l=this._transformState;l.transforming=!1;var d=l.writecb;if(d===null)return this.emit("error",new i);l.writechunk=null,l.writecb=null,f!=null&&this.push(f),d(p);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function s(p){if(!(this instanceof s))return new s(p);r.Duplex.call(this,p),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,p&&(typeof p.transform=="function"&&(this._transform=p.transform),typeof p.flush=="function"&&(this._flush=p.flush)),this.on("prefinish",c)}function c(){var p=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,l){u(p,f,l)}):u(this,null,null)}s.prototype.push=function(p,f){return this._transformState.needTransform=!1,r.Duplex.prototype.push.call(this,p,f)},s.prototype._transform=function(p,f,l){l(new t("_transform()"))},s.prototype._write=function(p,f,l){var d=this._transformState;if(d.writecb=l,d.writechunk=p,d.writeencoding=f,!d.transforming){var g=this._readableState;(d.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},s.prototype._read=function(p){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},s.prototype._destroy=function(p,f){r.Duplex.prototype._destroy.call(this,p,function(l){f(l)})};function u(p,f,l){if(f)return p.emit("error",f);if(l!=null&&p.push(l),p._writableState.length)throw new o;if(p._transformState.transforming)throw new n;return p.push(null)}return wd}var xd={},Sd;function W1(){if(Sd)return xd;Sd=1;const r=Zn();r.PassThrough=e,ar()(e,r.Transform);function e(t){if(!(this instanceof e))return new e(t);Transform.call(this,t)}return e.prototype._transform=function(t,i,n){n(null,t)},xd}var Ac,Ad;function Z1(){if(Ad)return Ac;Ad=1;var r;function e(l){var d=!1;return function(){d||(d=!0,l.apply(void 0,arguments))}}var t=Jn().codes,i=t.ERR_MISSING_ARGS,n=t.ERR_STREAM_DESTROYED;function o(l){if(l)throw l}function a(l){return l.setHeader&&typeof l.abort=="function"}function s(l,d,g,b){b=e(b);var x=!1;l.on("close",function(){x=!0}),r===void 0&&(r=Yl()),r(l,{readable:d,writable:g},function(E){if(E)return b(E);x=!0,b()});var _=!1;return function(E){if(!x&&!_){if(_=!0,a(l))return l.abort();if(typeof l.destroy=="function")return l.destroy();b(E||new n("pipe"))}}}function c(l){l()}function u(l,d){return l.pipe(d)}function p(l){return!l.length||typeof l[l.length-1]!="function"?o:l.pop()}function f(){for(var l=arguments.length,d=new Array(l),g=0;g<l;g++)d[g]=arguments[g];var b=p(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new i("streams");var x,_=d.map(function(E,O){var A=O<d.length-1,B=O>0;return s(E,A,B,function(N){x||(x=N),N&&_.forEach(c),!A&&(_.forEach(c),b(x))})});return d.reduce(u)}return Ac=f,Ac}var Rd;function J1(){return Rd||(Rd=1,(function(r,e){const t=Zn();F1(),K1(),$1(),V1(),W1(),e=r.exports=t.Readable,e.Stream=t.Readable,e.Readable=t.Readable,e.Writable=t.Writable,e.Duplex=t.Duplex,e.Transform=t.Transform,e.PassThrough=t.PassThrough,e.finished=Yl(),e.pipeline=Z1()})(ra,ra.exports)),ra.exports}var Rc,Od;function Y1(){if(Od)return Rc;Od=1;var r=J1().Transform,e=ar();function t(i){r.call(this),this._block=new Buffer(i),this._blockSize=i,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return e(t,r),t.prototype._transform=function(i,n,o){var a=null;try{n!=="buffer"&&(i=new Buffer(i,n)),this.update(i)}catch(s){a=s}o(a)},t.prototype._flush=function(i){var n=null;try{this.push(this._digest())}catch(o){n=o}i(n)},t.prototype.update=function(i,n){if(!Buffer.isBuffer(i)&&typeof i!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");Buffer.isBuffer(i)||(i=new Buffer(i,n||"binary"));for(var o=this._block,a=0;this._blockOffset+i.length-a>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)o[s++]=i[a++];this._update(),this._blockOffset=0}for(;a<i.length;)o[this._blockOffset++]=i[a++];for(var c=0,u=i.length*8;u>0;++c)this._length[c]+=u,u=this._length[c]/4294967296|0,u>0&&(this._length[c]-=4294967296*u);return this},t.prototype._update=function(i){throw new Error("_update is not implemented")},t.prototype.digest=function(i){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var n=this._digest();return i!==void 0&&(n=n.toString(i)),n},t.prototype._digest=function(){throw new Error("_digest is not implemented")},Rc=t,Rc}var Oc,Pd;function X1(){if(Pd)return Oc;Pd=1;var r=ar(),e=Y1();function t(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}r(t,e),t.prototype._update=function(){for(var u=new Array(16),p=0;p<16;++p)u[p]=this._block.readInt32LE(p*4);var f=this._a,l=this._b,d=this._c,g=this._d,b=this._e;f=n(f,l,d,g,b,u[0],0,11),d=i(d,10),b=n(b,f,l,d,g,u[1],0,14),l=i(l,10),g=n(g,b,f,l,d,u[2],0,15),f=i(f,10),d=n(d,g,b,f,l,u[3],0,12),b=i(b,10),l=n(l,d,g,b,f,u[4],0,5),g=i(g,10),f=n(f,l,d,g,b,u[5],0,8),d=i(d,10),b=n(b,f,l,d,g,u[6],0,7),l=i(l,10),g=n(g,b,f,l,d,u[7],0,9),f=i(f,10),d=n(d,g,b,f,l,u[8],0,11),b=i(b,10),l=n(l,d,g,b,f,u[9],0,13),g=i(g,10),f=n(f,l,d,g,b,u[10],0,14),d=i(d,10),b=n(b,f,l,d,g,u[11],0,15),l=i(l,10),g=n(g,b,f,l,d,u[12],0,6),f=i(f,10),d=n(d,g,b,f,l,u[13],0,7),b=i(b,10),l=n(l,d,g,b,f,u[14],0,9),g=i(g,10),f=n(f,l,d,g,b,u[15],0,8),d=i(d,10),b=o(b,f,l,d,g,u[7],1518500249,7),l=i(l,10),g=o(g,b,f,l,d,u[4],1518500249,6),f=i(f,10),d=o(d,g,b,f,l,u[13],1518500249,8),b=i(b,10),l=o(l,d,g,b,f,u[1],1518500249,13),g=i(g,10),f=o(f,l,d,g,b,u[10],1518500249,11),d=i(d,10),b=o(b,f,l,d,g,u[6],1518500249,9),l=i(l,10),g=o(g,b,f,l,d,u[15],1518500249,7),f=i(f,10),d=o(d,g,b,f,l,u[3],1518500249,15),b=i(b,10),l=o(l,d,g,b,f,u[12],1518500249,7),g=i(g,10),f=o(f,l,d,g,b,u[0],1518500249,12),d=i(d,10),b=o(b,f,l,d,g,u[9],1518500249,15),l=i(l,10),g=o(g,b,f,l,d,u[5],1518500249,9),f=i(f,10),d=o(d,g,b,f,l,u[2],1518500249,11),b=i(b,10),l=o(l,d,g,b,f,u[14],1518500249,7),g=i(g,10),f=o(f,l,d,g,b,u[11],1518500249,13),d=i(d,10),b=o(b,f,l,d,g,u[8],1518500249,12),l=i(l,10),g=a(g,b,f,l,d,u[3],1859775393,11),f=i(f,10),d=a(d,g,b,f,l,u[10],1859775393,13),b=i(b,10),l=a(l,d,g,b,f,u[14],1859775393,6),g=i(g,10),f=a(f,l,d,g,b,u[4],1859775393,7),d=i(d,10),b=a(b,f,l,d,g,u[9],1859775393,14),l=i(l,10),g=a(g,b,f,l,d,u[15],1859775393,9),f=i(f,10),d=a(d,g,b,f,l,u[8],1859775393,13),b=i(b,10),l=a(l,d,g,b,f,u[1],1859775393,15),g=i(g,10),f=a(f,l,d,g,b,u[2],1859775393,14),d=i(d,10),b=a(b,f,l,d,g,u[7],1859775393,8),l=i(l,10),g=a(g,b,f,l,d,u[0],1859775393,13),f=i(f,10),d=a(d,g,b,f,l,u[6],1859775393,6),b=i(b,10),l=a(l,d,g,b,f,u[13],1859775393,5),g=i(g,10),f=a(f,l,d,g,b,u[11],1859775393,12),d=i(d,10),b=a(b,f,l,d,g,u[5],1859775393,7),l=i(l,10),g=a(g,b,f,l,d,u[12],1859775393,5),f=i(f,10),d=s(d,g,b,f,l,u[1],2400959708,11),b=i(b,10),l=s(l,d,g,b,f,u[9],2400959708,12),g=i(g,10),f=s(f,l,d,g,b,u[11],2400959708,14),d=i(d,10),b=s(b,f,l,d,g,u[10],2400959708,15),l=i(l,10),g=s(g,b,f,l,d,u[0],2400959708,14),f=i(f,10),d=s(d,g,b,f,l,u[8],2400959708,15),b=i(b,10),l=s(l,d,g,b,f,u[12],2400959708,9),g=i(g,10),f=s(f,l,d,g,b,u[4],2400959708,8),d=i(d,10),b=s(b,f,l,d,g,u[13],2400959708,9),l=i(l,10),g=s(g,b,f,l,d,u[3],2400959708,14),f=i(f,10),d=s(d,g,b,f,l,u[7],2400959708,5),b=i(b,10),l=s(l,d,g,b,f,u[15],2400959708,6),g=i(g,10),f=s(f,l,d,g,b,u[14],2400959708,8),d=i(d,10),b=s(b,f,l,d,g,u[5],2400959708,6),l=i(l,10),g=s(g,b,f,l,d,u[6],2400959708,5),f=i(f,10),d=s(d,g,b,f,l,u[2],2400959708,12),b=i(b,10),l=c(l,d,g,b,f,u[4],2840853838,9),g=i(g,10),f=c(f,l,d,g,b,u[0],2840853838,15),d=i(d,10),b=c(b,f,l,d,g,u[5],2840853838,5),l=i(l,10),g=c(g,b,f,l,d,u[9],2840853838,11),f=i(f,10),d=c(d,g,b,f,l,u[7],2840853838,6),b=i(b,10),l=c(l,d,g,b,f,u[12],2840853838,8),g=i(g,10),f=c(f,l,d,g,b,u[2],2840853838,13),d=i(d,10),b=c(b,f,l,d,g,u[10],2840853838,12),l=i(l,10),g=c(g,b,f,l,d,u[14],2840853838,5),f=i(f,10),d=c(d,g,b,f,l,u[1],2840853838,12),b=i(b,10),l=c(l,d,g,b,f,u[3],2840853838,13),g=i(g,10),f=c(f,l,d,g,b,u[8],2840853838,14),d=i(d,10),b=c(b,f,l,d,g,u[11],2840853838,11),l=i(l,10),g=c(g,b,f,l,d,u[6],2840853838,8),f=i(f,10),d=c(d,g,b,f,l,u[15],2840853838,5),b=i(b,10),l=c(l,d,g,b,f,u[13],2840853838,6),g=i(g,10);var x=this._a,_=this._b,E=this._c,O=this._d,A=this._e;x=c(x,_,E,O,A,u[5],1352829926,8),E=i(E,10),A=c(A,x,_,E,O,u[14],1352829926,9),_=i(_,10),O=c(O,A,x,_,E,u[7],1352829926,9),x=i(x,10),E=c(E,O,A,x,_,u[0],1352829926,11),A=i(A,10),_=c(_,E,O,A,x,u[9],1352829926,13),O=i(O,10),x=c(x,_,E,O,A,u[2],1352829926,15),E=i(E,10),A=c(A,x,_,E,O,u[11],1352829926,15),_=i(_,10),O=c(O,A,x,_,E,u[4],1352829926,5),x=i(x,10),E=c(E,O,A,x,_,u[13],1352829926,7),A=i(A,10),_=c(_,E,O,A,x,u[6],1352829926,7),O=i(O,10),x=c(x,_,E,O,A,u[15],1352829926,8),E=i(E,10),A=c(A,x,_,E,O,u[8],1352829926,11),_=i(_,10),O=c(O,A,x,_,E,u[1],1352829926,14),x=i(x,10),E=c(E,O,A,x,_,u[10],1352829926,14),A=i(A,10),_=c(_,E,O,A,x,u[3],1352829926,12),O=i(O,10),x=c(x,_,E,O,A,u[12],1352829926,6),E=i(E,10),A=s(A,x,_,E,O,u[6],1548603684,9),_=i(_,10),O=s(O,A,x,_,E,u[11],1548603684,13),x=i(x,10),E=s(E,O,A,x,_,u[3],1548603684,15),A=i(A,10),_=s(_,E,O,A,x,u[7],1548603684,7),O=i(O,10),x=s(x,_,E,O,A,u[0],1548603684,12),E=i(E,10),A=s(A,x,_,E,O,u[13],1548603684,8),_=i(_,10),O=s(O,A,x,_,E,u[5],1548603684,9),x=i(x,10),E=s(E,O,A,x,_,u[10],1548603684,11),A=i(A,10),_=s(_,E,O,A,x,u[14],1548603684,7),O=i(O,10),x=s(x,_,E,O,A,u[15],1548603684,7),E=i(E,10),A=s(A,x,_,E,O,u[8],1548603684,12),_=i(_,10),O=s(O,A,x,_,E,u[12],1548603684,7),x=i(x,10),E=s(E,O,A,x,_,u[4],1548603684,6),A=i(A,10),_=s(_,E,O,A,x,u[9],1548603684,15),O=i(O,10),x=s(x,_,E,O,A,u[1],1548603684,13),E=i(E,10),A=s(A,x,_,E,O,u[2],1548603684,11),_=i(_,10),O=a(O,A,x,_,E,u[15],1836072691,9),x=i(x,10),E=a(E,O,A,x,_,u[5],1836072691,7),A=i(A,10),_=a(_,E,O,A,x,u[1],1836072691,15),O=i(O,10),x=a(x,_,E,O,A,u[3],1836072691,11),E=i(E,10),A=a(A,x,_,E,O,u[7],1836072691,8),_=i(_,10),O=a(O,A,x,_,E,u[14],1836072691,6),x=i(x,10),E=a(E,O,A,x,_,u[6],1836072691,6),A=i(A,10),_=a(_,E,O,A,x,u[9],1836072691,14),O=i(O,10),x=a(x,_,E,O,A,u[11],1836072691,12),E=i(E,10),A=a(A,x,_,E,O,u[8],1836072691,13),_=i(_,10),O=a(O,A,x,_,E,u[12],1836072691,5),x=i(x,10),E=a(E,O,A,x,_,u[2],1836072691,14),A=i(A,10),_=a(_,E,O,A,x,u[10],1836072691,13),O=i(O,10),x=a(x,_,E,O,A,u[0],1836072691,13),E=i(E,10),A=a(A,x,_,E,O,u[4],1836072691,7),_=i(_,10),O=a(O,A,x,_,E,u[13],1836072691,5),x=i(x,10),E=o(E,O,A,x,_,u[8],2053994217,15),A=i(A,10),_=o(_,E,O,A,x,u[6],2053994217,5),O=i(O,10),x=o(x,_,E,O,A,u[4],2053994217,8),E=i(E,10),A=o(A,x,_,E,O,u[1],2053994217,11),_=i(_,10),O=o(O,A,x,_,E,u[3],2053994217,14),x=i(x,10),E=o(E,O,A,x,_,u[11],2053994217,14),A=i(A,10),_=o(_,E,O,A,x,u[15],2053994217,6),O=i(O,10),x=o(x,_,E,O,A,u[0],2053994217,14),E=i(E,10),A=o(A,x,_,E,O,u[5],2053994217,6),_=i(_,10),O=o(O,A,x,_,E,u[12],2053994217,9),x=i(x,10),E=o(E,O,A,x,_,u[2],2053994217,12),A=i(A,10),_=o(_,E,O,A,x,u[13],2053994217,9),O=i(O,10),x=o(x,_,E,O,A,u[9],2053994217,12),E=i(E,10),A=o(A,x,_,E,O,u[7],2053994217,5),_=i(_,10),O=o(O,A,x,_,E,u[10],2053994217,15),x=i(x,10),E=o(E,O,A,x,_,u[14],2053994217,8),A=i(A,10),_=n(_,E,O,A,x,u[12],0,8),O=i(O,10),x=n(x,_,E,O,A,u[15],0,5),E=i(E,10),A=n(A,x,_,E,O,u[10],0,12),_=i(_,10),O=n(O,A,x,_,E,u[4],0,9),x=i(x,10),E=n(E,O,A,x,_,u[1],0,12),A=i(A,10),_=n(_,E,O,A,x,u[5],0,5),O=i(O,10),x=n(x,_,E,O,A,u[8],0,14),E=i(E,10),A=n(A,x,_,E,O,u[7],0,6),_=i(_,10),O=n(O,A,x,_,E,u[6],0,8),x=i(x,10),E=n(E,O,A,x,_,u[2],0,13),A=i(A,10),_=n(_,E,O,A,x,u[13],0,6),O=i(O,10),x=n(x,_,E,O,A,u[14],0,5),E=i(E,10),A=n(A,x,_,E,O,u[0],0,15),_=i(_,10),O=n(O,A,x,_,E,u[3],0,13),x=i(x,10),E=n(E,O,A,x,_,u[9],0,11),A=i(A,10),_=n(_,E,O,A,x,u[11],0,11),O=i(O,10);var B=this._b+d+O|0;this._b=this._c+g+A|0,this._c=this._d+b+x|0,this._d=this._e+f+_|0,this._e=this._a+l+E|0,this._a=B},t.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var u=new Buffer(20);return u.writeInt32LE(this._a,0),u.writeInt32LE(this._b,4),u.writeInt32LE(this._c,8),u.writeInt32LE(this._d,12),u.writeInt32LE(this._e,16),u};function i(u,p){return u<<p|u>>>32-p}function n(u,p,f,l,d,g,b,x){return i(u+(p^f^l)+g+b|0,x)+d|0}function o(u,p,f,l,d,g,b,x){return i(u+(p&f|~p&l)+g+b|0,x)+d|0}function a(u,p,f,l,d,g,b,x){return i(u+((p|~f)^l)+g+b|0,x)+d|0}function s(u,p,f,l,d,g,b,x){return i(u+(p&l|f&~l)+g+b|0,x)+d|0}function c(u,p,f,l,d,g,b,x){return i(u+(p^(f|~l))+g+b|0,x)+d|0}return Oc=t,Oc}var Pc={exports:{}},Tc,Td;function Q1(){if(Td)return Tc;Td=1;var r={}.toString;return Tc=Array.isArray||function(e){return r.call(e)=="[object Array]"},Tc}var kc,kd;function Fo(){return kd||(kd=1,kc=TypeError),kc}var Ic,Id;function cm(){return Id||(Id=1,Ic=Object),Ic}var Lc,Ld;function e_(){return Ld||(Ld=1,Lc=Error),Lc}var Nc,Nd;function t_(){return Nd||(Nd=1,Nc=EvalError),Nc}var Bc,Bd;function r_(){return Bd||(Bd=1,Bc=RangeError),Bc}var Mc,Md;function i_(){return Md||(Md=1,Mc=ReferenceError),Mc}var jc,jd;function um(){return jd||(jd=1,jc=SyntaxError),jc}var Cc,Cd;function n_(){return Cd||(Cd=1,Cc=URIError),Cc}var zc,zd;function o_(){return zd||(zd=1,zc=Math.abs),zc}var Hc,Hd;function a_(){return Hd||(Hd=1,Hc=Math.floor),Hc}var Dc,Dd;function s_(){return Dd||(Dd=1,Dc=Math.max),Dc}var Uc,Ud;function c_(){return Ud||(Ud=1,Uc=Math.min),Uc}var qc,qd;function u_(){return qd||(qd=1,qc=Math.pow),qc}var Fc,Fd;function l_(){return Fd||(Fd=1,Fc=Math.round),Fc}var Gc,Gd;function f_(){return Gd||(Gd=1,Gc=Number.isNaN||function(e){return e!==e}),Gc}var Kc,Kd;function h_(){if(Kd)return Kc;Kd=1;var r=f_();return Kc=function(t){return r(t)||t===0?t:t<0?-1:1},Kc}var $c,$d;function d_(){return $d||($d=1,$c=Object.getOwnPropertyDescriptor),$c}var Vc,Vd;function Go(){if(Vd)return Vc;Vd=1;var r=d_();if(r)try{r([],"length")}catch{r=null}return Vc=r,Vc}var Wc,Wd;function ss(){if(Wd)return Wc;Wd=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return Wc=r,Wc}var Zc,Zd;function lm(){return Zd||(Zd=1,Zc=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==n||s.enumerable!==!0)return!1}return!0}),Zc}var Jc,Jd;function p_(){if(Jd)return Jc;Jd=1;var r=typeof Symbol<"u"&&Symbol,e=lm();return Jc=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Jc}var Yc,Yd;function fm(){return Yd||(Yd=1,Yc=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Yc}var Xc,Xd;function hm(){if(Xd)return Xc;Xd=1;var r=cm();return Xc=r.getPrototypeOf||null,Xc}var Qc,Qd;function g_(){if(Qd)return Qc;Qd=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",n=function(c,u){for(var p=[],f=0;f<c.length;f+=1)p[f]=c[f];for(var l=0;l<u.length;l+=1)p[l+c.length]=u[l];return p},o=function(c,u){for(var p=[],f=u,l=0;f<c.length;f+=1,l+=1)p[l]=c[f];return p},a=function(s,c){for(var u="",p=0;p<s.length;p+=1)u+=s[p],p+1<s.length&&(u+=c);return u};return Qc=function(c){var u=this;if(typeof u!="function"||e.apply(u)!==i)throw new TypeError(r+u);for(var p=o(arguments,1),f,l=function(){if(this instanceof f){var _=u.apply(this,n(p,arguments));return Object(_)===_?_:this}return u.apply(c,n(p,arguments))},d=t(0,u.length-p.length),g=[],b=0;b<d;b++)g[b]="$"+b;if(f=Function("binder","return function ("+a(g,",")+"){ return binder.apply(this,arguments); }")(l),u.prototype){var x=function(){};x.prototype=u.prototype,f.prototype=new x,x.prototype=null}return f},Qc}var eu,ep;function Ko(){if(ep)return eu;ep=1;var r=g_();return eu=Function.prototype.bind||r,eu}var tu,tp;function Xl(){return tp||(tp=1,tu=Function.prototype.call),tu}var ru,rp;function Ql(){return rp||(rp=1,ru=Function.prototype.apply),ru}var iu,ip;function m_(){return ip||(ip=1,iu=typeof Reflect<"u"&&Reflect&&Reflect.apply),iu}var nu,np;function dm(){if(np)return nu;np=1;var r=Ko(),e=Ql(),t=Xl(),i=m_();return nu=i||r.call(t,e),nu}var ou,op;function ef(){if(op)return ou;op=1;var r=Ko(),e=Fo(),t=Xl(),i=dm();return ou=function(o){if(o.length<1||typeof o[0]!="function")throw new e("a function is required");return i(r,t,o)},ou}var au,ap;function b_(){if(ap)return au;ap=1;var r=ef(),e=Go(),t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var i=!!t&&e&&e(Object.prototype,"__proto__"),n=Object,o=n.getPrototypeOf;return au=i&&typeof i.get=="function"?r([i.get]):typeof o=="function"?function(s){return o(s==null?s:n(s))}:!1,au}var su,sp;function pm(){if(sp)return su;sp=1;var r=fm(),e=hm(),t=b_();return su=r?function(n){return r(n)}:e?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return e(n)}:t?function(n){return t(n)}:null,su}var cu,cp;function v_(){if(cp)return cu;cp=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Ko();return cu=t.call(r,e),cu}var uu,up;function gm(){if(up)return uu;up=1;var r,e=cm(),t=e_(),i=t_(),n=r_(),o=i_(),a=um(),s=Fo(),c=n_(),u=o_(),p=a_(),f=s_(),l=c_(),d=u_(),g=l_(),b=h_(),x=Function,_=function(Z){try{return x('"use strict"; return ('+Z+").constructor;")()}catch{}},E=Go(),O=ss(),A=function(){throw new s},B=E?(function(){try{return arguments.callee,A}catch{try{return E(arguments,"callee").get}catch{return A}}})():A,N=p_()(),v=pm(),j=hm(),D=fm(),R=Ql(),M=Xl(),q={},P=typeof Uint8Array>"u"||!v?r:v(Uint8Array),h={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":N&&v?v([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":q,"%AsyncGenerator%":q,"%AsyncGeneratorFunction%":q,"%AsyncIteratorPrototype%":q,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":x,"%GeneratorFunction%":q,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":N&&v?v(v([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!N||!v?r:v(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":E,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!N||!v?r:v(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":N&&v?v(""[Symbol.iterator]()):r,"%Symbol%":N?Symbol:r,"%SyntaxError%":a,"%ThrowTypeError%":B,"%TypedArray%":P,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":M,"%Function.prototype.apply%":R,"%Object.defineProperty%":O,"%Object.getPrototypeOf%":j,"%Math.abs%":u,"%Math.floor%":p,"%Math.max%":f,"%Math.min%":l,"%Math.pow%":d,"%Math.round%":g,"%Math.sign%":b,"%Reflect.getPrototypeOf%":D};if(v)try{null.error}catch(Z){var y=v(v(Z));h["%Error.prototype%"]=y}var m=function Z(Q){var z;if(Q==="%AsyncFunction%")z=_("async function () {}");else if(Q==="%GeneratorFunction%")z=_("function* () {}");else if(Q==="%AsyncGeneratorFunction%")z=_("async function* () {}");else if(Q==="%AsyncGenerator%"){var H=Z("%AsyncGeneratorFunction%");H&&(z=H.prototype)}else if(Q==="%AsyncIteratorPrototype%"){var W=Z("%AsyncGenerator%");W&&v&&(z=v(W.prototype))}return h[Q]=z,z},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=Ko(),k=v_(),U=T.call(M,Array.prototype.concat),I=T.call(R,Array.prototype.splice),w=T.call(M,String.prototype.replace),L=T.call(M,String.prototype.slice),J=T.call(M,RegExp.prototype.exec),Y=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,K=function(Q){var z=L(Q,0,1),H=L(Q,-1);if(z==="%"&&H!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(H==="%"&&z!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var W=[];return w(Q,Y,function(ee,ne,ie,oe){W[W.length]=ie?w(oe,C,"$1"):ne||ee}),W},$=function(Q,z){var H=Q,W;if(k(S,H)&&(W=S[H],H="%"+W[0]+"%"),k(h,H)){var ee=h[H];if(ee===q&&(ee=m(H)),typeof ee>"u"&&!z)throw new s("intrinsic "+Q+" exists, but is not available. Please file an issue!");return{alias:W,name:H,value:ee}}throw new a("intrinsic "+Q+" does not exist!")};return uu=function(Q,z){if(typeof Q!="string"||Q.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof z!="boolean")throw new s('"allowMissing" argument must be a boolean');if(J(/^%?[^%]*%?$/,Q)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var H=K(Q),W=H.length>0?H[0]:"",ee=$("%"+W+"%",z),ne=ee.name,ie=ee.value,oe=!1,Ee=ee.alias;Ee&&(W=Ee[0],I(H,U([0,1],Ee)));for(var jt=1,fe=!0;jt<H.length;jt+=1){var re=H[jt],ke=L(re,0,1),he=L(re,-1);if((ke==='"'||ke==="'"||ke==="`"||he==='"'||he==="'"||he==="`")&&ke!==he)throw new a("property names with quotes must have matching quotes");if((re==="constructor"||!fe)&&(oe=!0),W+="."+re,ne="%"+W+"%",k(h,ne))ie=h[ne];else if(ie!=null){if(!(re in ie)){if(!z)throw new s("base intrinsic for "+Q+" exists, but the property is not available.");return}if(E&&jt+1>=H.length){var ge=E(ie,re);fe=!!ge,fe&&"get"in ge&&!("originalValue"in ge.get)?ie=ge.get:ie=ie[re]}else fe=k(ie,re),ie=ie[re];fe&&!oe&&(h[ne]=ie)}}return ie},uu}var lu,lp;function mm(){if(lp)return lu;lp=1;var r=gm(),e=ef(),t=e([r("%String.prototype.indexOf%")]);return lu=function(n,o){var a=r(n,!!o);return typeof a=="function"&&t(n,".prototype.")>-1?e([a]):a},lu}var fu,fp;function y_(){if(fp)return fu;fp=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,i;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw i}}),i={},e(function(){throw 42},null,t)}catch(E){E!==i&&(e=null)}else e=null;var n=/^\s*class\b/,o=function(O){try{var A=r.call(O);return n.test(A)}catch{return!1}},a=function(O){try{return o(O)?!1:(r.call(O),!0)}catch{return!1}},s=Object.prototype.toString,c="[object Object]",u="[object Function]",p="[object GeneratorFunction]",f="[object HTMLAllCollection]",l="[object HTML document.all class]",d="[object HTMLCollection]",g=typeof Symbol=="function"&&!!Symbol.toStringTag,b=!(0 in[,]),x=function(){return!1};if(typeof document=="object"){var _=document.all;s.call(_)===s.call(document.all)&&(x=function(O){if((b||!O)&&(typeof O>"u"||typeof O=="object"))try{var A=s.call(O);return(A===f||A===l||A===d||A===c)&&O("")==null}catch{}return!1})}return fu=e?function(O){if(x(O))return!0;if(!O||typeof O!="function"&&typeof O!="object")return!1;try{e(O,null,t)}catch(A){if(A!==i)return!1}return!o(O)&&a(O)}:function(O){if(x(O))return!0;if(!O||typeof O!="function"&&typeof O!="object")return!1;if(g)return a(O);if(o(O))return!1;var A=s.call(O);return A!==u&&A!==p&&!/^\[object HTML/.test(A)?!1:a(O)},fu}var hu,hp;function __(){if(hp)return hu;hp=1;var r=y_(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,i=function(c,u,p){for(var f=0,l=c.length;f<l;f++)t.call(c,f)&&(p==null?u(c[f],f,c):u.call(p,c[f],f,c))},n=function(c,u,p){for(var f=0,l=c.length;f<l;f++)p==null?u(c.charAt(f),f,c):u.call(p,c.charAt(f),f,c)},o=function(c,u,p){for(var f in c)t.call(c,f)&&(p==null?u(c[f],f,c):u.call(p,c[f],f,c))};function a(s){return e.call(s)==="[object Array]"}return hu=function(c,u,p){if(!r(u))throw new TypeError("iterator must be a function");var f;arguments.length>=3&&(f=p),a(c)?i(c,u,f):typeof c=="string"?n(c,u,f):o(c,u,f)},hu}var du,dp;function w_(){return dp||(dp=1,du=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),du}var pu,pp;function E_(){if(pp)return pu;pp=1;var r=w_(),e=typeof globalThis>"u"?Ke:globalThis;return pu=function(){for(var i=[],n=0;n<r.length;n++)typeof e[r[n]]=="function"&&(i[i.length]=r[n]);return i},pu}var gu={exports:{}},mu,gp;function x_(){if(gp)return mu;gp=1;var r=ss(),e=um(),t=Fo(),i=Go();return mu=function(o,a,s){if(!o||typeof o!="object"&&typeof o!="function")throw new t("`obj` must be an object or a function`");if(typeof a!="string"&&typeof a!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,p=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,l=!!i&&i(o,a);if(r)r(o,a,{configurable:p===null&&l?l.configurable:!p,enumerable:c===null&&l?l.enumerable:!c,value:s,writable:u===null&&l?l.writable:!u});else if(f||!c&&!u&&!p)o[a]=s;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},mu}var bu,mp;function S_(){if(mp)return bu;mp=1;var r=ss(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},bu=e,bu}var vu,bp;function A_(){if(bp)return vu;bp=1;var r=gm(),e=x_(),t=S_()(),i=Go(),n=Fo(),o=r("%Math.floor%");return vu=function(s,c){if(typeof s!="function")throw new n("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||o(c)!==c)throw new n("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],p=!0,f=!0;if("length"in s&&i){var l=i(s,"length");l&&!l.configurable&&(p=!1),l&&!l.writable&&(f=!1)}return(p||f||!u)&&(t?e(s,"length",c,!0,!0):e(s,"length",c)),s},vu}var yu,vp;function R_(){if(vp)return yu;vp=1;var r=Ko(),e=Ql(),t=dm();return yu=function(){return t(r,e,arguments)},yu}var yp;function O_(){return yp||(yp=1,(function(r){var e=A_(),t=ss(),i=ef(),n=R_();r.exports=function(a){var s=i(arguments),c=a.length-(arguments.length-1);return e(s,1+(c>0?c:0),!0)},t?t(r.exports,"apply",{value:n}):r.exports.apply=n})(gu)),gu.exports}var _u,_p;function P_(){if(_p)return _u;_p=1;var r=lm();return _u=function(){return r()&&!!Symbol.toStringTag},_u}var wu,wp;function T_(){if(wp)return wu;wp=1;var r=__(),e=E_(),t=O_(),i=mm(),n=Go(),o=pm(),a=i("Object.prototype.toString"),s=P_()(),c=typeof globalThis>"u"?Ke:globalThis,u=e(),p=i("String.prototype.slice"),f=i("Array.prototype.indexOf",!0)||function(x,_){for(var E=0;E<x.length;E+=1)if(x[E]===_)return E;return-1},l={__proto__:null};s&&n&&o?r(u,function(b){var x=new c[b];if(Symbol.toStringTag in x&&o){var _=o(x),E=n(_,Symbol.toStringTag);if(!E&&_){var O=o(_);E=n(O,Symbol.toStringTag)}l["$"+b]=t(E.get)}}):r(u,function(b){var x=new c[b],_=x.slice||x.set;_&&(l["$"+b]=t(_))});var d=function(x){var _=!1;return r(l,function(E,O){if(!_)try{"$"+E(x)===O&&(_=p(O,1))}catch{}}),_},g=function(x){var _=!1;return r(l,function(E,O){if(!_)try{E(x),_=p(O,1)}catch{}}),_};return wu=function(x){if(!x||typeof x!="object")return!1;if(!s){var _=p(a(x),8,-1);return f(u,_)>-1?_:_!=="Object"?!1:g(x)}return n?d(x):null},wu}var Eu,Ep;function k_(){if(Ep)return Eu;Ep=1;var r=T_();return Eu=function(t){return!!r(t)},Eu}var xu,xp;function I_(){if(xp)return xu;xp=1;var r=Fo(),e=mm(),t=e("TypedArray.prototype.buffer",!0),i=k_();return xu=t||function(o){if(!i(o))throw new r("Not a Typed Array");return o.buffer},xu}var Su,Sp;function bm(){if(Sp)return Su;Sp=1;var r=Er().Buffer,e=Q1(),t=I_(),i=ArrayBuffer.isView||function(c){try{return t(c),!0}catch{return!1}},n=typeof Uint8Array<"u",o=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a=o&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);return Su=function(c,u){if(c instanceof r)return c;if(typeof c=="string")return r.from(c,u);if(o&&i(c)){if(c.byteLength===0)return r.alloc(0);if(a){var p=r.from(c.buffer,c.byteOffset,c.byteLength);if(p.byteLength===c.byteLength)return p}var f=c instanceof Uint8Array?c:new Uint8Array(c.buffer,c.byteOffset,c.byteLength),l=r.from(f);if(l.length===c.byteLength)return l}if(n&&c instanceof Uint8Array)return r.from(c);var d=e(c);if(d)for(var g=0;g<c.length;g+=1){var b=c[g];if(typeof b!="number"||b<0||b>255||~~b!==b)throw new RangeError("Array items must be numbers in the range 0-255.")}if(d||r.isBuffer(c)&&c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c))return r.from(c);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},Su}var Au,Ap;function Yn(){if(Ap)return Au;Ap=1;var r=Er().Buffer,e=bm();function t(i,n){this._block=r.alloc(i),this._finalSize=n,this._blockSize=i,this._len=0}return t.prototype.update=function(i,n){i=e(i,n||"utf8");for(var o=this._block,a=this._blockSize,s=i.length,c=this._len,u=0;u<s;){for(var p=c%a,f=Math.min(s-u,a-p),l=0;l<f;l++)o[p+l]=i[u+l];c+=f,u+=f,c%a===0&&this._update(o)}return this._len+=s,this},t.prototype.digest=function(i){var n=this._len%this._blockSize;this._block[n]=128,this._block.fill(0,n+1),n>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var a=(o&4294967295)>>>0,s=(o-a)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var c=this._hash();return i?c.toString(i):c},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Au=t,Au}var Ru,Rp;function L_(){if(Rp)return Ru;Rp=1;var r=ar(),e=Yn(),t=Er().Buffer,i=[1518500249,1859775393,-1894007588,-899497514],n=new Array(80);function o(){this.init(),this._w=n,e.call(this,64,56)}r(o,e),o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function a(u){return u<<5|u>>>27}function s(u){return u<<30|u>>>2}function c(u,p,f,l){return u===0?p&f|~p&l:u===2?p&f|p&l|f&l:p^f^l}return o.prototype._update=function(u){for(var p=this._w,f=this._a|0,l=this._b|0,d=this._c|0,g=this._d|0,b=this._e|0,x=0;x<16;++x)p[x]=u.readInt32BE(x*4);for(;x<80;++x)p[x]=p[x-3]^p[x-8]^p[x-14]^p[x-16];for(var _=0;_<80;++_){var E=~~(_/20),O=a(f)+c(E,l,d,g)+b+p[_]+i[E]|0;b=g,g=d,d=s(l),l=f,f=O}this._a=f+this._a|0,this._b=l+this._b|0,this._c=d+this._c|0,this._d=g+this._d|0,this._e=b+this._e|0},o.prototype._hash=function(){var u=t.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},Ru=o,Ru}var Ou,Op;function N_(){if(Op)return Ou;Op=1;var r=ar(),e=Yn(),t=Er().Buffer,i=[1518500249,1859775393,-1894007588,-899497514],n=new Array(80);function o(){this.init(),this._w=n,e.call(this,64,56)}r(o,e),o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function a(p){return p<<1|p>>>31}function s(p){return p<<5|p>>>27}function c(p){return p<<30|p>>>2}function u(p,f,l,d){return p===0?f&l|~f&d:p===2?f&l|f&d|l&d:f^l^d}return o.prototype._update=function(p){for(var f=this._w,l=this._a|0,d=this._b|0,g=this._c|0,b=this._d|0,x=this._e|0,_=0;_<16;++_)f[_]=p.readInt32BE(_*4);for(;_<80;++_)f[_]=a(f[_-3]^f[_-8]^f[_-14]^f[_-16]);for(var E=0;E<80;++E){var O=~~(E/20),A=s(l)+u(O,d,g,b)+x+f[E]+i[O]|0;x=b,b=g,g=c(d),d=l,l=A}this._a=l+this._a|0,this._b=d+this._b|0,this._c=g+this._c|0,this._d=b+this._d|0,this._e=x+this._e|0},o.prototype._hash=function(){var p=t.allocUnsafe(20);return p.writeInt32BE(this._a|0,0),p.writeInt32BE(this._b|0,4),p.writeInt32BE(this._c|0,8),p.writeInt32BE(this._d|0,12),p.writeInt32BE(this._e|0,16),p},Ou=o,Ou}var Pu,Pp;function vm(){if(Pp)return Pu;Pp=1;var r=ar(),e=Yn(),t=Er().Buffer,i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=new Array(64);function o(){this.init(),this._w=n,e.call(this,64,56)}r(o,e),o.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function a(l,d,g){return g^l&(d^g)}function s(l,d,g){return l&d|g&(l|d)}function c(l){return(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10)}function u(l){return(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7)}function p(l){return(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3}function f(l){return(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10}return o.prototype._update=function(l){for(var d=this._w,g=this._a|0,b=this._b|0,x=this._c|0,_=this._d|0,E=this._e|0,O=this._f|0,A=this._g|0,B=this._h|0,N=0;N<16;++N)d[N]=l.readInt32BE(N*4);for(;N<64;++N)d[N]=f(d[N-2])+d[N-7]+p(d[N-15])+d[N-16]|0;for(var v=0;v<64;++v){var j=B+u(E)+a(E,O,A)+i[v]+d[v]|0,D=c(g)+s(g,b,x)|0;B=A,A=O,O=E,E=_+j|0,_=x,x=b,b=g,g=j+D|0}this._a=g+this._a|0,this._b=b+this._b|0,this._c=x+this._c|0,this._d=_+this._d|0,this._e=E+this._e|0,this._f=O+this._f|0,this._g=A+this._g|0,this._h=B+this._h|0},o.prototype._hash=function(){var l=t.allocUnsafe(32);return l.writeInt32BE(this._a,0),l.writeInt32BE(this._b,4),l.writeInt32BE(this._c,8),l.writeInt32BE(this._d,12),l.writeInt32BE(this._e,16),l.writeInt32BE(this._f,20),l.writeInt32BE(this._g,24),l.writeInt32BE(this._h,28),l},Pu=o,Pu}var Tu,Tp;function B_(){if(Tp)return Tu;Tp=1;var r=ar(),e=vm(),t=Yn(),i=Er().Buffer,n=new Array(64);function o(){this.init(),this._w=n,t.call(this,64,56)}return r(o,e),o.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},o.prototype._hash=function(){var a=i.allocUnsafe(28);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a},Tu=o,Tu}var ku,kp;function ym(){if(kp)return ku;kp=1;var r=ar(),e=Yn(),t=Er().Buffer,i=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],n=new Array(160);function o(){this.init(),this._w=n,e.call(this,128,112)}r(o,e),o.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function a(b,x,_){return _^b&(x^_)}function s(b,x,_){return b&x|_&(b|x)}function c(b,x){return(b>>>28|x<<4)^(x>>>2|b<<30)^(x>>>7|b<<25)}function u(b,x){return(b>>>14|x<<18)^(b>>>18|x<<14)^(x>>>9|b<<23)}function p(b,x){return(b>>>1|x<<31)^(b>>>8|x<<24)^b>>>7}function f(b,x){return(b>>>1|x<<31)^(b>>>8|x<<24)^(b>>>7|x<<25)}function l(b,x){return(b>>>19|x<<13)^(x>>>29|b<<3)^b>>>6}function d(b,x){return(b>>>19|x<<13)^(x>>>29|b<<3)^(b>>>6|x<<26)}function g(b,x){return b>>>0<x>>>0?1:0}return o.prototype._update=function(b){for(var x=this._w,_=this._ah|0,E=this._bh|0,O=this._ch|0,A=this._dh|0,B=this._eh|0,N=this._fh|0,v=this._gh|0,j=this._hh|0,D=this._al|0,R=this._bl|0,M=this._cl|0,q=this._dl|0,P=this._el|0,h=this._fl|0,y=this._gl|0,m=this._hl|0,S=0;S<32;S+=2)x[S]=b.readInt32BE(S*4),x[S+1]=b.readInt32BE(S*4+4);for(;S<160;S+=2){var T=x[S-30],k=x[S-30+1],U=p(T,k),I=f(k,T);T=x[S-4],k=x[S-4+1];var w=l(T,k),L=d(k,T),J=x[S-14],Y=x[S-14+1],C=x[S-32],K=x[S-32+1],$=I+Y|0,Z=U+J+g($,I)|0;$=$+L|0,Z=Z+w+g($,L)|0,$=$+K|0,Z=Z+C+g($,K)|0,x[S]=Z,x[S+1]=$}for(var Q=0;Q<160;Q+=2){Z=x[Q],$=x[Q+1];var z=s(_,E,O),H=s(D,R,M),W=c(_,D),ee=c(D,_),ne=u(B,P),ie=u(P,B),oe=i[Q],Ee=i[Q+1],jt=a(B,N,v),fe=a(P,h,y),re=m+ie|0,ke=j+ne+g(re,m)|0;re=re+fe|0,ke=ke+jt+g(re,fe)|0,re=re+Ee|0,ke=ke+oe+g(re,Ee)|0,re=re+$|0,ke=ke+Z+g(re,$)|0;var he=ee+H|0,ge=W+z+g(he,ee)|0;j=v,m=y,v=N,y=h,N=B,h=P,P=q+re|0,B=A+ke+g(P,q)|0,A=O,q=M,O=E,M=R,E=_,R=D,D=re+he|0,_=ke+ge+g(D,re)|0}this._al=this._al+D|0,this._bl=this._bl+R|0,this._cl=this._cl+M|0,this._dl=this._dl+q|0,this._el=this._el+P|0,this._fl=this._fl+h|0,this._gl=this._gl+y|0,this._hl=this._hl+m|0,this._ah=this._ah+_+g(this._al,D)|0,this._bh=this._bh+E+g(this._bl,R)|0,this._ch=this._ch+O+g(this._cl,M)|0,this._dh=this._dh+A+g(this._dl,q)|0,this._eh=this._eh+B+g(this._el,P)|0,this._fh=this._fh+N+g(this._fl,h)|0,this._gh=this._gh+v+g(this._gl,y)|0,this._hh=this._hh+j+g(this._hl,m)|0},o.prototype._hash=function(){var b=t.allocUnsafe(64);function x(_,E,O){b.writeInt32BE(_,O),b.writeInt32BE(E,O+4)}return x(this._ah,this._al,0),x(this._bh,this._bl,8),x(this._ch,this._cl,16),x(this._dh,this._dl,24),x(this._eh,this._el,32),x(this._fh,this._fl,40),x(this._gh,this._gl,48),x(this._hh,this._hl,56),b},ku=o,ku}var Iu,Ip;function M_(){if(Ip)return Iu;Ip=1;var r=ar(),e=ym(),t=Yn(),i=Er().Buffer,n=new Array(160);function o(){this.init(),this._w=n,t.call(this,128,112)}return r(o,e),o.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},o.prototype._hash=function(){var a=i.allocUnsafe(48);function s(c,u,p){a.writeInt32BE(c,p),a.writeInt32BE(u,p+4)}return s(this._ah,this._al,0),s(this._bh,this._bl,8),s(this._ch,this._cl,16),s(this._dh,this._dl,24),s(this._eh,this._el,32),s(this._fh,this._fl,40),a},Iu=o,Iu}var Lp;function j_(){return Lp||(Lp=1,(function(r){r.exports=function(t){var i=t.toLowerCase(),n=r.exports[i];if(!n)throw new Error(i+" is not supported (we accept pull requests)");return new n},r.exports.sha=L_(),r.exports.sha1=N_(),r.exports.sha224=B_(),r.exports.sha256=vm(),r.exports.sha384=M_(),r.exports.sha512=ym()})(Pc)),Pc.exports}var Lu,Np;function _m(){if(Np)return Lu;Np=1;var r=Er().Buffer,e=bm(),t=typeof Uint8Array<"u",i=t&&typeof ArrayBuffer<"u",n=i&&ArrayBuffer.isView;return Lu=function(o,a,s){if(typeof o=="string"||r.isBuffer(o)||t&&o instanceof Uint8Array||n&&n(o))return e(o,a);throw new TypeError(s+" must be a string, a Buffer, a Uint8Array, or a DataView")},Lu}var Nu,Bp;function wm(){if(Bp)return Nu;Bp=1;var r=z1(),e=X1(),t=j_(),i=Er().Buffer,n=rm(),o=im(),a=_m(),s=i.alloc(128),c={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20},u={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function p(g){return new e().update(g).digest()}function f(g){function b(x){return t(g).update(x).digest()}return g==="rmd160"||g==="ripemd160"?p:g==="md5"?r:b}function l(g,b,x){var _=f(g),E=g==="sha512"||g==="sha384"?128:64;b.length>E?b=_(b):b.length<E&&(b=i.concat([b,s],E));for(var O=i.allocUnsafe(E+c[g]),A=i.allocUnsafe(E+c[g]),B=0;B<E;B++)O[B]=b[B]^54,A[B]=b[B]^92;var N=i.allocUnsafe(E+x+4);O.copy(N,0,0,E),this.ipad1=N,this.ipad2=O,this.opad=A,this.alg=g,this.blocksize=E,this.hash=_,this.size=c[g]}l.prototype.run=function(g,b){g.copy(b,this.blocksize);var x=this.hash(b);return x.copy(this.opad,this.blocksize),this.hash(this.opad)};function d(g,b,x,_,E){n(x,_),g=a(g,o,"Password"),b=a(b,o,"Salt");var O=(E||"sha1").toLowerCase(),A=u[O]||O,B=c[A];if(typeof B!="number"||!B)throw new TypeError("Digest algorithm not supported: "+E);var N=new l(A,g,b.length),v=i.allocUnsafe(_),j=i.allocUnsafe(b.length+4);b.copy(j,0,0,b.length);for(var D=0,R=B,M=Math.ceil(_/R),q=1;q<=M;q++){j.writeUInt32BE(q,b.length);for(var P=N.run(j,N.ipad1),h=P,y=1;y<x;y++){h=N.run(h,N.ipad2);for(var m=0;m<R;m++)P[m]^=h[m]}P.copy(v,D),D+=R}return v}return Nu=d,Nu}var Bu,Mp;function C_(){if(Mp)return Bu;Mp=1;var r=Er().Buffer,e=rm(),t=im(),i=wm(),n=_m(),o,a=Ke.crypto&&Ke.crypto.subtle,s={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},c=[],u;function p(){return u||(Ke.process&&Ke.process.nextTick?u=Ke.process.nextTick:Ke.queueMicrotask?u=Ke.queueMicrotask:Ke.setImmediate?u=Ke.setImmediate:u=Ke.setTimeout,u)}function f(g,b,x,_,E){return a.importKey("raw",g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(O){return a.deriveBits({name:"PBKDF2",salt:b,iterations:x,hash:{name:E}},O,_<<3)}).then(function(O){return r.from(O)})}function l(g){if(Ke.process&&!Ke.process.browser||!a||!a.importKey||!a.deriveBits)return Promise.resolve(!1);if(c[g]!==void 0)return c[g];o=o||r.alloc(8);var b=f(o,o,10,128,g).then(function(){return!0},function(){return!1});return c[g]=b,b}function d(g,b){g.then(function(x){p()(function(){b(null,x)})},function(x){p()(function(){b(x)})})}return Bu=function(g,b,x,_,E,O){typeof E=="function"&&(O=E,E=void 0),E=E||"sha1";var A=s[E.toLowerCase()];if(!A||typeof Ke.Promise!="function"){p()(function(){var B;try{B=i(g,b,x,_,E)}catch(N){O(N);return}O(null,B)});return}if(e(x,_),g=n(g,t,"Password"),b=n(b,t,"Salt"),typeof O!="function")throw new Error("No callback provided to pbkdf2");d(l(A).then(function(B){return B?f(g,b,x,_,A):i(g,b,x,_,E)}),O)},Bu}var jp;function z_(){return jp||(jp=1,Qo.pbkdf2=C_(),Qo.pbkdf2Sync=wm()),Qo}var H_=z_();const D_=Nl(H_);var cr={},Hr={},Sr={},vi={},Cp;function cs(){if(Cp)return vi;Cp=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.anumber=r,vi.abytes=t,vi.ahash=i,vi.aexists=n,vi.aoutput=o;function r(a){if(!Number.isSafeInteger(a)||a<0)throw new Error("positive integer expected, got "+a)}function e(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&a.constructor.name==="Uint8Array"}function t(a,...s){if(!e(a))throw new Error("Uint8Array expected");if(s.length>0&&!s.includes(a.length))throw new Error("Uint8Array expected of length "+s+", got length="+a.length)}function i(a){if(typeof a!="function"||typeof a.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");r(a.outputLen),r(a.blockLen)}function n(a,s=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(s&&a.finished)throw new Error("Hash#digest() has already been called")}function o(a,s){t(a);const c=s.outputLen;if(a.length<c)throw new Error("digestInto() expects output buffer of length at least "+c)}return vi}var Mu={},io={},zp;function U_(){return zp||(zp=1,Object.defineProperty(io,"__esModule",{value:!0}),io.crypto=void 0,io.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),io}var Hp;function Xn(){return Hp||(Hp=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Hash=r.nextTick=r.byteSwapIfBE=r.byteSwap=r.isLE=r.rotl=r.rotr=r.createView=r.u32=r.u8=void 0,r.isBytes=i,r.byteSwap32=p,r.bytesToHex=l,r.hexToBytes=b,r.asyncLoop=_,r.utf8ToBytes=E,r.toBytes=O,r.concatBytes=A,r.checkOpts=N,r.wrapConstructor=v,r.wrapConstructorWithOpts=j,r.wrapXOFConstructorWithOpts=D,r.randomBytes=R;const e=U_(),t=cs();function i(M){return M instanceof Uint8Array||ArrayBuffer.isView(M)&&M.constructor.name==="Uint8Array"}const n=M=>new Uint8Array(M.buffer,M.byteOffset,M.byteLength);r.u8=n;const o=M=>new Uint32Array(M.buffer,M.byteOffset,Math.floor(M.byteLength/4));r.u32=o;const a=M=>new DataView(M.buffer,M.byteOffset,M.byteLength);r.createView=a;const s=(M,q)=>M<<32-q|M>>>q;r.rotr=s;const c=(M,q)=>M<<q|M>>>32-q>>>0;r.rotl=c,r.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const u=M=>M<<24&4278190080|M<<8&16711680|M>>>8&65280|M>>>24&255;r.byteSwap=u,r.byteSwapIfBE=r.isLE?M=>M:M=>(0,r.byteSwap)(M);function p(M){for(let q=0;q<M.length;q++)M[q]=(0,r.byteSwap)(M[q])}const f=Array.from({length:256},(M,q)=>q.toString(16).padStart(2,"0"));function l(M){(0,t.abytes)(M);let q="";for(let P=0;P<M.length;P++)q+=f[M[P]];return q}const d={_0:48,_9:57,A:65,F:70,a:97,f:102};function g(M){if(M>=d._0&&M<=d._9)return M-d._0;if(M>=d.A&&M<=d.F)return M-(d.A-10);if(M>=d.a&&M<=d.f)return M-(d.a-10)}function b(M){if(typeof M!="string")throw new Error("hex string expected, got "+typeof M);const q=M.length,P=q/2;if(q%2)throw new Error("hex string expected, got unpadded hex of length "+q);const h=new Uint8Array(P);for(let y=0,m=0;y<P;y++,m+=2){const S=g(M.charCodeAt(m)),T=g(M.charCodeAt(m+1));if(S===void 0||T===void 0){const k=M[m]+M[m+1];throw new Error('hex string expected, got non-hex character "'+k+'" at index '+m)}h[y]=S*16+T}return h}const x=async()=>{};r.nextTick=x;async function _(M,q,P){let h=Date.now();for(let y=0;y<M;y++){P(y);const m=Date.now()-h;m>=0&&m<q||(await(0,r.nextTick)(),h+=m)}}function E(M){if(typeof M!="string")throw new Error("utf8ToBytes expected string, got "+typeof M);return new Uint8Array(new TextEncoder().encode(M))}function O(M){return typeof M=="string"&&(M=E(M)),(0,t.abytes)(M),M}function A(...M){let q=0;for(let h=0;h<M.length;h++){const y=M[h];(0,t.abytes)(y),q+=y.length}const P=new Uint8Array(q);for(let h=0,y=0;h<M.length;h++){const m=M[h];P.set(m,y),y+=m.length}return P}class B{clone(){return this._cloneInto()}}r.Hash=B;function N(M,q){if(q!==void 0&&{}.toString.call(q)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(M,q)}function v(M){const q=h=>M().update(O(h)).digest(),P=M();return q.outputLen=P.outputLen,q.blockLen=P.blockLen,q.create=()=>M(),q}function j(M){const q=(h,y)=>M(y).update(O(h)).digest(),P=M({});return q.outputLen=P.outputLen,q.blockLen=P.blockLen,q.create=h=>M(h),q}function D(M){const q=(h,y)=>M(y).update(O(h)).digest(),P=M({});return q.outputLen=P.outputLen,q.blockLen=P.blockLen,q.create=h=>M(h),q}function R(M=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(M));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(M);throw new Error("crypto.getRandomValues must be defined")}})(Mu)),Mu}var Dp;function Em(){if(Dp)return Sr;Dp=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.HashMD=Sr.Maj=Sr.Chi=void 0,Sr.setBigUint64=t;const r=cs(),e=Xn();function t(a,s,c,u){if(typeof a.setBigUint64=="function")return a.setBigUint64(s,c,u);const p=BigInt(32),f=BigInt(4294967295),l=Number(c>>p&f),d=Number(c&f),g=u?4:0,b=u?0:4;a.setUint32(s+g,l,u),a.setUint32(s+b,d,u)}const i=(a,s,c)=>a&s^~a&c;Sr.Chi=i;const n=(a,s,c)=>a&s^a&c^s&c;Sr.Maj=n;class o extends e.Hash{constructor(s,c,u,p){super(),this.blockLen=s,this.outputLen=c,this.padOffset=u,this.isLE=p,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=(0,e.createView)(this.buffer)}update(s){(0,r.aexists)(this);const{view:c,buffer:u,blockLen:p}=this;s=(0,e.toBytes)(s);const f=s.length;for(let l=0;l<f;){const d=Math.min(p-this.pos,f-l);if(d===p){const g=(0,e.createView)(s);for(;p<=f-l;l+=p)this.process(g,l);continue}u.set(s.subarray(l,l+d),this.pos),this.pos+=d,l+=d,this.pos===p&&(this.process(c,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){(0,r.aexists)(this),(0,r.aoutput)(s,this),this.finished=!0;const{buffer:c,view:u,blockLen:p,isLE:f}=this;let{pos:l}=this;c[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>p-l&&(this.process(u,0),l=0);for(let _=l;_<p;_++)c[_]=0;t(u,p-8,BigInt(this.length*8),f),this.process(u,0);const d=(0,e.createView)(s),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=g/4,x=this.get();if(b>x.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<b;_++)d.setUint32(4*_,x[_],f)}digest(){const{buffer:s,outputLen:c}=this;this.digestInto(s);const u=s.slice(0,c);return this.destroy(),u}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:c,buffer:u,length:p,finished:f,destroyed:l,pos:d}=this;return s.length=p,s.pos=d,s.finished=f,s.destroyed=l,p%c&&s.buffer.set(u),s}}return Sr.HashMD=o,Sr}var Up;function q_(){if(Up)return Hr;Up=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.sha224=Hr.sha256=Hr.SHA256=void 0;const r=Em(),e=Xn(),t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),n=new Uint32Array(64);class o extends r.HashMD{constructor(){super(64,32,8,!1),this.A=i[0]|0,this.B=i[1]|0,this.C=i[2]|0,this.D=i[3]|0,this.E=i[4]|0,this.F=i[5]|0,this.G=i[6]|0,this.H=i[7]|0}get(){const{A:c,B:u,C:p,D:f,E:l,F:d,G:g,H:b}=this;return[c,u,p,f,l,d,g,b]}set(c,u,p,f,l,d,g,b){this.A=c|0,this.B=u|0,this.C=p|0,this.D=f|0,this.E=l|0,this.F=d|0,this.G=g|0,this.H=b|0}process(c,u){for(let E=0;E<16;E++,u+=4)n[E]=c.getUint32(u,!1);for(let E=16;E<64;E++){const O=n[E-15],A=n[E-2],B=(0,e.rotr)(O,7)^(0,e.rotr)(O,18)^O>>>3,N=(0,e.rotr)(A,17)^(0,e.rotr)(A,19)^A>>>10;n[E]=N+n[E-7]+B+n[E-16]|0}let{A:p,B:f,C:l,D:d,E:g,F:b,G:x,H:_}=this;for(let E=0;E<64;E++){const O=(0,e.rotr)(g,6)^(0,e.rotr)(g,11)^(0,e.rotr)(g,25),A=_+O+(0,r.Chi)(g,b,x)+t[E]+n[E]|0,N=((0,e.rotr)(p,2)^(0,e.rotr)(p,13)^(0,e.rotr)(p,22))+(0,r.Maj)(p,f,l)|0;_=x,x=b,b=g,g=d+A|0,d=l,l=f,f=p,p=A+N|0}p=p+this.A|0,f=f+this.B|0,l=l+this.C|0,d=d+this.D|0,g=g+this.E|0,b=b+this.F|0,x=x+this.G|0,_=_+this.H|0,this.set(p,f,l,d,g,b,x,_)}roundClean(){n.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}Hr.SHA256=o;class a extends o{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}return Hr.sha256=(0,e.wrapConstructor)(()=>new o),Hr.sha224=(0,e.wrapConstructor)(()=>new a),Hr}var Rt={},me={},qp;function F_(){if(qp)return me;qp=1,Object.defineProperty(me,"__esModule",{value:!0}),me.add5L=me.add5H=me.add4H=me.add4L=me.add3H=me.add3L=me.rotlBL=me.rotlBH=me.rotlSL=me.rotlSH=me.rotr32L=me.rotr32H=me.rotrBL=me.rotrBH=me.rotrSL=me.rotrSH=me.shrSL=me.shrSH=me.toBig=void 0,me.fromBig=t,me.split=i,me.add=_;const r=BigInt(2**32-1),e=BigInt(32);function t(D,R=!1){return R?{h:Number(D&r),l:Number(D>>e&r)}:{h:Number(D>>e&r)|0,l:Number(D&r)|0}}function i(D,R=!1){let M=new Uint32Array(D.length),q=new Uint32Array(D.length);for(let P=0;P<D.length;P++){const{h,l:y}=t(D[P],R);[M[P],q[P]]=[h,y]}return[M,q]}const n=(D,R)=>BigInt(D>>>0)<<e|BigInt(R>>>0);me.toBig=n;const o=(D,R,M)=>D>>>M;me.shrSH=o;const a=(D,R,M)=>D<<32-M|R>>>M;me.shrSL=a;const s=(D,R,M)=>D>>>M|R<<32-M;me.rotrSH=s;const c=(D,R,M)=>D<<32-M|R>>>M;me.rotrSL=c;const u=(D,R,M)=>D<<64-M|R>>>M-32;me.rotrBH=u;const p=(D,R,M)=>D>>>M-32|R<<64-M;me.rotrBL=p;const f=(D,R)=>R;me.rotr32H=f;const l=(D,R)=>D;me.rotr32L=l;const d=(D,R,M)=>D<<M|R>>>32-M;me.rotlSH=d;const g=(D,R,M)=>R<<M|D>>>32-M;me.rotlSL=g;const b=(D,R,M)=>R<<M-32|D>>>64-M;me.rotlBH=b;const x=(D,R,M)=>D<<M-32|R>>>64-M;me.rotlBL=x;function _(D,R,M,q){const P=(R>>>0)+(q>>>0);return{h:D+M+(P/2**32|0)|0,l:P|0}}const E=(D,R,M)=>(D>>>0)+(R>>>0)+(M>>>0);me.add3L=E;const O=(D,R,M,q)=>R+M+q+(D/2**32|0)|0;me.add3H=O;const A=(D,R,M,q)=>(D>>>0)+(R>>>0)+(M>>>0)+(q>>>0);me.add4L=A;const B=(D,R,M,q,P)=>R+M+q+P+(D/2**32|0)|0;me.add4H=B;const N=(D,R,M,q,P)=>(D>>>0)+(R>>>0)+(M>>>0)+(q>>>0)+(P>>>0);me.add5L=N;const v=(D,R,M,q,P,h)=>R+M+q+P+h+(D/2**32|0)|0;me.add5H=v;const j={fromBig:t,split:i,toBig:n,shrSH:o,shrSL:a,rotrSH:s,rotrSL:c,rotrBH:u,rotrBL:p,rotr32H:f,rotr32L:l,rotlSH:d,rotlSL:g,rotlBH:b,rotlBL:x,add:_,add3L:E,add3H:O,add4L:A,add4H:B,add5H:v,add5L:N};return me.default=j,me}var Fp;function G_(){if(Fp)return Rt;Fp=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.sha384=Rt.sha512_256=Rt.sha512_224=Rt.sha512=Rt.SHA384=Rt.SHA512_256=Rt.SHA512_224=Rt.SHA512=void 0;const r=Em(),e=F_(),t=Xn(),[i,n]=e.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(f=>BigInt(f))),o=new Uint32Array(80),a=new Uint32Array(80);class s extends r.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:l,Al:d,Bh:g,Bl:b,Ch:x,Cl:_,Dh:E,Dl:O,Eh:A,El:B,Fh:N,Fl:v,Gh:j,Gl:D,Hh:R,Hl:M}=this;return[l,d,g,b,x,_,E,O,A,B,N,v,j,D,R,M]}set(l,d,g,b,x,_,E,O,A,B,N,v,j,D,R,M){this.Ah=l|0,this.Al=d|0,this.Bh=g|0,this.Bl=b|0,this.Ch=x|0,this.Cl=_|0,this.Dh=E|0,this.Dl=O|0,this.Eh=A|0,this.El=B|0,this.Fh=N|0,this.Fl=v|0,this.Gh=j|0,this.Gl=D|0,this.Hh=R|0,this.Hl=M|0}process(l,d){for(let h=0;h<16;h++,d+=4)o[h]=l.getUint32(d),a[h]=l.getUint32(d+=4);for(let h=16;h<80;h++){const y=o[h-15]|0,m=a[h-15]|0,S=e.default.rotrSH(y,m,1)^e.default.rotrSH(y,m,8)^e.default.shrSH(y,m,7),T=e.default.rotrSL(y,m,1)^e.default.rotrSL(y,m,8)^e.default.shrSL(y,m,7),k=o[h-2]|0,U=a[h-2]|0,I=e.default.rotrSH(k,U,19)^e.default.rotrBH(k,U,61)^e.default.shrSH(k,U,6),w=e.default.rotrSL(k,U,19)^e.default.rotrBL(k,U,61)^e.default.shrSL(k,U,6),L=e.default.add4L(T,w,a[h-7],a[h-16]),J=e.default.add4H(L,S,I,o[h-7],o[h-16]);o[h]=J|0,a[h]=L|0}let{Ah:g,Al:b,Bh:x,Bl:_,Ch:E,Cl:O,Dh:A,Dl:B,Eh:N,El:v,Fh:j,Fl:D,Gh:R,Gl:M,Hh:q,Hl:P}=this;for(let h=0;h<80;h++){const y=e.default.rotrSH(N,v,14)^e.default.rotrSH(N,v,18)^e.default.rotrBH(N,v,41),m=e.default.rotrSL(N,v,14)^e.default.rotrSL(N,v,18)^e.default.rotrBL(N,v,41),S=N&j^~N&R,T=v&D^~v&M,k=e.default.add5L(P,m,T,n[h],a[h]),U=e.default.add5H(k,q,y,S,i[h],o[h]),I=k|0,w=e.default.rotrSH(g,b,28)^e.default.rotrBH(g,b,34)^e.default.rotrBH(g,b,39),L=e.default.rotrSL(g,b,28)^e.default.rotrBL(g,b,34)^e.default.rotrBL(g,b,39),J=g&x^g&E^x&E,Y=b&_^b&O^_&O;q=R|0,P=M|0,R=j|0,M=D|0,j=N|0,D=v|0,{h:N,l:v}=e.default.add(A|0,B|0,U|0,I|0),A=E|0,B=O|0,E=x|0,O=_|0,x=g|0,_=b|0;const C=e.default.add3L(I,L,Y);g=e.default.add3H(C,U,w,J),b=C|0}({h:g,l:b}=e.default.add(this.Ah|0,this.Al|0,g|0,b|0)),{h:x,l:_}=e.default.add(this.Bh|0,this.Bl|0,x|0,_|0),{h:E,l:O}=e.default.add(this.Ch|0,this.Cl|0,E|0,O|0),{h:A,l:B}=e.default.add(this.Dh|0,this.Dl|0,A|0,B|0),{h:N,l:v}=e.default.add(this.Eh|0,this.El|0,N|0,v|0),{h:j,l:D}=e.default.add(this.Fh|0,this.Fl|0,j|0,D|0),{h:R,l:M}=e.default.add(this.Gh|0,this.Gl|0,R|0,M|0),{h:q,l:P}=e.default.add(this.Hh|0,this.Hl|0,q|0,P|0),this.set(g,b,x,_,E,O,A,B,N,v,j,D,R,M,q,P)}roundClean(){o.fill(0),a.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Rt.SHA512=s;class c extends s{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}Rt.SHA512_224=c;class u extends s{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}Rt.SHA512_256=u;class p extends s{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}return Rt.SHA384=p,Rt.sha512=(0,t.wrapConstructor)(()=>new s),Rt.sha512_224=(0,t.wrapConstructor)(()=>new c),Rt.sha512_256=(0,t.wrapConstructor)(()=>new u),Rt.sha384=(0,t.wrapConstructor)(()=>new p),Rt}var no={},ju={},Gp;function K_(){return Gp||(Gp=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=r.HMAC=void 0;const e=cs(),t=Xn();class i extends t.Hash{constructor(a,s){super(),this.finished=!1,this.destroyed=!1,(0,e.ahash)(a);const c=(0,t.toBytes)(s);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,p=new Uint8Array(u);p.set(c.length>u?a.create().update(c).digest():c);for(let f=0;f<p.length;f++)p[f]^=54;this.iHash.update(p),this.oHash=a.create();for(let f=0;f<p.length;f++)p[f]^=106;this.oHash.update(p),p.fill(0)}update(a){return(0,e.aexists)(this),this.iHash.update(a),this}digestInto(a){(0,e.aexists)(this),(0,e.abytes)(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:c,finished:u,destroyed:p,blockLen:f,outputLen:l}=this;return a=a,a.finished=u,a.destroyed=p,a.blockLen=f,a.outputLen=l,a.oHash=s._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}r.HMAC=i;const n=(o,a,s)=>new i(o,a).update(s).digest();r.hmac=n,r.hmac.create=(o,a)=>new i(o,a)})(ju)),ju}var Kp;function $_(){if(Kp)return no;Kp=1,Object.defineProperty(no,"__esModule",{value:!0}),no.pbkdf2=o,no.pbkdf2Async=a;const r=cs(),e=K_(),t=Xn();function i(s,c,u,p){(0,r.ahash)(s);const f=(0,t.checkOpts)({dkLen:32,asyncTick:10},p),{c:l,dkLen:d,asyncTick:g}=f;if((0,r.anumber)(l),(0,r.anumber)(d),(0,r.anumber)(g),l<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const b=(0,t.toBytes)(c),x=(0,t.toBytes)(u),_=new Uint8Array(d),E=e.hmac.create(s,b),O=E._cloneInto().update(x);return{c:l,dkLen:d,asyncTick:g,DK:_,PRF:E,PRFSalt:O}}function n(s,c,u,p,f){return s.destroy(),c.destroy(),p&&p.destroy(),f.fill(0),u}function o(s,c,u,p){const{c:f,dkLen:l,DK:d,PRF:g,PRFSalt:b}=i(s,c,u,p);let x;const _=new Uint8Array(4),E=(0,t.createView)(_),O=new Uint8Array(g.outputLen);for(let A=1,B=0;B<l;A++,B+=g.outputLen){const N=d.subarray(B,B+g.outputLen);E.setInt32(0,A,!1),(x=b._cloneInto(x)).update(_).digestInto(O),N.set(O.subarray(0,N.length));for(let v=1;v<f;v++){g._cloneInto(x).update(O).digestInto(O);for(let j=0;j<N.length;j++)N[j]^=O[j]}}return n(g,b,d,x,O)}async function a(s,c,u,p){const{c:f,dkLen:l,asyncTick:d,DK:g,PRF:b,PRFSalt:x}=i(s,c,u,p);let _;const E=new Uint8Array(4),O=(0,t.createView)(E),A=new Uint8Array(b.outputLen);for(let B=1,N=0;N<l;B++,N+=b.outputLen){const v=g.subarray(N,N+b.outputLen);O.setInt32(0,B,!1),(_=x._cloneInto(_)).update(E).digestInto(A),v.set(A.subarray(0,v.length)),await(0,t.asyncLoop)(f-1,d,()=>{b._cloneInto(_).update(A).digestInto(A);for(let j=0;j<v.length;j++)v[j]^=A[j]})}return n(b,x,g,_,A)}return no}var Kt={};const V_=JSON.parse('["abdikace","abeceda","adresa","agrese","akce","aktovka","alej","alkohol","amputace","ananas","andulka","anekdota","anketa","antika","anulovat","archa","arogance","asfalt","asistent","aspirace","astma","astronom","atlas","atletika","atol","autobus","azyl","babka","bachor","bacil","baculka","badatel","bageta","bagr","bahno","bakterie","balada","baletka","balkon","balonek","balvan","balza","bambus","bankomat","barbar","baret","barman","baroko","barva","baterka","batoh","bavlna","bazalka","bazilika","bazuka","bedna","beran","beseda","bestie","beton","bezinka","bezmoc","beztak","bicykl","bidlo","biftek","bikiny","bilance","biograf","biolog","bitva","bizon","blahobyt","blatouch","blecha","bledule","blesk","blikat","blizna","blokovat","bloudit","blud","bobek","bobr","bodlina","bodnout","bohatost","bojkot","bojovat","bokorys","bolest","borec","borovice","bota","boubel","bouchat","bouda","boule","bourat","boxer","bradavka","brambora","branka","bratr","brepta","briketa","brko","brloh","bronz","broskev","brunetka","brusinka","brzda","brzy","bublina","bubnovat","buchta","buditel","budka","budova","bufet","bujarost","bukvice","buldok","bulva","bunda","bunkr","burza","butik","buvol","buzola","bydlet","bylina","bytovka","bzukot","capart","carevna","cedr","cedule","cejch","cejn","cela","celer","celkem","celnice","cenina","cennost","cenovka","centrum","cenzor","cestopis","cetka","chalupa","chapadlo","charita","chata","chechtat","chemie","chichot","chirurg","chlad","chleba","chlubit","chmel","chmura","chobot","chochol","chodba","cholera","chomout","chopit","choroba","chov","chrapot","chrlit","chrt","chrup","chtivost","chudina","chutnat","chvat","chvilka","chvost","chyba","chystat","chytit","cibule","cigareta","cihelna","cihla","cinkot","cirkus","cisterna","citace","citrus","cizinec","cizost","clona","cokoliv","couvat","ctitel","ctnost","cudnost","cuketa","cukr","cupot","cvaknout","cval","cvik","cvrkot","cyklista","daleko","dareba","datel","datum","dcera","debata","dechovka","decibel","deficit","deflace","dekl","dekret","demokrat","deprese","derby","deska","detektiv","dikobraz","diktovat","dioda","diplom","disk","displej","divadlo","divoch","dlaha","dlouho","dluhopis","dnes","dobro","dobytek","docent","dochutit","dodnes","dohled","dohoda","dohra","dojem","dojnice","doklad","dokola","doktor","dokument","dolar","doleva","dolina","doma","dominant","domluvit","domov","donutit","dopad","dopis","doplnit","doposud","doprovod","dopustit","dorazit","dorost","dort","dosah","doslov","dostatek","dosud","dosyta","dotaz","dotek","dotknout","doufat","doutnat","dovozce","dozadu","doznat","dozorce","drahota","drak","dramatik","dravec","draze","drdol","drobnost","drogerie","drozd","drsnost","drtit","drzost","duben","duchovno","dudek","duha","duhovka","dusit","dusno","dutost","dvojice","dvorec","dynamit","ekolog","ekonomie","elektron","elipsa","email","emise","emoce","empatie","epizoda","epocha","epopej","epos","esej","esence","eskorta","eskymo","etiketa","euforie","evoluce","exekuce","exkurze","expedice","exploze","export","extrakt","facka","fajfka","fakulta","fanatik","fantazie","farmacie","favorit","fazole","federace","fejeton","fenka","fialka","figurant","filozof","filtr","finance","finta","fixace","fjord","flanel","flirt","flotila","fond","fosfor","fotbal","fotka","foton","frakce","freska","fronta","fukar","funkce","fyzika","galeje","garant","genetika","geolog","gilotina","glazura","glejt","golem","golfista","gotika","graf","gramofon","granule","grep","gril","grog","groteska","guma","hadice","hadr","hala","halenka","hanba","hanopis","harfa","harpuna","havran","hebkost","hejkal","hejno","hejtman","hektar","helma","hematom","herec","herna","heslo","hezky","historik","hladovka","hlasivky","hlava","hledat","hlen","hlodavec","hloh","hloupost","hltat","hlubina","hluchota","hmat","hmota","hmyz","hnis","hnojivo","hnout","hoblina","hoboj","hoch","hodiny","hodlat","hodnota","hodovat","hojnost","hokej","holinka","holka","holub","homole","honitba","honorace","horal","horda","horizont","horko","horlivec","hormon","hornina","horoskop","horstvo","hospoda","hostina","hotovost","houba","houf","houpat","houska","hovor","hradba","hranice","hravost","hrazda","hrbolek","hrdina","hrdlo","hrdost","hrnek","hrobka","hromada","hrot","hrouda","hrozen","hrstka","hrubost","hryzat","hubenost","hubnout","hudba","hukot","humr","husita","hustota","hvozd","hybnost","hydrant","hygiena","hymna","hysterik","idylka","ihned","ikona","iluze","imunita","infekce","inflace","inkaso","inovace","inspekce","internet","invalida","investor","inzerce","ironie","jablko","jachta","jahoda","jakmile","jakost","jalovec","jantar","jarmark","jaro","jasan","jasno","jatka","javor","jazyk","jedinec","jedle","jednatel","jehlan","jekot","jelen","jelito","jemnost","jenom","jepice","jeseter","jevit","jezdec","jezero","jinak","jindy","jinoch","jiskra","jistota","jitrnice","jizva","jmenovat","jogurt","jurta","kabaret","kabel","kabinet","kachna","kadet","kadidlo","kahan","kajak","kajuta","kakao","kaktus","kalamita","kalhoty","kalibr","kalnost","kamera","kamkoliv","kamna","kanibal","kanoe","kantor","kapalina","kapela","kapitola","kapka","kaple","kapota","kapr","kapusta","kapybara","karamel","karotka","karton","kasa","katalog","katedra","kauce","kauza","kavalec","kazajka","kazeta","kazivost","kdekoliv","kdesi","kedluben","kemp","keramika","kino","klacek","kladivo","klam","klapot","klasika","klaun","klec","klenba","klepat","klesnout","klid","klima","klisna","klobouk","klokan","klopa","kloub","klubovna","klusat","kluzkost","kmen","kmitat","kmotr","kniha","knot","koalice","koberec","kobka","kobliha","kobyla","kocour","kohout","kojenec","kokos","koktejl","kolaps","koleda","kolize","kolo","komando","kometa","komik","komnata","komora","kompas","komunita","konat","koncept","kondice","konec","konfese","kongres","konina","konkurs","kontakt","konzerva","kopanec","kopie","kopnout","koprovka","korbel","korektor","kormidlo","koroptev","korpus","koruna","koryto","korzet","kosatec","kostka","kotel","kotleta","kotoul","koukat","koupelna","kousek","kouzlo","kovboj","koza","kozoroh","krabice","krach","krajina","kralovat","krasopis","kravata","kredit","krejcar","kresba","kreveta","kriket","kritik","krize","krkavec","krmelec","krmivo","krocan","krok","kronika","kropit","kroupa","krovka","krtek","kruhadlo","krupice","krutost","krvinka","krychle","krypta","krystal","kryt","kudlanka","kufr","kujnost","kukla","kulajda","kulich","kulka","kulomet","kultura","kuna","kupodivu","kurt","kurzor","kutil","kvalita","kvasinka","kvestor","kynolog","kyselina","kytara","kytice","kytka","kytovec","kyvadlo","labrador","lachtan","ladnost","laik","lakomec","lamela","lampa","lanovka","lasice","laso","lastura","latinka","lavina","lebka","leckdy","leden","lednice","ledovka","ledvina","legenda","legie","legrace","lehce","lehkost","lehnout","lektvar","lenochod","lentilka","lepenka","lepidlo","letadlo","letec","letmo","letokruh","levhart","levitace","levobok","libra","lichotka","lidojed","lidskost","lihovina","lijavec","lilek","limetka","linie","linka","linoleum","listopad","litina","litovat","lobista","lodivod","logika","logoped","lokalita","loket","lomcovat","lopata","lopuch","lord","losos","lotr","loudal","louh","louka","louskat","lovec","lstivost","lucerna","lucifer","lump","lusk","lustrace","lvice","lyra","lyrika","lysina","madam","madlo","magistr","mahagon","majetek","majitel","majorita","makak","makovice","makrela","malba","malina","malovat","malvice","maminka","mandle","manko","marnost","masakr","maskot","masopust","matice","matrika","maturita","mazanec","mazivo","mazlit","mazurka","mdloba","mechanik","meditace","medovina","melasa","meloun","mentolka","metla","metoda","metr","mezera","migrace","mihnout","mihule","mikina","mikrofon","milenec","milimetr","milost","mimika","mincovna","minibar","minomet","minulost","miska","mistr","mixovat","mladost","mlha","mlhovina","mlok","mlsat","mluvit","mnich","mnohem","mobil","mocnost","modelka","modlitba","mohyla","mokro","molekula","momentka","monarcha","monokl","monstrum","montovat","monzun","mosaz","moskyt","most","motivace","motorka","motyka","moucha","moudrost","mozaika","mozek","mozol","mramor","mravenec","mrkev","mrtvola","mrzet","mrzutost","mstitel","mudrc","muflon","mulat","mumie","munice","muset","mutace","muzeum","muzikant","myslivec","mzda","nabourat","nachytat","nadace","nadbytek","nadhoz","nadobro","nadpis","nahlas","nahnat","nahodile","nahradit","naivita","najednou","najisto","najmout","naklonit","nakonec","nakrmit","nalevo","namazat","namluvit","nanometr","naoko","naopak","naostro","napadat","napevno","naplnit","napnout","naposled","naprosto","narodit","naruby","narychlo","nasadit","nasekat","naslepo","nastat","natolik","navenek","navrch","navzdory","nazvat","nebe","nechat","necky","nedaleko","nedbat","neduh","negace","nehet","nehoda","nejen","nejprve","neklid","nelibost","nemilost","nemoc","neochota","neonka","nepokoj","nerost","nerv","nesmysl","nesoulad","netvor","neuron","nevina","nezvykle","nicota","nijak","nikam","nikdy","nikl","nikterak","nitro","nocleh","nohavice","nominace","nora","norek","nositel","nosnost","nouze","noviny","novota","nozdra","nuda","nudle","nuget","nutit","nutnost","nutrie","nymfa","obal","obarvit","obava","obdiv","obec","obehnat","obejmout","obezita","obhajoba","obilnice","objasnit","objekt","obklopit","oblast","oblek","obliba","obloha","obluda","obnos","obohatit","obojek","obout","obrazec","obrna","obruba","obrys","obsah","obsluha","obstarat","obuv","obvaz","obvinit","obvod","obvykle","obyvatel","obzor","ocas","ocel","ocenit","ochladit","ochota","ochrana","ocitnout","odboj","odbyt","odchod","odcizit","odebrat","odeslat","odevzdat","odezva","odhadce","odhodit","odjet","odjinud","odkaz","odkoupit","odliv","odluka","odmlka","odolnost","odpad","odpis","odplout","odpor","odpustit","odpykat","odrazka","odsoudit","odstup","odsun","odtok","odtud","odvaha","odveta","odvolat","odvracet","odznak","ofina","ofsajd","ohlas","ohnisko","ohrada","ohrozit","ohryzek","okap","okenice","oklika","okno","okouzlit","okovy","okrasa","okres","okrsek","okruh","okupant","okurka","okusit","olejnina","olizovat","omak","omeleta","omezit","omladina","omlouvat","omluva","omyl","onehdy","opakovat","opasek","operace","opice","opilost","opisovat","opora","opozice","opravdu","oproti","orbital","orchestr","orgie","orlice","orloj","ortel","osada","oschnout","osika","osivo","oslava","oslepit","oslnit","oslovit","osnova","osoba","osolit","ospalec","osten","ostraha","ostuda","ostych","osvojit","oteplit","otisk","otop","otrhat","otrlost","otrok","otruby","otvor","ovanout","ovar","oves","ovlivnit","ovoce","oxid","ozdoba","pachatel","pacient","padouch","pahorek","pakt","palanda","palec","palivo","paluba","pamflet","pamlsek","panenka","panika","panna","panovat","panstvo","pantofle","paprika","parketa","parodie","parta","paruka","paryba","paseka","pasivita","pastelka","patent","patrona","pavouk","pazneht","pazourek","pecka","pedagog","pejsek","peklo","peloton","penalta","pendrek","penze","periskop","pero","pestrost","petarda","petice","petrolej","pevnina","pexeso","pianista","piha","pijavice","pikle","piknik","pilina","pilnost","pilulka","pinzeta","pipeta","pisatel","pistole","pitevna","pivnice","pivovar","placenta","plakat","plamen","planeta","plastika","platit","plavidlo","plaz","plech","plemeno","plenta","ples","pletivo","plevel","plivat","plnit","plno","plocha","plodina","plomba","plout","pluk","plyn","pobavit","pobyt","pochod","pocit","poctivec","podat","podcenit","podepsat","podhled","podivit","podklad","podmanit","podnik","podoba","podpora","podraz","podstata","podvod","podzim","poezie","pohanka","pohnutka","pohovor","pohroma","pohyb","pointa","pojistka","pojmout","pokazit","pokles","pokoj","pokrok","pokuta","pokyn","poledne","polibek","polknout","poloha","polynom","pomalu","pominout","pomlka","pomoc","pomsta","pomyslet","ponechat","ponorka","ponurost","popadat","popel","popisek","poplach","poprosit","popsat","popud","poradce","porce","porod","porucha","poryv","posadit","posed","posila","poskok","poslanec","posoudit","pospolu","postava","posudek","posyp","potah","potkan","potlesk","potomek","potrava","potupa","potvora","poukaz","pouto","pouzdro","povaha","povidla","povlak","povoz","povrch","povstat","povyk","povzdech","pozdrav","pozemek","poznatek","pozor","pozvat","pracovat","prahory","praktika","prales","praotec","praporek","prase","pravda","princip","prkno","probudit","procento","prodej","profese","prohra","projekt","prolomit","promile","pronikat","propad","prorok","prosba","proton","proutek","provaz","prskavka","prsten","prudkost","prut","prvek","prvohory","psanec","psovod","pstruh","ptactvo","puberta","puch","pudl","pukavec","puklina","pukrle","pult","pumpa","punc","pupen","pusa","pusinka","pustina","putovat","putyka","pyramida","pysk","pytel","racek","rachot","radiace","radnice","radon","raft","ragby","raketa","rakovina","rameno","rampouch","rande","rarach","rarita","rasovna","rastr","ratolest","razance","razidlo","reagovat","reakce","recept","redaktor","referent","reflex","rejnok","reklama","rekord","rekrut","rektor","reputace","revize","revma","revolver","rezerva","riskovat","riziko","robotika","rodokmen","rohovka","rokle","rokoko","romaneto","ropovod","ropucha","rorejs","rosol","rostlina","rotmistr","rotoped","rotunda","roubenka","roucho","roup","roura","rovina","rovnice","rozbor","rozchod","rozdat","rozeznat","rozhodce","rozinka","rozjezd","rozkaz","rozloha","rozmar","rozpad","rozruch","rozsah","roztok","rozum","rozvod","rubrika","ruchadlo","rukavice","rukopis","ryba","rybolov","rychlost","rydlo","rypadlo","rytina","ryzost","sadista","sahat","sako","samec","samizdat","samota","sanitka","sardinka","sasanka","satelit","sazba","sazenice","sbor","schovat","sebranka","secese","sedadlo","sediment","sedlo","sehnat","sejmout","sekera","sekta","sekunda","sekvoje","semeno","seno","servis","sesadit","seshora","seskok","seslat","sestra","sesuv","sesypat","setba","setina","setkat","setnout","setrvat","sever","seznam","shoda","shrnout","sifon","silnice","sirka","sirotek","sirup","situace","skafandr","skalisko","skanzen","skaut","skeptik","skica","skladba","sklenice","sklo","skluz","skoba","skokan","skoro","skripta","skrz","skupina","skvost","skvrna","slabika","sladidlo","slanina","slast","slavnost","sledovat","slepec","sleva","slezina","slib","slina","sliznice","slon","sloupek","slovo","sluch","sluha","slunce","slupka","slza","smaragd","smetana","smilstvo","smlouva","smog","smrad","smrk","smrtka","smutek","smysl","snad","snaha","snob","sobota","socha","sodovka","sokol","sopka","sotva","souboj","soucit","soudce","souhlas","soulad","soumrak","souprava","soused","soutok","souviset","spalovna","spasitel","spis","splav","spodek","spojenec","spolu","sponzor","spornost","spousta","sprcha","spustit","sranda","sraz","srdce","srna","srnec","srovnat","srpen","srst","srub","stanice","starosta","statika","stavba","stehno","stezka","stodola","stolek","stopa","storno","stoupat","strach","stres","strhnout","strom","struna","studna","stupnice","stvol","styk","subjekt","subtropy","suchar","sudost","sukno","sundat","sunout","surikata","surovina","svah","svalstvo","svetr","svatba","svazek","svisle","svitek","svoboda","svodidlo","svorka","svrab","sykavka","sykot","synek","synovec","sypat","sypkost","syrovost","sysel","sytost","tabletka","tabule","tahoun","tajemno","tajfun","tajga","tajit","tajnost","taktika","tamhle","tampon","tancovat","tanec","tanker","tapeta","tavenina","tazatel","technika","tehdy","tekutina","telefon","temnota","tendence","tenista","tenor","teplota","tepna","teprve","terapie","termoska","textil","ticho","tiskopis","titulek","tkadlec","tkanina","tlapka","tleskat","tlukot","tlupa","tmel","toaleta","topinka","topol","torzo","touha","toulec","tradice","traktor","tramp","trasa","traverza","trefit","trest","trezor","trhavina","trhlina","trochu","trojice","troska","trouba","trpce","trpitel","trpkost","trubec","truchlit","truhlice","trus","trvat","tudy","tuhnout","tuhost","tundra","turista","turnaj","tuzemsko","tvaroh","tvorba","tvrdost","tvrz","tygr","tykev","ubohost","uboze","ubrat","ubrousek","ubrus","ubytovna","ucho","uctivost","udivit","uhradit","ujednat","ujistit","ujmout","ukazatel","uklidnit","uklonit","ukotvit","ukrojit","ulice","ulita","ulovit","umyvadlo","unavit","uniforma","uniknout","upadnout","uplatnit","uplynout","upoutat","upravit","uran","urazit","usednout","usilovat","usmrtit","usnadnit","usnout","usoudit","ustlat","ustrnout","utahovat","utkat","utlumit","utonout","utopenec","utrousit","uvalit","uvolnit","uvozovka","uzdravit","uzel","uzenina","uzlina","uznat","vagon","valcha","valoun","vana","vandal","vanilka","varan","varhany","varovat","vcelku","vchod","vdova","vedro","vegetace","vejce","velbloud","veletrh","velitel","velmoc","velryba","venkov","veranda","verze","veselka","veskrze","vesnice","vespodu","vesta","veterina","veverka","vibrace","vichr","videohra","vidina","vidle","vila","vinice","viset","vitalita","vize","vizitka","vjezd","vklad","vkus","vlajka","vlak","vlasec","vlevo","vlhkost","vliv","vlnovka","vloupat","vnucovat","vnuk","voda","vodivost","vodoznak","vodstvo","vojensky","vojna","vojsko","volant","volba","volit","volno","voskovka","vozidlo","vozovna","vpravo","vrabec","vracet","vrah","vrata","vrba","vrcholek","vrhat","vrstva","vrtule","vsadit","vstoupit","vstup","vtip","vybavit","vybrat","vychovat","vydat","vydra","vyfotit","vyhledat","vyhnout","vyhodit","vyhradit","vyhubit","vyjasnit","vyjet","vyjmout","vyklopit","vykonat","vylekat","vymazat","vymezit","vymizet","vymyslet","vynechat","vynikat","vynutit","vypadat","vyplatit","vypravit","vypustit","vyrazit","vyrovnat","vyrvat","vyslovit","vysoko","vystavit","vysunout","vysypat","vytasit","vytesat","vytratit","vyvinout","vyvolat","vyvrhel","vyzdobit","vyznat","vzadu","vzbudit","vzchopit","vzdor","vzduch","vzdychat","vzestup","vzhledem","vzkaz","vzlykat","vznik","vzorek","vzpoura","vztah","vztek","xylofon","zabrat","zabydlet","zachovat","zadarmo","zadusit","zafoukat","zahltit","zahodit","zahrada","zahynout","zajatec","zajet","zajistit","zaklepat","zakoupit","zalepit","zamezit","zamotat","zamyslet","zanechat","zanikat","zaplatit","zapojit","zapsat","zarazit","zastavit","zasunout","zatajit","zatemnit","zatknout","zaujmout","zavalit","zavelet","zavinit","zavolat","zavrtat","zazvonit","zbavit","zbrusu","zbudovat","zbytek","zdaleka","zdarma","zdatnost","zdivo","zdobit","zdroj","zdvih","zdymadlo","zelenina","zeman","zemina","zeptat","zezadu","zezdola","zhatit","zhltnout","zhluboka","zhotovit","zhruba","zima","zimnice","zjemnit","zklamat","zkoumat","zkratka","zkumavka","zlato","zlehka","zloba","zlom","zlost","zlozvyk","zmapovat","zmar","zmatek","zmije","zmizet","zmocnit","zmodrat","zmrzlina","zmutovat","znak","znalost","znamenat","znovu","zobrazit","zotavit","zoubek","zoufale","zplodit","zpomalit","zprava","zprostit","zprudka","zprvu","zrada","zranit","zrcadlo","zrnitost","zrno","zrovna","zrychlit","zrzavost","zticha","ztratit","zubovina","zubr","zvednout","zvenku","zvesela","zvon","zvrat","zvukovod","zvyk"]'),W_=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),Z_=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),J_=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),Y_=JSON.parse('["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","academie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acquerir","acronyme","acteur","actif","actuel","adepte","adequat","adhesif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","aerer","aeronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agreable","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","algebre","algue","aliener","aliment","alleger","alliage","allouer","allumer","alourdir","alpaga","altesse","alveole","amateur","ambigu","ambre","amenager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","aneantir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","aperitif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","arteriel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","banniere","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","belier","belote","benefice","berceau","berger","berline","bermuda","besace","besogne","betail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","breche","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","cafeine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","camera","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","cedille","ceinture","celeste","cellule","cendrier","censurer","central","cercle","cerebral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","chequier","chercher","cheval","chien","chiffre","chignon","chimere","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cinema","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohesion","coiffer","coincer","colere","colibri","colline","colmater","colonel","combat","comedie","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","cortege","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","creature","crediter","cremeux","creuser","crevette","cribler","crier","cristal","critere","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuillere","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","debattre","debiter","deborder","debrider","debutant","decaler","decembre","dechirer","decider","declarer","decorer","decrire","decupler","dedale","deductif","deesse","defensif","defiler","defrayer","degager","degivrer","deglutir","degrafer","dejeuner","delice","deloger","demander","demeurer","demolir","denicher","denouer","dentelle","denuder","depart","depenser","dephaser","deplacer","deposer","deranger","derober","desastre","descente","desert","designer","desobeir","dessiner","destrier","detacher","detester","detourer","detresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","differer","digerer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","eblouir","ecarter","echarpe","echelle","eclairer","eclipse","eclore","ecluse","ecole","economie","ecorce","ecouter","ecraser","ecremer","ecrivain","ecrou","ecume","ecureuil","edifier","eduquer","effacer","effectif","effigie","effort","effrayer","effusion","egaliser","egarer","ejecter","elaborer","elargir","electron","elegant","elephant","eleve","eligible","elitisme","eloge","elucider","eluder","emballer","embellir","embryon","emeraude","emission","emmener","emotion","emouvoir","empereur","employer","emporter","emprise","emulsion","encadrer","enchere","enclave","encoche","endiguer","endosser","endroit","enduire","energie","enfance","enfermer","enfouir","engager","engin","englober","enigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","enumerer","envahir","enviable","envoyer","enzyme","eolien","epaissir","epargne","epatant","epaule","epicerie","epidemie","epier","epilogue","epine","episode","epitaphe","epoque","epreuve","eprouver","epuisant","equerre","equipe","eriger","erosion","erreur","eruption","escalier","espadon","espece","espiegle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","etagere","etaler","etanche","etatique","eteindre","etendoir","eternel","ethanol","ethique","ethnie","etirer","etoffer","etoile","etonnant","etourdir","etrange","etroit","etude","euphorie","evaluer","evasion","eventail","evidence","eviter","evolutif","evoquer","exact","exagerer","exaucer","exceller","excitant","exclusif","excuse","executer","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expedier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","febrile","feconder","federer","felin","femme","femur","fendoir","feodal","fermer","feroce","ferveur","festival","feuille","feutre","fevrier","fiasco","ficeler","fictif","fidele","figure","filature","filetage","filiere","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fleau","fleche","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fougere","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","fregate","freiner","frelon","fremir","frenesie","frere","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","geant","gelatine","gelule","gendarme","general","genie","genou","gentil","geologie","geometre","geranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruyere","guepard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","helium","hematome","herbe","herisson","hermine","heron","hesiter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homogene","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygiene","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","imperial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","inedit","ineptie","inexact","infini","infliger","informer","infusion","ingerer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irreel","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juvenile","kayak","kimono","kiosque","label","labial","labourer","lacerer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","legal","leger","legume","lessive","lettre","levier","lexique","lezard","liasse","liberer","libre","licence","licorne","liege","lievre","ligature","ligoter","ligue","limer","limite","limonade","limpide","lineaire","lingot","lionceau","liquide","lisiere","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumiere","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","malefice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","materiel","matiere","matraque","maudire","maussade","mauve","maximal","mechant","meconnu","medaille","medecin","mediter","meduse","meilleur","melange","melodie","membre","memoire","menacer","mener","menhir","mensonge","mentor","mercredi","merite","merle","messager","mesure","metal","meteore","methode","metier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","mineral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","murene","murmure","muscle","museum","musicien","mutation","muter","mutuel","myriade","myrtille","mystere","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","nebuleux","nectar","nefaste","negation","negliger","negocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","numero","nuptial","nuque","nutritif","obeir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","ocean","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","onereux","onirique","opale","opaque","operer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxygene","ozone","paisible","palace","palmares","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","pasteque","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pelican","pelle","pelouse","peluche","pendule","penetrer","penible","pensif","penurie","pepite","peplum","perdrix","perforer","periode","permuter","perplexe","persil","perte","peser","petale","petit","petrir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","piece","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poesie","poete","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","ponderer","poney","portique","position","posseder","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","precieux","predire","prefixe","prelude","prenom","presence","pretexte","prevoir","primitif","prince","prison","priver","probleme","proceder","prodige","profond","progres","proie","projeter","prologue","promener","propre","prospere","proteger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quietude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","reactif","reagir","realiser","reanimer","recevoir","reciter","reclamer","recolter","recruter","reculer","recycler","rediger","redouter","refaire","reflexe","reformer","refrain","refuge","regalien","region","reglage","regulier","reiterer","rejeter","rejouer","relatif","relever","relief","remarque","remede","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","reserve","resineux","resoudre","respect","rester","resultat","retablir","retenir","reticule","retomber","retracer","reunion","reussir","revanche","revivre","revolte","revulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","riviere","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","scelerat","scenario","sceptre","schema","science","scinder","score","scrutin","sculpter","seance","secable","secher","secouer","secreter","sedatif","seduire","seigneur","sejour","selectif","semaine","sembler","semence","seminal","senateur","sensible","sentence","separer","sequence","serein","sergent","serieux","serrure","serum","service","sesame","sevir","sevrage","sextuple","sideral","siecle","sieger","siffler","sigle","signal","silence","silicium","simple","sincere","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","special","sphere","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succes","sucre","suffixe","suggerer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","symetrie","synapse","syntaxe","systeme","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","temoin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","tetine","texte","theme","theorie","therapie","thorax","tibia","tiede","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tolerant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","trefle","tremper","tresor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","vegetal","vehicule","veinard","veloce","vendredi","venerer","venger","venimeux","ventouse","verdure","verin","vernir","verrou","verser","vertu","veston","veteran","vetuste","vexant","vexer","viaduc","viande","victoire","vidange","video","vignette","vigueur","vilain","village","vinaigre","violon","vipere","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xenon","yacht","zebre","zenith","zeste","zoologie"]'),X_=JSON.parse('["abaco","abbaglio","abbinato","abete","abisso","abolire","abrasivo","abrogato","accadere","accenno","accusato","acetone","achille","acido","acqua","acre","acrilico","acrobata","acuto","adagio","addebito","addome","adeguato","aderire","adipe","adottare","adulare","affabile","affetto","affisso","affranto","aforisma","afoso","africano","agave","agente","agevole","aggancio","agire","agitare","agonismo","agricolo","agrumeto","aguzzo","alabarda","alato","albatro","alberato","albo","albume","alce","alcolico","alettone","alfa","algebra","aliante","alibi","alimento","allagato","allegro","allievo","allodola","allusivo","almeno","alogeno","alpaca","alpestre","altalena","alterno","alticcio","altrove","alunno","alveolo","alzare","amalgama","amanita","amarena","ambito","ambrato","ameba","america","ametista","amico","ammasso","ammenda","ammirare","ammonito","amore","ampio","ampliare","amuleto","anacardo","anagrafe","analista","anarchia","anatra","anca","ancella","ancora","andare","andrea","anello","angelo","angolare","angusto","anima","annegare","annidato","anno","annuncio","anonimo","anticipo","anzi","apatico","apertura","apode","apparire","appetito","appoggio","approdo","appunto","aprile","arabica","arachide","aragosta","araldica","arancio","aratura","arazzo","arbitro","archivio","ardito","arenile","argento","argine","arguto","aria","armonia","arnese","arredato","arringa","arrosto","arsenico","arso","artefice","arzillo","asciutto","ascolto","asepsi","asettico","asfalto","asino","asola","aspirato","aspro","assaggio","asse","assoluto","assurdo","asta","astenuto","astice","astratto","atavico","ateismo","atomico","atono","attesa","attivare","attorno","attrito","attuale","ausilio","austria","autista","autonomo","autunno","avanzato","avere","avvenire","avviso","avvolgere","azione","azoto","azzimo","azzurro","babele","baccano","bacino","baco","badessa","badilata","bagnato","baita","balcone","baldo","balena","ballata","balzano","bambino","bandire","baraonda","barbaro","barca","baritono","barlume","barocco","basilico","basso","batosta","battuto","baule","bava","bavosa","becco","beffa","belgio","belva","benda","benevole","benigno","benzina","bere","berlina","beta","bibita","bici","bidone","bifido","biga","bilancia","bimbo","binocolo","biologo","bipede","bipolare","birbante","birra","biscotto","bisesto","bisnonno","bisonte","bisturi","bizzarro","blando","blatta","bollito","bonifico","bordo","bosco","botanico","bottino","bozzolo","braccio","bradipo","brama","branca","bravura","bretella","brevetto","brezza","briglia","brillante","brindare","broccolo","brodo","bronzina","brullo","bruno","bubbone","buca","budino","buffone","buio","bulbo","buono","burlone","burrasca","bussola","busta","cadetto","caduco","calamaro","calcolo","calesse","calibro","calmo","caloria","cambusa","camerata","camicia","cammino","camola","campale","canapa","candela","cane","canino","canotto","cantina","capace","capello","capitolo","capogiro","cappero","capra","capsula","carapace","carcassa","cardo","carisma","carovana","carretto","cartolina","casaccio","cascata","caserma","caso","cassone","castello","casuale","catasta","catena","catrame","cauto","cavillo","cedibile","cedrata","cefalo","celebre","cellulare","cena","cenone","centesimo","ceramica","cercare","certo","cerume","cervello","cesoia","cespo","ceto","chela","chiaro","chicca","chiedere","chimera","china","chirurgo","chitarra","ciao","ciclismo","cifrare","cigno","cilindro","ciottolo","circa","cirrosi","citrico","cittadino","ciuffo","civetta","civile","classico","clinica","cloro","cocco","codardo","codice","coerente","cognome","collare","colmato","colore","colposo","coltivato","colza","coma","cometa","commando","comodo","computer","comune","conciso","condurre","conferma","congelare","coniuge","connesso","conoscere","consumo","continuo","convegno","coperto","copione","coppia","copricapo","corazza","cordata","coricato","cornice","corolla","corpo","corredo","corsia","cortese","cosmico","costante","cottura","covato","cratere","cravatta","creato","credere","cremoso","crescita","creta","criceto","crinale","crisi","critico","croce","cronaca","crostata","cruciale","crusca","cucire","cuculo","cugino","cullato","cupola","curatore","cursore","curvo","cuscino","custode","dado","daino","dalmata","damerino","daniela","dannoso","danzare","datato","davanti","davvero","debutto","decennio","deciso","declino","decollo","decreto","dedicato","definito","deforme","degno","delegare","delfino","delirio","delta","demenza","denotato","dentro","deposito","derapata","derivare","deroga","descritto","deserto","desiderio","desumere","detersivo","devoto","diametro","dicembre","diedro","difeso","diffuso","digerire","digitale","diluvio","dinamico","dinnanzi","dipinto","diploma","dipolo","diradare","dire","dirotto","dirupo","disagio","discreto","disfare","disgelo","disposto","distanza","disumano","dito","divano","divelto","dividere","divorato","doblone","docente","doganale","dogma","dolce","domato","domenica","dominare","dondolo","dono","dormire","dote","dottore","dovuto","dozzina","drago","druido","dubbio","dubitare","ducale","duna","duomo","duplice","duraturo","ebano","eccesso","ecco","eclissi","economia","edera","edicola","edile","editoria","educare","egemonia","egli","egoismo","egregio","elaborato","elargire","elegante","elencato","eletto","elevare","elfico","elica","elmo","elsa","eluso","emanato","emblema","emesso","emiro","emotivo","emozione","empirico","emulo","endemico","enduro","energia","enfasi","enoteca","entrare","enzima","epatite","epilogo","episodio","epocale","eppure","equatore","erario","erba","erboso","erede","eremita","erigere","ermetico","eroe","erosivo","errante","esagono","esame","esanime","esaudire","esca","esempio","esercito","esibito","esigente","esistere","esito","esofago","esortato","esoso","espanso","espresso","essenza","esso","esteso","estimare","estonia","estroso","esultare","etilico","etnico","etrusco","etto","euclideo","europa","evaso","evidenza","evitato","evoluto","evviva","fabbrica","faccenda","fachiro","falco","famiglia","fanale","fanfara","fango","fantasma","fare","farfalla","farinoso","farmaco","fascia","fastoso","fasullo","faticare","fato","favoloso","febbre","fecola","fede","fegato","felpa","feltro","femmina","fendere","fenomeno","fermento","ferro","fertile","fessura","festivo","fetta","feudo","fiaba","fiducia","fifa","figurato","filo","finanza","finestra","finire","fiore","fiscale","fisico","fiume","flacone","flamenco","flebo","flemma","florido","fluente","fluoro","fobico","focaccia","focoso","foderato","foglio","folata","folclore","folgore","fondente","fonetico","fonia","fontana","forbito","forchetta","foresta","formica","fornaio","foro","fortezza","forzare","fosfato","fosso","fracasso","frana","frassino","fratello","freccetta","frenata","fresco","frigo","frollino","fronde","frugale","frutta","fucilata","fucsia","fuggente","fulmine","fulvo","fumante","fumetto","fumoso","fune","funzione","fuoco","furbo","furgone","furore","fuso","futile","gabbiano","gaffe","galateo","gallina","galoppo","gambero","gamma","garanzia","garbo","garofano","garzone","gasdotto","gasolio","gastrico","gatto","gaudio","gazebo","gazzella","geco","gelatina","gelso","gemello","gemmato","gene","genitore","gennaio","genotipo","gergo","ghepardo","ghiaccio","ghisa","giallo","gilda","ginepro","giocare","gioiello","giorno","giove","girato","girone","gittata","giudizio","giurato","giusto","globulo","glutine","gnomo","gobba","golf","gomito","gommone","gonfio","gonna","governo","gracile","grado","grafico","grammo","grande","grattare","gravoso","grazia","greca","gregge","grifone","grigio","grinza","grotta","gruppo","guadagno","guaio","guanto","guardare","gufo","guidare","ibernato","icona","identico","idillio","idolo","idra","idrico","idrogeno","igiene","ignaro","ignorato","ilare","illeso","illogico","illudere","imballo","imbevuto","imbocco","imbuto","immane","immerso","immolato","impacco","impeto","impiego","importo","impronta","inalare","inarcare","inattivo","incanto","incendio","inchino","incisivo","incluso","incontro","incrocio","incubo","indagine","india","indole","inedito","infatti","infilare","inflitto","ingaggio","ingegno","inglese","ingordo","ingrosso","innesco","inodore","inoltrare","inondato","insano","insetto","insieme","insonnia","insulina","intasato","intero","intonaco","intuito","inumidire","invalido","invece","invito","iperbole","ipnotico","ipotesi","ippica","iride","irlanda","ironico","irrigato","irrorare","isolato","isotopo","isterico","istituto","istrice","italia","iterare","labbro","labirinto","lacca","lacerato","lacrima","lacuna","laddove","lago","lampo","lancetta","lanterna","lardoso","larga","laringe","lastra","latenza","latino","lattuga","lavagna","lavoro","legale","leggero","lembo","lentezza","lenza","leone","lepre","lesivo","lessato","lesto","letterale","leva","levigato","libero","lido","lievito","lilla","limatura","limitare","limpido","lineare","lingua","liquido","lira","lirica","lisca","lite","litigio","livrea","locanda","lode","logica","lombare","londra","longevo","loquace","lorenzo","loto","lotteria","luce","lucidato","lumaca","luminoso","lungo","lupo","luppolo","lusinga","lusso","lutto","macabro","macchina","macero","macinato","madama","magico","maglia","magnete","magro","maiolica","malafede","malgrado","malinteso","malsano","malto","malumore","mana","mancia","mandorla","mangiare","manifesto","mannaro","manovra","mansarda","mantide","manubrio","mappa","maratona","marcire","maretta","marmo","marsupio","maschera","massaia","mastino","materasso","matricola","mattone","maturo","mazurca","meandro","meccanico","mecenate","medesimo","meditare","mega","melassa","melis","melodia","meninge","meno","mensola","mercurio","merenda","merlo","meschino","mese","messere","mestolo","metallo","metodo","mettere","miagolare","mica","micelio","michele","microbo","midollo","miele","migliore","milano","milite","mimosa","minerale","mini","minore","mirino","mirtillo","miscela","missiva","misto","misurare","mitezza","mitigare","mitra","mittente","mnemonico","modello","modifica","modulo","mogano","mogio","mole","molosso","monastero","monco","mondina","monetario","monile","monotono","monsone","montato","monviso","mora","mordere","morsicato","mostro","motivato","motosega","motto","movenza","movimento","mozzo","mucca","mucosa","muffa","mughetto","mugnaio","mulatto","mulinello","multiplo","mummia","munto","muovere","murale","musa","muscolo","musica","mutevole","muto","nababbo","nafta","nanometro","narciso","narice","narrato","nascere","nastrare","naturale","nautica","naviglio","nebulosa","necrosi","negativo","negozio","nemmeno","neofita","neretto","nervo","nessuno","nettuno","neutrale","neve","nevrotico","nicchia","ninfa","nitido","nobile","nocivo","nodo","nome","nomina","nordico","normale","norvegese","nostrano","notare","notizia","notturno","novella","nucleo","nulla","numero","nuovo","nutrire","nuvola","nuziale","oasi","obbedire","obbligo","obelisco","oblio","obolo","obsoleto","occasione","occhio","occidente","occorrere","occultare","ocra","oculato","odierno","odorare","offerta","offrire","offuscato","oggetto","oggi","ognuno","olandese","olfatto","oliato","oliva","ologramma","oltre","omaggio","ombelico","ombra","omega","omissione","ondoso","onere","onice","onnivoro","onorevole","onta","operato","opinione","opposto","oracolo","orafo","ordine","orecchino","orefice","orfano","organico","origine","orizzonte","orma","ormeggio","ornativo","orologio","orrendo","orribile","ortensia","ortica","orzata","orzo","osare","oscurare","osmosi","ospedale","ospite","ossa","ossidare","ostacolo","oste","otite","otre","ottagono","ottimo","ottobre","ovale","ovest","ovino","oviparo","ovocito","ovunque","ovviare","ozio","pacchetto","pace","pacifico","padella","padrone","paese","paga","pagina","palazzina","palesare","pallido","palo","palude","pandoro","pannello","paolo","paonazzo","paprica","parabola","parcella","parere","pargolo","pari","parlato","parola","partire","parvenza","parziale","passivo","pasticca","patacca","patologia","pattume","pavone","peccato","pedalare","pedonale","peggio","peloso","penare","pendice","penisola","pennuto","penombra","pensare","pentola","pepe","pepita","perbene","percorso","perdonato","perforare","pergamena","periodo","permesso","perno","perplesso","persuaso","pertugio","pervaso","pesatore","pesista","peso","pestifero","petalo","pettine","petulante","pezzo","piacere","pianta","piattino","piccino","picozza","piega","pietra","piffero","pigiama","pigolio","pigro","pila","pilifero","pillola","pilota","pimpante","pineta","pinna","pinolo","pioggia","piombo","piramide","piretico","pirite","pirolisi","pitone","pizzico","placebo","planare","plasma","platano","plenario","pochezza","poderoso","podismo","poesia","poggiare","polenta","poligono","pollice","polmonite","polpetta","polso","poltrona","polvere","pomice","pomodoro","ponte","popoloso","porfido","poroso","porpora","porre","portata","posa","positivo","possesso","postulato","potassio","potere","pranzo","prassi","pratica","precluso","predica","prefisso","pregiato","prelievo","premere","prenotare","preparato","presenza","pretesto","prevalso","prima","principe","privato","problema","procura","produrre","profumo","progetto","prolunga","promessa","pronome","proposta","proroga","proteso","prova","prudente","prugna","prurito","psiche","pubblico","pudica","pugilato","pugno","pulce","pulito","pulsante","puntare","pupazzo","pupilla","puro","quadro","qualcosa","quasi","querela","quota","raccolto","raddoppio","radicale","radunato","raffica","ragazzo","ragione","ragno","ramarro","ramingo","ramo","randagio","rantolare","rapato","rapina","rappreso","rasatura","raschiato","rasente","rassegna","rastrello","rata","ravveduto","reale","recepire","recinto","recluta","recondito","recupero","reddito","redimere","regalato","registro","regola","regresso","relazione","remare","remoto","renna","replica","reprimere","reputare","resa","residente","responso","restauro","rete","retina","retorica","rettifica","revocato","riassunto","ribadire","ribelle","ribrezzo","ricarica","ricco","ricevere","riciclato","ricordo","ricreduto","ridicolo","ridurre","rifasare","riflesso","riforma","rifugio","rigare","rigettato","righello","rilassato","rilevato","rimanere","rimbalzo","rimedio","rimorchio","rinascita","rincaro","rinforzo","rinnovo","rinomato","rinsavito","rintocco","rinuncia","rinvenire","riparato","ripetuto","ripieno","riportare","ripresa","ripulire","risata","rischio","riserva","risibile","riso","rispetto","ristoro","risultato","risvolto","ritardo","ritegno","ritmico","ritrovo","riunione","riva","riverso","rivincita","rivolto","rizoma","roba","robotico","robusto","roccia","roco","rodaggio","rodere","roditore","rogito","rollio","romantico","rompere","ronzio","rosolare","rospo","rotante","rotondo","rotula","rovescio","rubizzo","rubrica","ruga","rullino","rumine","rumoroso","ruolo","rupe","russare","rustico","sabato","sabbiare","sabotato","sagoma","salasso","saldatura","salgemma","salivare","salmone","salone","saltare","saluto","salvo","sapere","sapido","saporito","saraceno","sarcasmo","sarto","sassoso","satellite","satira","satollo","saturno","savana","savio","saziato","sbadiglio","sbalzo","sbancato","sbarra","sbattere","sbavare","sbendare","sbirciare","sbloccato","sbocciato","sbrinare","sbruffone","sbuffare","scabroso","scadenza","scala","scambiare","scandalo","scapola","scarso","scatenare","scavato","scelto","scenico","scettro","scheda","schiena","sciarpa","scienza","scindere","scippo","sciroppo","scivolo","sclerare","scodella","scolpito","scomparto","sconforto","scoprire","scorta","scossone","scozzese","scriba","scrollare","scrutinio","scuderia","scultore","scuola","scuro","scusare","sdebitare","sdoganare","seccatura","secondo","sedano","seggiola","segnalato","segregato","seguito","selciato","selettivo","sella","selvaggio","semaforo","sembrare","seme","seminato","sempre","senso","sentire","sepolto","sequenza","serata","serbato","sereno","serio","serpente","serraglio","servire","sestina","setola","settimana","sfacelo","sfaldare","sfamato","sfarzoso","sfaticato","sfera","sfida","sfilato","sfinge","sfocato","sfoderare","sfogo","sfoltire","sforzato","sfratto","sfruttato","sfuggito","sfumare","sfuso","sgabello","sgarbato","sgonfiare","sgorbio","sgrassato","sguardo","sibilo","siccome","sierra","sigla","signore","silenzio","sillaba","simbolo","simpatico","simulato","sinfonia","singolo","sinistro","sino","sintesi","sinusoide","sipario","sisma","sistole","situato","slitta","slogatura","sloveno","smarrito","smemorato","smentito","smeraldo","smilzo","smontare","smottato","smussato","snellire","snervato","snodo","sobbalzo","sobrio","soccorso","sociale","sodale","soffitto","sogno","soldato","solenne","solido","sollazzo","solo","solubile","solvente","somatico","somma","sonda","sonetto","sonnifero","sopire","soppeso","sopra","sorgere","sorpasso","sorriso","sorso","sorteggio","sorvolato","sospiro","sosta","sottile","spada","spalla","spargere","spatola","spavento","spazzola","specie","spedire","spegnere","spelatura","speranza","spessore","spettrale","spezzato","spia","spigoloso","spillato","spinoso","spirale","splendido","sportivo","sposo","spranga","sprecare","spronato","spruzzo","spuntino","squillo","sradicare","srotolato","stabile","stacco","staffa","stagnare","stampato","stantio","starnuto","stasera","statuto","stelo","steppa","sterzo","stiletto","stima","stirpe","stivale","stizzoso","stonato","storico","strappo","stregato","stridulo","strozzare","strutto","stuccare","stufo","stupendo","subentro","succoso","sudore","suggerito","sugo","sultano","suonare","superbo","supporto","surgelato","surrogato","sussurro","sutura","svagare","svedese","sveglio","svelare","svenuto","svezia","sviluppo","svista","svizzera","svolta","svuotare","tabacco","tabulato","tacciare","taciturno","tale","talismano","tampone","tannino","tara","tardivo","targato","tariffa","tarpare","tartaruga","tasto","tattico","taverna","tavolata","tazza","teca","tecnico","telefono","temerario","tempo","temuto","tendone","tenero","tensione","tentacolo","teorema","terme","terrazzo","terzetto","tesi","tesserato","testato","tetro","tettoia","tifare","tigella","timbro","tinto","tipico","tipografo","tiraggio","tiro","titanio","titolo","titubante","tizio","tizzone","toccare","tollerare","tolto","tombola","tomo","tonfo","tonsilla","topazio","topologia","toppa","torba","tornare","torrone","tortora","toscano","tossire","tostatura","totano","trabocco","trachea","trafila","tragedia","tralcio","tramonto","transito","trapano","trarre","trasloco","trattato","trave","treccia","tremolio","trespolo","tributo","tricheco","trifoglio","trillo","trincea","trio","tristezza","triturato","trivella","tromba","trono","troppo","trottola","trovare","truccato","tubatura","tuffato","tulipano","tumulto","tunisia","turbare","turchino","tuta","tutela","ubicato","uccello","uccisore","udire","uditivo","uffa","ufficio","uguale","ulisse","ultimato","umano","umile","umorismo","uncinetto","ungere","ungherese","unicorno","unificato","unisono","unitario","unte","uovo","upupa","uragano","urgenza","urlo","usanza","usato","uscito","usignolo","usuraio","utensile","utilizzo","utopia","vacante","vaccinato","vagabondo","vagliato","valanga","valgo","valico","valletta","valoroso","valutare","valvola","vampata","vangare","vanitoso","vano","vantaggio","vanvera","vapore","varano","varcato","variante","vasca","vedetta","vedova","veduto","vegetale","veicolo","velcro","velina","velluto","veloce","venato","vendemmia","vento","verace","verbale","vergogna","verifica","vero","verruca","verticale","vescica","vessillo","vestale","veterano","vetrina","vetusto","viandante","vibrante","vicenda","vichingo","vicinanza","vidimare","vigilia","vigneto","vigore","vile","villano","vimini","vincitore","viola","vipera","virgola","virologo","virulento","viscoso","visione","vispo","vissuto","visura","vita","vitello","vittima","vivanda","vivido","viziare","voce","voga","volatile","volere","volpe","voragine","vulcano","zampogna","zanna","zappato","zattera","zavorra","zefiro","zelante","zelo","zenzero","zerbino","zibetto","zinco","zircone","zitto","zolla","zotico","zucchero","zufolo","zulu","zuppa"]'),Q_=JSON.parse('["abaco","abdomen","abeja","abierto","abogado","abono","aborto","abrazo","abrir","abuelo","abuso","acabar","academia","acceso","accion","aceite","acelga","acento","aceptar","acido","aclarar","acne","acoger","acoso","activo","acto","actriz","actuar","acudir","acuerdo","acusar","adicto","admitir","adoptar","adorno","aduana","adulto","aereo","afectar","aficion","afinar","afirmar","agil","agitar","agonia","agosto","agotar","agregar","agrio","agua","agudo","aguila","aguja","ahogo","ahorro","aire","aislar","ajedrez","ajeno","ajuste","alacran","alambre","alarma","alba","album","alcalde","aldea","alegre","alejar","alerta","aleta","alfiler","alga","algodon","aliado","aliento","alivio","alma","almeja","almibar","altar","alteza","altivo","alto","altura","alumno","alzar","amable","amante","amapola","amargo","amasar","ambar","ambito","ameno","amigo","amistad","amor","amparo","amplio","ancho","anciano","ancla","andar","anden","anemia","angulo","anillo","animo","anis","anotar","antena","antiguo","antojo","anual","anular","anuncio","anadir","anejo","ano","apagar","aparato","apetito","apio","aplicar","apodo","aporte","apoyo","aprender","aprobar","apuesta","apuro","arado","arana","arar","arbitro","arbol","arbusto","archivo","arco","arder","ardilla","arduo","area","arido","aries","armonia","arnes","aroma","arpa","arpon","arreglo","arroz","arruga","arte","artista","asa","asado","asalto","ascenso","asegurar","aseo","asesor","asiento","asilo","asistir","asno","asombro","aspero","astilla","astro","astuto","asumir","asunto","atajo","ataque","atar","atento","ateo","atico","atleta","atomo","atraer","atroz","atun","audaz","audio","auge","aula","aumento","ausente","autor","aval","avance","avaro","ave","avellana","avena","avestruz","avion","aviso","ayer","ayuda","ayuno","azafran","azar","azote","azucar","azufre","azul","baba","babor","bache","bahia","baile","bajar","balanza","balcon","balde","bambu","banco","banda","bano","barba","barco","barniz","barro","bascula","baston","basura","batalla","bateria","batir","batuta","baul","bazar","bebe","bebida","bello","besar","beso","bestia","bicho","bien","bingo","blanco","bloque","blusa","boa","bobina","bobo","boca","bocina","boda","bodega","boina","bola","bolero","bolsa","bomba","bondad","bonito","bono","bonsai","borde","borrar","bosque","bote","botin","boveda","bozal","bravo","brazo","brecha","breve","brillo","brinco","brisa","broca","broma","bronce","brote","bruja","brusco","bruto","buceo","bucle","bueno","buey","bufanda","bufon","buho","buitre","bulto","burbuja","burla","burro","buscar","butaca","buzon","caballo","cabeza","cabina","cabra","cacao","cadaver","cadena","caer","cafe","caida","caiman","caja","cajon","cal","calamar","calcio","caldo","calidad","calle","calma","calor","calvo","cama","cambio","camello","camino","campo","cancer","candil","canela","canguro","canica","canto","cana","canon","caoba","caos","capaz","capitan","capote","captar","capucha","cara","carbon","carcel","careta","carga","carino","carne","carpeta","carro","carta","casa","casco","casero","caspa","castor","catorce","catre","caudal","causa","cazo","cebolla","ceder","cedro","celda","celebre","celoso","celula","cemento","ceniza","centro","cerca","cerdo","cereza","cero","cerrar","certeza","cesped","cetro","chacal","chaleco","champu","chancla","chapa","charla","chico","chiste","chivo","choque","choza","chuleta","chupar","ciclon","ciego","cielo","cien","cierto","cifra","cigarro","cima","cinco","cine","cinta","cipres","circo","ciruela","cisne","cita","ciudad","clamor","clan","claro","clase","clave","cliente","clima","clinica","cobre","coccion","cochino","cocina","coco","codigo","codo","cofre","coger","cohete","cojin","cojo","cola","colcha","colegio","colgar","colina","collar","colmo","columna","combate","comer","comida","comodo","compra","conde","conejo","conga","conocer","consejo","contar","copa","copia","corazon","corbata","corcho","cordon","corona","correr","coser","cosmos","costa","craneo","crater","crear","crecer","creido","crema","cria","crimen","cripta","crisis","cromo","cronica","croqueta","crudo","cruz","cuadro","cuarto","cuatro","cubo","cubrir","cuchara","cuello","cuento","cuerda","cuesta","cueva","cuidar","culebra","culpa","culto","cumbre","cumplir","cuna","cuneta","cuota","cupon","cupula","curar","curioso","curso","curva","cutis","dama","danza","dar","dardo","datil","deber","debil","decada","decir","dedo","defensa","definir","dejar","delfin","delgado","delito","demora","denso","dental","deporte","derecho","derrota","desayuno","deseo","desfile","desnudo","destino","desvio","detalle","detener","deuda","dia","diablo","diadema","diamante","diana","diario","dibujo","dictar","diente","dieta","diez","dificil","digno","dilema","diluir","dinero","directo","dirigir","disco","diseno","disfraz","diva","divino","doble","doce","dolor","domingo","don","donar","dorado","dormir","dorso","dos","dosis","dragon","droga","ducha","duda","duelo","dueno","dulce","duo","duque","durar","dureza","duro","ebano","ebrio","echar","eco","ecuador","edad","edicion","edificio","editor","educar","efecto","eficaz","eje","ejemplo","elefante","elegir","elemento","elevar","elipse","elite","elixir","elogio","eludir","embudo","emitir","emocion","empate","empeno","empleo","empresa","enano","encargo","enchufe","encia","enemigo","enero","enfado","enfermo","engano","enigma","enlace","enorme","enredo","ensayo","ensenar","entero","entrar","envase","envio","epoca","equipo","erizo","escala","escena","escolar","escribir","escudo","esencia","esfera","esfuerzo","espada","espejo","espia","esposa","espuma","esqui","estar","este","estilo","estufa","etapa","eterno","etica","etnia","evadir","evaluar","evento","evitar","exacto","examen","exceso","excusa","exento","exigir","exilio","existir","exito","experto","explicar","exponer","extremo","fabrica","fabula","fachada","facil","factor","faena","faja","falda","fallo","falso","faltar","fama","familia","famoso","faraon","farmacia","farol","farsa","fase","fatiga","fauna","favor","fax","febrero","fecha","feliz","feo","feria","feroz","fertil","fervor","festin","fiable","fianza","fiar","fibra","ficcion","ficha","fideo","fiebre","fiel","fiera","fiesta","figura","fijar","fijo","fila","filete","filial","filtro","fin","finca","fingir","finito","firma","flaco","flauta","flecha","flor","flota","fluir","flujo","fluor","fobia","foca","fogata","fogon","folio","folleto","fondo","forma","forro","fortuna","forzar","fosa","foto","fracaso","fragil","franja","frase","fraude","freir","freno","fresa","frio","frito","fruta","fuego","fuente","fuerza","fuga","fumar","funcion","funda","furgon","furia","fusil","futbol","futuro","gacela","gafas","gaita","gajo","gala","galeria","gallo","gamba","ganar","gancho","ganga","ganso","garaje","garza","gasolina","gastar","gato","gavilan","gemelo","gemir","gen","genero","genio","gente","geranio","gerente","germen","gesto","gigante","gimnasio","girar","giro","glaciar","globo","gloria","gol","golfo","goloso","golpe","goma","gordo","gorila","gorra","gota","goteo","gozar","grada","grafico","grano","grasa","gratis","grave","grieta","grillo","gripe","gris","grito","grosor","grua","grueso","grumo","grupo","guante","guapo","guardia","guerra","guia","guino","guion","guiso","guitarra","gusano","gustar","haber","habil","hablar","hacer","hacha","hada","hallar","hamaca","harina","haz","hazana","hebilla","hebra","hecho","helado","helio","hembra","herir","hermano","heroe","hervir","hielo","hierro","higado","higiene","hijo","himno","historia","hocico","hogar","hoguera","hoja","hombre","hongo","honor","honra","hora","hormiga","horno","hostil","hoyo","hueco","huelga","huerta","hueso","huevo","huida","huir","humano","humedo","humilde","humo","hundir","huracan","hurto","icono","ideal","idioma","idolo","iglesia","iglu","igual","ilegal","ilusion","imagen","iman","imitar","impar","imperio","imponer","impulso","incapaz","indice","inerte","infiel","informe","ingenio","inicio","inmenso","inmune","innato","insecto","instante","interes","intimo","intuir","inutil","invierno","ira","iris","ironia","isla","islote","jabali","jabon","jamon","jarabe","jardin","jarra","jaula","jazmin","jefe","jeringa","jinete","jornada","joroba","joven","joya","juerga","jueves","juez","jugador","jugo","juguete","juicio","junco","jungla","junio","juntar","jupiter","jurar","justo","juvenil","juzgar","kilo","koala","labio","lacio","lacra","lado","ladron","lagarto","lagrima","laguna","laico","lamer","lamina","lampara","lana","lancha","langosta","lanza","lapiz","largo","larva","lastima","lata","latex","latir","laurel","lavar","lazo","leal","leccion","leche","lector","leer","legion","legumbre","lejano","lengua","lento","lena","leon","leopardo","lesion","letal","letra","leve","leyenda","libertad","libro","licor","lider","lidiar","lienzo","liga","ligero","lima","limite","limon","limpio","lince","lindo","linea","lingote","lino","linterna","liquido","liso","lista","litera","litio","litro","llaga","llama","llanto","llave","llegar","llenar","llevar","llorar","llover","lluvia","lobo","locion","loco","locura","logica","logro","lombriz","lomo","lonja","lote","lucha","lucir","lugar","lujo","luna","lunes","lupa","lustro","luto","luz","maceta","macho","madera","madre","maduro","maestro","mafia","magia","mago","maiz","maldad","maleta","malla","malo","mama","mambo","mamut","manco","mando","manejar","manga","maniqui","manjar","mano","manso","manta","manana","mapa","maquina","mar","marco","marea","marfil","margen","marido","marmol","marron","martes","marzo","masa","mascara","masivo","matar","materia","matiz","matriz","maximo","mayor","mazorca","mecha","medalla","medio","medula","mejilla","mejor","melena","melon","memoria","menor","mensaje","mente","menu","mercado","merengue","merito","mes","meson","meta","meter","metodo","metro","mezcla","miedo","miel","miembro","miga","mil","milagro","militar","millon","mimo","mina","minero","minimo","minuto","miope","mirar","misa","miseria","misil","mismo","mitad","mito","mochila","mocion","moda","modelo","moho","mojar","molde","moler","molino","momento","momia","monarca","moneda","monja","monto","mono","morada","morder","moreno","morir","morro","morsa","mortal","mosca","mostrar","motivo","mover","movil","mozo","mucho","mudar","mueble","muela","muerte","muestra","mugre","mujer","mula","muleta","multa","mundo","muneca","mural","muro","musculo","museo","musgo","musica","muslo","nacar","nacion","nadar","naipe","naranja","nariz","narrar","nasal","natal","nativo","natural","nausea","naval","nave","navidad","necio","nectar","negar","negocio","negro","neon","nervio","neto","neutro","nevar","nevera","nicho","nido","niebla","nieto","ninez","nino","nitido","nivel","nobleza","noche","nomina","noria","norma","norte","nota","noticia","novato","novela","novio","nube","nuca","nucleo","nudillo","nudo","nuera","nueve","nuez","nulo","numero","nutria","oasis","obeso","obispo","objeto","obra","obrero","observar","obtener","obvio","oca","ocaso","oceano","ochenta","ocho","ocio","ocre","octavo","octubre","oculto","ocupar","ocurrir","odiar","odio","odisea","oeste","ofensa","oferta","oficio","ofrecer","ogro","oido","oir","ojo","ola","oleada","olfato","olivo","olla","olmo","olor","olvido","ombligo","onda","onza","opaco","opcion","opera","opinar","oponer","optar","optica","opuesto","oracion","orador","oral","orbita","orca","orden","oreja","organo","orgia","orgullo","oriente","origen","orilla","oro","orquesta","oruga","osadia","oscuro","osezno","oso","ostra","otono","otro","oveja","ovulo","oxido","oxigeno","oyente","ozono","pacto","padre","paella","pagina","pago","pais","pajaro","palabra","palco","paleta","palido","palma","paloma","palpar","pan","panal","panico","pantera","panuelo","papa","papel","papilla","paquete","parar","parcela","pared","parir","paro","parpado","parque","parrafo","parte","pasar","paseo","pasion","paso","pasta","pata","patio","patria","pausa","pauta","pavo","payaso","peaton","pecado","pecera","pecho","pedal","pedir","pegar","peine","pelar","peldano","pelea","peligro","pellejo","pelo","peluca","pena","pensar","penon","peon","peor","pepino","pequeno","pera","percha","perder","pereza","perfil","perico","perla","permiso","perro","persona","pesa","pesca","pesimo","pestana","petalo","petroleo","pez","pezuna","picar","pichon","pie","piedra","pierna","pieza","pijama","pilar","piloto","pimienta","pino","pintor","pinza","pina","piojo","pipa","pirata","pisar","piscina","piso","pista","piton","pizca","placa","plan","plata","playa","plaza","pleito","pleno","plomo","pluma","plural","pobre","poco","poder","podio","poema","poesia","poeta","polen","policia","pollo","polvo","pomada","pomelo","pomo","pompa","poner","porcion","portal","posada","poseer","posible","poste","potencia","potro","pozo","prado","precoz","pregunta","premio","prensa","preso","previo","primo","principe","prision","privar","proa","probar","proceso","producto","proeza","profesor","programa","prole","promesa","pronto","propio","proximo","prueba","publico","puchero","pudor","pueblo","puerta","puesto","pulga","pulir","pulmon","pulpo","pulso","puma","punto","punal","puno","pupa","pupila","pure","quedar","queja","quemar","querer","queso","quieto","quimica","quince","quitar","rabano","rabia","rabo","racion","radical","raiz","rama","rampa","rancho","rango","rapaz","rapido","rapto","rasgo","raspa","rato","rayo","raza","razon","reaccion","realidad","rebano","rebote","recaer","receta","rechazo","recoger","recreo","recto","recurso","red","redondo","reducir","reflejo","reforma","refran","refugio","regalo","regir","regla","regreso","rehen","reino","reir","reja","relato","relevo","relieve","relleno","reloj","remar","remedio","remo","rencor","rendir","renta","reparto","repetir","reposo","reptil","res","rescate","resina","respeto","resto","resumen","retiro","retorno","retrato","reunir","reves","revista","rey","rezar","rico","riego","rienda","riesgo","rifa","rigido","rigor","rincon","rinon","rio","riqueza","risa","ritmo","rito","rizo","roble","roce","rociar","rodar","rodeo","rodilla","roer","rojizo","rojo","romero","romper","ron","ronco","ronda","ropa","ropero","rosa","rosca","rostro","rotar","rubi","rubor","rudo","rueda","rugir","ruido","ruina","ruleta","rulo","rumbo","rumor","ruptura","ruta","rutina","sabado","saber","sabio","sable","sacar","sagaz","sagrado","sala","saldo","salero","salir","salmon","salon","salsa","salto","salud","salvar","samba","sancion","sandia","sanear","sangre","sanidad","sano","santo","sapo","saque","sardina","sarten","sastre","satan","sauna","saxofon","seccion","seco","secreto","secta","sed","seguir","seis","sello","selva","semana","semilla","senda","sensor","senal","senor","separar","sepia","sequia","ser","serie","sermon","servir","sesenta","sesion","seta","setenta","severo","sexo","sexto","sidra","siesta","siete","siglo","signo","silaba","silbar","silencio","silla","simbolo","simio","sirena","sistema","sitio","situar","sobre","socio","sodio","sol","solapa","soldado","soledad","solido","soltar","solucion","sombra","sondeo","sonido","sonoro","sonrisa","sopa","soplar","soporte","sordo","sorpresa","sorteo","sosten","sotano","suave","subir","suceso","sudor","suegra","suelo","sueno","suerte","sufrir","sujeto","sultan","sumar","superar","suplir","suponer","supremo","sur","surco","sureno","surgir","susto","sutil","tabaco","tabique","tabla","tabu","taco","tacto","tajo","talar","talco","talento","talla","talon","tamano","tambor","tango","tanque","tapa","tapete","tapia","tapon","taquilla","tarde","tarea","tarifa","tarjeta","tarot","tarro","tarta","tatuaje","tauro","taza","tazon","teatro","techo","tecla","tecnica","tejado","tejer","tejido","tela","telefono","tema","temor","templo","tenaz","tender","tener","tenis","tenso","teoria","terapia","terco","termino","ternura","terror","tesis","tesoro","testigo","tetera","texto","tez","tibio","tiburon","tiempo","tienda","tierra","tieso","tigre","tijera","tilde","timbre","timido","timo","tinta","tio","tipico","tipo","tira","tiron","titan","titere","titulo","tiza","toalla","tobillo","tocar","tocino","todo","toga","toldo","tomar","tono","tonto","topar","tope","toque","torax","torero","tormenta","torneo","toro","torpedo","torre","torso","tortuga","tos","tosco","toser","toxico","trabajo","tractor","traer","trafico","trago","traje","tramo","trance","trato","trauma","trazar","trebol","tregua","treinta","tren","trepar","tres","tribu","trigo","tripa","triste","triunfo","trofeo","trompa","tronco","tropa","trote","trozo","truco","trueno","trufa","tuberia","tubo","tuerto","tumba","tumor","tunel","tunica","turbina","turismo","turno","tutor","ubicar","ulcera","umbral","unidad","unir","universo","uno","untar","una","urbano","urbe","urgente","urna","usar","usuario","util","utopia","uva","vaca","vacio","vacuna","vagar","vago","vaina","vajilla","vale","valido","valle","valor","valvula","vampiro","vara","variar","varon","vaso","vecino","vector","vehiculo","veinte","vejez","vela","velero","veloz","vena","vencer","venda","veneno","vengar","venir","venta","venus","ver","verano","verbo","verde","vereda","verja","verso","verter","via","viaje","vibrar","vicio","victima","vida","video","vidrio","viejo","viernes","vigor","vil","villa","vinagre","vino","vinedo","violin","viral","virgo","virtud","visor","vispera","vista","vitamina","viudo","vivaz","vivero","vivir","vivo","volcan","volumen","volver","voraz","votar","voto","voz","vuelo","vulgar","yacer","yate","yegua","yema","yerno","yeso","yodo","yoga","yogur","zafiro","zanja","zapato","zarza","zona","zorro","zumo","zurdo"]'),ew=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),tw=JSON.parse('["abacate","abaixo","abalar","abater","abduzir","abelha","aberto","abismo","abotoar","abranger","abreviar","abrigar","abrupto","absinto","absoluto","absurdo","abutre","acabado","acalmar","acampar","acanhar","acaso","aceitar","acelerar","acenar","acervo","acessar","acetona","achatar","acidez","acima","acionado","acirrar","aclamar","aclive","acolhida","acomodar","acoplar","acordar","acumular","acusador","adaptar","adega","adentro","adepto","adequar","aderente","adesivo","adeus","adiante","aditivo","adjetivo","adjunto","admirar","adorar","adquirir","adubo","adverso","advogado","aeronave","afastar","aferir","afetivo","afinador","afivelar","aflito","afluente","afrontar","agachar","agarrar","agasalho","agenciar","agilizar","agiota","agitado","agora","agradar","agreste","agrupar","aguardar","agulha","ajoelhar","ajudar","ajustar","alameda","alarme","alastrar","alavanca","albergue","albino","alcatra","aldeia","alecrim","alegria","alertar","alface","alfinete","algum","alheio","aliar","alicate","alienar","alinhar","aliviar","almofada","alocar","alpiste","alterar","altitude","alucinar","alugar","aluno","alusivo","alvo","amaciar","amador","amarelo","amassar","ambas","ambiente","ameixa","amenizar","amido","amistoso","amizade","amolador","amontoar","amoroso","amostra","amparar","ampliar","ampola","anagrama","analisar","anarquia","anatomia","andaime","anel","anexo","angular","animar","anjo","anomalia","anotado","ansioso","anterior","anuidade","anunciar","anzol","apagador","apalpar","apanhado","apego","apelido","apertada","apesar","apetite","apito","aplauso","aplicada","apoio","apontar","aposta","aprendiz","aprovar","aquecer","arame","aranha","arara","arcada","ardente","areia","arejar","arenito","aresta","argiloso","argola","arma","arquivo","arraial","arrebate","arriscar","arroba","arrumar","arsenal","arterial","artigo","arvoredo","asfaltar","asilado","aspirar","assador","assinar","assoalho","assunto","astral","atacado","atadura","atalho","atarefar","atear","atender","aterro","ateu","atingir","atirador","ativo","atoleiro","atracar","atrevido","atriz","atual","atum","auditor","aumentar","aura","aurora","autismo","autoria","autuar","avaliar","avante","avaria","avental","avesso","aviador","avisar","avulso","axila","azarar","azedo","azeite","azulejo","babar","babosa","bacalhau","bacharel","bacia","bagagem","baiano","bailar","baioneta","bairro","baixista","bajular","baleia","baliza","balsa","banal","bandeira","banho","banir","banquete","barato","barbado","baronesa","barraca","barulho","baseado","bastante","batata","batedor","batida","batom","batucar","baunilha","beber","beijo","beirada","beisebol","beldade","beleza","belga","beliscar","bendito","bengala","benzer","berimbau","berlinda","berro","besouro","bexiga","bezerro","bico","bicudo","bienal","bifocal","bifurcar","bigorna","bilhete","bimestre","bimotor","biologia","biombo","biosfera","bipolar","birrento","biscoito","bisneto","bispo","bissexto","bitola","bizarro","blindado","bloco","bloquear","boato","bobagem","bocado","bocejo","bochecha","boicotar","bolada","boletim","bolha","bolo","bombeiro","bonde","boneco","bonita","borbulha","borda","boreal","borracha","bovino","boxeador","branco","brasa","braveza","breu","briga","brilho","brincar","broa","brochura","bronzear","broto","bruxo","bucha","budismo","bufar","bule","buraco","busca","busto","buzina","cabana","cabelo","cabide","cabo","cabrito","cacau","cacetada","cachorro","cacique","cadastro","cadeado","cafezal","caiaque","caipira","caixote","cajado","caju","calafrio","calcular","caldeira","calibrar","calmante","calota","camada","cambista","camisa","camomila","campanha","camuflar","canavial","cancelar","caneta","canguru","canhoto","canivete","canoa","cansado","cantar","canudo","capacho","capela","capinar","capotar","capricho","captador","capuz","caracol","carbono","cardeal","careca","carimbar","carneiro","carpete","carreira","cartaz","carvalho","casaco","casca","casebre","castelo","casulo","catarata","cativar","caule","causador","cautelar","cavalo","caverna","cebola","cedilha","cegonha","celebrar","celular","cenoura","censo","centeio","cercar","cerrado","certeiro","cerveja","cetim","cevada","chacota","chaleira","chamado","chapada","charme","chatice","chave","chefe","chegada","cheiro","cheque","chicote","chifre","chinelo","chocalho","chover","chumbo","chutar","chuva","cicatriz","ciclone","cidade","cidreira","ciente","cigana","cimento","cinto","cinza","ciranda","circuito","cirurgia","citar","clareza","clero","clicar","clone","clube","coado","coagir","cobaia","cobertor","cobrar","cocada","coelho","coentro","coeso","cogumelo","coibir","coifa","coiote","colar","coleira","colher","colidir","colmeia","colono","coluna","comando","combinar","comentar","comitiva","comover","complexo","comum","concha","condor","conectar","confuso","congelar","conhecer","conjugar","consumir","contrato","convite","cooperar","copeiro","copiador","copo","coquetel","coragem","cordial","corneta","coronha","corporal","correio","cortejo","coruja","corvo","cosseno","costela","cotonete","couro","couve","covil","cozinha","cratera","cravo","creche","credor","creme","crer","crespo","criada","criminal","crioulo","crise","criticar","crosta","crua","cruzeiro","cubano","cueca","cuidado","cujo","culatra","culminar","culpar","cultura","cumprir","cunhado","cupido","curativo","curral","cursar","curto","cuspir","custear","cutelo","damasco","datar","debater","debitar","deboche","debulhar","decalque","decimal","declive","decote","decretar","dedal","dedicado","deduzir","defesa","defumar","degelo","degrau","degustar","deitado","deixar","delator","delegado","delinear","delonga","demanda","demitir","demolido","dentista","depenado","depilar","depois","depressa","depurar","deriva","derramar","desafio","desbotar","descanso","desenho","desfiado","desgaste","desigual","deslize","desmamar","desova","despesa","destaque","desviar","detalhar","detentor","detonar","detrito","deusa","dever","devido","devotado","dezena","diagrama","dialeto","didata","difuso","digitar","dilatado","diluente","diminuir","dinastia","dinheiro","diocese","direto","discreta","disfarce","disparo","disquete","dissipar","distante","ditador","diurno","diverso","divisor","divulgar","dizer","dobrador","dolorido","domador","dominado","donativo","donzela","dormente","dorsal","dosagem","dourado","doutor","drenagem","drible","drogaria","duelar","duende","dueto","duplo","duquesa","durante","duvidoso","eclodir","ecoar","ecologia","edificar","edital","educado","efeito","efetivar","ejetar","elaborar","eleger","eleitor","elenco","elevador","eliminar","elogiar","embargo","embolado","embrulho","embutido","emenda","emergir","emissor","empatia","empenho","empinado","empolgar","emprego","empurrar","emulador","encaixe","encenado","enchente","encontro","endeusar","endossar","enfaixar","enfeite","enfim","engajado","engenho","englobar","engomado","engraxar","enguia","enjoar","enlatar","enquanto","enraizar","enrolado","enrugar","ensaio","enseada","ensino","ensopado","entanto","enteado","entidade","entortar","entrada","entulho","envergar","enviado","envolver","enxame","enxerto","enxofre","enxuto","epiderme","equipar","ereto","erguido","errata","erva","ervilha","esbanjar","esbelto","escama","escola","escrita","escuta","esfinge","esfolar","esfregar","esfumado","esgrima","esmalte","espanto","espelho","espiga","esponja","espreita","espumar","esquerda","estaca","esteira","esticar","estofado","estrela","estudo","esvaziar","etanol","etiqueta","euforia","europeu","evacuar","evaporar","evasivo","eventual","evidente","evoluir","exagero","exalar","examinar","exato","exausto","excesso","excitar","exclamar","executar","exemplo","exibir","exigente","exonerar","expandir","expelir","expirar","explanar","exposto","expresso","expulsar","externo","extinto","extrato","fabricar","fabuloso","faceta","facial","fada","fadiga","faixa","falar","falta","familiar","fandango","fanfarra","fantoche","fardado","farelo","farinha","farofa","farpa","fartura","fatia","fator","favorita","faxina","fazenda","fechado","feijoada","feirante","felino","feminino","fenda","feno","fera","feriado","ferrugem","ferver","festejar","fetal","feudal","fiapo","fibrose","ficar","ficheiro","figurado","fileira","filho","filme","filtrar","firmeza","fisgada","fissura","fita","fivela","fixador","fixo","flacidez","flamingo","flanela","flechada","flora","flutuar","fluxo","focal","focinho","fofocar","fogo","foguete","foice","folgado","folheto","forjar","formiga","forno","forte","fosco","fossa","fragata","fralda","frango","frasco","fraterno","freira","frente","fretar","frieza","friso","fritura","fronha","frustrar","fruteira","fugir","fulano","fuligem","fundar","fungo","funil","furador","furioso","futebol","gabarito","gabinete","gado","gaiato","gaiola","gaivota","galega","galho","galinha","galocha","ganhar","garagem","garfo","gargalo","garimpo","garoupa","garrafa","gasoduto","gasto","gata","gatilho","gaveta","gazela","gelado","geleia","gelo","gemada","gemer","gemido","generoso","gengiva","genial","genoma","genro","geologia","gerador","germinar","gesso","gestor","ginasta","gincana","gingado","girafa","girino","glacial","glicose","global","glorioso","goela","goiaba","golfe","golpear","gordura","gorjeta","gorro","gostoso","goteira","governar","gracejo","gradual","grafite","gralha","grampo","granada","gratuito","graveto","graxa","grego","grelhar","greve","grilo","grisalho","gritaria","grosso","grotesco","grudado","grunhido","gruta","guache","guarani","guaxinim","guerrear","guiar","guincho","guisado","gula","guloso","guru","habitar","harmonia","haste","haver","hectare","herdar","heresia","hesitar","hiato","hibernar","hidratar","hiena","hino","hipismo","hipnose","hipoteca","hoje","holofote","homem","honesto","honrado","hormonal","hospedar","humorado","iate","ideia","idoso","ignorado","igreja","iguana","ileso","ilha","iludido","iluminar","ilustrar","imagem","imediato","imenso","imersivo","iminente","imitador","imortal","impacto","impedir","implante","impor","imprensa","impune","imunizar","inalador","inapto","inativo","incenso","inchar","incidir","incluir","incolor","indeciso","indireto","indutor","ineficaz","inerente","infantil","infestar","infinito","inflamar","informal","infrator","ingerir","inibido","inicial","inimigo","injetar","inocente","inodoro","inovador","inox","inquieto","inscrito","inseto","insistir","inspetor","instalar","insulto","intacto","integral","intimar","intocado","intriga","invasor","inverno","invicto","invocar","iogurte","iraniano","ironizar","irreal","irritado","isca","isento","isolado","isqueiro","italiano","janeiro","jangada","janta","jararaca","jardim","jarro","jasmim","jato","javali","jazida","jejum","joaninha","joelhada","jogador","joia","jornal","jorrar","jovem","juba","judeu","judoca","juiz","julgador","julho","jurado","jurista","juro","justa","labareda","laboral","lacre","lactante","ladrilho","lagarta","lagoa","laje","lamber","lamentar","laminar","lampejo","lanche","lapidar","lapso","laranja","lareira","largura","lasanha","lastro","lateral","latido","lavanda","lavoura","lavrador","laxante","lazer","lealdade","lebre","legado","legendar","legista","leigo","leiloar","leitura","lembrete","leme","lenhador","lentilha","leoa","lesma","leste","letivo","letreiro","levar","leveza","levitar","liberal","libido","liderar","ligar","ligeiro","limitar","limoeiro","limpador","linda","linear","linhagem","liquidez","listagem","lisura","litoral","livro","lixa","lixeira","locador","locutor","lojista","lombo","lona","longe","lontra","lorde","lotado","loteria","loucura","lousa","louvar","luar","lucidez","lucro","luneta","lustre","lutador","luva","macaco","macete","machado","macio","madeira","madrinha","magnata","magreza","maior","mais","malandro","malha","malote","maluco","mamilo","mamoeiro","mamute","manada","mancha","mandato","manequim","manhoso","manivela","manobrar","mansa","manter","manusear","mapeado","maquinar","marcador","maresia","marfim","margem","marinho","marmita","maroto","marquise","marreco","martelo","marujo","mascote","masmorra","massagem","mastigar","matagal","materno","matinal","matutar","maxilar","medalha","medida","medusa","megafone","meiga","melancia","melhor","membro","memorial","menino","menos","mensagem","mental","merecer","mergulho","mesada","mesclar","mesmo","mesquita","mestre","metade","meteoro","metragem","mexer","mexicano","micro","migalha","migrar","milagre","milenar","milhar","mimado","minerar","minhoca","ministro","minoria","miolo","mirante","mirtilo","misturar","mocidade","moderno","modular","moeda","moer","moinho","moita","moldura","moleza","molho","molinete","molusco","montanha","moqueca","morango","morcego","mordomo","morena","mosaico","mosquete","mostarda","motel","motim","moto","motriz","muda","muito","mulata","mulher","multar","mundial","munido","muralha","murcho","muscular","museu","musical","nacional","nadador","naja","namoro","narina","narrado","nascer","nativa","natureza","navalha","navegar","navio","neblina","nebuloso","negativa","negociar","negrito","nervoso","neta","neural","nevasca","nevoeiro","ninar","ninho","nitidez","nivelar","nobreza","noite","noiva","nomear","nominal","nordeste","nortear","notar","noticiar","noturno","novelo","novilho","novo","nublado","nudez","numeral","nupcial","nutrir","nuvem","obcecado","obedecer","objetivo","obrigado","obscuro","obstetra","obter","obturar","ocidente","ocioso","ocorrer","oculista","ocupado","ofegante","ofensiva","oferenda","oficina","ofuscado","ogiva","olaria","oleoso","olhar","oliveira","ombro","omelete","omisso","omitir","ondulado","oneroso","ontem","opcional","operador","oponente","oportuno","oposto","orar","orbitar","ordem","ordinal","orfanato","orgasmo","orgulho","oriental","origem","oriundo","orla","ortodoxo","orvalho","oscilar","ossada","osso","ostentar","otimismo","ousadia","outono","outubro","ouvido","ovelha","ovular","oxidar","oxigenar","pacato","paciente","pacote","pactuar","padaria","padrinho","pagar","pagode","painel","pairar","paisagem","palavra","palestra","palheta","palito","palmada","palpitar","pancada","panela","panfleto","panqueca","pantanal","papagaio","papelada","papiro","parafina","parcial","pardal","parede","partida","pasmo","passado","pastel","patamar","patente","patinar","patrono","paulada","pausar","peculiar","pedalar","pedestre","pediatra","pedra","pegada","peitoral","peixe","pele","pelicano","penca","pendurar","peneira","penhasco","pensador","pente","perceber","perfeito","pergunta","perito","permitir","perna","perplexo","persiana","pertence","peruca","pescado","pesquisa","pessoa","petiscar","piada","picado","piedade","pigmento","pilastra","pilhado","pilotar","pimenta","pincel","pinguim","pinha","pinote","pintar","pioneiro","pipoca","piquete","piranha","pires","pirueta","piscar","pistola","pitanga","pivete","planta","plaqueta","platina","plebeu","plumagem","pluvial","pneu","poda","poeira","poetisa","polegada","policiar","poluente","polvilho","pomar","pomba","ponderar","pontaria","populoso","porta","possuir","postal","pote","poupar","pouso","povoar","praia","prancha","prato","praxe","prece","predador","prefeito","premiar","prensar","preparar","presilha","pretexto","prevenir","prezar","primata","princesa","prisma","privado","processo","produto","profeta","proibido","projeto","prometer","propagar","prosa","protetor","provador","publicar","pudim","pular","pulmonar","pulseira","punhal","punir","pupilo","pureza","puxador","quadra","quantia","quarto","quase","quebrar","queda","queijo","quente","querido","quimono","quina","quiosque","rabanada","rabisco","rachar","racionar","radial","raiar","rainha","raio","raiva","rajada","ralado","ramal","ranger","ranhura","rapadura","rapel","rapidez","raposa","raquete","raridade","rasante","rascunho","rasgar","raspador","rasteira","rasurar","ratazana","ratoeira","realeza","reanimar","reaver","rebaixar","rebelde","rebolar","recado","recente","recheio","recibo","recordar","recrutar","recuar","rede","redimir","redonda","reduzida","reenvio","refinar","refletir","refogar","refresco","refugiar","regalia","regime","regra","reinado","reitor","rejeitar","relativo","remador","remendo","remorso","renovado","reparo","repelir","repleto","repolho","represa","repudiar","requerer","resenha","resfriar","resgatar","residir","resolver","respeito","ressaca","restante","resumir","retalho","reter","retirar","retomada","retratar","revelar","revisor","revolta","riacho","rica","rigidez","rigoroso","rimar","ringue","risada","risco","risonho","robalo","rochedo","rodada","rodeio","rodovia","roedor","roleta","romano","roncar","rosado","roseira","rosto","rota","roteiro","rotina","rotular","rouco","roupa","roxo","rubro","rugido","rugoso","ruivo","rumo","rupestre","russo","sabor","saciar","sacola","sacudir","sadio","safira","saga","sagrada","saibro","salada","saleiro","salgado","saliva","salpicar","salsicha","saltar","salvador","sambar","samurai","sanar","sanfona","sangue","sanidade","sapato","sarda","sargento","sarjeta","saturar","saudade","saxofone","sazonal","secar","secular","seda","sedento","sediado","sedoso","sedutor","segmento","segredo","segundo","seiva","seleto","selvagem","semanal","semente","senador","senhor","sensual","sentado","separado","sereia","seringa","serra","servo","setembro","setor","sigilo","silhueta","silicone","simetria","simpatia","simular","sinal","sincero","singular","sinopse","sintonia","sirene","siri","situado","soberano","sobra","socorro","sogro","soja","solda","soletrar","solteiro","sombrio","sonata","sondar","sonegar","sonhador","sono","soprano","soquete","sorrir","sorteio","sossego","sotaque","soterrar","sovado","sozinho","suavizar","subida","submerso","subsolo","subtrair","sucata","sucesso","suco","sudeste","sufixo","sugador","sugerir","sujeito","sulfato","sumir","suor","superior","suplicar","suposto","suprimir","surdina","surfista","surpresa","surreal","surtir","suspiro","sustento","tabela","tablete","tabuada","tacho","tagarela","talher","talo","talvez","tamanho","tamborim","tampa","tangente","tanto","tapar","tapioca","tardio","tarefa","tarja","tarraxa","tatuagem","taurino","taxativo","taxista","teatral","tecer","tecido","teclado","tedioso","teia","teimar","telefone","telhado","tempero","tenente","tensor","tentar","termal","terno","terreno","tese","tesoura","testado","teto","textura","texugo","tiara","tigela","tijolo","timbrar","timidez","tingido","tinteiro","tiragem","titular","toalha","tocha","tolerar","tolice","tomada","tomilho","tonel","tontura","topete","tora","torcido","torneio","torque","torrada","torto","tostar","touca","toupeira","toxina","trabalho","tracejar","tradutor","trafegar","trajeto","trama","trancar","trapo","traseiro","tratador","travar","treino","tremer","trepidar","trevo","triagem","tribo","triciclo","tridente","trilogia","trindade","triplo","triturar","triunfal","trocar","trombeta","trova","trunfo","truque","tubular","tucano","tudo","tulipa","tupi","turbo","turma","turquesa","tutelar","tutorial","uivar","umbigo","unha","unidade","uniforme","urologia","urso","urtiga","urubu","usado","usina","usufruir","vacina","vadiar","vagaroso","vaidoso","vala","valente","validade","valores","vantagem","vaqueiro","varanda","vareta","varrer","vascular","vasilha","vassoura","vazar","vazio","veado","vedar","vegetar","veicular","veleiro","velhice","veludo","vencedor","vendaval","venerar","ventre","verbal","verdade","vereador","vergonha","vermelho","verniz","versar","vertente","vespa","vestido","vetorial","viaduto","viagem","viajar","viatura","vibrador","videira","vidraria","viela","viga","vigente","vigiar","vigorar","vilarejo","vinco","vinheta","vinil","violeta","virada","virtude","visitar","visto","vitral","viveiro","vizinho","voador","voar","vogal","volante","voleibol","voltagem","volumoso","vontade","vulto","vuvuzela","xadrez","xarope","xeque","xeretar","xerife","xingar","zangado","zarpar","zebu","zelador","zombar","zoologia","zumbido"]'),rw=JSON.parse('["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"]');var $p;function Vp(){if($p)return Kt;$p=1,Object.defineProperty(Kt,"__esModule",{value:!0});const r={};Kt.wordlists=r;let e;Kt._default=e;try{Kt._default=e=V_,r.czech=e}catch{}try{Kt._default=e=W_,r.chinese_simplified=e}catch{}try{Kt._default=e=Z_,r.chinese_traditional=e}catch{}try{Kt._default=e=J_,r.korean=e}catch{}try{Kt._default=e=Y_,r.french=e}catch{}try{Kt._default=e=X_,r.italian=e}catch{}try{Kt._default=e=Q_,r.spanish=e}catch{}try{Kt._default=e=ew,r.japanese=e,r.JA=e}catch{}try{Kt._default=e=tw,r.portuguese=e}catch{}try{Kt._default=e=rw,r.english=e,r.EN=e}catch{}return Kt}var Wp;function iw(){if(Wp)return cr;Wp=1,Object.defineProperty(cr,"__esModule",{value:!0});const r=q_(),e=G_(),t=$_(),i=Xn(),n=Vp();let o=n._default;const a="Invalid mnemonic",s="Invalid entropy",c="Invalid mnemonic checksum",u=`A wordlist is required but a default could not be found.
Please pass a 2048 word array explicitly.`;function p(D){return(D||"").normalize("NFKD")}function f(D,R,M){for(;D.length<M;)D=R+D;return D}function l(D){return parseInt(D,2)}function d(D){return D.map(R=>f(R.toString(2),"0",8)).join("")}function g(D){const M=D.length*8/32,q=r.sha256(Uint8Array.from(D));return d(Array.from(q)).slice(0,M)}function b(D){return"mnemonic"+(D||"")}function x(D,R){const M=Uint8Array.from(Buffer.from(p(D),"utf8")),q=Uint8Array.from(Buffer.from(b(p(R)),"utf8")),P=t.pbkdf2(e.sha512,M,q,{c:2048,dkLen:64});return Buffer.from(P)}cr.mnemonicToSeedSync=x;function _(D,R){const M=Uint8Array.from(Buffer.from(p(D),"utf8")),q=Uint8Array.from(Buffer.from(b(p(R)),"utf8"));return t.pbkdf2Async(e.sha512,M,q,{c:2048,dkLen:64}).then(P=>Buffer.from(P))}cr.mnemonicToSeed=_;function E(D,R){if(R=R||o,!R)throw new Error(u);const M=p(D).split(" ");if(M.length%3!==0)throw new Error(a);const q=M.map(k=>{const U=R.indexOf(k);if(U===-1)throw new Error(a);return f(U.toString(2),"0",11)}).join(""),P=Math.floor(q.length/33)*32,h=q.slice(0,P),y=q.slice(P),m=h.match(/(.{1,8})/g).map(l);if(m.length<16)throw new Error(s);if(m.length>32)throw new Error(s);if(m.length%4!==0)throw new Error(s);const S=Buffer.from(m);if(g(S)!==y)throw new Error(c);return S.toString("hex")}cr.mnemonicToEntropy=E;function O(D,R){if(Buffer.isBuffer(D)||(D=Buffer.from(D,"hex")),R=R||o,!R)throw new Error(u);if(D.length<16)throw new TypeError(s);if(D.length>32)throw new TypeError(s);if(D.length%4!==0)throw new TypeError(s);const M=d(Array.from(D)),q=g(D),y=(M+q).match(/(.{1,11})/g).map(m=>{const S=l(m);return R[S]});return R[0]===""?y.join(""):y.join(" ")}cr.entropyToMnemonic=O;function A(D,R,M){if(D=D||128,D%32!==0)throw new TypeError(s);return R=R||(q=>Buffer.from(i.randomBytes(q))),O(R(D/8),M)}cr.generateMnemonic=A;function B(D,R){try{E(D,R)}catch{return!1}return!0}cr.validateMnemonic=B;function N(D){const R=n.wordlists[D];if(R)o=R;else throw new Error('Could not find wordlist for language "'+D+'"')}cr.setDefaultWordlist=N;function v(){if(!o)throw new Error("No Default Wordlist set");return Object.keys(n.wordlists).filter(D=>D==="JA"||D==="EN"?!1:n.wordlists[D].every((R,M)=>R===o[M]))[0]}cr.getDefaultWordlist=v;var j=Vp();return cr.wordlists=j.wordlists,cr}var oa=iw(),On={},aa={},Zp;function nw(){if(Zp)return aa;Zp=1,Object.defineProperty(aa,"__esModule",{value:!0});function r(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}return aa.isSerializableHash=r,aa}var Jp;function ow(){if(Jp)return On;Jp=1,Object.defineProperty(On,"__esModule",{value:!0});var r=nw(),e=vg(),t=vn(),i=(function(){function o(a,s){this._finished=!1,this._inner=new a,this._outer=new a,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var c=new Uint8Array(this.blockSize);s.length>this.blockSize?this._inner.update(s).finish(c).clean():c.set(s);for(var u=0;u<c.length;u++)c[u]^=54;this._inner.update(c);for(var u=0;u<c.length;u++)c[u]^=106;this._outer.update(c),r.isSerializableHash(this._inner)&&r.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),t.wipe(c)}return o.prototype.reset=function(){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},o.prototype.clean=function(){r.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),r.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},o.prototype.update=function(a){return this._inner.update(a),this},o.prototype.finish=function(a){return this._finished?(this._outer.finish(a),this):(this._inner.finish(a),this._outer.update(a.subarray(0,this.digestLength)).finish(a),this._finished=!0,this)},o.prototype.digest=function(){var a=new Uint8Array(this.digestLength);return this.finish(a),a},o.prototype.saveState=function(){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},o.prototype.restoreState=function(a){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(a),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},o.prototype.cleanSavedState=function(a){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(a)},o})();On.HMAC=i;function n(o,a,s){var c=new i(o,a);c.update(s);var u=c.digest();return c.clean(),u}return On.hmac=n,On.equal=e.equal,On}var Ma=ow(),ja=tv(),va={exports:{}},aw=va.exports,Yp;function sw(){return Yp||(Yp=1,(function(r){(function(e,t){function i(P,h){if(!P)throw new Error(h||"Assertion failed")}function n(P,h){P.super_=h;var y=function(){};y.prototype=h.prototype,P.prototype=new y,P.prototype.constructor=P}function o(P,h,y){if(o.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((h==="le"||h==="be")&&(y=h,h=10),this._init(P||0,h||10,y||"be"))}typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Ja.Buffer}catch{}o.isBN=function(h){return h instanceof o?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===o.wordSize&&Array.isArray(h.words)},o.max=function(h,y){return h.cmp(y)>0?h:y},o.min=function(h,y){return h.cmp(y)<0?h:y},o.prototype._init=function(h,y,m){if(typeof h=="number")return this._initNumber(h,y,m);if(typeof h=="object")return this._initArray(h,y,m);y==="hex"&&(y=16),i(y===(y|0)&&y>=2&&y<=36),h=h.toString().replace(/\s+/g,"");var S=0;h[0]==="-"&&(S++,this.negative=1),S<h.length&&(y===16?this._parseHex(h,S,m):(this._parseBase(h,y,S),m==="le"&&this._initArray(this.toArray(),y,m)))},o.prototype._initNumber=function(h,y,m){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(i(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),y,m)},o.prototype._initArray=function(h,y,m){if(i(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var T,k,U=0;if(m==="be")for(S=h.length-1,T=0;S>=0;S-=3)k=h[S]|h[S-1]<<8|h[S-2]<<16,this.words[T]|=k<<U&67108863,this.words[T+1]=k>>>26-U&67108863,U+=24,U>=26&&(U-=26,T++);else if(m==="le")for(S=0,T=0;S<h.length;S+=3)k=h[S]|h[S+1]<<8|h[S+2]<<16,this.words[T]|=k<<U&67108863,this.words[T+1]=k>>>26-U&67108863,U+=24,U>=26&&(U-=26,T++);return this._strip()};function s(P,h){var y=P.charCodeAt(h);if(y>=48&&y<=57)return y-48;if(y>=65&&y<=70)return y-55;if(y>=97&&y<=102)return y-87;i(!1,"Invalid character in "+P)}function c(P,h,y){var m=s(P,y);return y-1>=h&&(m|=s(P,y-1)<<4),m}o.prototype._parseHex=function(h,y,m){this.length=Math.ceil((h.length-y)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var T=0,k=0,U;if(m==="be")for(S=h.length-1;S>=y;S-=2)U=c(h,y,S)<<T,this.words[k]|=U&67108863,T>=18?(T-=18,k+=1,this.words[k]|=U>>>26):T+=8;else{var I=h.length-y;for(S=I%2===0?y+1:y;S<h.length;S+=2)U=c(h,y,S)<<T,this.words[k]|=U&67108863,T>=18?(T-=18,k+=1,this.words[k]|=U>>>26):T+=8}this._strip()};function u(P,h,y,m){for(var S=0,T=0,k=Math.min(P.length,y),U=h;U<k;U++){var I=P.charCodeAt(U)-48;S*=m,I>=49?T=I-49+10:I>=17?T=I-17+10:T=I,i(I>=0&&T<m,"Invalid character"),S+=T}return S}o.prototype._parseBase=function(h,y,m){this.words=[0],this.length=1;for(var S=0,T=1;T<=67108863;T*=y)S++;S--,T=T/y|0;for(var k=h.length-m,U=k%S,I=Math.min(k,k-U)+m,w=0,L=m;L<I;L+=S)w=u(h,L,L+S,y),this.imuln(T),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w);if(U!==0){var J=1;for(w=u(h,L,h.length,y),L=0;L<U;L++)J*=y;this.imuln(J),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w)}this._strip()},o.prototype.copy=function(h){h.words=new Array(this.length);for(var y=0;y<this.length;y++)h.words[y]=this.words[y];h.length=this.length,h.negative=this.negative,h.red=this.red};function p(P,h){P.words=h.words,P.length=h.length,P.negative=h.negative,P.red=h.red}if(o.prototype._move=function(h){p(h,this)},o.prototype.clone=function(){var h=new o(null);return this.copy(h),h},o.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{o.prototype.inspect=f}else o.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(h,y){h=h||10,y=y|0||1;var m;if(h===16||h==="hex"){m="";for(var S=0,T=0,k=0;k<this.length;k++){var U=this.words[k],I=((U<<S|T)&16777215).toString(16);T=U>>>24-S&16777215,S+=2,S>=26&&(S-=26,k--),T!==0||k!==this.length-1?m=l[6-I.length]+I+m:m=I+m}for(T!==0&&(m=T.toString(16)+m);m.length%y!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(h===(h|0)&&h>=2&&h<=36){var w=d[h],L=g[h];m="";var J=this.clone();for(J.negative=0;!J.isZero();){var Y=J.modrn(L).toString(h);J=J.idivn(L),J.isZero()?m=Y+m:m=l[w-Y.length]+Y+m}for(this.isZero()&&(m="0"+m);m.length%y!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(h,y){return this.toArrayLike(a,h,y)}),o.prototype.toArray=function(h,y){return this.toArrayLike(Array,h,y)};var b=function(h,y){return h.allocUnsafe?h.allocUnsafe(y):new h(y)};o.prototype.toArrayLike=function(h,y,m){this._strip();var S=this.byteLength(),T=m||Math.max(1,S);i(S<=T,"byte array longer than desired length"),i(T>0,"Requested array length <= 0");var k=b(h,T),U=y==="le"?"LE":"BE";return this["_toArrayLike"+U](k,S),k},o.prototype._toArrayLikeLE=function(h,y){for(var m=0,S=0,T=0,k=0;T<this.length;T++){var U=this.words[T]<<k|S;h[m++]=U&255,m<h.length&&(h[m++]=U>>8&255),m<h.length&&(h[m++]=U>>16&255),k===6?(m<h.length&&(h[m++]=U>>24&255),S=0,k=0):(S=U>>>24,k+=2)}if(m<h.length)for(h[m++]=S;m<h.length;)h[m++]=0},o.prototype._toArrayLikeBE=function(h,y){for(var m=h.length-1,S=0,T=0,k=0;T<this.length;T++){var U=this.words[T]<<k|S;h[m--]=U&255,m>=0&&(h[m--]=U>>8&255),m>=0&&(h[m--]=U>>16&255),k===6?(m>=0&&(h[m--]=U>>24&255),S=0,k=0):(S=U>>>24,k+=2)}if(m>=0)for(h[m--]=S;m>=0;)h[m--]=0},Math.clz32?o.prototype._countBits=function(h){return 32-Math.clz32(h)}:o.prototype._countBits=function(h){var y=h,m=0;return y>=4096&&(m+=13,y>>>=13),y>=64&&(m+=7,y>>>=7),y>=8&&(m+=4,y>>>=4),y>=2&&(m+=2,y>>>=2),m+y},o.prototype._zeroBits=function(h){if(h===0)return 26;var y=h,m=0;return(y&8191)===0&&(m+=13,y>>>=13),(y&127)===0&&(m+=7,y>>>=7),(y&15)===0&&(m+=4,y>>>=4),(y&3)===0&&(m+=2,y>>>=2),(y&1)===0&&m++,m},o.prototype.bitLength=function(){var h=this.words[this.length-1],y=this._countBits(h);return(this.length-1)*26+y};function x(P){for(var h=new Array(P.bitLength()),y=0;y<h.length;y++){var m=y/26|0,S=y%26;h[y]=P.words[m]>>>S&1}return h}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,y=0;y<this.length;y++){var m=this._zeroBits(this.words[y]);if(h+=m,m!==26)break}return h},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},o.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]|h.words[y];return this._strip()},o.prototype.ior=function(h){return i((this.negative|h.negative)===0),this.iuor(h)},o.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},o.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},o.prototype.iuand=function(h){var y;this.length>h.length?y=h:y=this;for(var m=0;m<y.length;m++)this.words[m]=this.words[m]&h.words[m];return this.length=y.length,this._strip()},o.prototype.iand=function(h){return i((this.negative|h.negative)===0),this.iuand(h)},o.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},o.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},o.prototype.iuxor=function(h){var y,m;this.length>h.length?(y=this,m=h):(y=h,m=this);for(var S=0;S<m.length;S++)this.words[S]=y.words[S]^m.words[S];if(this!==y)for(;S<y.length;S++)this.words[S]=y.words[S];return this.length=y.length,this._strip()},o.prototype.ixor=function(h){return i((this.negative|h.negative)===0),this.iuxor(h)},o.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},o.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},o.prototype.inotn=function(h){i(typeof h=="number"&&h>=0);var y=Math.ceil(h/26)|0,m=h%26;this._expand(y),m>0&&y--;for(var S=0;S<y;S++)this.words[S]=~this.words[S]&67108863;return m>0&&(this.words[S]=~this.words[S]&67108863>>26-m),this._strip()},o.prototype.notn=function(h){return this.clone().inotn(h)},o.prototype.setn=function(h,y){i(typeof h=="number"&&h>=0);var m=h/26|0,S=h%26;return this._expand(m+1),y?this.words[m]=this.words[m]|1<<S:this.words[m]=this.words[m]&~(1<<S),this._strip()},o.prototype.iadd=function(h){var y;if(this.negative!==0&&h.negative===0)return this.negative=0,y=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,y=this.isub(h),h.negative=1,y._normSign();var m,S;this.length>h.length?(m=this,S=h):(m=h,S=this);for(var T=0,k=0;k<S.length;k++)y=(m.words[k]|0)+(S.words[k]|0)+T,this.words[k]=y&67108863,T=y>>>26;for(;T!==0&&k<m.length;k++)y=(m.words[k]|0)+T,this.words[k]=y&67108863,T=y>>>26;if(this.length=m.length,T!==0)this.words[this.length]=T,this.length++;else if(m!==this)for(;k<m.length;k++)this.words[k]=m.words[k];return this},o.prototype.add=function(h){var y;return h.negative!==0&&this.negative===0?(h.negative=0,y=this.sub(h),h.negative^=1,y):h.negative===0&&this.negative!==0?(this.negative=0,y=h.sub(this),this.negative=1,y):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},o.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var y=this.iadd(h);return h.negative=1,y._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var m=this.cmp(h);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,T;m>0?(S=this,T=h):(S=h,T=this);for(var k=0,U=0;U<T.length;U++)y=(S.words[U]|0)-(T.words[U]|0)+k,k=y>>26,this.words[U]=y&67108863;for(;k!==0&&U<S.length;U++)y=(S.words[U]|0)+k,k=y>>26,this.words[U]=y&67108863;if(k===0&&U<S.length&&S!==this)for(;U<S.length;U++)this.words[U]=S.words[U];return this.length=Math.max(this.length,U),S!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(h){return this.clone().isub(h)};function _(P,h,y){y.negative=h.negative^P.negative;var m=P.length+h.length|0;y.length=m,m=m-1|0;var S=P.words[0]|0,T=h.words[0]|0,k=S*T,U=k&67108863,I=k/67108864|0;y.words[0]=U;for(var w=1;w<m;w++){for(var L=I>>>26,J=I&67108863,Y=Math.min(w,h.length-1),C=Math.max(0,w-P.length+1);C<=Y;C++){var K=w-C|0;S=P.words[K]|0,T=h.words[C]|0,k=S*T+J,L+=k/67108864|0,J=k&67108863}y.words[w]=J|0,I=L|0}return I!==0?y.words[w]=I|0:y.length--,y._strip()}var E=function(h,y,m){var S=h.words,T=y.words,k=m.words,U=0,I,w,L,J=S[0]|0,Y=J&8191,C=J>>>13,K=S[1]|0,$=K&8191,Z=K>>>13,Q=S[2]|0,z=Q&8191,H=Q>>>13,W=S[3]|0,ee=W&8191,ne=W>>>13,ie=S[4]|0,oe=ie&8191,Ee=ie>>>13,jt=S[5]|0,fe=jt&8191,re=jt>>>13,ke=S[6]|0,he=ke&8191,ge=ke>>>13,Je=S[7]|0,ve=Je&8191,be=Je>>>13,Fe=S[8]|0,Se=Fe&8191,Ae=Fe>>>13,St=S[9]|0,Re=St&8191,Oe=St>>>13,At=T[0]|0,Pe=At&8191,nt=At>>>13,Jf=T[1]|0,ot=Jf&8191,at=Jf>>>13,Yf=T[2]|0,st=Yf&8191,ct=Yf>>>13,Xf=T[3]|0,ut=Xf&8191,lt=Xf>>>13,Qf=T[4]|0,ft=Qf&8191,ht=Qf>>>13,eh=T[5]|0,dt=eh&8191,pt=eh>>>13,th=T[6]|0,gt=th&8191,mt=th>>>13,rh=T[7]|0,bt=rh&8191,vt=rh>>>13,ih=T[8]|0,yt=ih&8191,_t=ih>>>13,nh=T[9]|0,wt=nh&8191,Et=nh>>>13;m.negative=h.negative^y.negative,m.length=19,I=Math.imul(Y,Pe),w=Math.imul(Y,nt),w=w+Math.imul(C,Pe)|0,L=Math.imul(C,nt);var Ts=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,I=Math.imul($,Pe),w=Math.imul($,nt),w=w+Math.imul(Z,Pe)|0,L=Math.imul(Z,nt),I=I+Math.imul(Y,ot)|0,w=w+Math.imul(Y,at)|0,w=w+Math.imul(C,ot)|0,L=L+Math.imul(C,at)|0;var ks=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(ks>>>26)|0,ks&=67108863,I=Math.imul(z,Pe),w=Math.imul(z,nt),w=w+Math.imul(H,Pe)|0,L=Math.imul(H,nt),I=I+Math.imul($,ot)|0,w=w+Math.imul($,at)|0,w=w+Math.imul(Z,ot)|0,L=L+Math.imul(Z,at)|0,I=I+Math.imul(Y,st)|0,w=w+Math.imul(Y,ct)|0,w=w+Math.imul(C,st)|0,L=L+Math.imul(C,ct)|0;var Is=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Is>>>26)|0,Is&=67108863,I=Math.imul(ee,Pe),w=Math.imul(ee,nt),w=w+Math.imul(ne,Pe)|0,L=Math.imul(ne,nt),I=I+Math.imul(z,ot)|0,w=w+Math.imul(z,at)|0,w=w+Math.imul(H,ot)|0,L=L+Math.imul(H,at)|0,I=I+Math.imul($,st)|0,w=w+Math.imul($,ct)|0,w=w+Math.imul(Z,st)|0,L=L+Math.imul(Z,ct)|0,I=I+Math.imul(Y,ut)|0,w=w+Math.imul(Y,lt)|0,w=w+Math.imul(C,ut)|0,L=L+Math.imul(C,lt)|0;var Ls=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,I=Math.imul(oe,Pe),w=Math.imul(oe,nt),w=w+Math.imul(Ee,Pe)|0,L=Math.imul(Ee,nt),I=I+Math.imul(ee,ot)|0,w=w+Math.imul(ee,at)|0,w=w+Math.imul(ne,ot)|0,L=L+Math.imul(ne,at)|0,I=I+Math.imul(z,st)|0,w=w+Math.imul(z,ct)|0,w=w+Math.imul(H,st)|0,L=L+Math.imul(H,ct)|0,I=I+Math.imul($,ut)|0,w=w+Math.imul($,lt)|0,w=w+Math.imul(Z,ut)|0,L=L+Math.imul(Z,lt)|0,I=I+Math.imul(Y,ft)|0,w=w+Math.imul(Y,ht)|0,w=w+Math.imul(C,ft)|0,L=L+Math.imul(C,ht)|0;var Ns=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,I=Math.imul(fe,Pe),w=Math.imul(fe,nt),w=w+Math.imul(re,Pe)|0,L=Math.imul(re,nt),I=I+Math.imul(oe,ot)|0,w=w+Math.imul(oe,at)|0,w=w+Math.imul(Ee,ot)|0,L=L+Math.imul(Ee,at)|0,I=I+Math.imul(ee,st)|0,w=w+Math.imul(ee,ct)|0,w=w+Math.imul(ne,st)|0,L=L+Math.imul(ne,ct)|0,I=I+Math.imul(z,ut)|0,w=w+Math.imul(z,lt)|0,w=w+Math.imul(H,ut)|0,L=L+Math.imul(H,lt)|0,I=I+Math.imul($,ft)|0,w=w+Math.imul($,ht)|0,w=w+Math.imul(Z,ft)|0,L=L+Math.imul(Z,ht)|0,I=I+Math.imul(Y,dt)|0,w=w+Math.imul(Y,pt)|0,w=w+Math.imul(C,dt)|0,L=L+Math.imul(C,pt)|0;var Bs=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,I=Math.imul(he,Pe),w=Math.imul(he,nt),w=w+Math.imul(ge,Pe)|0,L=Math.imul(ge,nt),I=I+Math.imul(fe,ot)|0,w=w+Math.imul(fe,at)|0,w=w+Math.imul(re,ot)|0,L=L+Math.imul(re,at)|0,I=I+Math.imul(oe,st)|0,w=w+Math.imul(oe,ct)|0,w=w+Math.imul(Ee,st)|0,L=L+Math.imul(Ee,ct)|0,I=I+Math.imul(ee,ut)|0,w=w+Math.imul(ee,lt)|0,w=w+Math.imul(ne,ut)|0,L=L+Math.imul(ne,lt)|0,I=I+Math.imul(z,ft)|0,w=w+Math.imul(z,ht)|0,w=w+Math.imul(H,ft)|0,L=L+Math.imul(H,ht)|0,I=I+Math.imul($,dt)|0,w=w+Math.imul($,pt)|0,w=w+Math.imul(Z,dt)|0,L=L+Math.imul(Z,pt)|0,I=I+Math.imul(Y,gt)|0,w=w+Math.imul(Y,mt)|0,w=w+Math.imul(C,gt)|0,L=L+Math.imul(C,mt)|0;var Ms=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,I=Math.imul(ve,Pe),w=Math.imul(ve,nt),w=w+Math.imul(be,Pe)|0,L=Math.imul(be,nt),I=I+Math.imul(he,ot)|0,w=w+Math.imul(he,at)|0,w=w+Math.imul(ge,ot)|0,L=L+Math.imul(ge,at)|0,I=I+Math.imul(fe,st)|0,w=w+Math.imul(fe,ct)|0,w=w+Math.imul(re,st)|0,L=L+Math.imul(re,ct)|0,I=I+Math.imul(oe,ut)|0,w=w+Math.imul(oe,lt)|0,w=w+Math.imul(Ee,ut)|0,L=L+Math.imul(Ee,lt)|0,I=I+Math.imul(ee,ft)|0,w=w+Math.imul(ee,ht)|0,w=w+Math.imul(ne,ft)|0,L=L+Math.imul(ne,ht)|0,I=I+Math.imul(z,dt)|0,w=w+Math.imul(z,pt)|0,w=w+Math.imul(H,dt)|0,L=L+Math.imul(H,pt)|0,I=I+Math.imul($,gt)|0,w=w+Math.imul($,mt)|0,w=w+Math.imul(Z,gt)|0,L=L+Math.imul(Z,mt)|0,I=I+Math.imul(Y,bt)|0,w=w+Math.imul(Y,vt)|0,w=w+Math.imul(C,bt)|0,L=L+Math.imul(C,vt)|0;var js=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(js>>>26)|0,js&=67108863,I=Math.imul(Se,Pe),w=Math.imul(Se,nt),w=w+Math.imul(Ae,Pe)|0,L=Math.imul(Ae,nt),I=I+Math.imul(ve,ot)|0,w=w+Math.imul(ve,at)|0,w=w+Math.imul(be,ot)|0,L=L+Math.imul(be,at)|0,I=I+Math.imul(he,st)|0,w=w+Math.imul(he,ct)|0,w=w+Math.imul(ge,st)|0,L=L+Math.imul(ge,ct)|0,I=I+Math.imul(fe,ut)|0,w=w+Math.imul(fe,lt)|0,w=w+Math.imul(re,ut)|0,L=L+Math.imul(re,lt)|0,I=I+Math.imul(oe,ft)|0,w=w+Math.imul(oe,ht)|0,w=w+Math.imul(Ee,ft)|0,L=L+Math.imul(Ee,ht)|0,I=I+Math.imul(ee,dt)|0,w=w+Math.imul(ee,pt)|0,w=w+Math.imul(ne,dt)|0,L=L+Math.imul(ne,pt)|0,I=I+Math.imul(z,gt)|0,w=w+Math.imul(z,mt)|0,w=w+Math.imul(H,gt)|0,L=L+Math.imul(H,mt)|0,I=I+Math.imul($,bt)|0,w=w+Math.imul($,vt)|0,w=w+Math.imul(Z,bt)|0,L=L+Math.imul(Z,vt)|0,I=I+Math.imul(Y,yt)|0,w=w+Math.imul(Y,_t)|0,w=w+Math.imul(C,yt)|0,L=L+Math.imul(C,_t)|0;var Cs=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,I=Math.imul(Re,Pe),w=Math.imul(Re,nt),w=w+Math.imul(Oe,Pe)|0,L=Math.imul(Oe,nt),I=I+Math.imul(Se,ot)|0,w=w+Math.imul(Se,at)|0,w=w+Math.imul(Ae,ot)|0,L=L+Math.imul(Ae,at)|0,I=I+Math.imul(ve,st)|0,w=w+Math.imul(ve,ct)|0,w=w+Math.imul(be,st)|0,L=L+Math.imul(be,ct)|0,I=I+Math.imul(he,ut)|0,w=w+Math.imul(he,lt)|0,w=w+Math.imul(ge,ut)|0,L=L+Math.imul(ge,lt)|0,I=I+Math.imul(fe,ft)|0,w=w+Math.imul(fe,ht)|0,w=w+Math.imul(re,ft)|0,L=L+Math.imul(re,ht)|0,I=I+Math.imul(oe,dt)|0,w=w+Math.imul(oe,pt)|0,w=w+Math.imul(Ee,dt)|0,L=L+Math.imul(Ee,pt)|0,I=I+Math.imul(ee,gt)|0,w=w+Math.imul(ee,mt)|0,w=w+Math.imul(ne,gt)|0,L=L+Math.imul(ne,mt)|0,I=I+Math.imul(z,bt)|0,w=w+Math.imul(z,vt)|0,w=w+Math.imul(H,bt)|0,L=L+Math.imul(H,vt)|0,I=I+Math.imul($,yt)|0,w=w+Math.imul($,_t)|0,w=w+Math.imul(Z,yt)|0,L=L+Math.imul(Z,_t)|0,I=I+Math.imul(Y,wt)|0,w=w+Math.imul(Y,Et)|0,w=w+Math.imul(C,wt)|0,L=L+Math.imul(C,Et)|0;var zs=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(zs>>>26)|0,zs&=67108863,I=Math.imul(Re,ot),w=Math.imul(Re,at),w=w+Math.imul(Oe,ot)|0,L=Math.imul(Oe,at),I=I+Math.imul(Se,st)|0,w=w+Math.imul(Se,ct)|0,w=w+Math.imul(Ae,st)|0,L=L+Math.imul(Ae,ct)|0,I=I+Math.imul(ve,ut)|0,w=w+Math.imul(ve,lt)|0,w=w+Math.imul(be,ut)|0,L=L+Math.imul(be,lt)|0,I=I+Math.imul(he,ft)|0,w=w+Math.imul(he,ht)|0,w=w+Math.imul(ge,ft)|0,L=L+Math.imul(ge,ht)|0,I=I+Math.imul(fe,dt)|0,w=w+Math.imul(fe,pt)|0,w=w+Math.imul(re,dt)|0,L=L+Math.imul(re,pt)|0,I=I+Math.imul(oe,gt)|0,w=w+Math.imul(oe,mt)|0,w=w+Math.imul(Ee,gt)|0,L=L+Math.imul(Ee,mt)|0,I=I+Math.imul(ee,bt)|0,w=w+Math.imul(ee,vt)|0,w=w+Math.imul(ne,bt)|0,L=L+Math.imul(ne,vt)|0,I=I+Math.imul(z,yt)|0,w=w+Math.imul(z,_t)|0,w=w+Math.imul(H,yt)|0,L=L+Math.imul(H,_t)|0,I=I+Math.imul($,wt)|0,w=w+Math.imul($,Et)|0,w=w+Math.imul(Z,wt)|0,L=L+Math.imul(Z,Et)|0;var Hs=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Hs>>>26)|0,Hs&=67108863,I=Math.imul(Re,st),w=Math.imul(Re,ct),w=w+Math.imul(Oe,st)|0,L=Math.imul(Oe,ct),I=I+Math.imul(Se,ut)|0,w=w+Math.imul(Se,lt)|0,w=w+Math.imul(Ae,ut)|0,L=L+Math.imul(Ae,lt)|0,I=I+Math.imul(ve,ft)|0,w=w+Math.imul(ve,ht)|0,w=w+Math.imul(be,ft)|0,L=L+Math.imul(be,ht)|0,I=I+Math.imul(he,dt)|0,w=w+Math.imul(he,pt)|0,w=w+Math.imul(ge,dt)|0,L=L+Math.imul(ge,pt)|0,I=I+Math.imul(fe,gt)|0,w=w+Math.imul(fe,mt)|0,w=w+Math.imul(re,gt)|0,L=L+Math.imul(re,mt)|0,I=I+Math.imul(oe,bt)|0,w=w+Math.imul(oe,vt)|0,w=w+Math.imul(Ee,bt)|0,L=L+Math.imul(Ee,vt)|0,I=I+Math.imul(ee,yt)|0,w=w+Math.imul(ee,_t)|0,w=w+Math.imul(ne,yt)|0,L=L+Math.imul(ne,_t)|0,I=I+Math.imul(z,wt)|0,w=w+Math.imul(z,Et)|0,w=w+Math.imul(H,wt)|0,L=L+Math.imul(H,Et)|0;var Ds=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,I=Math.imul(Re,ut),w=Math.imul(Re,lt),w=w+Math.imul(Oe,ut)|0,L=Math.imul(Oe,lt),I=I+Math.imul(Se,ft)|0,w=w+Math.imul(Se,ht)|0,w=w+Math.imul(Ae,ft)|0,L=L+Math.imul(Ae,ht)|0,I=I+Math.imul(ve,dt)|0,w=w+Math.imul(ve,pt)|0,w=w+Math.imul(be,dt)|0,L=L+Math.imul(be,pt)|0,I=I+Math.imul(he,gt)|0,w=w+Math.imul(he,mt)|0,w=w+Math.imul(ge,gt)|0,L=L+Math.imul(ge,mt)|0,I=I+Math.imul(fe,bt)|0,w=w+Math.imul(fe,vt)|0,w=w+Math.imul(re,bt)|0,L=L+Math.imul(re,vt)|0,I=I+Math.imul(oe,yt)|0,w=w+Math.imul(oe,_t)|0,w=w+Math.imul(Ee,yt)|0,L=L+Math.imul(Ee,_t)|0,I=I+Math.imul(ee,wt)|0,w=w+Math.imul(ee,Et)|0,w=w+Math.imul(ne,wt)|0,L=L+Math.imul(ne,Et)|0;var Us=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Us>>>26)|0,Us&=67108863,I=Math.imul(Re,ft),w=Math.imul(Re,ht),w=w+Math.imul(Oe,ft)|0,L=Math.imul(Oe,ht),I=I+Math.imul(Se,dt)|0,w=w+Math.imul(Se,pt)|0,w=w+Math.imul(Ae,dt)|0,L=L+Math.imul(Ae,pt)|0,I=I+Math.imul(ve,gt)|0,w=w+Math.imul(ve,mt)|0,w=w+Math.imul(be,gt)|0,L=L+Math.imul(be,mt)|0,I=I+Math.imul(he,bt)|0,w=w+Math.imul(he,vt)|0,w=w+Math.imul(ge,bt)|0,L=L+Math.imul(ge,vt)|0,I=I+Math.imul(fe,yt)|0,w=w+Math.imul(fe,_t)|0,w=w+Math.imul(re,yt)|0,L=L+Math.imul(re,_t)|0,I=I+Math.imul(oe,wt)|0,w=w+Math.imul(oe,Et)|0,w=w+Math.imul(Ee,wt)|0,L=L+Math.imul(Ee,Et)|0;var qs=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(qs>>>26)|0,qs&=67108863,I=Math.imul(Re,dt),w=Math.imul(Re,pt),w=w+Math.imul(Oe,dt)|0,L=Math.imul(Oe,pt),I=I+Math.imul(Se,gt)|0,w=w+Math.imul(Se,mt)|0,w=w+Math.imul(Ae,gt)|0,L=L+Math.imul(Ae,mt)|0,I=I+Math.imul(ve,bt)|0,w=w+Math.imul(ve,vt)|0,w=w+Math.imul(be,bt)|0,L=L+Math.imul(be,vt)|0,I=I+Math.imul(he,yt)|0,w=w+Math.imul(he,_t)|0,w=w+Math.imul(ge,yt)|0,L=L+Math.imul(ge,_t)|0,I=I+Math.imul(fe,wt)|0,w=w+Math.imul(fe,Et)|0,w=w+Math.imul(re,wt)|0,L=L+Math.imul(re,Et)|0;var Fs=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,I=Math.imul(Re,gt),w=Math.imul(Re,mt),w=w+Math.imul(Oe,gt)|0,L=Math.imul(Oe,mt),I=I+Math.imul(Se,bt)|0,w=w+Math.imul(Se,vt)|0,w=w+Math.imul(Ae,bt)|0,L=L+Math.imul(Ae,vt)|0,I=I+Math.imul(ve,yt)|0,w=w+Math.imul(ve,_t)|0,w=w+Math.imul(be,yt)|0,L=L+Math.imul(be,_t)|0,I=I+Math.imul(he,wt)|0,w=w+Math.imul(he,Et)|0,w=w+Math.imul(ge,wt)|0,L=L+Math.imul(ge,Et)|0;var Gs=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Gs>>>26)|0,Gs&=67108863,I=Math.imul(Re,bt),w=Math.imul(Re,vt),w=w+Math.imul(Oe,bt)|0,L=Math.imul(Oe,vt),I=I+Math.imul(Se,yt)|0,w=w+Math.imul(Se,_t)|0,w=w+Math.imul(Ae,yt)|0,L=L+Math.imul(Ae,_t)|0,I=I+Math.imul(ve,wt)|0,w=w+Math.imul(ve,Et)|0,w=w+Math.imul(be,wt)|0,L=L+Math.imul(be,Et)|0;var Ks=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,I=Math.imul(Re,yt),w=Math.imul(Re,_t),w=w+Math.imul(Oe,yt)|0,L=Math.imul(Oe,_t),I=I+Math.imul(Se,wt)|0,w=w+Math.imul(Se,Et)|0,w=w+Math.imul(Ae,wt)|0,L=L+Math.imul(Ae,Et)|0;var $s=(U+I|0)+((w&8191)<<13)|0;U=(L+(w>>>13)|0)+($s>>>26)|0,$s&=67108863,I=Math.imul(Re,wt),w=Math.imul(Re,Et),w=w+Math.imul(Oe,wt)|0,L=Math.imul(Oe,Et);var Vs=(U+I|0)+((w&8191)<<13)|0;return U=(L+(w>>>13)|0)+(Vs>>>26)|0,Vs&=67108863,k[0]=Ts,k[1]=ks,k[2]=Is,k[3]=Ls,k[4]=Ns,k[5]=Bs,k[6]=Ms,k[7]=js,k[8]=Cs,k[9]=zs,k[10]=Hs,k[11]=Ds,k[12]=Us,k[13]=qs,k[14]=Fs,k[15]=Gs,k[16]=Ks,k[17]=$s,k[18]=Vs,U!==0&&(k[19]=U,m.length++),m};Math.imul||(E=_);function O(P,h,y){y.negative=h.negative^P.negative,y.length=P.length+h.length;for(var m=0,S=0,T=0;T<y.length-1;T++){var k=S;S=0;for(var U=m&67108863,I=Math.min(T,h.length-1),w=Math.max(0,T-P.length+1);w<=I;w++){var L=T-w,J=P.words[L]|0,Y=h.words[w]|0,C=J*Y,K=C&67108863;k=k+(C/67108864|0)|0,K=K+U|0,U=K&67108863,k=k+(K>>>26)|0,S+=k>>>26,k&=67108863}y.words[T]=U,m=k,k=S}return m!==0?y.words[T]=m:y.length--,y._strip()}function A(P,h,y){return O(P,h,y)}o.prototype.mulTo=function(h,y){var m,S=this.length+h.length;return this.length===10&&h.length===10?m=E(this,h,y):S<63?m=_(this,h,y):S<1024?m=O(this,h,y):m=A(this,h,y),m},o.prototype.mul=function(h){var y=new o(null);return y.words=new Array(this.length+h.length),this.mulTo(h,y)},o.prototype.mulf=function(h){var y=new o(null);return y.words=new Array(this.length+h.length),A(this,h,y)},o.prototype.imul=function(h){return this.clone().mulTo(h,this)},o.prototype.imuln=function(h){var y=h<0;y&&(h=-h),i(typeof h=="number"),i(h<67108864);for(var m=0,S=0;S<this.length;S++){var T=(this.words[S]|0)*h,k=(T&67108863)+(m&67108863);m>>=26,m+=T/67108864|0,m+=k>>>26,this.words[S]=k&67108863}return m!==0&&(this.words[S]=m,this.length++),this.length=h===0?1:this.length,y?this.ineg():this},o.prototype.muln=function(h){return this.clone().imuln(h)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(h){var y=x(h);if(y.length===0)return new o(1);for(var m=this,S=0;S<y.length&&y[S]===0;S++,m=m.sqr());if(++S<y.length)for(var T=m.sqr();S<y.length;S++,T=T.sqr())y[S]!==0&&(m=m.mul(T));return m},o.prototype.iushln=function(h){i(typeof h=="number"&&h>=0);var y=h%26,m=(h-y)/26,S=67108863>>>26-y<<26-y,T;if(y!==0){var k=0;for(T=0;T<this.length;T++){var U=this.words[T]&S,I=(this.words[T]|0)-U<<y;this.words[T]=I|k,k=U>>>26-y}k&&(this.words[T]=k,this.length++)}if(m!==0){for(T=this.length-1;T>=0;T--)this.words[T+m]=this.words[T];for(T=0;T<m;T++)this.words[T]=0;this.length+=m}return this._strip()},o.prototype.ishln=function(h){return i(this.negative===0),this.iushln(h)},o.prototype.iushrn=function(h,y,m){i(typeof h=="number"&&h>=0);var S;y?S=(y-y%26)/26:S=0;var T=h%26,k=Math.min((h-T)/26,this.length),U=67108863^67108863>>>T<<T,I=m;if(S-=k,S=Math.max(0,S),I){for(var w=0;w<k;w++)I.words[w]=this.words[w];I.length=k}if(k!==0)if(this.length>k)for(this.length-=k,w=0;w<this.length;w++)this.words[w]=this.words[w+k];else this.words[0]=0,this.length=1;var L=0;for(w=this.length-1;w>=0&&(L!==0||w>=S);w--){var J=this.words[w]|0;this.words[w]=L<<26-T|J>>>T,L=J&U}return I&&L!==0&&(I.words[I.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(h,y,m){return i(this.negative===0),this.iushrn(h,y,m)},o.prototype.shln=function(h){return this.clone().ishln(h)},o.prototype.ushln=function(h){return this.clone().iushln(h)},o.prototype.shrn=function(h){return this.clone().ishrn(h)},o.prototype.ushrn=function(h){return this.clone().iushrn(h)},o.prototype.testn=function(h){i(typeof h=="number"&&h>=0);var y=h%26,m=(h-y)/26,S=1<<y;if(this.length<=m)return!1;var T=this.words[m];return!!(T&S)},o.prototype.imaskn=function(h){i(typeof h=="number"&&h>=0);var y=h%26,m=(h-y)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(y!==0&&m++,this.length=Math.min(m,this.length),y!==0){var S=67108863^67108863>>>y<<y;this.words[this.length-1]&=S}return this._strip()},o.prototype.maskn=function(h){return this.clone().imaskn(h)},o.prototype.iaddn=function(h){return i(typeof h=="number"),i(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<=h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},o.prototype._iaddn=function(h){this.words[0]+=h;for(var y=0;y<this.length&&this.words[y]>=67108864;y++)this.words[y]-=67108864,y===this.length-1?this.words[y+1]=1:this.words[y+1]++;return this.length=Math.max(this.length,y+1),this},o.prototype.isubn=function(h){if(i(typeof h=="number"),i(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var y=0;y<this.length&&this.words[y]<0;y++)this.words[y]+=67108864,this.words[y+1]-=1;return this._strip()},o.prototype.addn=function(h){return this.clone().iaddn(h)},o.prototype.subn=function(h){return this.clone().isubn(h)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(h,y,m){var S=h.length+m,T;this._expand(S);var k,U=0;for(T=0;T<h.length;T++){k=(this.words[T+m]|0)+U;var I=(h.words[T]|0)*y;k-=I&67108863,U=(k>>26)-(I/67108864|0),this.words[T+m]=k&67108863}for(;T<this.length-m;T++)k=(this.words[T+m]|0)+U,U=k>>26,this.words[T+m]=k&67108863;if(U===0)return this._strip();for(i(U===-1),U=0,T=0;T<this.length;T++)k=-(this.words[T]|0)+U,U=k>>26,this.words[T]=k&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(h,y){var m=this.length-h.length,S=this.clone(),T=h,k=T.words[T.length-1]|0,U=this._countBits(k);m=26-U,m!==0&&(T=T.ushln(m),S.iushln(m),k=T.words[T.length-1]|0);var I=S.length-T.length,w;if(y!=="mod"){w=new o(null),w.length=I+1,w.words=new Array(w.length);for(var L=0;L<w.length;L++)w.words[L]=0}var J=S.clone()._ishlnsubmul(T,1,I);J.negative===0&&(S=J,w&&(w.words[I]=1));for(var Y=I-1;Y>=0;Y--){var C=(S.words[T.length+Y]|0)*67108864+(S.words[T.length+Y-1]|0);for(C=Math.min(C/k|0,67108863),S._ishlnsubmul(T,C,Y);S.negative!==0;)C--,S.negative=0,S._ishlnsubmul(T,1,Y),S.isZero()||(S.negative^=1);w&&(w.words[Y]=C)}return w&&w._strip(),S._strip(),y!=="div"&&m!==0&&S.iushrn(m),{div:w||null,mod:S}},o.prototype.divmod=function(h,y,m){if(i(!h.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var S,T,k;return this.negative!==0&&h.negative===0?(k=this.neg().divmod(h,y),y!=="mod"&&(S=k.div.neg()),y!=="div"&&(T=k.mod.neg(),m&&T.negative!==0&&T.iadd(h)),{div:S,mod:T}):this.negative===0&&h.negative!==0?(k=this.divmod(h.neg(),y),y!=="mod"&&(S=k.div.neg()),{div:S,mod:k.mod}):(this.negative&h.negative)!==0?(k=this.neg().divmod(h.neg(),y),y!=="div"&&(T=k.mod.neg(),m&&T.negative!==0&&T.isub(h)),{div:k.div,mod:T}):h.length>this.length||this.cmp(h)<0?{div:new o(0),mod:this}:h.length===1?y==="div"?{div:this.divn(h.words[0]),mod:null}:y==="mod"?{div:null,mod:new o(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new o(this.modrn(h.words[0]))}:this._wordDiv(h,y)},o.prototype.div=function(h){return this.divmod(h,"div",!1).div},o.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},o.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},o.prototype.divRound=function(h){var y=this.divmod(h);if(y.mod.isZero())return y.div;var m=y.div.negative!==0?y.mod.isub(h):y.mod,S=h.ushrn(1),T=h.andln(1),k=m.cmp(S);return k<0||T===1&&k===0?y.div:y.div.negative!==0?y.div.isubn(1):y.div.iaddn(1)},o.prototype.modrn=function(h){var y=h<0;y&&(h=-h),i(h<=67108863);for(var m=(1<<26)%h,S=0,T=this.length-1;T>=0;T--)S=(m*S+(this.words[T]|0))%h;return y?-S:S},o.prototype.modn=function(h){return this.modrn(h)},o.prototype.idivn=function(h){var y=h<0;y&&(h=-h),i(h<=67108863);for(var m=0,S=this.length-1;S>=0;S--){var T=(this.words[S]|0)+m*67108864;this.words[S]=T/h|0,m=T%h}return this._strip(),y?this.ineg():this},o.prototype.divn=function(h){return this.clone().idivn(h)},o.prototype.egcd=function(h){i(h.negative===0),i(!h.isZero());var y=this,m=h.clone();y.negative!==0?y=y.umod(h):y=y.clone();for(var S=new o(1),T=new o(0),k=new o(0),U=new o(1),I=0;y.isEven()&&m.isEven();)y.iushrn(1),m.iushrn(1),++I;for(var w=m.clone(),L=y.clone();!y.isZero();){for(var J=0,Y=1;(y.words[0]&Y)===0&&J<26;++J,Y<<=1);if(J>0)for(y.iushrn(J);J-- >0;)(S.isOdd()||T.isOdd())&&(S.iadd(w),T.isub(L)),S.iushrn(1),T.iushrn(1);for(var C=0,K=1;(m.words[0]&K)===0&&C<26;++C,K<<=1);if(C>0)for(m.iushrn(C);C-- >0;)(k.isOdd()||U.isOdd())&&(k.iadd(w),U.isub(L)),k.iushrn(1),U.iushrn(1);y.cmp(m)>=0?(y.isub(m),S.isub(k),T.isub(U)):(m.isub(y),k.isub(S),U.isub(T))}return{a:k,b:U,gcd:m.iushln(I)}},o.prototype._invmp=function(h){i(h.negative===0),i(!h.isZero());var y=this,m=h.clone();y.negative!==0?y=y.umod(h):y=y.clone();for(var S=new o(1),T=new o(0),k=m.clone();y.cmpn(1)>0&&m.cmpn(1)>0;){for(var U=0,I=1;(y.words[0]&I)===0&&U<26;++U,I<<=1);if(U>0)for(y.iushrn(U);U-- >0;)S.isOdd()&&S.iadd(k),S.iushrn(1);for(var w=0,L=1;(m.words[0]&L)===0&&w<26;++w,L<<=1);if(w>0)for(m.iushrn(w);w-- >0;)T.isOdd()&&T.iadd(k),T.iushrn(1);y.cmp(m)>=0?(y.isub(m),S.isub(T)):(m.isub(y),T.isub(S))}var J;return y.cmpn(1)===0?J=S:J=T,J.cmpn(0)<0&&J.iadd(h),J},o.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var y=this.clone(),m=h.clone();y.negative=0,m.negative=0;for(var S=0;y.isEven()&&m.isEven();S++)y.iushrn(1),m.iushrn(1);do{for(;y.isEven();)y.iushrn(1);for(;m.isEven();)m.iushrn(1);var T=y.cmp(m);if(T<0){var k=y;y=m,m=k}else if(T===0||m.cmpn(1)===0)break;y.isub(m)}while(!0);return m.iushln(S)},o.prototype.invm=function(h){return this.egcd(h).a.umod(h)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(h){return this.words[0]&h},o.prototype.bincn=function(h){i(typeof h=="number");var y=h%26,m=(h-y)/26,S=1<<y;if(this.length<=m)return this._expand(m+1),this.words[m]|=S,this;for(var T=S,k=m;T!==0&&k<this.length;k++){var U=this.words[k]|0;U+=T,T=U>>>26,U&=67108863,this.words[k]=U}return T!==0&&(this.words[k]=T,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(h){var y=h<0;if(this.negative!==0&&!y)return-1;if(this.negative===0&&y)return 1;this._strip();var m;if(this.length>1)m=1;else{y&&(h=-h),i(h<=67108863,"Number is too big");var S=this.words[0]|0;m=S===h?0:S<h?-1:1}return this.negative!==0?-m|0:m},o.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var y=this.ucmp(h);return this.negative!==0?-y|0:y},o.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var y=0,m=this.length-1;m>=0;m--){var S=this.words[m]|0,T=h.words[m]|0;if(S!==T){S<T?y=-1:S>T&&(y=1);break}}return y},o.prototype.gtn=function(h){return this.cmpn(h)===1},o.prototype.gt=function(h){return this.cmp(h)===1},o.prototype.gten=function(h){return this.cmpn(h)>=0},o.prototype.gte=function(h){return this.cmp(h)>=0},o.prototype.ltn=function(h){return this.cmpn(h)===-1},o.prototype.lt=function(h){return this.cmp(h)===-1},o.prototype.lten=function(h){return this.cmpn(h)<=0},o.prototype.lte=function(h){return this.cmp(h)<=0},o.prototype.eqn=function(h){return this.cmpn(h)===0},o.prototype.eq=function(h){return this.cmp(h)===0},o.red=function(h){return new M(h)},o.prototype.toRed=function(h){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(h){return this.red=h,this},o.prototype.forceRed=function(h){return i(!this.red,"Already a number in reduction context"),this._forceRed(h)},o.prototype.redAdd=function(h){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},o.prototype.redIAdd=function(h){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},o.prototype.redSub=function(h){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},o.prototype.redISub=function(h){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},o.prototype.redShl=function(h){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},o.prototype.redMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},o.prototype.redIMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(h){return i(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var B={k256:null,p224:null,p192:null,p25519:null};function N(P,h){this.name=P,this.p=new o(h,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var h=new o(null);return h.words=new Array(Math.ceil(this.n/13)),h},N.prototype.ireduce=function(h){var y=h,m;do this.split(y,this.tmp),y=this.imulK(y),y=y.iadd(this.tmp),m=y.bitLength();while(m>this.n);var S=m<this.n?-1:y.ucmp(this.p);return S===0?(y.words[0]=0,y.length=1):S>0?y.isub(this.p):y.strip!==void 0?y.strip():y._strip(),y},N.prototype.split=function(h,y){h.iushrn(this.n,0,y)},N.prototype.imulK=function(h){return h.imul(this.k)};function v(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(v,N),v.prototype.split=function(h,y){for(var m=4194303,S=Math.min(h.length,9),T=0;T<S;T++)y.words[T]=h.words[T];if(y.length=S,h.length<=9){h.words[0]=0,h.length=1;return}var k=h.words[9];for(y.words[y.length++]=k&m,T=10;T<h.length;T++){var U=h.words[T]|0;h.words[T-10]=(U&m)<<4|k>>>22,k=U}k>>>=22,h.words[T-10]=k,k===0&&h.length>10?h.length-=10:h.length-=9},v.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var y=0,m=0;m<h.length;m++){var S=h.words[m]|0;y+=S*977,h.words[m]=y&67108863,y=S*64+(y/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function j(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(j,N);function D(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(D,N);function R(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(R,N),R.prototype.imulK=function(h){for(var y=0,m=0;m<h.length;m++){var S=(h.words[m]|0)*19+y,T=S&67108863;S>>>=26,h.words[m]=T,y=S}return y!==0&&(h.words[h.length++]=y),h},o._prime=function(h){if(B[h])return B[h];var y;if(h==="k256")y=new v;else if(h==="p224")y=new j;else if(h==="p192")y=new D;else if(h==="p25519")y=new R;else throw new Error("Unknown prime "+h);return B[h]=y,y};function M(P){if(typeof P=="string"){var h=o._prime(P);this.m=h.p,this.prime=h}else i(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}M.prototype._verify1=function(h){i(h.negative===0,"red works only with positives"),i(h.red,"red works only with red numbers")},M.prototype._verify2=function(h,y){i((h.negative|y.negative)===0,"red works only with positives"),i(h.red&&h.red===y.red,"red works only with red numbers")},M.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):(p(h,h.umod(this.m)._forceRed(this)),h)},M.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},M.prototype.add=function(h,y){this._verify2(h,y);var m=h.add(y);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},M.prototype.iadd=function(h,y){this._verify2(h,y);var m=h.iadd(y);return m.cmp(this.m)>=0&&m.isub(this.m),m},M.prototype.sub=function(h,y){this._verify2(h,y);var m=h.sub(y);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},M.prototype.isub=function(h,y){this._verify2(h,y);var m=h.isub(y);return m.cmpn(0)<0&&m.iadd(this.m),m},M.prototype.shl=function(h,y){return this._verify1(h),this.imod(h.ushln(y))},M.prototype.imul=function(h,y){return this._verify2(h,y),this.imod(h.imul(y))},M.prototype.mul=function(h,y){return this._verify2(h,y),this.imod(h.mul(y))},M.prototype.isqr=function(h){return this.imul(h,h.clone())},M.prototype.sqr=function(h){return this.mul(h,h)},M.prototype.sqrt=function(h){if(h.isZero())return h.clone();var y=this.m.andln(3);if(i(y%2===1),y===3){var m=this.m.add(new o(1)).iushrn(2);return this.pow(h,m)}for(var S=this.m.subn(1),T=0;!S.isZero()&&S.andln(1)===0;)T++,S.iushrn(1);i(!S.isZero());var k=new o(1).toRed(this),U=k.redNeg(),I=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new o(2*w*w).toRed(this);this.pow(w,I).cmp(U)!==0;)w.redIAdd(U);for(var L=this.pow(w,S),J=this.pow(h,S.addn(1).iushrn(1)),Y=this.pow(h,S),C=T;Y.cmp(k)!==0;){for(var K=Y,$=0;K.cmp(k)!==0;$++)K=K.redSqr();i($<C);var Z=this.pow(L,new o(1).iushln(C-$-1));J=J.redMul(Z),L=Z.redSqr(),Y=Y.redMul(L),C=$}return J},M.prototype.invm=function(h){var y=h._invmp(this.m);return y.negative!==0?(y.negative=0,this.imod(y).redNeg()):this.imod(y)},M.prototype.pow=function(h,y){if(y.isZero())return new o(1).toRed(this);if(y.cmpn(1)===0)return h.clone();var m=4,S=new Array(1<<m);S[0]=new o(1).toRed(this),S[1]=h;for(var T=2;T<S.length;T++)S[T]=this.mul(S[T-1],h);var k=S[0],U=0,I=0,w=y.bitLength()%26;for(w===0&&(w=26),T=y.length-1;T>=0;T--){for(var L=y.words[T],J=w-1;J>=0;J--){var Y=L>>J&1;if(k!==S[0]&&(k=this.sqr(k)),Y===0&&U===0){I=0;continue}U<<=1,U|=Y,I++,!(I!==m&&(T!==0||J!==0))&&(k=this.mul(k,S[U]),I=0,U=0)}w=26}return k},M.prototype.convertTo=function(h){var y=h.umod(this.m);return y===h?y.clone():y},M.prototype.convertFrom=function(h){var y=h.clone();return y.red=null,y},o.mont=function(h){return new q(h)};function q(P){M.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(q,M),q.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},q.prototype.convertFrom=function(h){var y=this.imod(h.mul(this.rinv));return y.red=null,y},q.prototype.imul=function(h,y){if(h.isZero()||y.isZero())return h.words[0]=0,h.length=1,h;var m=h.imul(y),S=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=m.isub(S).iushrn(this.shift),k=T;return T.cmp(this.m)>=0?k=T.isub(this.m):T.cmpn(0)<0&&(k=T.iadd(this.m)),k._forceRed(this)},q.prototype.mul=function(h,y){if(h.isZero()||y.isZero())return new o(0)._forceRed(this);var m=h.mul(y),S=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=m.isub(S).iushrn(this.shift),k=T;return T.cmp(this.m)>=0?k=T.isub(this.m):T.cmpn(0)<0&&(k=T.iadd(this.m)),k._forceRed(this)},q.prototype.invm=function(h){var y=this.imod(h._invmp(this.m).mul(this.r2));return y._forceRed(this)}})(r,aw)})(va)),va.exports}var cw=sw();const Ji=Nl(cw);const uw=BigInt(0),sa=BigInt(1),Xp=BigInt(2),kn=BigInt(3);function lw(r){const e=[];for(;r>sa;r>>=sa)(r&sa)===uw?e.unshift(0):(r&kn)===kn?(e.unshift(-1),r+=sa):e.unshift(1);return e}function Cu(r){if(!Array.isArray(r)||r.length===0)throw new Error("expected non-empty array")}function fw(r,e,t,i){const{Fp2:n,Fp12:o}=r,{twistType:a,ateLoopSize:s,xNegative:c,postPrecompute:u}=i;let p;if(a==="multiplicative")p=(O,A,B,N,v,j)=>o.mul014(N,O,n.mul(A,v),n.mul(B,j));else if(a==="divisive")p=(O,A,B,N,v,j)=>o.mul034(N,n.mul(B,j),n.mul(A,v),O);else throw new Error("bls: unknown twist type");const f=n.div(n.ONE,n.mul(n.ONE,Xp));function l(O,A,B,N){const v=n.sqr(B),j=n.sqr(N),D=n.mulByB(n.mul(j,kn)),R=n.mul(D,kn),M=n.sub(n.sub(n.sqr(n.add(B,N)),j),v),q=n.sub(D,v),P=n.mul(n.sqr(A),kn),h=n.neg(M);return O.push([q,P,h]),A=n.mul(n.mul(n.mul(n.sub(v,R),A),B),f),B=n.sub(n.sqr(n.mul(n.add(v,R),f)),n.mul(n.sqr(D),kn)),N=n.mul(v,M),{Rx:A,Ry:B,Rz:N}}function d(O,A,B,N,v,j){const D=n.sub(B,n.mul(j,N)),R=n.sub(A,n.mul(v,N)),M=n.sub(n.mul(D,v),n.mul(R,j)),q=n.neg(D),P=R;O.push([M,q,P]);const h=n.sqr(R),y=n.mul(h,R),m=n.mul(h,A),S=n.add(n.sub(y,n.mul(m,Xp)),n.mul(n.sqr(D),N));return A=n.mul(R,S),B=n.sub(n.mul(n.sub(m,S),D),n.mul(y,B)),N=n.mul(N,y),{Rx:A,Ry:B,Rz:N}}const g=lw(s),b=ul(O=>{const A=O,{x:B,y:N}=A.toAffine(),v=B,j=N,D=n.neg(N);let R=v,M=j,q=n.ONE;const P=[];for(const h of g){const y=[];({Rx:R,Ry:M,Rz:q}=l(y,R,M,q)),h&&({Rx:R,Ry:M,Rz:q}=d(y,R,M,q,v,h===-1?D:j)),P.push(y)}if(u){const h=P[P.length-1];u(R,M,q,v,j,d.bind(null,h))}return P});function x(O,A=!1){let B=o.ONE;if(O.length){const N=O[0][0].length;for(let v=0;v<N;v++){B=o.sqr(B);for(const[j,D,R]of O)for(const[M,q,P]of j[v])B=p(M,q,P,B,D,R)}}return c&&(B=o.conjugate(B)),A?o.finalExponentiate(B):B}function _(O,A=!0){const B=[];mo(e,O.map(({g1:N})=>N)),mo(t,O.map(({g2:N})=>N));for(const{g1:N,g2:v}of O){if(N.is0()||v.is0())throw new Error("pairing is not available for ZERO point");N.assertValidity(),v.assertValidity();const j=N.toAffine();B.push([b(v),j.x,j.y])}return x(B,A)}function E(O,A,B=!0){return _([{g1:O,g2:A}],B)}return{Fp12:o,millerLoopBatch:x,pairing:E,pairingBatch:_,calcPairingPrecomputes:b}}function Qp(r,e,t,i,n){const{Fp12:o,pairingBatch:a}=r;function s(f){return f instanceof e.Point?f:e.Point.fromHex(f)}function c(f){return f instanceof t.Point?f:t.Point.fromHex(f)}function u(f){if(!(f instanceof t.Point))throw new Error(`expected valid message hashed to ${n?"G1":"G2"} curve`);return f}const p=n?(f,l)=>({g1:l,g2:f}):(f,l)=>({g1:f,g2:l});return{getPublicKey(f){const l=ci(e.Point.Fn,f);return e.Point.BASE.multiply(l)},sign(f,l,d){if(d!=null)throw new Error("sign() expects 2 arguments");const g=ci(e.Point.Fn,l);return u(f).assertValidity(),f.multiply(g)},verify(f,l,d,g){if(g!=null)throw new Error("verify() expects 3 arguments");f=c(f),d=s(d);const b=d.negate(),x=e.Point.BASE,_=u(l),E=f,O=a([p(b,_),p(x,E)]);return o.eql(O,o.ONE)},verifyBatch(f,l,d){if(Cu(l),d.length!==l.length)throw new Error("amount of public keys and messages should be equal");const g=c(f),b=l,x=d.map(s),_=new Map;for(let A=0;A<x.length;A++){const B=x[A],N=b[A];let v=_.get(N);v===void 0&&(v=[],_.set(N,v)),v.push(B)}const E=[],O=e.Point.BASE;try{for(const[A,B]of _){const N=B.reduce((v,j)=>v.add(j));E.push(p(N,A))}return E.push(p(O.negate(),g)),o.eql(a(E),o.ONE)}catch{return!1}},aggregatePublicKeys(f){Cu(f),f=f.map(d=>s(d));const l=f.reduce((d,g)=>d.add(g),e.Point.ZERO);return l.assertValidity(),l},aggregateSignatures(f){Cu(f),f=f.map(d=>c(d));const l=f.reduce((d,g)=>d.add(g),t.Point.ZERO);return l.assertValidity(),l},hash(f,l){nr(f);const d=l?{DST:l}:void 0;return t.hashToCurve(f,d)},Signature:i}}function hw(r){const{Fp:e,Fr:t,Fp2:i,Fp6:n,Fp12:o}=r.fields,a=$h(r.G1),s=Object.assign(a,Vh(a.Point,r.G1.mapToCurve,{...r.htfDefaults,...r.G1.htfDefaults})),c=$h(r.G2),u=Object.assign(c,Vh(c.Point,r.G2.mapToCurve,{...r.htfDefaults,...r.G2.htfDefaults})),p=fw(r.fields,s.Point,u.Point,{...r.params,postPrecompute:r.postPrecompute}),{millerLoopBatch:f,pairing:l,pairingBatch:d,calcPairingPrecomputes:g}=p,b=Qp(p,s,u,r.G2.Signature,!1),x=Qp(p,u,s,r.G1.ShortSignature,!0),_=r.randomBytes||Kl,E=()=>{const T=Zl(t.ORDER);return Fg(_(T),t.ORDER)},O={randomSecretKey:E,randomPrivateKey:E,calcPairingPrecomputes:g},{ShortSignature:A}=r.G1,{Signature:B}=r.G2;function N(T,k){return T instanceof s.Point?T:x.hash(Lt("point",T),k?.DST)}function v(T,k){return T instanceof u.Point?T:b.hash(Lt("point",T),k?.DST)}function j(T){return b.getPublicKey(T).toBytes(!0)}function D(T){return x.getPublicKey(T).toBytes(!0)}function R(T,k,U){const I=v(T,U),w=b.sign(I,k);return T instanceof u.Point?w:B.toBytes(w)}function M(T,k,U){const I=N(T,U),w=x.sign(I,k);return T instanceof s.Point?w:A.toBytes(w)}function q(T,k,U,I){const w=v(k,I);return b.verify(T,w,U)}function P(T,k,U,I){const w=N(k,I);return x.verify(T,w,U)}function h(T){const k=b.aggregatePublicKeys(T);return T[0]instanceof s.Point?k:k.toBytes(!0)}function y(T){const k=b.aggregateSignatures(T);return T[0]instanceof u.Point?k:B.toBytes(k)}function m(T){const k=x.aggregateSignatures(T);return T[0]instanceof s.Point?k:A.toBytes(k)}function S(T,k,U,I){const w=k.map(L=>v(L,I));return b.verifyBatch(T,w,U)}return s.Point.BASE.precompute(4),{longSignatures:b,shortSignatures:x,millerLoopBatch:f,pairing:l,pairingBatch:d,verifyBatch:S,fields:{Fr:t,Fp:e,Fp2:i,Fp6:n,Fp12:o},params:{ateLoopSize:r.params.ateLoopSize,twistType:r.params.twistType,r:r.params.r,G1b:r.G1.b,G2b:r.G2.b},utils:O,getPublicKey:j,getPublicKeyForShortSignatures:D,sign:R,signShortSignature:M,verify:q,verifyShortSignature:P,aggregatePublicKeys:h,aggregateSignatures:y,aggregateShortSignatures:m,G1:s,G2:u,Signature:B,ShortSignature:A}}const e0=BigInt(0),ui=BigInt(1),Vt=BigInt(2),t0=BigInt(3);function tf(r,e,t,i,n=1,o){const a=BigInt(o===void 0?i:o),s=t**BigInt(i),c=[];for(let u=0;u<n;u++){const p=BigInt(u+1),f=[];for(let l=0,d=ui;l<i;l++){const g=(p*d-p)/a%s;f.push(r.pow(e,g)),d*=t}c.push(f)}return c}function dw(r,e,t){const i=e.pow(t,(r.ORDER-ui)/t0),n=e.pow(t,(r.ORDER-ui)/Vt);function o(l,d){const g=e.mul(e.frobeniusMap(l,1),i),b=e.mul(e.frobeniusMap(d,1),n);return[g,b]}const a=e.pow(t,(r.ORDER**Vt-ui)/t0),s=e.pow(t,(r.ORDER**Vt-ui)/Vt);if(!e.eql(s,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function c(l,d){return[e.mul(l,a),e.neg(d)]}const u=l=>(d,g)=>{const b=g.toAffine(),x=l(b.x,b.y);return d.fromAffine({x:x[0],y:x[1]})},p=u(o),f=u(c);return{psi:o,psi2:c,G2psi:p,G2psi2:f,PSI_X:i,PSI_Y:n,PSI2_X:a,PSI2_Y:s}}const r0=(r,e)=>{if(e.length!==2)throw new Error("invalid tuple");const t=e.map(i=>r.create(i));return{c0:t[0],c1:t[1]}};class pw{constructor(e,t={}){this.MASK=ui;const i=e.ORDER,n=i*i;this.Fp=e,this.ORDER=n,this.BITS=Ro(n),this.BYTES=Math.ceil(Ro(n)/8),this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.Fp_NONRESIDUE=e.create(t.NONRESIDUE||BigInt(-1)),this.Fp_div2=e.div(e.ONE,Vt),this.NONRESIDUE=r0(e,t.FP2_NONRESIDUE),this.FROBENIUS_COEFFICIENTS=tf(e,this.Fp_NONRESIDUE,e.ORDER,2)[0],this.mulByB=t.Fp2mulByB,Object.seal(this)}fromBigTuple(e){return r0(this.Fp,e)}create(e){return e}isValid({c0:e,c1:t}){function i(n,o){return typeof n=="bigint"&&e0<=n&&n<o}return i(e,this.ORDER)&&i(t,this.ORDER)}is0({c0:e,c1:t}){return this.Fp.is0(e)&&this.Fp.is0(t)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}eql({c0:e,c1:t},{c0:i,c1:n}){return this.Fp.eql(e,i)&&this.Fp.eql(t,n)}neg({c0:e,c1:t}){return{c0:this.Fp.neg(e),c1:this.Fp.neg(t)}}pow(e,t){return os(this,e,t)}invertBatch(e){return yn(this,e)}add(e,t){const{c0:i,c1:n}=e,{c0:o,c1:a}=t;return{c0:this.Fp.add(i,o),c1:this.Fp.add(n,a)}}sub({c0:e,c1:t},{c0:i,c1:n}){return{c0:this.Fp.sub(e,i),c1:this.Fp.sub(t,n)}}mul({c0:e,c1:t},i){const{Fp:n}=this;if(typeof i=="bigint")return{c0:n.mul(e,i),c1:n.mul(t,i)};const{c0:o,c1:a}=i;let s=n.mul(e,o),c=n.mul(t,a);const u=n.sub(s,c),p=n.sub(n.mul(n.add(e,t),n.add(o,a)),n.add(s,c));return{c0:u,c1:p}}sqr({c0:e,c1:t}){const{Fp:i}=this,n=i.add(e,t),o=i.sub(e,t),a=i.add(e,e);return{c0:i.mul(n,o),c1:i.mul(a,t)}}addN(e,t){return this.add(e,t)}subN(e,t){return this.sub(e,t)}mulN(e,t){return this.mul(e,t)}sqrN(e){return this.sqr(e)}div(e,t){const{Fp:i}=this;return this.mul(e,typeof t=="bigint"?i.inv(i.create(t)):this.inv(t))}inv({c0:e,c1:t}){const{Fp:i}=this,n=i.inv(i.create(e*e+t*t));return{c0:i.mul(n,i.create(e)),c1:i.mul(n,i.create(-t))}}sqrt(e){const{Fp:t}=this,i=this,{c0:n,c1:o}=e;if(t.is0(o))return Na(t,n)===1?i.create({c0:t.sqrt(n),c1:t.ZERO}):i.create({c0:t.ZERO,c1:t.sqrt(t.div(n,this.Fp_NONRESIDUE))});const a=t.sqrt(t.sub(t.sqr(n),t.mul(t.sqr(o),this.Fp_NONRESIDUE)));let s=t.mul(t.add(a,n),this.Fp_div2);Na(t,s)===-1&&(s=t.sub(s,a));const u=t.sqrt(s),p=i.create({c0:u,c1:t.div(t.mul(o,this.Fp_div2),u)});if(!i.eql(i.sqr(p),e))throw new Error("Cannot find square root");const f=p,l=i.neg(f),{re:d,im:g}=i.reim(f),{re:b,im:x}=i.reim(l);return g>x||g===x&&d>b?f:l}isOdd(e){const{re:t,im:i}=this.reim(e),n=t%Vt,o=t===e0,a=i%Vt;return BigInt(n||o&&a)==ui}fromBytes(e){const{Fp:t}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:t.fromBytes(e.subarray(0,t.BYTES)),c1:t.fromBytes(e.subarray(t.BYTES))}}toBytes({c0:e,c1:t}){return Ve(this.Fp.toBytes(e),this.Fp.toBytes(t))}cmov({c0:e,c1:t},{c0:i,c1:n},o){return{c0:this.Fp.cmov(e,i,o),c1:this.Fp.cmov(t,n,o)}}reim({c0:e,c1:t}){return{re:e,im:t}}Fp4Square(e,t){const i=this,n=i.sqr(e),o=i.sqr(t);return{first:i.add(i.mulByNonresidue(o),n),second:i.sub(i.sub(i.sqr(i.add(e,t)),n),o)}}mulByNonresidue({c0:e,c1:t}){return this.mul({c0:e,c1:t},this.NONRESIDUE)}frobeniusMap({c0:e,c1:t},i){return{c0:e,c1:this.Fp.mul(t,this.FROBENIUS_COEFFICIENTS[i%2])}}}class gw{constructor(e){this.MASK=ui,this.Fp2=e,this.ORDER=e.ORDER,this.BITS=3*e.BITS,this.BYTES=3*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO,c2:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO,c2:e.ZERO};const{Fp:t}=e,i=tf(e,e.NONRESIDUE,t.ORDER,6,2,3);this.FROBENIUS_COEFFICIENTS_1=i[0],this.FROBENIUS_COEFFICIENTS_2=i[1],Object.seal(this)}add({c0:e,c1:t,c2:i},{c0:n,c1:o,c2:a}){const{Fp2:s}=this;return{c0:s.add(e,n),c1:s.add(t,o),c2:s.add(i,a)}}sub({c0:e,c1:t,c2:i},{c0:n,c1:o,c2:a}){const{Fp2:s}=this;return{c0:s.sub(e,n),c1:s.sub(t,o),c2:s.sub(i,a)}}mul({c0:e,c1:t,c2:i},n){const{Fp2:o}=this;if(typeof n=="bigint")return{c0:o.mul(e,n),c1:o.mul(t,n),c2:o.mul(i,n)};const{c0:a,c1:s,c2:c}=n,u=o.mul(e,a),p=o.mul(t,s),f=o.mul(i,c);return{c0:o.add(u,o.mulByNonresidue(o.sub(o.mul(o.add(t,i),o.add(s,c)),o.add(p,f)))),c1:o.add(o.sub(o.mul(o.add(e,t),o.add(a,s)),o.add(u,p)),o.mulByNonresidue(f)),c2:o.sub(o.add(p,o.mul(o.add(e,i),o.add(a,c))),o.add(u,f))}}sqr({c0:e,c1:t,c2:i}){const{Fp2:n}=this;let o=n.sqr(e),a=n.mul(n.mul(e,t),Vt),s=n.mul(n.mul(t,i),Vt),c=n.sqr(i);return{c0:n.add(n.mulByNonresidue(s),o),c1:n.add(n.mulByNonresidue(c),a),c2:n.sub(n.sub(n.add(n.add(a,n.sqr(n.add(n.sub(e,t),i))),s),o),c)}}addN(e,t){return this.add(e,t)}subN(e,t){return this.sub(e,t)}mulN(e,t){return this.mul(e,t)}sqrN(e){return this.sqr(e)}create(e){return e}isValid({c0:e,c1:t,c2:i}){const{Fp2:n}=this;return n.isValid(e)&&n.isValid(t)&&n.isValid(i)}is0({c0:e,c1:t,c2:i}){const{Fp2:n}=this;return n.is0(e)&&n.is0(t)&&n.is0(i)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:t,c2:i}){const{Fp2:n}=this;return{c0:n.neg(e),c1:n.neg(t),c2:n.neg(i)}}eql({c0:e,c1:t,c2:i},{c0:n,c1:o,c2:a}){const{Fp2:s}=this;return s.eql(e,n)&&s.eql(t,o)&&s.eql(i,a)}sqrt(e){return Lg()}div(e,t){const{Fp2:i}=this,{Fp:n}=i;return this.mul(e,typeof t=="bigint"?n.inv(n.create(t)):this.inv(t))}pow(e,t){return os(this,e,t)}invertBatch(e){return yn(this,e)}inv({c0:e,c1:t,c2:i}){const{Fp2:n}=this;let o=n.sub(n.sqr(e),n.mulByNonresidue(n.mul(i,t))),a=n.sub(n.mulByNonresidue(n.sqr(i)),n.mul(e,t)),s=n.sub(n.sqr(t),n.mul(e,i)),c=n.inv(n.add(n.mulByNonresidue(n.add(n.mul(i,a),n.mul(t,s))),n.mul(e,o)));return{c0:n.mul(c,o),c1:n.mul(c,a),c2:n.mul(c,s)}}fromBytes(e){const{Fp2:t}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);const i=t.BYTES;return{c0:t.fromBytes(e.subarray(0,i)),c1:t.fromBytes(e.subarray(i,i*2)),c2:t.fromBytes(e.subarray(2*i))}}toBytes({c0:e,c1:t,c2:i}){const{Fp2:n}=this;return Ve(n.toBytes(e),n.toBytes(t),n.toBytes(i))}cmov({c0:e,c1:t,c2:i},{c0:n,c1:o,c2:a},s){const{Fp2:c}=this;return{c0:c.cmov(e,n,s),c1:c.cmov(t,o,s),c2:c.cmov(i,a,s)}}fromBigSix(e){const{Fp2:t}=this;if(!Array.isArray(e)||e.length!==6)throw new Error("invalid Fp6 usage");return{c0:t.fromBigTuple(e.slice(0,2)),c1:t.fromBigTuple(e.slice(2,4)),c2:t.fromBigTuple(e.slice(4,6))}}frobeniusMap({c0:e,c1:t,c2:i},n){const{Fp2:o}=this;return{c0:o.frobeniusMap(e,n),c1:o.mul(o.frobeniusMap(t,n),this.FROBENIUS_COEFFICIENTS_1[n%6]),c2:o.mul(o.frobeniusMap(i,n),this.FROBENIUS_COEFFICIENTS_2[n%6])}}mulByFp2({c0:e,c1:t,c2:i},n){const{Fp2:o}=this;return{c0:o.mul(e,n),c1:o.mul(t,n),c2:o.mul(i,n)}}mulByNonresidue({c0:e,c1:t,c2:i}){const{Fp2:n}=this;return{c0:n.mulByNonresidue(i),c1:e,c2:t}}mul1({c0:e,c1:t,c2:i},n){const{Fp2:o}=this;return{c0:o.mulByNonresidue(o.mul(i,n)),c1:o.mul(e,n),c2:o.mul(t,n)}}mul01({c0:e,c1:t,c2:i},n,o){const{Fp2:a}=this;let s=a.mul(e,n),c=a.mul(t,o);return{c0:a.add(a.mulByNonresidue(a.sub(a.mul(a.add(t,i),o),c)),s),c1:a.sub(a.sub(a.mul(a.add(n,o),a.add(e,t)),s),c),c2:a.add(a.sub(a.mul(a.add(e,i),n),s),c)}}}class mw{constructor(e,t){this.MASK=ui;const{Fp2:i}=e,{Fp:n}=i;this.Fp6=e,this.ORDER=i.ORDER,this.BITS=2*e.BITS,this.BYTES=2*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.FROBENIUS_COEFFICIENTS=tf(i,i.NONRESIDUE,n.ORDER,12,1,6)[0],this.X_LEN=t.X_LEN,this.finalExponentiate=t.Fp12finalExponentiate}create(e){return e}isValid({c0:e,c1:t}){const{Fp6:i}=this;return i.isValid(e)&&i.isValid(t)}is0({c0:e,c1:t}){const{Fp6:i}=this;return i.is0(e)&&i.is0(t)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:t}){const{Fp6:i}=this;return{c0:i.neg(e),c1:i.neg(t)}}eql({c0:e,c1:t},{c0:i,c1:n}){const{Fp6:o}=this;return o.eql(e,i)&&o.eql(t,n)}sqrt(e){Lg()}inv({c0:e,c1:t}){const{Fp6:i}=this;let n=i.inv(i.sub(i.sqr(e),i.mulByNonresidue(i.sqr(t))));return{c0:i.mul(e,n),c1:i.neg(i.mul(t,n))}}div(e,t){const{Fp6:i}=this,{Fp2:n}=i,{Fp:o}=n;return this.mul(e,typeof t=="bigint"?o.inv(o.create(t)):this.inv(t))}pow(e,t){return os(this,e,t)}invertBatch(e){return yn(this,e)}add({c0:e,c1:t},{c0:i,c1:n}){const{Fp6:o}=this;return{c0:o.add(e,i),c1:o.add(t,n)}}sub({c0:e,c1:t},{c0:i,c1:n}){const{Fp6:o}=this;return{c0:o.sub(e,i),c1:o.sub(t,n)}}mul({c0:e,c1:t},i){const{Fp6:n}=this;if(typeof i=="bigint")return{c0:n.mul(e,i),c1:n.mul(t,i)};let{c0:o,c1:a}=i,s=n.mul(e,o),c=n.mul(t,a);return{c0:n.add(s,n.mulByNonresidue(c)),c1:n.sub(n.mul(n.add(e,t),n.add(o,a)),n.add(s,c))}}sqr({c0:e,c1:t}){const{Fp6:i}=this;let n=i.mul(e,t);return{c0:i.sub(i.sub(i.mul(i.add(i.mulByNonresidue(t),e),i.add(e,t)),n),i.mulByNonresidue(n)),c1:i.add(n,n)}}addN(e,t){return this.add(e,t)}subN(e,t){return this.sub(e,t)}mulN(e,t){return this.mul(e,t)}sqrN(e){return this.sqr(e)}fromBytes(e){const{Fp6:t}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:t.fromBytes(e.subarray(0,t.BYTES)),c1:t.fromBytes(e.subarray(t.BYTES))}}toBytes({c0:e,c1:t}){const{Fp6:i}=this;return Ve(i.toBytes(e),i.toBytes(t))}cmov({c0:e,c1:t},{c0:i,c1:n},o){const{Fp6:a}=this;return{c0:a.cmov(e,i,o),c1:a.cmov(t,n,o)}}fromBigTwelve(e){const{Fp6:t}=this;return{c0:t.fromBigSix(e.slice(0,6)),c1:t.fromBigSix(e.slice(6,12))}}frobeniusMap(e,t){const{Fp6:i}=this,{Fp2:n}=i,{c0:o,c1:a,c2:s}=i.frobeniusMap(e.c1,t),c=this.FROBENIUS_COEFFICIENTS[t%12];return{c0:i.frobeniusMap(e.c0,t),c1:i.create({c0:n.mul(o,c),c1:n.mul(a,c),c2:n.mul(s,c)})}}mulByFp2({c0:e,c1:t},i){const{Fp6:n}=this;return{c0:n.mulByFp2(e,i),c1:n.mulByFp2(t,i)}}conjugate({c0:e,c1:t}){return{c0:e,c1:this.Fp6.neg(t)}}mul014({c0:e,c1:t},i,n,o){const{Fp6:a}=this,{Fp2:s}=a;let c=a.mul01(e,i,n),u=a.mul1(t,o);return{c0:a.add(a.mulByNonresidue(u),c),c1:a.sub(a.sub(a.mul01(a.add(t,e),i,s.add(n,o)),c),u)}}mul034({c0:e,c1:t},i,n,o){const{Fp6:a}=this,{Fp2:s}=a,c=a.create({c0:s.mul(e.c0,i),c1:s.mul(e.c1,i),c2:s.mul(e.c2,i)}),u=a.mul01(t,n,o),p=a.mul01(a.add(e,t),s.add(i,n),o);return{c0:a.add(a.mulByNonresidue(u),c),c1:a.sub(p,a.add(c,u))}}_cyclotomicSquare({c0:e,c1:t}){const{Fp6:i}=this,{Fp2:n}=i,{c0:o,c1:a,c2:s}=e,{c0:c,c1:u,c2:p}=t,{first:f,second:l}=n.Fp4Square(o,u),{first:d,second:g}=n.Fp4Square(c,s),{first:b,second:x}=n.Fp4Square(a,p),_=n.mulByNonresidue(x);return{c0:i.create({c0:n.add(n.mul(n.sub(f,o),Vt),f),c1:n.add(n.mul(n.sub(d,a),Vt),d),c2:n.add(n.mul(n.sub(b,s),Vt),b)}),c1:i.create({c0:n.add(n.mul(n.add(_,c),Vt),_),c1:n.add(n.mul(n.add(l,u),Vt),l),c2:n.add(n.mul(n.add(g,p),Vt),g)})}}_cyclotomicExp(e,t){let i=this.ONE;for(let n=this.X_LEN-1;n>=0;n--)i=this._cyclotomicSquare(i),r1(t,n)&&(i=this.mul(i,e));return i}}function bw(r){const e=Mr(r.ORDER),t=new pw(e,r),i=new gw(t),n=new mw(i,r);return{Fp:e,Fp2:t,Fp6:i,Fp12:n}}const Gt=BigInt(0),Ca=BigInt(1),dr=BigInt(2),us=BigInt(3),Po=BigInt(4),Ei=BigInt("0xd201000000010000"),vw=Ro(Ei),mn={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:Gt,b:Po,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},yw=Mr(mn.n,{modFromBytes:!0,isLE:!0}),{Fp:ue,Fp2:_e,Fp6:_w,Fp12:Be}=bw({ORDER:mn.p,X_LEN:vw,FP2_NONRESIDUE:[Ca,Ca],Fp2mulByB:({c0:r,c1:e})=>{const t=ue.mul(r,Po),i=ue.mul(e,Po);return{c0:ue.sub(t,i),c1:ue.add(t,i)}},Fp12finalExponentiate:r=>{const e=Ei,t=Be.div(Be.frobeniusMap(r,6),r),i=Be.mul(Be.frobeniusMap(t,2),t),n=Be.conjugate(Be._cyclotomicExp(i,e)),o=Be.mul(Be.conjugate(Be._cyclotomicSquare(i)),n),a=Be.conjugate(Be._cyclotomicExp(o,e)),s=Be.conjugate(Be._cyclotomicExp(a,e)),c=Be.mul(Be.conjugate(Be._cyclotomicExp(s,e)),Be._cyclotomicSquare(n)),u=Be.conjugate(Be._cyclotomicExp(c,e)),p=Be.frobeniusMap(Be.mul(n,s),2),f=Be.frobeniusMap(Be.mul(a,i),3),l=Be.frobeniusMap(Be.mul(c,Be.conjugate(i)),1),d=Be.mul(Be.mul(u,Be.conjugate(o)),i);return Be.mul(Be.mul(Be.mul(p,f),l),d)}}),{G2psi:i0,G2psi2:ww}=dw(ue,_e,_e.div(_e.ONE,_e.NONRESIDUE)),zu=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:ue.ORDER,m:2,k:128,expand:"xmd",hash:$l}),rf={p:_e.ORDER,n:mn.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:_e.ZERO,b:_e.fromBigTuple([Po,Po]),Gx:_e.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:_e.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},ls=$o(ue.toBytes(Gt),{infinity:!0,compressed:!0});function fs(r){r=r.slice();const e=r[0]&224,t=!!(e>>7&1),i=!!(e>>6&1),n=!!(e>>5&1);return r[0]&=31,{compressed:t,infinity:i,sort:n,value:r}}function $o(r,e){if(r[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(r[0]|=128),e.infinity&&(r[0]|=64),e.sort&&(r[0]|=32),r}function Ew(r,e,t){const{BYTES:i,ORDER:n}=ue,o=e.is0(),{x:a,y:s}=e.toAffine();if(t){if(o)return ls.slice();const c=!!(s*dr/n);return $o(zt(a,i),{compressed:!0,sort:c})}else return o?Ve(Uint8Array.of(64),new Uint8Array(2*i-1)):Ve(zt(a,i),zt(s,i))}function Hu(r){r.assertValidity();const{BYTES:e,ORDER:t}=ue,{x:i,y:n}=r.toAffine();if(r.is0())return ls.slice();const o=!!(n*dr/t);return $o(zt(i,e),{compressed:!0,sort:o})}function xw(r){const{compressed:e,infinity:t,sort:i,value:n}=fs(r),{BYTES:o,ORDER:a}=ue;if(n.length===48&&e){const s=hr(n),c=ue.create(s&Vi(ue.BITS));if(t){if(c!==Gt)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:Gt,y:Gt}}const u=ue.add(ue.pow(c,us),ue.create(mn.b));let p=ue.sqrt(u);if(!p)throw new Error("invalid G1 point: compressed point");return p*dr/a!==BigInt(i)&&(p=ue.neg(p)),{x:ue.create(c),y:ue.create(p)}}else if(n.length===96&&!e){const s=hr(n.subarray(0,o)),c=hr(n.subarray(o));if(t){if(s!==Gt||c!==Gt)throw new Error("G1: non-empty point at infinity");return hs.G1.Point.ZERO.toAffine()}return{x:ue.create(s),y:ue.create(c)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function n0(r){const{infinity:e,sort:t,value:i}=fs(Lt("signatureHex",r,48)),n=ue.ORDER,o=hs.G1.Point,a=hr(i);if(e)return o.ZERO;const s=ue.create(a&Vi(ue.BITS)),c=ue.add(ue.pow(s,us),ue.create(mn.b));let u=ue.sqrt(c);if(!u)throw new Error("invalid G1 point: compressed");const p=BigInt(t);u*dr/n!==p&&(u=ue.neg(u));const f=o.fromAffine({x:s,y:u});return f.assertValidity(),f}function Sw(r,e,t){const{BYTES:i,ORDER:n}=ue,o=e.is0(),{x:a,y:s}=e.toAffine();if(t){if(o)return Ve(ls,zt(Gt,i));const c=!!(s.c1===Gt?s.c0*dr/n:s.c1*dr/n);return Ve($o(zt(a.c1,i),{compressed:!0,sort:c}),zt(a.c0,i))}else{if(o)return Ve(Uint8Array.of(64),new Uint8Array(4*i-1));const{re:c,im:u}=_e.reim(a),{re:p,im:f}=_e.reim(s);return Ve(zt(u,i),zt(c,i),zt(f,i),zt(p,i))}}function Du(r){r.assertValidity();const{BYTES:e}=ue;if(r.is0())return Ve(ls,zt(Gt,e));const{x:t,y:i}=r.toAffine(),{re:n,im:o}=_e.reim(t),{re:a,im:s}=_e.reim(i),u=!!((s>Gt?s*dr:a*dr)/ue.ORDER&Ca),p=n;return Ve($o(zt(o,e),{sort:u,compressed:!0}),zt(p,e))}function Aw(r){const{BYTES:e,ORDER:t}=ue,{compressed:i,infinity:n,sort:o,value:a}=fs(r);if(!i&&!n&&o||!i&&n&&o||o&&n&&i)throw new Error("invalid encoding flag: "+(r[0]&224));const s=(c,u,p)=>hr(c.slice(u,p));if(a.length===96&&i){if(n){if(a.reduce((g,b)=>g!==0?b+1:b,0)>0)throw new Error("invalid G2 point: compressed");return{x:_e.ZERO,y:_e.ZERO}}const c=s(a,0,e),u=s(a,e,2*e),p=_e.create({c0:ue.create(u),c1:ue.create(c)}),f=_e.add(_e.pow(p,us),rf.b);let l=_e.sqrt(f);const d=l.c1===Gt?l.c0*dr/t:l.c1*dr/t?Ca:Gt;return l=o&&d>0?l:_e.neg(l),{x:p,y:l}}else if(a.length===192&&!i){if(n){if(a.reduce((l,d)=>l!==0?d+1:d,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:_e.ZERO,y:_e.ZERO}}const c=s(a,0*e,1*e),u=s(a,1*e,2*e),p=s(a,2*e,3*e),f=s(a,3*e,4*e);return{x:_e.fromBigTuple([u,c]),y:_e.fromBigTuple([f,p])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function o0(r){const{ORDER:e}=ue,{infinity:t,sort:i,value:n}=fs(Lt("signatureHex",r)),o=hs.G2.Point,a=n.length/2;if(a!==48&&a!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const s=hr(n.slice(0,a)),c=hr(n.slice(a));if(t)return o.ZERO;const u=ue.create(s&Vi(ue.BITS)),p=ue.create(c),f=_e.create({c0:p,c1:u}),l=_e.add(_e.pow(f,us),rf.b);let d=_e.sqrt(l);if(!d)throw new Error("Failed to find a square root");const{re:g,im:b}=_e.reim(d),x=BigInt(i),_=b>Gt&&b*dr/e!==x,E=b===Gt&&g*dr/e!==x;(_||E)&&(d=_e.neg(d));const O=o.fromAffine({x:f,y:d});return O.assertValidity(),O}const hs=hw({fields:{Fp:ue,Fp2:_e,Fp6:_w,Fp12:Be,Fr:yw},G1:{...mn,Fp:ue,htfDefaults:{...zu,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(r,e)=>{const t=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),i=new r(ue.mul(e.X,t),e.Y,e.Z);return e.multiplyUnsafe(Ei).negate().multiplyUnsafe(Ei).equals(i)},clearCofactor:(r,e)=>e.multiplyUnsafe(Ei).add(e),mapToCurve:kw,fromBytes:xw,toBytes:Ew,ShortSignature:{fromBytes(r){return nr(r),n0(r)},fromHex(r){return n0(r)},toBytes(r){return Hu(r)},toRawBytes(r){return Hu(r)},toHex(r){return Ci(Hu(r))}}},G2:{...rf,Fp:_e,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...zu},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:Iw,isTorsionFree:(r,e)=>e.multiplyUnsafe(Ei).negate().equals(i0(r,e)),clearCofactor:(r,e)=>{const t=Ei;let i=e.multiplyUnsafe(t).negate(),n=i0(r,e),o=e.double();return o=ww(r,o),o=o.subtract(n),n=i.add(n),n=n.multiplyUnsafe(t).negate(),o=o.add(n),o=o.subtract(i),o.subtract(e)},fromBytes:Aw,toBytes:Sw,Signature:{fromBytes(r){return nr(r),o0(r)},fromHex(r){return o0(r)},toBytes(r){return Du(r)},toRawBytes(r){return Du(r)},toHex(r){return Ci(Du(r))}}},params:{ateLoopSize:Ei,r:mn.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:zu}),Rw=Xg(_e,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(r=>r.map(e=>_e.fromBigTuple(e.map(BigInt))))),Ow=Xg(ue,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(r=>r.map(e=>BigInt(e)))),Pw=Wg(ue,{A:ue.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:ue.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:ue.create(BigInt(11))}),Tw=Wg(_e,{A:_e.create({c0:ue.create(Gt),c1:ue.create(BigInt(240))}),B:_e.create({c0:ue.create(BigInt(1012)),c1:ue.create(BigInt(1012))}),Z:_e.create({c0:ue.create(BigInt(-2)),c1:ue.create(BigInt(-1))})});function kw(r){const{x:e,y:t}=Pw(ue.create(r[0]));return Ow(e,t)}function Iw(r){const{x:e,y:t}=Tw(_e.fromBigTuple(r));return Rw(e,t)}function Uu(r,e,t,i){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(p){try{u(i.next(p))}catch(f){a(f)}}function c(p){try{u(i.throw(p))}catch(f){a(f)}}function u(p){p.done?o(p.value):n(p.value).then(s,c)}u((i=i.apply(r,[])).next())})}function Le(r,e,t,i){if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:e.get(r)}function ir(r,e,t,i,n){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var Xi,Dr;class Lw{constructor(e,t){Xi.set(this,void 0);const i=Ge(e,[X.Ed25519SecretKey,X.Ed25519EncryptedSeed,X.Ed25519Seed]);let[n]=i;const[,o]=i;if(o===X.Ed25519SecretKey)ir(this,Xi,{secretKey:n,publicKey:n.slice(32)});else{if(o===X.Ed25519EncryptedSeed)if(t!==void 0)n=t(n);else throw new Error("decryption function is not provided");ir(this,Xi,xa.generateKeyPairFromSeed(n))}}sign(e){const t=Bo.hash(e,32),i=xa.sign(Le(this,Xi,"f").secretKey,t);return{rawSignature:i,sig:kt(i,X.GenericSignature),prefixSig:kt(i,X.Ed25519Signature)}}publicKey(){return new ds(Le(this,Xi,"f").publicKey)}secretKey(){return kt(Le(this,Xi,"f").secretKey,X.Ed25519SecretKey)}}Xi=new WeakMap;class ds{constructor(e){if(Dr.set(this,void 0),typeof e=="string"){const[t,i]=Ge(e,[X.Ed25519PublicKey]);ir(this,Dr,t)}else ir(this,Dr,e)}compare(e){if(e instanceof ds)return Mo(this.bytes(),e.bytes());throw new jo("EdDSA key expected")}hash(){return kt(Bo.hash(Le(this,Dr,"f"),20),X.Ed25519PublicKeyHash)}bytes(){return Le(this,Dr,"f")}toProtocol(){const e=new Uint8Array(Le(this,Dr,"f").length+1);return e[0]=0,e.set(Le(this,Dr,"f"),1),e}toString(){return kt(Le(this,Dr,"f"),X.Ed25519PublicKey)}}Dr=new WeakMap;class a0 extends we{constructor(e){super(),this.mnemonic=e,this.name="InvalidMnemonicError",this.message=`Invalid mnemonic "${e}"`}}class Nw extends we{constructor(e){super(),this.message=e,this.name="InvalidBitSize"}}class nf extends we{constructor(e){super(),this.message=e,this.name="InvalidCurveError"}}class xm extends we{constructor(e){super(),this.seedLength=e,this.name="InvalidSeedLengthError",this.message=`Invalid seed length "${e}" expecting length between 16 to 64.`}}class Bw extends ov{constructor(){super(),this.name="ToBeImplemented",this.message="This feature is under developement"}}class Mw extends we{constructor(e){super(),this.message=e,this.name="InvalidPassphraseError"}}var gr,co;const bo={p256:{pk:X.P256PublicKey,sk:X.P256SecretKey,pkh:X.P256PublicKeyHash,sig:X.P256Signature,tag:2},secp256k1:{pk:X.Secp256k1PublicKey,sk:X.Secp256k1SecretKey,pkh:X.Secp256k1PublicKeyHash,sig:X.Secp256k1Signature,tag:1}};class jw{constructor(e,t){gr.set(this,void 0);const[i,n]=Ge(e,[X.Secp256k1EncryptedSecretKey,X.P256EncryptedSecretKey,X.Secp256k1SecretKey,X.P256SecretKey]),[o,a]=(()=>{switch(n){case X.Secp256k1EncryptedSecretKey:case X.P256EncryptedSecretKey:if(t===void 0)throw new Error("decryption function is not provided");return[t(i),n===X.Secp256k1EncryptedSecretKey?"secp256k1":"p256"];case X.Secp256k1SecretKey:return[i,"secp256k1"];default:return[i,"p256"]}})();ir(this,gr,{curve:a,secretKey:o,publicKey:a==="secp256k1"?Bn.getPublicKey(o,!0):Mn.getPublicKey(o,!0)})}sign(e){const t=Bo.hash(e,32);let i;return Le(this,gr,"f").curve==="secp256k1"?i=Bn.sign(t,Le(this,gr,"f").secretKey,{lowS:!0}).toBytes("compact"):i=Mn.sign(t,Le(this,gr,"f").secretKey,{lowS:!0}).toBytes("compact"),{rawSignature:i,sig:kt(i,X.GenericSignature),prefixSig:kt(i,bo[Le(this,gr,"f").curve].sig)}}publicKey(){return new To(Le(this,gr,"f").publicKey,Le(this,gr,"f").curve)}secretKey(){return kt(Le(this,gr,"f").secretKey,bo[Le(this,gr,"f").curve].sk)}}gr=new WeakMap;class To{constructor(e,t){co.set(this,void 0);const[i,n]=(()=>{if(typeof e=="string"){const[o,a]=Ge(e,[X.Secp256k1PublicKey,X.P256PublicKey]);return[o,a===X.Secp256k1PublicKey?"secp256k1":"p256"]}else{if(t!==void 0)return[e,t];throw new nf("missing curve type")}})();ir(this,co,i),this.curve=n}compare(e){if(e instanceof To)if(this.curve===e.curve){const t=this.curve==="secp256k1";return Mo(this.bytes(t),e.bytes(t))}else return this.curve==="secp256k1"?-1:1;else throw new jo("ECDSA key expected")}hash(){const e=this.bytes();return kt(Bo.hash(e,20),bo[this.curve].pkh)}bytes(e=!0){return this.curve==="secp256k1"?Bn.Point.fromHex(Le(this,co,"f")).toBytes(e):Mn.Point.fromHex(Le(this,co,"f")).toBytes(e)}toProtocol(){const e=this.bytes(),t=new Uint8Array(e.length+1);return t[0]=bo[this.curve].tag,t.set(e,1),t}toString(){const e=this.bytes();return kt(e,bo[this.curve].pk)}}co=new WeakMap;const of=2147483648;function Sm(r){const e=[];for(let t=0;t<r.length;t+=2){const i=r.slice(t,t+2),n=parseInt(i,16);if(Number.isNaN(n))throw new Bl(i);e.push(n)}return new Uint8Array(e)}const Cw=16,zw=64,Hw="ed25519 seed";let Dw=class dl{constructor(e,t){this.priv=e,this.chainCode=t}static fromSeed(e){const t=typeof e=="string"?Sm(e):e;if(t.length<Cw||t.length>zw)throw new xm(t.length);const i=new TextEncoder().encode(Hw),n=new Ma.HMAC(ja.SHA512,i).update(t).digest();return new dl(xa.generateKeyPairFromSeed(n.subarray(0,32)).secretKey,n.subarray(32))}seed(){return this.priv.subarray(0,32)}derive(e){if((e&of)===0)throw new B0(e.toString(),": Non-hardened derivation path.");const t=new Uint8Array(37);t.set(this.seed(),1),new DataView(t.buffer).setUint32(33,e);const i=new Ma.HMAC(ja.SHA512,this.chainCode).update(t).digest();return new dl(xa.generateKeyPairFromSeed(i.subarray(0,32)).secretKey,i.subarray(32))}derivePath(e){let t=this;for(const i of e)t=t.derive(i);return t}};const s0={p256:"Nist256p1 seed",secp256k1:"Bitcoin seed"},Uw=16,qw=64;class za{constructor(e,t){this.priv=e,this.chainCode=t;const i=e.secretKey.toArray("be",32),n=new Uint8Array(i),o=e.curve==="secp256k1"?Bn.getPublicKey(n,!0):Mn.getPublicKey(n,!0);this.keyPair={curve:e.curve,secretKey:e.secretKey,publicKey:o}}static fromSeed(e,t){let i=typeof e=="string"?Sm(e):e;if(i.length<Uw||i.length>qw)throw new xm(i.length);if(!Object.prototype.hasOwnProperty.call(s0,t))throw new nf(`Unsupported curve "${t}" expecting either "p256" or "secp256k1"`);let n;if(t==="secp256k1"?n=new Ji(Bn.Point.CURVE().n.toString()):n=new Ji(Mn.Point.CURVE().n.toString()),n.bitLength()!==256)throw new Nw(`Invalid curve "${t}" with bit size "${n.bitLength()}" expecting bit size "256"`);const o=new TextEncoder().encode(s0[t]);let a=null,s=new Uint8Array,c=0;for(;c===0;){const u=new Ma.HMAC(ja.SHA512,o).update(i).digest();a=new Ji(u.subarray(0,32)),s=u.subarray(32),a.isZero()||a.cmp(n)>=0?i=u:c++}return new za({curve:t,secretKey:a},s)}derive(e){const t=new Uint8Array(37);(e&of)!==0?t.set(this.keyPair.secretKey.toArray(),1):t.set(this.keyPair.publicKey,0),new DataView(t.buffer).setUint32(33,e);let i=new Ji(0),n=new Uint8Array,o=0;for(;o===0;){const a=new Ma.HMAC(ja.SHA512,this.chainCode).update(t).digest();i=new Ji(a.subarray(0,32)),n=a.subarray(32);let s;this.keyPair.curve==="secp256k1"?s=new Ji(Bn.Point.CURVE().n.toString()):s=new Ji(Mn.Point.CURVE().n.toString()),i.cmp(s)<0&&(i=i.add(this.keyPair.secretKey).mod(s),i.isZero()||o++),t.set(n,1),t[0]=1}return new za({curve:this.keyPair.curve,secretKey:i},n)}derivePath(e){let t=this;for(const i of e)t=t.derive(i);return t}bytes(){if(!this.keyPair.secretKey)throw new N0("missing private key");const e=this.keyPair.secretKey.toArray(),t=new Uint8Array(32);return t.set(e,t.length-e.length),t}}class Ha extends Array{static from(e){return super.from(e).map(t=>t>>>0)}static fromString(e){if(e.length===0)return new Ha;let t=e.split("/");const i=[];t[0]==="m"&&(t=t.slice(1));for(let n of t){if(n.length===0)throw new B0(e,": Invalid BIP32 path");let o=0;const a=n[n.length-1];(a==="'"||a==="h"||a==="H")&&(o=of,n=n.slice(0,n.length-1));const s=(parseInt(n,10)|o)>>>0;i.push(s)}return Ha.from(i)}}const Fw=(r,e,t)=>{const i=Ha.fromString(e);let n;switch(t){case"ed25519":return n=Dw.fromSeed(r).derivePath(i),kt(n.seed().slice(0,32),X.Ed25519Seed);case"secp256k1":case"p256":{const o=t==="secp256k1"?X.Secp256k1SecretKey:X.P256SecretKey;let a=za.fromSeed(r,t);a=a.derivePath(i);const s=new Uint8Array(a.keyPair.secretKey.toArray());return kt(s,o)}case"bip25519":throw new Bw;default:throw new nf(`Unsupported curve "${t}" expecting one of the following "ed25519", "secp256k1", "p256"`)}};function qu(r){return"provePossession"in r}var uo,lo,Ur;const Fu=hs.longSignatures;class Gw{constructor(e,t){uo.set(this,void 0),lo.set(this,void 0);const i=Ge(e,[X.BLS12_381EncryptedSecretKey,X.BLS12_381SecretKey]);let[n]=i;const[,o]=i;if(o===X.BLS12_381EncryptedSecretKey)if(t!==void 0)n=t(n);else throw new Error("decryption function is not provided");ir(this,uo,n),ir(this,lo,Fu.getPublicKey(this.sk()).toBytes())}sk(){return new Uint8Array(Le(this,uo,"f")).reverse()}signDst(e,t){const i=Fu.hash(e,t),n=Fu.sign(i,this.sk()).toBytes();return{rawSignature:n,sig:kt(n,X.GenericSignature),prefixSig:kt(n,X.BLS12_381Signature)}}sign(e){return this.signDst(e,iv)}provePossession(){return this.signDst(Le(this,lo,"f"),nv)}publicKey(){return new ps(Le(this,lo,"f"))}secretKey(){return kt(Le(this,uo,"f"),X.BLS12_381SecretKey)}}uo=new WeakMap,lo=new WeakMap;class ps{constructor(e){if(Ur.set(this,void 0),typeof e=="string"){const[t,i]=Ge(e,[X.BLS12_381PublicKey]);ir(this,Ur,t)}else ir(this,Ur,e)}compare(e){if(e instanceof ps)return Mo(this.bytes(),e.bytes());throw new jo("BLS key expected")}hash(){return kt(Bo.hash(Le(this,Ur,"f"),20),X.BLS12_381PublicKeyHash)}bytes(){return Le(this,Ur,"f")}toProtocol(){const e=new Uint8Array(Le(this,Ur,"f").length+1);return e[0]=3,e.set(Le(this,Ur,"f"),1),e}toString(){return kt(Le(this,Ur,"f"),X.BLS12_381PublicKey)}}Ur=new WeakMap;var Qt;class jn{static fromFundraiser(e,t,i){if(!oa.validateMnemonic(i))throw new a0(i);const n=oa.mnemonicToSeedSync(i,`${e}${t}`),o=kt(n.subarray(0,32),X.Ed25519Seed);return new jn(o)}static fromSecretKey(e,t){return Uu(this,void 0,void 0,function*(){return new jn(e,t)})}static fromMnemonic({mnemonic:e,password:t="",derivationPath:i="44'/1729'/0'/0'",curve:n="ed25519"}){if(!oa.validateMnemonic(e))throw new a0(e);const o=oa.mnemonicToSeedSync(e,t),a=Fw(o,i,n);return new jn(a)}constructor(e,t){Qt.set(this,void 0);const i=[X.Ed25519EncryptedSeed,X.Ed25519Seed,X.Ed25519SecretKey,X.Secp256k1EncryptedSecretKey,X.Secp256k1SecretKey,X.P256EncryptedSecretKey,X.P256SecretKey,X.BLS12_381EncryptedSecretKey,X.BLS12_381SecretKey],n=(()=>{try{const[,s]=Ge(e,i);return s}catch{throw new N0(`Invalid private key, expecting one of the following prefixes '${i}'.`)}})(),o=n===X.Ed25519EncryptedSeed||n===X.Secp256k1EncryptedSecretKey||n===X.P256EncryptedSecretKey||n===X.BLS12_381EncryptedSecretKey;let a;if(o){if(!t)throw new Mw("No passphrase provided to decrypt encrypted key");a=s=>{const c=rv(s.slice(0,8)),u=s.slice(8),p=D_.pbkdf2Sync(t,c,32768,32,"sha512"),f=By.openSecretBox(new Uint8Array(p),new Uint8Array(24),new Uint8Array(u));if(!f)throw new Error("can't decrypt secret key");return f}}switch(n){case X.Ed25519EncryptedSeed:case X.Ed25519Seed:case X.Ed25519SecretKey:ir(this,Qt,new Lw(e,a));break;case X.Secp256k1EncryptedSecretKey:case X.Secp256k1SecretKey:case X.P256EncryptedSecretKey:case X.P256SecretKey:ir(this,Qt,new jw(e,a));break;case X.BLS12_381EncryptedSecretKey:case X.BLS12_381SecretKey:ir(this,Qt,new Gw(e,a));break}}sign(e,t){return Uu(this,void 0,void 0,function*(){const i=typeof e=="string"?av(e):e,n=t!==void 0?Ws(t,i):i,{rawSignature:o,sig:a,prefixSig:s}=yield Le(this,Qt,"f").sign(n);return{bytes:Sa(i),sig:a,prefixSig:s,sbytes:Sa(Ws(i,qu(Le(this,Qt,"f"))?Ws(new Uint8Array([255,3]),o):o))}})}provePossession(){return Uu(this,void 0,void 0,function*(){if(qu(Le(this,Qt,"f")))return Le(this,Qt,"f").provePossession();throw new Ht("Only BLS keys can prove possession")})}get canProvePossession(){return qu(Le(this,Qt,"f"))}publicKey(){return Promise.resolve(String(Le(this,Qt,"f").publicKey()))}publicKeyHash(){return Promise.resolve(Le(this,Qt,"f").publicKey().hash())}secretKey(){return Promise.resolve(Le(this,Qt,"f").secretKey())}}Qt=new WeakMap;function c0(r){const[e,t]=Ge(r,[X.Ed25519PublicKey,X.Secp256k1PublicKey,X.P256PublicKey,X.BLS12_381PublicKey]);switch(t){case X.Ed25519PublicKey:return new ds(e);case X.Secp256k1PublicKey:return new To(e,"secp256k1");case X.P256PublicKey:return new To(e,"p256");case X.BLS12_381PublicKey:return new ps(e)}}var Am;class oo extends qe{constructor(e,t){super(),this.mapType=e,this.reason=t,this.message=`The map type '${JSON.stringify(e)}' is invalid. Reason: ${t}.`,this.name="InvalidMapTypeError"}}const Rm=Symbol.for("taquito-michelson-map-type-symbol");function Kw(r){if(!("prim"in r))throw new oo(r,"Missing 'prim' field");if(!["map","big_map"].includes(r.prim))throw new oo(r,"The prim field should be 'map' or 'big_map'");if(!("args"in r))throw new oo(r,"Missing 'args' field");if(!Array.isArray(r.args))throw new oo(r,"The 'args' field should be an array");if(r.args.length!==2)throw new oo(r,"The 'args' field should have 2 elements")}class u0 extends qe{constructor(e,t,i,n){super(),this.value=e,this.type=t,this.reason=n,this.name="MapTypecheckError",this.message=`The ${i} provided: ${JSON.stringify(e)} is not compatible with the expected michelson type: ${JSON.stringify(t)}. Reason: ${JSON.stringify(n)}.`,this.name="MapTypecheckError"}}class Yt{static isMichelsonMap(e){return e&&e[Rm]===!0}constructor(e){this.valueMap=new Map,this.keyMap=new Map,this[Am]=!0,e&&this.setType(e)}setType(e){Kw(e),this.keySchema=new _r(e.args[0]),this.valueSchema=new _r(e.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(e,t){const i=new Yt(t);return Object.keys(e).forEach(n=>{i.set(n,e[n])}),i}typecheckKey(e){if(this.keySchema&&!this.keySchema.Typecheck(e))throw new u0(e,this.keySchema,"key","Type validation failed")}typecheckValue(e){if(this.valueSchema&&!this.valueSchema.Typecheck(e))throw new u0(e,this.valueSchema,"value","Type validation failed")}assertTypecheckValue(e){this.typecheckValue(e)}assertTypecheckKey(e){this.typecheckKey(e)}serializeDeterministically(e){return Ty(e)}*keys(){for(const[e]of this.entries())yield e}*values(){for(const[,e]of this.entries())yield e}*entries(){for(const e of this.valueMap.keys())yield[this.keyMap.get(e),this.valueMap.get(e)]}get(e){this.assertTypecheckKey(e);const t=this.serializeDeterministically(e);return this.valueMap.get(t)}set(e,t){this.assertTypecheckKey(e),this.assertTypecheckValue(t);const i=this.serializeDeterministically(e);this.keyMap.set(i,e),this.valueMap.set(i,t)}delete(e){this.assertTypecheckKey(e),this.keyMap.delete(this.serializeDeterministically(e)),this.valueMap.delete(this.serializeDeterministically(e))}has(e){this.assertTypecheckKey(e);const t=this.serializeDeterministically(e);return this.keyMap.has(t)&&this.valueMap.has(t)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(e){for(const[t,i]of this.entries())e(i,t,this)}}Am=Rm;class ze extends qe{constructor(e,t,i){super(),this.value=e,this.token=t,this.name="TokenValidationError";const n=this.token.annot(),o=n?`[${n}] `:"";this.message=`${o}${i}`}}class Ue{static get fieldNumberingStrategy(){return Ue._fieldNumberingStrategy}static set fieldNumberingStrategy(e){Ue._fieldNumberingStrategy=e}constructor(e,t,i,n){this.val=e,this.idx=t,this.fac=i,this.parentTokenType=n,this.createToken=this.fac}typeWithoutAnnotations(){const e=i=>{if(typeof i=="object"){if(Array.isArray(i))return i.map(a=>e(a));const n=i;return n.args?{prim:n.prim,args:n.args.map(o=>e(o))}:{prim:n.prim}}return i};return(i=>i.args?{prim:i.prim,args:i.args.map(n=>e(n))}:{prim:i.prim})(this.val)}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.generateSchema()]]}}Ue._fieldNumberingStrategy="Latest";class rt extends Ue{compare(e,t){return e<t?-1:e>t?1:0}}class l0 extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="BigMapValidationError"}}class tr extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}generateSchema(){return{__michelsonType:tr.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}validate(e){if(!Yt.isMichelsonMap(e))throw new l0(e,this,`Value ${JSON.stringify(e)} is not a MichelsonMap`)}objLitToMichelsonMap(e){return e instanceof Yt?e:typeof e=="object"?Object.keys(e).length===0?new Yt:Yt.fromLiteral(e):e}Encode(e){const t=this.objLitToMichelsonMap(e.pop());return this.validate(t),Array.from(t.keys()).sort((i,n)=>this.KeySchema.compare(i,n)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(t.get(i))]}))}EncodeObject(e,t){const i=this.objLitToMichelsonMap(e);return this.validate(i),t&&t[tr.prim]?t[tr.prim](i,this.val):Array.from(i.keys()).sort((n,o)=>this.KeySchema.compare(n,o)).map(n=>({prim:"Elt",args:[this.KeySchema.EncodeObject(n),this.ValueSchema.EncodeObject(i.get(n))]}))}Execute(e,t){if(t&&t[tr.prim])return t[tr.prim](e,this.val);if(Array.isArray(e)){const i=new Yt(this.val);return e.forEach(n=>{i.set(this.KeySchema.ToKey(n.args[0]),this.ValueSchema.Execute(n.args[1]))}),i}else{if("int"in e)return e.int;throw new l0(e,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(e)}`)}}findAndReturnTokens(e,t){return tr.prim===e&&t.push(this),this.KeySchema.findAndReturnTokens(e,t),this.ValueSchema.findAndReturnTokens(e,t),t}}tr.prim="big_map";class f0 extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="OrValidationError"}}class Ne extends rt{constructor(e,t,i,n){super(e,t,i,n),this.val=e,this.idx=t,this.fac=i,this.parentTokenType=n}Encode(e){const t=e[e.length-1],i=this.createToken(this.val.args[0],this.getIdxForChildren(),"Or");let n=1;i instanceof Ne&&(n=Object.keys(i.generateSchema().schema).length);const o=this.createToken(this.val.args[1],this.getIdxForChildren()+n,"Or");if(String(i.annot())===String(t)&&!(i instanceof Ne))return e.pop(),{prim:"Left",args:[i.Encode(e)]};if(String(o.annot())===String(t)&&!(o instanceof Ne))return e.pop(),{prim:"Right",args:[o.Encode(e)]};if(i instanceof Ne){const a=i.Encode(e);if(a)return{prim:"Left",args:[a]}}if(o instanceof Ne){const a=o.Encode(e);if(a)return{prim:"Right",args:[a]}}return null}ExtractSignature(){const e=this.createToken(this.val.args[0],this.getIdxForChildren(),"Or");let t=1;e instanceof Ne&&(t=Object.keys(e.generateSchema().schema).length);const i=this.createToken(this.val.args[1],this.getIdxForChildren()+t,"Or"),n=[];if(e instanceof Ne)n.push(...e.ExtractSignature());else for(const o of e.ExtractSignature())n.push([e.annot(),...o]);if(i instanceof Ne)n.push(...i.ExtractSignature());else for(const o of i.ExtractSignature())n.push([i.annot(),...o]);return n}EncodeObject(e,t){this.validateJavascriptObject(e);const i=Object.keys(e)[0],n=this.createToken(this.val.args[0],this.getIdxForChildren(),"Or");let o=1;n instanceof Ne&&(o=Object.keys(n.generateSchema().schema).length);const a=this.createToken(this.val.args[1],this.getIdxForChildren()+o,"Or");if(String(n.annot())===String(i)&&!(n instanceof Ne))return{prim:"Left",args:[n.EncodeObject(e[i],t)]};if(String(a.annot())===String(i)&&!(a instanceof Ne))return{prim:"Right",args:[a.EncodeObject(e[i],t)]};if(n instanceof Ne){const s=n.EncodeObject(e,t);if(s)return{prim:"Left",args:[s]}}if(a instanceof Ne){const s=a.EncodeObject(e,t);if(s)return{prim:"Right",args:[s]}}return null}validateJavascriptObject(e){if(typeof e!="object"||Array.isArray(e)||e===null||Object.keys(e).length!==1)throw new f0(e,this,`EncodeObject expects an object with a single key but got: ${JSON.stringify(e)}`)}Execute(e,t){const i=this.createToken(this.val.args[0],this.getIdxForChildren(),"Or");let n=1;i instanceof Ne&&(n=Object.keys(i.generateSchema().schema).length);const o=this.createToken(this.val.args[1],this.getIdxForChildren()+n,"Or");if(e.prim==="Right")return o instanceof Ne?o.Execute(e.args[0],t):{[o.annot()]:o.Execute(e.args[0],t)};if(e.prim==="Left")return i instanceof Ne?i.Execute(e.args[0],t):{[i.annot()]:i.Execute(e.args[0],t)};throw new f0(e,this,`Was expecting Left or Right prim but got: ${JSON.stringify(e.prim)}`)}traversal(e,t,i){const n=this.createToken(this.val.args[0],this.getIdxForChildren(),"Or");let o=1,a;n instanceof Ne?(a=e(n),o=Object.keys(n.generateSchema().schema).length):a={[n.annot()]:e(n)};const s=this.createToken(this.val.args[1],this.getIdxForChildren()+o,"Or");let c;return s instanceof Ne?c=t(s):c={[s.annot()]:t(s)},i(a,c)}generateSchema(){return{__michelsonType:Ne.prim,schema:this.traversal(e=>e instanceof Ne?e.generateSchema().schema:e.generateSchema(),e=>e instanceof Ne?e.generateSchema().schema:e.generateSchema(),(e,t)=>Object.assign(Object.assign({},e),t))}}findToken(e){const t=this.createToken(this.val.args[0],this.getIdxForChildren(),"Or");let i=1;if(t instanceof Ne){const o=t.generateSchema();i=Object.keys(o.schema).length}const n=this.createToken(this.val.args[1],this.getIdxForChildren()+i,"Or");if(String(t.annot())===String(e)&&!(t instanceof Ne)&&t instanceof rt)return t;if(String(n.annot())===String(e)&&!(n instanceof Ne)&&n instanceof rt)return n;if(t instanceof Ne){const o=t.findToken(e);if(o)return o}if(n instanceof Ne){const o=n.findToken(e);if(o)return o}return null}compare(e,t){const i=Object.keys(e)[0],n=Object.keys(t)[0];if(i===n){const o=this.findToken(i);if(o instanceof rt)return o.compare(e[i],t[i])}else{const o=JSON.stringify(this.EncodeObject(e)),a=JSON.stringify(this.EncodeObject(t));return o<a?-1:1}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,t){return Ne.prim===e&&t.push(this),this.traversal(i=>i.findAndReturnTokens(e,t),i=>i.findAndReturnTokens(e,t),(i,n)=>Object.assign(Object.assign({},i),n)),t}getIdxForChildren(){return Ue.fieldNumberingStrategy==="Legacy"?this.idx:this.parentTokenType==="Or"?this.idx:0}}Ne.prim="or";class $w extends qe{constructor(e){super(e),this.message=e,this.name="TokenArgumentValidationError"}}class Vw extends qe{constructor(e,t){super(),this.val1=e,this.val2=t,this.name="TokenComparisonError",this.message=`Tokens ${JSON.stringify(e)} and ${JSON.stringify(t)} are not comparable`}}function pl(r,e=xt.prim){if(Array.isArray(r))return pl({prim:e,args:r},e);if(r.args===void 0)throw new $w(`The value ${JSON.stringify(r)} is an invalid PairToken with no arguments, a pair must have two or more arguments.`);return r.args.length>2?[r.args[0],{prim:e,args:r.args.slice(1)}]:[r.args[0],r.args[1]]}class xt extends rt{constructor(e,t,i,n){super(Array.isArray(e)?{prim:xt.prim,args:e}:e.prim?e:{prim:xt.prim,args:e},t,i,n)}args(){return pl(this.val)}tokens(){let e=0;return this.args().map(t=>{const i=this.createToken(t,this.getIdxForChildren()+e,"Pair");return i instanceof xt?e+=Object.keys(i.generateSchema()).length:e++,i})}Encode(e){return{prim:"Pair",args:this.tokens().map(t=>t.Encode(e))}}ExtractSignature(){const e=this.args(),t=this.createToken(e[0],this.getIdxForChildren(),"Pair");let i=1;t instanceof Ne&&(i=Object.keys(t.generateSchema()).length);const n=this.createToken(e[1],this.getIdxForChildren()+i,"Pair"),o=[];for(const a of t.ExtractSignature())for(const s of n.ExtractSignature())o.push([...a,...s]);return o}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}ToKey(e){return this.Execute(e)}EncodeObject(e,t){const[i,n]=this.tokens();let o;i instanceof xt&&!i.hasAnnotations()?o=e:o=e[i.annot()];let a;return n instanceof xt&&!n.hasAnnotations()?a=e:a=e[n.annot()],{prim:"Pair",args:[i.EncodeObject(o,t),n.EncodeObject(a,t)]}}traversal(e,t){const i=this.args(),n=this.createToken(i[0],this.getIdxForChildren(),"Pair");let o=1,a;n instanceof xt&&!n.hasAnnotations()?(a=e(n),n instanceof xt&&(o=Object.keys(n.generateSchema()).length)):a={[n.annot()]:e(n)};const s=this.createToken(i[1],this.getIdxForChildren()+o,"Pair");let c;return s instanceof xt&&!s.hasAnnotations()?c=t(s):c={[s.annot()]:t(s)},Object.assign(Object.assign({},a),c)}Execute(e,t){const i=pl(e,"Pair");return this.traversal(n=>n.Execute(i[0],t),n=>n.Execute(i[1],t))}generateSchema(){return{__michelsonType:xt.prim,schema:this.traversal(e=>e instanceof xt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof xt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema())}}compare(e,t){const[i,n]=this.tokens(),o=(a,s)=>a instanceof xt&&!a.hasAnnotations()?s:s[a.annot()];if(i instanceof rt&&n instanceof rt){const a=i.compare(o(i,e),o(i,t));return a===0?n.compare(o(n,e),o(n,t)):a}throw new Vw(e,t)}findAndReturnTokens(e,t){return xt.prim===e&&t.push(this),this.tokens().map(i=>i.findAndReturnTokens(e,t)),t}getIdxForChildren(){return Ue.fieldNumberingStrategy==="Legacy"?this.idx:this.parentTokenType==="Pair"?this.idx:0}}xt.prim="pair";class h0 extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="NatValidationError"}}class Fr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){return new te(e[Object.keys(e)[0]])}Encode(e){const t=e.pop();return this.validate(t),{int:new te(t).toFixed()}}validate(e){const t=new te(e);if(t.isNaN())throw new h0(e,this,`Value is not a number: ${JSON.stringify(e)}`);if(t.isNegative())throw new h0(e,this,`Value cannot be negative: ${JSON.stringify(e)}`)}EncodeObject(e,t){return this.validate(e),t&&t[Fr.prim]?t[Fr.prim](e):{int:new te(e).toFixed()}}generateSchema(){return{__michelsonType:Fr.prim,schema:Fr.prim}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Fr.prim}}}ToKey({int:e}){return new te(e)}compare(e,t){const i=Number(e),n=Number(t);return i===n?0:i<n?-1:1}findAndReturnTokens(e,t){return Fr.prim===e&&t.push(this),t}}Fr.prim="nat";class Gr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){return e[Object.keys(e)[0]]}generateSchema(){return{__michelsonType:Gr.prim,schema:Gr.prim}}Encode(e){return{string:e.pop()}}EncodeObject(e,t){return t&&t[Gr.prim]?t[Gr.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Gr.prim}}}findAndReturnTokens(e,t){return Gr.prim===e&&t.push(this),t}}Gr.prim="string";class ca extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="AddressValidationError"}}class Ri extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}ToBigMapKey(e){return{key:{bytes:po(e)},type:{prim:"bytes"}}}validate(e){if(typeof e!="string")throw new ca(e,this,"Type error");if(ye(e)!==se.VALID)throw new ca(e,this,`Address is not valid: ${JSON.stringify(e)}`)}Encode(e){const t=e.pop();return this.validate(t),{string:t}}EncodeObject(e,t){return this.validate(e),t&&t[Ri.prim]?t[Ri.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new ca(e,this,`cannot be missing both string and bytes: ${JSON.stringify(e)}`);return tl(e.bytes)}generateSchema(){return{__michelsonType:Ri.prim,schema:Ri.prim}}ToKey({bytes:e,string:t}){if(t)return t;if(!e)throw new ca({bytes:e,string:t},this,`cannot be missing both string and bytes ${JSON.stringify({string:t,bytes:e})}`);return tl(e)}compare(e,t){const[i,n]=oh(e),[o,a]=oh(t),s=n||"",c=a||"",u=po(i,"array"),p=po(o,"array"),f=Mo(u,p);return f===0?s<c?-1:s>c?1:0:f}findAndReturnTokens(e,t){return Ri.prim===e&&t.push(this),t}}Ri.prim="address";class Ww extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="MapValidationError"}}class Mi extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}validate(e){if(!Yt.isMichelsonMap(e))throw new Ww(e,this,`Value ${JSON.stringify(e)} is not a valid MichelsonMap`)}Execute(e,t){const i=new Yt(this.val);return e.forEach(n=>{i.set(this.KeySchema.ToKey(n.args[0]),this.ValueSchema.Execute(n.args[1],t))}),i}objLitToMichelsonMap(e){return e instanceof Yt?e:typeof e=="object"?Object.keys(e).length===0?new Yt:Yt.fromLiteral(e):e}Encode(e){const t=this.objLitToMichelsonMap(e.pop());return this.validate(t),Array.from(t.keys()).sort((i,n)=>this.KeySchema.compare(i,n)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(t.get(i))]}))}EncodeObject(e,t){const i=this.objLitToMichelsonMap(e);return this.validate(i),t&&t[Mi.prim]?t[Mi.prim](i):Array.from(i.keys()).sort((n,o)=>this.KeySchema.compare(n,o)).map(n=>({prim:"Elt",args:[this.KeySchema.EncodeObject(n),this.ValueSchema.EncodeObject(i.get(n))]}))}generateSchema(){return{__michelsonType:Mi.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(e,t){return Mi.prim===e&&t.push(this),this.KeySchema.findAndReturnTokens(e,t),this.ValueSchema.findAndReturnTokens(e,t),t}}Mi.prim="map";class Kr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){return String(e.prim).toLowerCase()==="true"}Encode(e){return{prim:e.pop()?"True":"False"}}EncodeObject(e,t){return t&&t[Kr.prim]?t[Kr.prim](e):{prim:e?"True":"False"}}generateSchema(){return{__michelsonType:Kr.prim,schema:Kr.prim}}ToBigMapKey(e){return{key:this.EncodeObject(e),type:{prim:Kr.prim}}}ToKey(e){return this.EncodeObject(e)}compare(e,t){return e&&t||!e&&!t?0:e?1:-1}findAndReturnTokens(e,t){return Kr.prim===e&&t.push(this),t}}Kr.prim="bool";class Gu extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="ContractValidationError"}}class br extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}validate(e){if(typeof e!="string")throw new Gu(e,this,"Type error");if(ye(e)!==se.VALID)throw new Gu(e,this,`Value ${JSON.stringify(e)} is not a valid contract address.`);return null}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new Gu(e,this,`Value ${JSON.stringify(e)} is not a valid contract address. must contain bytes or string.`);return tl(e.bytes)}Encode(e){const t=e.pop();return this.validate(t),{string:t}}EncodeObject(e,t){return this.validate(e),t&&t[br.prim]?t[br.prim](e):{string:e}}generateSchema(){const e=this.createToken(this.val.args[0],0);return{__michelsonType:br.prim,schema:{parameter:this.val.args[0]?e.generateSchema():{}}}}findAndReturnTokens(e,t){return br.prim===e&&t.push(this),t}}br.prim="contract";class Zw extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="ListValidationError"}}class on extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}validate(e){if(!Array.isArray(e))throw new Zw(e,this,`Value ${JSON.stringify(e)} is not a valid array`)}Encode(e){const t=e.pop();this.validate(t);const i=this.createToken(this.val.args[0],0);return t.reduce((n,o)=>[...n,i.EncodeObject(o)],[])}Execute(e,t){const i=this.createToken(this.val.args[0],0);return this.validate(e),e.reduce((n,o)=>[...n,i.Execute(o,t)],[])}EncodeObject(e,t){const i=this.createToken(this.val.args[0],0);return this.validate(e),t&&t[on.prim]?t[on.prim](e):e.reduce((n,o)=>[...n,i.EncodeObject(o)],[])}generateSchema(){return{__michelsonType:on.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(e,t){return on.prim===e&&t.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,t),t}}on.prim="list";class Jw extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="MutezValidationError"}}class $r extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){return new te(e[Object.keys(e)[0]])}generateSchema(){return{__michelsonType:$r.prim,schema:$r.prim}}validate(e){if(new te(e).isNaN())throw new Jw(e,this,`Value is not a number: ${e}`)}Encode(e){const t=e.pop();return this.validate(t),{int:String(t).toString()}}EncodeObject(e,t){return this.validate(e),t&&t[$r.prim]?t[$r.prim](e):{int:String(e).toString()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:$r.prim}}}ToKey({int:e}){return e}compare(e,t){const i=Number(e),n=Number(t);return i===n?0:i<n?-1:1}findAndReturnTokens(e,t){return $r.prim===e&&t.push(this),t}}$r.prim="mutez";class Yw extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="BytesValidationError"}}class Vr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}ToBigMapKey(e){return{key:{bytes:e},type:{prim:Vr.prim}}}validate(e){if(!(typeof e=="string"&&/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new Yw(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let t=e.pop();return t=ah(this.convertUint8ArrayToHexString(t)),this.validate(t),{bytes:String(t).toString()}}EncodeObject(e,t){return e=this.convertUint8ArrayToHexString(e),typeof e=="string"&&(e=ah(e)),this.validate(e),t&&t[Vr.prim]?t[Vr.prim](e):{bytes:String(e).toString()}}Execute(e){return e.bytes}generateSchema(){return{__michelsonType:Vr.prim,schema:Vr.prim}}ToKey({bytes:e,string:t}){return t||e}findAndReturnTokens(e,t){return Vr.prim===e&&t.push(this),t}}Vr.prim="bytes";class Fn extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(e){const t=e;return t==null?{prim:"None"}:Array.isArray(t)&&(t[t.length-1]===void 0||t[t.length-1]===null)?(t.pop(),{prim:"None"}):{prim:"Some",args:[this.schema().Encode(e)]}}EncodeObject(e,t){let i=e;return i==null?{prim:"None"}:(i=typeof i=="object"&&"Some"in i?i.Some:i,{prim:"Some",args:[this.schema().EncodeObject(i,t)]})}Execute(e,t){return e.prim==="None"?null:{Some:this.schema().Execute(e.args[0],t)}}generateSchema(){return{__michelsonType:Fn.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature()]}get KeySchema(){return this.schema()}compare(e,t){if(e){if(!t)return 1}else return-1;return this.KeySchema.compare(e,t)}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,t){return Fn.prim===e&&t.push(this),this.subToken().findAndReturnTokens(e,t),t}}Fn.prim="option";class Wr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){if(e.string&&/^\d+$/.test(e.string))return new Date(Number(e.string)*1e3).toISOString();if(e.string)return new Date(e.string).toISOString();if(e.int)return new Date(Number(e.int)*1e3).toISOString()}Encode(e){const t=e.pop();return typeof t=="number"?{int:String(t)}:{string:t}}EncodeObject(e,t){return t&&t[Wr.prim]?t[Wr.prim](e):typeof e=="number"?{int:String(e)}:{string:e}}generateSchema(){return{__michelsonType:Wr.prim,schema:Wr.prim}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Wr.prim}}}findAndReturnTokens(e,t){return Wr.prim===e&&t.push(this),t}}Wr.prim="timestamp";class Xw extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="IntValidationError"}}class rr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){return new te(e[Object.keys(e)[0]])}generateSchema(){return{__michelsonType:rr.prim,schema:rr.prim}}validate(e){if(new te(e).isNaN())throw new Xw(e,this,`Value is not a number: ${JSON.stringify(e)}`)}Encode(e){const t=e.pop();return this.validate(t),{int:new te(t).toFixed()}}EncodeObject(e,t){return this.validate(e),t&&t[rr.prim]?t[rr.prim](e):{int:new te(e).toFixed()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:rr.prim}}}ToKey({int:e}){return e}compare(e,t){const i=Number(e),n=Number(t);return i===n?0:i<n?-1:1}findAndReturnTokens(e,t){return rr.prim===e&&t.push(this),t}}rr.prim="int";const gl=Symbol();class Zr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Encode(e){return e.pop(),{prim:"Unit"}}EncodeObject(e,t){return t&&t[Zr.prim]?t[Zr.prim](e):{prim:"Unit"}}Execute(e){return gl}generateSchema(){return{__michelsonType:Zr.prim,schema:Zr.prim}}compare(e,t){return 0}ToKey(e){return gl}ToBigMapKey(e){return{key:{prim:"Unit"},type:{prim:Zr.prim}}}findAndReturnTokens(e,t){return Zr.prim===e&&t.push(this),t}}Zr.prim="unit";class Qw extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="KeyValidationError"}}class Jr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){return e.string?e.string:sv(e.bytes)}validate(e){if(cv(e)!==se.VALID)throw new Qw(e,this,"Key is not valid")}Encode(e){const t=e.pop();return this.validate(t),{string:t}}EncodeObject(e,t){return this.validate(e),t&&t[Jr.prim]?t[Jr.prim](e):{string:e}}generateSchema(){return{__michelsonType:Jr.prim,schema:Jr.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Jr.prim}}}compare(e,t){const i=c0(e),n=c0(t),o=i.toProtocol(),a=n.toProtocol();return o[0]===a[0]?i.compare(n):o[0]>a[0]?1:-1}findAndReturnTokens(e,t){return Jr.prim===e&&t.push(this),t}}Jr.prim="key";class eE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="KeyHashValidationError"}}class Yr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){return e.string?e.string:sh(e.bytes)}validate(e){if(Ml(e)!==se.VALID)throw new eE(e,this,`KeyHash is not valid: ${JSON.stringify(e)}`)}Encode(e){const t=e.pop();return this.validate(t),{string:t}}EncodeObject(e,t){return this.validate(e),t&&t[Yr.prim]?t[Yr.prim](e):{string:e}}generateSchema(){return{__michelsonType:Yr.prim,schema:Yr.prim}}ToKey({string:e,bytes:t}){return e||sh(t)}ToBigMapKey(e){return{key:{string:e},type:{prim:Yr.prim}}}compare(e,t){const i=rl(e,"array"),n=rl(t,"array");return Mo(i,n)}findAndReturnTokens(e,t){return Yr.prim===e&&t.push(this),t}}Yr.prim="key_hash";class tE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="SignatureValidationError"}}class Xr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){return e.string?e.string:e.bytes}validate(e){if(uv(e)!==se.VALID)throw new tE(e,this,"Signature is not valid")}Encode(e){const t=e.pop();return this.validate(t),{string:t}}EncodeObject(e,t){return this.validate(e),t&&t[Xr.prim]?t[Xr.prim](e):{string:e}}generateSchema(){return{__michelsonType:Xr.prim,schema:Xr.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Xr.prim}}}findAndReturnTokens(e,t){return Xr.prim===e&&t.push(this),t}}Xr.prim="signature";class an extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(e){return e.string?e.string:e}Encode(e){return e.pop()}EncodeObject(e,t){return t&&t[an.prim]?t[an.prim](e):e}generateSchema(){return{__michelsonType:an.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(e,t){return an.prim===e&&t.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,t),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(e,t),t}}an.prim="lambda";class Oi extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){return e.string}Encode(...e){return{string:e.pop()}}EncodeObject(e,t){return t&&t[Oi.prim]?t[Oi.prim](e):{string:e}}generateSchema(){return{__michelsonType:Oi.prim,schema:Oi.prim}}findAndReturnTokens(e,t){return Oi.prim===e&&t.push(this),t}}Oi.prim="operation";class rE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="SetValidationError"}}class sn extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}get KeySchema(){return this.createToken(this.val.args[0],0)}validate(e){if(!Array.isArray(e))throw new rE(e,this,`Value ${JSON.stringify(e)} is not an array`)}Encode(e){const t=e.pop();return this.validate(t),t.sort((i,n)=>this.KeySchema.compare(i,n)).reduce((i,n)=>[...i,this.KeySchema.EncodeObject(n)],[])}Execute(e,t){return e.reduce((i,n)=>[...i,this.KeySchema.Execute(n,t)],[])}EncodeObject(e,t){return this.validate(e),t&&t[sn.prim]?t[sn.prim](e):e.sort((i,n)=>this.KeySchema.compare(i,n)).reduce((i,n)=>[...i,this.KeySchema.EncodeObject(n)],[])}generateSchema(){return{__michelsonType:sn.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(e,t){return sn.prim===e&&t.push(this),this.KeySchema.findAndReturnTokens(e,t),t}}sn.prim="set";class iE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="ChainIDValidationError"}}class Qr extends rt{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}validate(e){if(j0(e)!==se.VALID)throw new iE(e,this,`Value ${JSON.stringify(e)} is not a valid ChainID`)}Execute(e){return e[Object.keys(e)[0]]}generateSchema(){return{__michelsonType:Qr.prim,schema:Qr.prim}}Encode(e){const t=e.pop();return this.validate(t),{string:t}}EncodeObject(e,t){return this.validate(e),t&&t[Qr.prim]?t[Qr.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Qr.prim}}}findAndReturnTokens(e,t){return Qr.prim===e&&t.push(this),t}}Qr.prim="chain_id";class d0 extends qe{constructor(){super(),this.name="TicketEncodeError",this.message="Tickets cannot be sent to the blockchain; they are created on-chain"}}const nE={prim:"contract"},oE={prim:"int"};class Pr extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new d0}EncodeObject(e,t){if(t&&t[Pr.prim])return t[Pr.prim](e,this.val);throw new d0}Execute(e,t){if(t&&t[Pr.prim])return t[Pr.prim](e,this.val);const i=this.createToken(nE,this.idx),n=this.valueToken,o=this.createToken(oE,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:i.Execute(e.args[0],t),value:n.Execute(e.args[1].args[0],t),amount:o.Execute(e.args[1].args[1],t)}:{ticketer:i.Execute(e.args[0],t),value:n.Execute(e.args[1],t),amount:o.Execute(e.args[2],t)}}generateSchema(){return{__michelsonType:Pr.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:br.prim,schema:br.prim},amount:{__michelsonType:rr.prim,schema:rr.prim}}}}findAndReturnTokens(e,t){return Pr.prim===e&&t.push(this),this.valueToken.findAndReturnTokens(e,t),t}}Pr.prim="ticket";class p0 extends qe{constructor(){super(),this.name="TicketDeprecatedEncodeError",this.message="Ticket_deprecated cannot be sent to the blockchain; they are created on-chain"}}const aE={prim:"contract"},sE={prim:"int"};class Tr extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new p0}EncodeObject(e,t){if(t&&t[Tr.prim])return t[Tr.prim](e,this.val);throw new p0}Execute(e,t){if(t&&t[Tr.prim])return t[Tr.prim](e,this.val);const i=this.createToken(aE,this.idx),n=this.valueToken,o=this.createToken(sE,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:i.Execute(e.args[0],t),value:n.Execute(e.args[1].args[0],t),amount:o.Execute(e.args[1].args[1],t)}:{ticketer:i.Execute(e.args[0],t),value:n.Execute(e.args[1],t),amount:o.Execute(e.args[2],t)}}generateSchema(){return{__michelsonType:Tr.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:br.prim,schema:br.prim},amount:{__michelsonType:rr.prim,schema:rr.prim}}}}findAndReturnTokens(e,t){return Tr.prim===e&&t.push(this),this.valueToken.findAndReturnTokens(e,t),t}}Tr.prim="ticket_deprecated";class Ku extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="NeverTokenError"}}class Pi extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Encode(e){const t=e.pop();throw new Ku(t,this,`Assigning a value to the type never is forbidden. Trying to assign ${JSON.stringify(t)}.`)}EncodeObject(e,t){if(t&&t[Pi.prim])return t[Pi.prim](e);throw new Ku(e,this,`Assigning a value to the type never is forbidden. Trying to assign ${JSON.stringify(e)}.`)}Execute(e){throw new Ku(e,this,`There is no literal value for the type never. Trying to execute ${JSON.stringify(e)}.`)}generateSchema(){return{__michelsonType:Pi.prim,schema:Pi.prim}}findAndReturnTokens(e,t){return Pi.prim===e&&t.push(this),t}}Pi.prim="never";class $u extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="SaplingStateValidationError"}}class ei extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}isValid(e){return typeof e=="object"&&Object.keys(e).length===0}Execute(e,t){if(t&&t[ei.prim])return t[ei.prim](e,this.val);if("int"in e)return e.int;throw new $u(e,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(e)}`)}Encode(e){const t=e.pop();if(this.isValid(t))return[];throw new $u(t,this,`Invalid sapling_state. Received: ${JSON.stringify(t)} while expecting: {}`)}EncodeObject(e,t){if(t&&t[ei.prim])return t[ei.prim](e);if(this.isValid(e))return[];throw new $u(e,this,`Invalid sapling_state. Received: ${JSON.stringify(e)} while expecting: {}`)}generateSchema(){return{__michelsonType:ei.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,t){return ei.prim===e&&t.push(this),t}}ei.prim="sapling_state";class g0 extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="SaplingTransactionValidationError"}}class cn extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){throw new g0(e,this,`There is no literal value for the sapling_transaction type. Got: ${JSON.stringify(e)}.`)}validateBytes(e){const t=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(t&&t[2].length%2===0)return t[2];throw new g0(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let t=e.pop();return t=this.validateBytes(this.convertUint8ArrayToHexString(t)),{bytes:String(t).toString()}}EncodeObject(e,t){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),t&&t[cn.prim]?t[cn.prim](e):{bytes:String(e).toString()}}generateSchema(){return{__michelsonType:cn.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,t){return cn.prim===e&&t.push(this),t}}cn.prim="sapling_transaction";class m0 extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="SaplingTransactionDeprecatedValidationError"}}class un extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e){throw new m0(e,this,`There is no literal value for the sapling_transaction_deprecated type. Got: ${JSON.stringify(e)}.`)}validateBytes(e){const t=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(t&&t[2].length%2===0)return t[2];throw new m0(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let t=e.pop();return t=this.validateBytes(this.convertUint8ArrayToHexString(t)),{bytes:String(t).toString()}}EncodeObject(e,t){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),t&&t[un.prim]?t[un.prim](e):{bytes:String(e).toString()}}generateSchema(){return{__michelsonType:un.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,t){return un.prim===e&&t.push(this),t}}un.prim="sapling_transaction_deprecated";class cE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="Bls12381frValidationError"}}class Ti extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new cE(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let t=e.pop();return typeof t=="number"?{int:t.toString()}:(t=this.convertUint8ArrayToHexString(t),this.validate(t),{bytes:t})}EncodeObject(e,t){return t&&t[Ti.prim]?t[Ti.prim](e):typeof e=="number"?{int:e.toString()}:(e=this.convertUint8ArrayToHexString(e),this.validate(e),{bytes:e})}Execute(e){return e.bytes}generateSchema(){return{__michelsonType:Ti.prim,schema:Ti.prim}}findAndReturnTokens(e,t){return Ti.prim===e&&t.push(this),t}}Ti.prim="bls12_381_fr";class uE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="Bls12381g1ValidationError"}}class ki extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new uE(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let t=e.pop();return t=this.convertUint8ArrayToHexString(t),this.validate(t),{bytes:t}}EncodeObject(e,t){return e=this.convertUint8ArrayToHexString(e),this.validate(e),t&&t[ki.prim]?t[ki.prim](e):{bytes:e}}Execute(e){return e.bytes}generateSchema(){return{__michelsonType:ki.prim,schema:ki.prim}}findAndReturnTokens(e,t){return ki.prim===e&&t.push(this),t}}ki.prim="bls12_381_g1";class lE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="Bls12381g2ValidationError"}}class Ii extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new lE(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let t=e.pop();return t=this.convertUint8ArrayToHexString(t),this.validate(t),{bytes:t}}EncodeObject(e,t){return e=this.convertUint8ArrayToHexString(e),this.validate(e),t&&t[Ii.prim]?t[Ii.prim](e):{bytes:e}}Execute(e){return e.bytes}generateSchema(){return{__michelsonType:Ii.prim,schema:Ii.prim}}findAndReturnTokens(e,t){return Ii.prim===e&&t.push(this),t}}Ii.prim="bls12_381_g2";class fE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="ChestValidationError"}}class Li extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2==0))throw new fE(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let t=e.pop();return t=this.convertUint8ArrayToHexString(t),this.validate(t),{bytes:t}}EncodeObject(e,t){return e=this.convertUint8ArrayToHexString(e),this.validate(e),t&&t[Li.prim]?t[Li.prim](e):{bytes:e}}Execute(e){return e.bytes}generateSchema(){return{__michelsonType:Li.prim,schema:Li.prim}}findAndReturnTokens(e,t){return Li.prim===e&&t.push(this),t}}Li.prim="chest";class hE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="ChestKeyValidationError"}}class Ni extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new hE(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let t=e.pop();return t=this.convertUint8ArrayToHexString(t),this.validate(t),{bytes:t}}EncodeObject(e,t){return e=this.convertUint8ArrayToHexString(e),this.validate(e),t&&t[Ni.prim]?t[Ni.prim](e):{bytes:e}}Execute(e){return e.bytes}generateSchema(){return{__michelsonType:Ni.prim,schema:Ni.prim}}findAndReturnTokens(e,t){return Ni.prim===e&&t.push(this),t}}Ni.prim="chest_key";class b0 extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="GlobalConstantEncodingError"}}class dE extends ze{constructor(e,t,i){super(e,t,i),this.value=e,this.token=t,this.name="GlobalConstantDecodingError"}}class ti extends Ue{constructor(e,t,i){super(e,t,i),this.val=e,this.idx=t,this.fac=i}Execute(e,t){if(t&&t[ti.prim])return t[ti.prim](e,this.val);throw new dE(e,this,`Unable to decode a value represented by a global constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following global constant hash was encountered: ${this.val.args[0].string}.`)}Encode(e){throw new b0(e,this,`Unable to encode a script containing global constants. Please provide an expanded script to the Michelson-Encoder. The following global constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(e,t){if(t&&t[ti.prim])return t[ti.prim](e);throw new b0(e,this,`Unable to encode a script containing global constants. Please provide an expanded script to the Michelson-Encoder. The following global constant hash was encountered: ${this.val.args[0].string}.`)}generateSchema(){return{__michelsonType:ti.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(e,t){return ti.prim===e&&t.push(this),t}}ti.prim="constant";const pE=[xt,Fr,Gr,tr,Ri,Mi,Kr,Ne,br,on,$r,Vr,Fn,Wr,rr,Zr,Jr,Yr,Xr,an,Oi,sn,Qr,Pr,Tr,Pi,ei,cn,un,Ti,ki,Ii,Li,Ni,ti];class gE extends qe{constructor(e,t){super(e),this.message=e,this.data=t,this.name="Invalid token error"}}function bn(r,e,t){if(Array.isArray(r))return new xt(r,e,bn,t);const i=pE.find(n=>n.prim===r.prim);if(!i)throw new gE(`Malformed data: ${JSON.stringify(r)}. Expected a value with a valid prim property`,r);return new i(r,e,bn,t)}class ml extends M0{constructor(e,t,i,n){super(e,t,i,n),this.viewName=e,this.sigs=t,this.args=i,this.cause=n,this.name="ParameterEncodingError",this.message=`Could not encode parameter ${JSON.stringify(i)} received for name "${e}" expecting one of the following signatures ${JSON.stringify(t)}`}}class Vu extends qe{constructor(e,t){super(),this.script=e,this.reason=t,this.name="InvalidScriptError";let i="Invalid on-chain view found in the following script.";t&&(i+=` Reason: ${t}.`),i+=`Script: ${JSON.stringify(e)}`,this.message=i}}class ii extends qe{constructor(e,t){super(),this.script=e,this.reason=t,this.name="InvalidRpcResponseError";let i="Invalid RPC response passed as argument(s).";t&&(i+=` Reason: ${t}.`),i+=` Received: ${JSON.stringify(e)}`,this.message=i}}class Wu extends qe{constructor(e){super(e),this.message=e,this.name="InvalidBigMapSchemaError"}}class mE extends qe{constructor(e,t){super(e),this.message=e,this.value=t,this.name="InvalidBigMapDiffError"}}class bE extends qe{constructor(e,t,i,n){super(),this.details=t,this.schema=i,this.value=n,this.name="BigMapEncodingError",this.message=`Unable to encode the big map ${e}. Schema is: ${JSON.stringify(i)}. The ${e} is: ${JSON.stringify(n)}. Error details: ${t}`}}class vE extends qe{constructor(e,t,i,n,o){super(),this.details=t,this.schema=i,this.value=n,this.semantics=o,this.name="StorageEncodingError",this.message=`Unable to encode ${e}. The schema is: ${JSON.stringify(i)}, the value is: ${JSON.stringify(n)}.${o?`And the semantic is: ${JSON.stringify(o)}`:""}. Error details: ${t}`}}class yE extends qe{constructor(e){super(e),this.message=e,this.name="MissingArgumentError"}}var Om;const Pm=Symbol.for("taquito-schema-type-symbol");function ko(r,e=xt.prim){var t,i;if(Array.isArray(r))return ko({prim:e,args:r},e);const n=r;return n.prim===e&&n.args&&n.args.length>2?Object.assign(Object.assign({},n),{args:[(t=n.args)===null||t===void 0?void 0:t[0],{prim:e,args:(i=n.args)===null||i===void 0?void 0:i.slice(1)}]}):n}function af(r,e){if(r===void 0||e===void 0)return r===e;const t=ko(r),i=ko(e);return t.prim===i.prim&&(t.args===void 0&&i.args===void 0||t.args!==void 0&&i.args!==void 0&&t.args.length===i.args.length&&t.args.every((n,o)=>{var a,s;return af(n,(s=(a=i.args)===null||a===void 0?void 0:a[o])!==null&&s!==void 0?s:{})}))&&(t.annots===void 0&&i.annots===void 0||t.annots!==void 0&&i.annots!==void 0&&t.annots.length===i.annots.length&&t.annots.every((n,o)=>{var a;return n===((a=i.annots)===null||a===void 0?void 0:a[o])}))}class _r{static isSchema(e){return e&&e[Pm]===!0}static fromRPCResponse(e){if(!e)throw new ii(e,"the RPC response is empty");if(!e.script)throw new ii(e,"the RPC response has no script");if(!Array.isArray(e.script.code))throw new ii(e,"The response.script.code should be an array");let t=e.script.code;for(;t.length===1&&Array.isArray(t[0]);)t=t[0];const i=t.find(n=>"prim"in n&&n.prim==="storage");if(!i||!Array.isArray(i.args))throw new ii(e,'The response.script.code has an element of type {prim: "storage"}, but its args is not an array');return new _r(i.args[0])}isExpressionExtended(e){return"prim"in e&&Array.isArray(e.args)}constructor(e){if(this.val=e,this[Om]=!0,this.root=bn(e,0),this.root instanceof tr)this.bigMap=this.root;else if(this.isExpressionExtended(e)&&e.prim==="pair"){const t=e.args[0];this.isExpressionExtended(t)&&t.prim==="big_map"&&(this.bigMap=new tr(t,0,bn))}}removeTopLevelAnnotation(e){return(this.root instanceof xt||this.root instanceof Ne)&&this.root.hasAnnotations()&&typeof e=="object"&&Object.keys(e).length===1?e[Object.keys(e)[0]]:e}Execute(e,t){const i=this.root.Execute(e,t);return this.removeTopLevelAnnotation(i)}Typecheck(e){if(this.root instanceof tr&&Number.isInteger(Number(e))||this.root instanceof Pr&&e.ticketer&&e.value&&e.amount||this.root instanceof Tr&&e.ticketer&&e.value&&e.amount||this.root instanceof Mi&&this.root.ValueSchema instanceof tr)return!0;try{return this.root.EncodeObject(e),!0}catch{return!1}}ExecuteOnBigMapDiff(e,t){if(!this.bigMap)throw new Wu("Big map schema is undefined");if(!Array.isArray(e))throw new mE(`Big map diff must be an array, got: ${JSON.stringify(e)}`,e);const i=e.map(({key:n,value:o})=>({args:[n,o]}));return this.bigMap.Execute(i,t)}ExecuteOnBigMapValue(e,t){if(!this.bigMap)throw new Wu("Big map schema is undefined");return this.bigMap.ValueSchema.Execute(e,t)}EncodeBigMapKey(e){if(!this.bigMap)throw new Wu("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(e)}catch(t){throw new bE("key",t,this.bigMap.KeySchema,e)}}Encode(e,t){try{return this.root.EncodeObject(e,t)}catch(i){throw i instanceof ze?i:new vE("storage object",i,this.root,e,t)}}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}FindFirstInTopLevelPair(e,t){return this.findValue(this.root.val,e,t)}findValue(e,t,i){if(af(i,e))return t;if(Array.isArray(e)||e.prim==="pair"){const n=ko(e),o=ko(t,"Pair");if(n.args===void 0||o.args===void 0)throw new yE("Tokens have no arguments");if(n.args[0])return this.findValue(n.args[0],o.args[0],i)||this.findValue(n.args[1],o.args[1],i)}}findToken(e){const t=[];return this.root.findAndReturnTokens(e,t)}}Om=Pm;class In{static fromRPCResponse(e){if(!e)throw new ii(e,"the RPC response is empty");if(!e.script)throw new ii(e,"the RPC response has no script");if(!Array.isArray(e.script.code))throw new ii(e,"The response.script.code should be an array");const t=e.script.code.find(i=>"prim"in i&&i.prim==="parameter");if(!t)throw new ii(e,'The response.script.code should have an element of type {prim: "parameter"}');if(!Array.isArray(t.args))throw new ii(e,'The response.script.code has an element of type {prim: "parameter"}, but its args is not an array');return new In(t.args[0])}get isMultipleEntryPoint(){return this.root instanceof Ne||this.root instanceof Fn&&this.root.subToken()instanceof Ne}get hasAnnotation(){return this.isMultipleEntryPoint?Object.keys(this.generateSchema())[0]!=="0":!0}constructor(e){this.root=bn(e,0)}Execute(e,t){return this.root.Execute(e,t)}Encode(...e){try{return this.root.Encode(e.reverse())}catch(t){throw t instanceof ze?t:new ml("Unable to encode parameter",this.root,e,t)}}EncodeObject(e,t){try{return this.root.EncodeObject(e,t)}catch(i){throw i instanceof ze?i:new ml("Unable to encode parameter object",this.root,e,i)}}generateSchema(){return this.root.generateSchema()}ExtractSignatures(){return this.root.ExtractSignature()}}class sf{static fromRPCResponse(e){const t=[],i=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.filter(n=>n.prim==="view");return i&&i.forEach(n=>{t.push(new sf(n.args))}),t}constructor(e){if(!e)throw new Vu(e,"the args are not defined");if(e.length!==4)throw new Vu(e,"there should be exactly 4 arguments");if(!("string"in e[0])||!e[0].string)throw new Vu(e,"The first argument should be a string, representing the view name. It should be in the form: { string: 'viewName' }");this.viewName=e[0].string,this.viewArgsType=e[1],this.viewReturnType=e[2],this.instructions=e[3],this.rootArgsType=bn(this.viewArgsType,0),this.rootReturnType=bn(this.viewReturnType,0)}encodeViewArgs(e){try{return this.rootArgsType.EncodeObject(e)}catch(t){throw new ml(this.viewName,void 0,e,t)}}decodeViewResult(e,t){return this.rootReturnType.Execute(e,t)}extractArgsSchema(){return this.rootArgsType.generateSchema()}extractResultSchema(){return this.rootReturnType.generateSchema()}}class xi{constructor(e,t){this.tag=e,this.type=t}static fromMichelineValue(e){var t,i;return new xi((t=e.annots)===null||t===void 0?void 0:t[0],(i=e.args)===null||i===void 0?void 0:i[0])}static fromRPCResponse(e){const t=[];return e.script.code.forEach(i=>{!("prim"in i)||i.prim!=="code"||!("args"in i)||!i.args||t.push(...xi.extractEventsRecursively(i.args))}),xi.removeDuplicates(t)}static removeDuplicates(e){const t=[];return e.forEach(i=>{t.findIndex(o=>o.tag===i.tag&&af(o.type,i.type))===-1&&t.push(i)}),t}static extractEventsRecursively(e){return Array.isArray(e)?e.flatMap(t=>xi.extractEventsRecursively(t)):"prim"in e?e.prim==="EMIT"?[xi.fromMichelineValue(e)]:!("args"in e)||!e.args?[]:e.args.flatMap(t=>xi.extractEventsRecursively(t)):[]}}const $t=Symbol("source_reference");class ao extends qe{constructor(e,t,i){super(),this.src=e,this.idx=t,this.message=i,this.name="ScanError"}}var Wt;(function(r){r[r.Comment=0]="Comment",r[r.Number=1]="Number",r[r.String=2]="String",r[r.Bytes=3]="Bytes",r[r.Ident=4]="Ident"})(Wt||(Wt={}));const _E=new RegExp("\\s"),wE=new RegExp("[:@%_A-Za-z]"),EE=new RegExp("[@%_\\.A-Za-z0-9]"),v0=new RegExp("[0-9]"),xE=new RegExp("[0-9a-fA-F]");function*Zu(r,e=!1){let t=0;for(;t<r.length;){for(;t<r.length&&_E.test(r[t]);)t++;if(t===r.length)return;const i=r[t],n=t;if(wE.test(i)){for(t++;t<r.length&&EE.test(r[t]);)t++;yield{t:Wt.Ident,v:r.slice(n,t),first:n,last:t}}else if(r.length-t>1&&r.substring(t,t+2)==="0x"){for(t+=2;t<r.length&&xE.test(r[t]);)t++;if((t-n&1)!==0)throw new ao(r,t,"Bytes literal length is expected to be power of two");yield{t:Wt.Bytes,v:r.slice(n,t),first:n,last:t}}else if(v0.test(i)||i==="-"){i==="-"&&t++;const o=t;for(;t<r.length&&v0.test(r[t]);)t++;if(o===t)throw new ao(r,t,"Number literal is too short");yield{t:Wt.Number,v:r.slice(n,t),first:n,last:t}}else if(i==='"'){t++;let o=!1;for(;t<r.length&&(o||r[t]!=='"');t++)!o&&r[t]==="\\"?o=!0:o=!1;if(t===r.length)throw new ao(r,t,"Unterminated string literal");t++,yield{t:Wt.String,v:r.slice(n,t),first:n,last:t}}else if(i==="#"){for(t++;t<r.length&&r[t]!==`
`;)t++;e&&(yield{t:Wt.Comment,v:r.slice(n,t),first:n,last:t})}else if(r.length-t>1&&r.substring(t,t+2)==="/*"){for(t+=2;t<r.length&&!(r.length-t>1&&r.substring(t,t+2)==="*/");)t++;if(t===r.length)throw new ao(r,t,"Unterminated C style comment");t+=2,e&&(yield{t:Wt.Comment,v:r.slice(n,t),first:n,last:t})}else if(i==="("||i===")"||i==="{"||i==="}"||i===";")t++,yield{t:i,v:i,first:n,last:t};else throw new ao(r,t,`Invalid character at offset ${t}: \`${i}'`)}}const ua=Symbol("ref_contract");var li;(function(r){r.Ps9mPmXa="Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P",r.PtCJ7pwo="PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY",r.PsYLVpVv="PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt",r.PsddFKi3="PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",r.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",r.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",r.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",r.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",r.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",r.PtEdoTez="PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq",r.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",r.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",r.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",r.PtHangzH="PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r",r.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",r.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",r.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",r.PtJakarta="PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw",r.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",r.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",r.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",r.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",r.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",r.PtNairobi="PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf",r.ProxfordY="ProxfordYmVfjWnRcgjWH36fW6PArwqykTFzotUxRs6gmTcZDuH",r.PtParisBx="PtParisBxoLz5gzMmn3d9WBQNoPSZakgnkMC2VNuQ3KXfUtUQeZ",r.PsParisCZ="PsParisCZo7KAh1Z1smVd9ZMZ1HHn5gkzbM94V3PLCpknFWhUAi",r.PsQuebecn="PsQuebecnLByd3JwTiGadoG4nGWi3HYiLXUjkibeFV8dCFeVMUg",r.PsRiotuma="PsRiotumaAMotcRoDWW1bysEhQy2n1M5fy8JgRp8jjRfHGmfeA7",r.PtSeouLou="PtSeouLouXkxhg39oWzjxDWaCydNfR3RxCUrNe4Q9Ro8BTehcbh",r.PtTALLiNt="PtTALLiNtPec7mE7yY4m3k26J8Qukef3E3ehzhfXgFZKGtDdAXu",r.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(li||(li={}));const Tm=li.PtTALLiNt,y0={Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P:0,PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY:1,PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt:2,PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP:3,Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq:8,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r:11,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP:12,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw:13,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg:14,PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW:15,PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc:16,PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1:16,PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf:17,ProxfordYmVfjWnRcgjWH36fW6PArwqykTFzotUxRs6gmTcZDuH:19,PtParisBxoLz5gzMmn3d9WBQNoPSZakgnkMC2VNuQ3KXfUtUQeZ:20,PsParisCZo7KAh1Z1smVd9ZMZ1HHn5gkzbM94V3PLCpknFWhUAi:20,PsQuebecnLByd3JwTiGadoG4nGWi3HYiLXUjkibeFV8dCFeVMUg:21,PsRiotumaAMotcRoDWW1bysEhQy2n1M5fy8JgRp8jjRfHGmfeA7:22,PtSeouLouXkxhg39oWzjxDWaCydNfR3RxCUrNe4Q9Ro8BTehcbh:23,PtTALLiNtPec7mE7yY4m3k26J8Qukef3E3ehzhfXgFZKGtDdAXu:24,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:25};function Ln(r,e){return y0[r]<y0[e]}class vr extends qe{constructor(e,t){super(),this.prim=e,this.message=t,this.name="MacroError"}}function We(r,e){var t,i;if(e===0&&r.args===void 0||((t=r.args)===null||t===void 0?void 0:t.length)===e)return!0;throw new vr(r,`macro ${r.prim} expects ${e} arguments, was given ${(i=r.args)===null||i===void 0?void 0:i.length}`)}function so(r){if(r.annots===void 0)return!0;throw new vr(r,`unexpected annotation on macro ${r.prim}: ${r.annots}`)}function _0(r,e){if("int"in e)return!0;throw new vr(r,`macro ${r.prim} expects int argument`)}function vo(r,e,t,i){let n=0,o=0;const a=[null,null];let s;if(n===e.length)throw new vr(r,`unexpected end: ${r.prim}`);let c=e[n++];switch(c){case"P":{const{r:p,n:f,an:l}=vo(r,e.slice(n),t.slice(o),i);s=p,n+=f,o+=l;break}case"A":o!==t.length&&(a[0]=t[o++]);break;default:throw new vr(r,`${r.prim}: unexpected character: ${c}`)}let u;if(n===e.length)throw new vr(r,`unexpected end: ${r.prim}`);switch(c=e[n++],c){case"P":{const{r:p,n:f,an:l}=vo(r,e.slice(n),t.slice(o),i);u=p.map(([d,g])=>[d+1,g]),n+=f,o+=l;break}case"I":o!==t.length&&(a[1]=t[o++]);break;default:throw new vr(r,`${r.prim}: unexpected character: ${c}`)}return{r:i(s,u,[0,a]),n,an:o}}function Da(r,e,t,i){const n=e[0];switch(n){case"A":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},Da(r,e.slice(1),[],i)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%@","%@",...t]}]:i.a;case"D":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},Da(r,e.slice(1),[],i)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%@",...t]}]:i.d;default:throw new vr(r,`${r.prim}: unexpected character: ${n}`)}}function SE(r,e){let t=r.length;for(;t>0&&r[t-1]===e;)t--;return r.slice(0,t)}function Ju(r){const e=[],t=[];if(r!==void 0)for(const i of r)(i.length!==0&&i[0]==="%"?e:t).push(i);return{fields:e,rest:t}}function Ot({prim:r,annots:e,args:t}){return Object.assign(Object.assign({prim:r},e&&{annots:e}),t&&{args:t})}const AE=/^P[PAI]{3,}R$/,RE=/^UNP[PAI]{2,}R$/,OE=/^C[AD]{2,}R$/,PE=/^SET_C[AD]+R$/,TE=/^MAP_C[AD]+R$/,kE=/^DI{2,}P$/,IE=/^DU+P$/;function LE(r,e){const t=e?.protocol||Tm;function i(n){return n!==void 0?[{prim:"RENAME",annots:n}]:[]}switch(r.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(We(r,0))return[{prim:"COMPARE"},Ot({prim:r.prim.slice(3),annots:r.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(We(r,2))return[{prim:r.prim.slice(2)},Ot({prim:"IF",annots:r.annots,args:r.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(We(r,2))return[{prim:"COMPARE"},{prim:r.prim.slice(5)},Ot({prim:"IF",annots:r.annots,args:r.args})];break;case"FAIL":if(We(r,0)&&so(r))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(We(r,0)&&so(r))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(We(r,0)&&so(r))return[{prim:r.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(We(r,0)&&so(r))return[[{prim:"COMPARE"},{prim:r.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(We(r,0)&&so(r))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(We(r,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],i(r.annots)]}];break;case"ASSERT_LEFT":if(We(r,0))return[{prim:"IF_LEFT",args:[i(r.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(We(r,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],i(r.annots)]}];break;case"IF_SOME":if(We(r,2))return[Ot({prim:"IF_NONE",annots:r.annots,args:[r.args[1],r.args[0]]})];break;case"IF_RIGHT":if(We(r,2))return[Ot({prim:"IF_LEFT",annots:r.annots,args:[r.args[1],r.args[0]]})];break;case"CAR":case"CDR":if(r.args!==void 0){if(We(r,1)&&_0(r,r.args[0])){const n=parseInt(r.args[0].int,10);return Ot({prim:"GET",args:[{int:r.prim==="CAR"?String(n*2+1):String(n*2)}],annots:r.annots})}}else return r}if(AE.test(r.prim)&&We(r,0)){const{fields:n,rest:o}=Ju(r.annots),{r:a}=vo(r,r.prim.slice(1),n,(s,c,u)=>[...s||[],...c||[],u]);return a.map(([s,c],u)=>{const p=[...SE(c,null).map(l=>l===null?"%":l),...s===0&&u===a.length-1?o:[]],f=Ot({prim:"PAIR",annots:p.length!==0?p:void 0});return s===0?f:{prim:"DIP",args:s===1?[[f]]:[{int:String(s)},[f]]}})}if(RE.test(r.prim))if(Ln(t,li.PtEdo2Zk)&&We(r,0)){const{r:n}=vo(r,r.prim.slice(3),r.annots||[],(o,a,s)=>[s,...a||[],...o||[]]);return n.map(([o,a])=>{const s=[{prim:"DUP"},Ot({prim:"CAR",annots:a[0]!==null?[a[0]]:void 0}),{prim:"DIP",args:[[Ot({prim:"CDR",annots:a[1]!==null?[a[1]]:void 0})]]}];return o===0?s:{prim:"DIP",args:o===1?[[s]]:[{int:String(o)},[s]]}})}else{if(r.prim==="UNPAIR")return r;if(We(r,0)){const{r:n}=vo(r,r.prim.slice(3),[],(o,a,s)=>[s,...a||[],...o||[]]);return n.map(([o])=>{const a=Ot({prim:"UNPAIR"});return o===0?a:{prim:"DIP",args:o===1?[[a]]:[{int:String(o)},[a]]}})}}if(OE.test(r.prim)&&We(r,0)){const n=[...r.prim.slice(1,r.prim.length-1)];return n.map((o,a)=>{const s=a===n.length-1?r.annots:void 0;switch(o){case"A":return Ot({prim:"CAR",annots:s});case"D":return Ot({prim:"CDR",annots:s});default:throw new vr(r,`unexpected character: ${o}`)}})}if(PE.test(r.prim)&&We(r,0)){const{fields:n,rest:o}=Ju(r.annots);if(n.length>1)throw new vr(r,`unexpected annotation on macro ${r.prim}: ${n}`);const a=n.length!==0?{a:[{prim:"DUP"},{prim:"CAR",annots:n},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[n[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:n},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",n[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return Da(r,r.prim.slice(5,r.prim.length-1),o,a)}if(TE.test(r.prim)&&We(r,1)){const{fields:n}=Ju(r.annots);if(n.length>1)throw new vr(r,`unexpected annotation on macro ${r.prim}: ${n}`);const o={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[Ot({prim:"CAR",annots:n.length!==0?["@"+n[0].slice(1)]:void 0}),r.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[n.length!==0?n[0]:"%","%@"]}],d:[{prim:"DUP"},Ot({prim:"CDR",annots:n.length!==0?["@"+n[0].slice(1)]:void 0}),r.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",n.length!==0?n[0]:"%"]}]};return Da(r,r.prim.slice(5,r.prim.length-1),[],o)}if(kE.test(r.prim)&&We(r,1)){let n=0;for(;r.prim[1+n]==="I";)n++;return Ot({prim:"DIP",args:[{int:String(n)},r.args[0]]})}if(IE.test(r.prim)){let n=0;for(;r.prim[1+n]==="U";)n++;if(Ln(t,li.PtEdo2Zk)){if(n===1){if(r.args===void 0)return r;We(r,1)&&_0(r,r.args[0])&&(n=parseInt(r.args[0].int,10))}else We(r,0);return n===1?[Ot({prim:"DUP",annots:r.annots})]:n===2?[{prim:"DIP",args:[[Ot({prim:"DUP",annots:r.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(n-1)},[Ot({prim:"DUP",annots:r.annots})]]},{prim:"DIG",args:[{int:String(n)}]}]}else{if(n===1)return r;if(We(r,0))return Ot({prim:"DUP",args:[{int:String(n)}],annots:r.annots})}}return r}function NE(r,e){return r.args!==void 0&&r.args.length===1&&"string"in r.args[0]&&r.args[0].string in e?e[r.args[0].string]:r}class ya extends qe{constructor(e,t){super(),this.token=e,this.message=t,this.name="MichelineParseError"}}class yi extends qe{constructor(e,t){super(),this.node=e,this.message=t,this.name="JSONParseError"}}const Yu=new ya(null,"Unexpected EOF");function w0(r){return r.t===Wt.Ident&&(r.v[0]==="@"||r.v[0]==="%"||r.v[0]===":")}const BE=new RegExp("^-?[0-9]+$"),ME=new RegExp("^([0-9a-fA-F]{2})*$");class ln{constructor(e){this.opt=e}expand(e){var t,i,n;if(((t=this.opt)===null||t===void 0?void 0:t.expandGlobalConstant)!==void 0&&e.prim==="constant"){const o=NE(e,this.opt.expandGlobalConstant);return o!==e&&(o[$t]=Object.assign(Object.assign({},e[$t]||{first:0,last:0}),{globalConstant:e})),o}if(((i=this.opt)===null||i===void 0?void 0:i.expandMacros)===void 0||!((n=this.opt)===null||n===void 0)&&n.expandMacros){const o=LE(e,this.opt);return o!==e&&(o[$t]=Object.assign(Object.assign({},e[$t]||{first:0,last:0}),{macro:e})),o}else return e}parseListExpr(e,t){var i;const n={first:t.first,last:t.last},o=t.t==="(";let a;if(o){if(a=e.next(),a.done)throw Yu;n.last=a.value.last}else a={value:t};if(a.value.t!==Wt.Ident)throw new ya(a.value,`not an identifier: ${a.value.v}`);const s={prim:a.value.v,[$t]:n};for(;;){const c=e.next();if(c.done){if(o)throw Yu;break}else if(c.value.t===")"){if(!o)throw new ya(c.value,"unexpected closing bracket");n.last=c.value.last;break}else if(w0(c.value))s.annots=s.annots||[],s.annots.push(c.value.v),n.last=c.value.last;else{s.args=s.args||[];const u=this.parseExpr(e,c.value);n.last=((i=u[$t])===null||i===void 0?void 0:i.last)||n.last,s.args.push(u)}}return this.expand(s)}parseArgs(e,t){var i;const n={first:t.first,last:t.last},o={prim:t.v,[$t]:n};for(;;){const a=e.next();if(a.done||a.value.t==="}"||a.value.t===";")return[o,a];if(w0(a.value))n.last=a.value.last,o.annots=o.annots||[],o.annots.push(a.value.v);else{const s=this.parseExpr(e,a.value);n.last=((i=s[$t])===null||i===void 0?void 0:i.last)||n.last,o.args=o.args||[],o.args.push(s)}}}parseSequenceExpr(e,t){var i,n;const o={first:t.first,last:t.last},a=[];a[$t]=o;const s=t.t==="{";let c=t.t==="{"?null:{value:t};for(;;){if(c===null&&(c=e.next(),c.done||(o.last=c.value.last)),c.done){if(s)throw Yu;return a}if(c.value.t==="}"){if(s)return a;throw new ya(c.value,"unexpected closing bracket")}else if(c.value.t===Wt.Ident){const[u,p]=this.parseArgs(e,c.value);o.last=((i=u[$t])===null||i===void 0?void 0:i.last)||o.last,a.push(this.expand(u)),c=p}else{const u=this.parseExpr(e,c.value);o.last=((n=u[$t])===null||n===void 0?void 0:n.last)||o.last,a.push(u),c=null}c===null&&(c=e.next(),c.done||(o.last=c.value.last)),!c.done&&c.value.t===";"&&(c=null)}}parseExpr(e,t){switch(t.t){case Wt.Ident:return this.expand({prim:t.v,[$t]:{first:t.first,last:t.last}});case Wt.Number:return{int:t.v,[$t]:{first:t.first,last:t.last}};case Wt.String:return{string:JSON.parse(t.v),[$t]:{first:t.first,last:t.last}};case Wt.Bytes:return{bytes:t.v.slice(2),[$t]:{first:t.first,last:t.last}};case"{":return this.parseSequenceExpr(e,t);default:return this.parseListExpr(e,t)}}parseSequence(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const t=Zu(e),i=t.next();return i.done?null:this.parseSequenceExpr(t,i.value)}parseList(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const t=Zu(e),i=t.next();return i.done?null:this.parseListExpr(t,i.value)}parseMichelineExpression(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const t=Zu(e),i=t.next();return i.done?null:this.parseExpr(t,i.value)}parseScript(e){return this.parseSequence(e)}parseData(e){return this.parseList(e)}parseJSON(e){if(typeof e!="object")throw new TypeError(`object type was expected, got ${typeof e} instead`);if(Array.isArray(e)){const t=[];for(const i of e){if(i===null||typeof i!="object")throw new yi(i,`unexpected sequence element: ${i}`);t.push(this.parseJSON(i))}return t}else if("prim"in e){const t=e;if(typeof t.prim=="string"&&(t.annots===void 0||Array.isArray(t.annots))&&(t.args===void 0||Array.isArray(t.args))){const i={prim:t.prim};if(t.annots!==void 0){for(const n of t.annots)if(typeof n!="string")throw new yi(n,`string expected: ${n}`);i.annots=t.annots}if(t.args!==void 0){i.args=[];for(const n of t.args){if(n===null||typeof n!="object")throw new yi(n,`unexpected argument: ${n}`);i.args.push(this.parseJSON(n))}}return this.expand(i)}throw new yi(e,`malformed prim expression: ${e}`)}else if("string"in e){if(typeof e.string=="string")return{string:e.string};throw new yi(e,`malformed string literal: ${e}`)}else if("int"in e){if(typeof e.int=="string"&&BE.test(e.int))return{int:e.int};throw new yi(e,`malformed int literal: ${e}`)}else if("bytes"in e){if(typeof e.bytes=="string"&&ME.test(e.bytes))return{bytes:e.bytes};throw new yi(e,`malformed bytes literal: ${e}`)}else throw new yi(e,`unexpected object: ${e}`)}}const jE=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],CE=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];class bl extends qe{constructor(e){super(),this.message=e,this.name="Base58DecodingError"}}function E0(r){const e=(r.length+9)%64,t=e===0?0:64-e;if(r.length>268435455)throw new lv("",`: Invalid length ${r.length} is too big -- SHA-256.`);const i=r.length<<3,n=[...r,128,...new Array(t).fill(0),0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255];function o(p,f){return p>>>f|p<<32-f}const a=[...jE],s=new Array(64),c=new Array(8);for(let p=0;p<n.length;p+=64){let f=p,l=0;for(;l<16;)s[l]=n[f]<<24|n[f+1]<<16|n[f+2]<<8|n[f+3],f+=4,l++;for(;l<64;){const d=o(s[l-15],7)^o(s[l-15],18)^s[l-15]>>>3,g=o(s[l-2],17)^o(s[l-2],19)^s[l-2]>>>10;s[l]=(g|0)+s[l-7]+d+s[l-16]|0,l++}for(let d=0;d<8;d++)c[d]=a[d];for(let d=0;d<64;d++){const g=o(c[0],2)^o(c[0],13)^o(c[0],22),b=o(c[4],6)^o(c[4],11)^o(c[4],25),x=c[7]+b+(c[4]&c[5]^~c[4]&c[6])+CE[d]+s[d]|0,_=g+(c[0]&c[1]^c[0]&c[2]^c[1]&c[2])|0;c[7]=c[6],c[6]=c[5],c[5]=c[4],c[4]=c[3]+x|0,c[3]=c[2],c[2]=c[1],c[1]=c[0],c[0]=x+_|0}for(let d=0;d<8;d++)a[d]=a[d]+c[d]|0}const u=[];for(const p of a)u.push(p>>24&255),u.push(p>>16&255),u.push(p>>8&255),u.push(p&255);return u}const Xu=[0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function x0(r,e){const t=r.charCodeAt(e)-49;if(t>=Xu.length||Xu[t]===-1)throw new bl(`Unexpected character at position ${e}: ${r[e]}`);return Xu[t]}function zE(r){const e=[];let t=0;for(;t<r.length&&x0(r,t)===0;)t++;let i=t;for(;t<r.length;){let n=x0(r,t++),o=0;for(;n!==0||o<e.length;){const a=(e[o]||0)*58+n;e[o++]=a%256,n=Math.floor(a/256)}}for(;i-- >0;)e.push(0);return e.reverse()}function km(r){const e=zE(r);if(e.length<4)throw new bl(`Data is too short ${e.length}`);const t=e.slice(0,e.length-4),i=e.slice(e.length-4),n=E0(E0(t));if(i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2]||i[3]!==n[3])throw new bl("Invalid checksum");return t}class HE extends we{constructor(e){super(),this.message=e,this.name="InvalidMichelsonError"}}class DE extends we{constructor(e){super(),this.message=e,this.name="InvalidTypeExpressionError"}}class UE extends we{constructor(e){super(),this.message=e,this.name="InvalidDataExpressionError"}}class qE extends we{constructor(e){super(),this.entrypoint=e,this.name="InvalidEntrypointError",this.message=`Contract has no entrypoint named: "${e}"`}}class FE extends qe{constructor(e){super(),this.message=e,this.name="LongIntegerError"}}class GE extends qe{constructor(e){super(),this.hexByte=e,this.name="HexParseError",this.message=`Unable to parse hex byte "${e}"`}}class yr extends qe{constructor(e,t){super(),this.val=e,this.message=t,this.name="MichelsonError"}}class le extends yr{constructor(e,t,i){super(e,t),this.val=e,this.message=t,this.name="MichelsonTypeError",i!==void 0&&(this.data=i)}}class Im{append(e){let t=0;for(;e!==0||t<this.buf.length;){const i=(this.buf[t]||0)*10+e;this.buf[t++]=i%256,e=Math.floor(i/256)}}constructor(e){if(this.neg=!1,this.buf=[],e!==void 0)if(typeof e=="string")for(let t=0;t<e.length;t++){const i=e.charCodeAt(t);if(t===0&&i===45)this.neg=!0;else{if(i<48||i>57)throw new FE(`unexpected character in integer constant "${e[t]}"`);this.append(i-48)}}else e<0?(this.neg=!0,this.append(-e)):this.append(e)}cmp(e){if(this.neg!==e.neg)return(e.neg?1:0)-(this.neg?1:0);{let t=0;if(this.buf.length!==e.buf.length)t=this.buf.length<e.buf.length?-1:1;else if(this.buf.length!==0){let i=e.buf.length-1;for(;i>=0&&this.buf[i]===e.buf[i];)i--;t=i<0?0:this.buf[i]<e.buf[i]?-1:1}return this.neg?t===0?0:-t:t}}get sign(){return this.buf.length===0?0:this.neg?-1:1}}function Cn(r){const e=[];for(let t=0;t<r.length;t+=2){const i=parseInt(r.slice(t,t+2),16);if(Number.isNaN(i))return null;e.push(i)}return e}function vl(r){try{return new Im(r),!0}catch{return!1}}function Lm(r){try{return new Im(r).sign>=0}catch{return!1}}const KE=/^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z.%@]*)?)$/;function Gn(r,e){if(Array.isArray(r))return{};let t,i,n;if(r.annots!==void 0){for(const o of r.annots)if(o.length!==0){if(!KE.test(o)||!e?.specialVar&&(o==="@%"||o==="@%%")||!e?.specialFields&&o==="%@")throw new yr(r,`${r.prim}: unexpected annotation: ${o}`);switch(o[0]){case"%":(e?.emptyFields||o.length>1)&&(t=t||[],t.push(o));break;case":":o.length>1&&(i=i||[],i.push(o));break;case"@":(e?.emptyVar||o.length>1)&&(n=n||[],n.push(o));break}}}return{f:t,t:i,v:n}}const $E={BlockHash:[32,[1,52]],OperationHash:[32,[5,116]],OperationListHash:[32,[133,233]],OperationListListHash:[32,[29,159,109]],ProtocolHash:[32,[2,170]],ContextHash:[32,[79,199]],ED25519PublicKeyHash:[20,[6,161,159]],SECP256K1PublicKeyHash:[20,[6,161,161]],P256PublicKeyHash:[20,[6,161,164]],ContractHash:[20,[2,90,121]],CryptoboxPublicKeyHash:[16,[153,103]],ED25519Seed:[32,[13,15,58,7]],ED25519PublicKey:[32,[13,15,37,217]],SECP256K1SecretKey:[32,[17,162,224,201]],P256SecretKey:[32,[16,81,238,189]],ED25519EncryptedSeed:[56,[7,90,60,179,41]],SECP256K1EncryptedSecretKey:[56,[9,237,241,174,150]],P256EncryptedSecretKey:[56,[9,48,57,115,171]],SECP256K1PublicKey:[33,[3,254,226,86]],P256PublicKey:[33,[3,178,139,127]],SECP256K1Scalar:[33,[38,248,136]],SECP256K1Element:[33,[5,92,0]],ED25519SecretKey:[64,[43,246,78,7]],ED25519Signature:[64,[9,245,205,134,18]],SECP256K1Signature:[64,[13,115,101,19,63]],P256Signature:[64,[54,240,44,52]],GenericSignature:[64,[4,130,43]],ChainID:[4,[87,82,0]],RollupAddress:[20,[1,128,120,31]]};function ni(r,...e){const t=km(r);for(const i of e){const[n,o]=$E[i];if(t.length===n+o.length){let a=0;for(;a<o.length&&t[a]===o[a];)a++;if(a===o.length)return[i,t.slice(o.length)]}}return null}function er(r,e){const t=e,i=Array.isArray(t)?t:t.args;return i.length===2?r==="pair"?{prim:"pair",args:i}:{prim:"Pair",args:i}:Object.assign(Object.assign({},Array.isArray(t)?{prim:r}:t),{args:[i[0],{prim:r,args:i.slice(1)}]})}function oi(r){return Array.isArray(r)||r.prim==="pair"}function yl(r){return Array.isArray(r)||"prim"in r&&r.prim==="Pair"}const VE=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;function Nm(r){if("string"in r){if(Lm(r.string))return new Date(parseInt(r.string,10));if(VE.test(r.string)){const e=new Date(r.string);if(!Number.isNaN(e.valueOf))return e}}else if(vl(r.int))return new Date(parseInt(r.int,10));return null}function WE(r){const e=[];for(let t=0;t<r.length;t+=2){const i=r.slice(t,t+2),n=parseInt(i,16);if(Number.isNaN(n))throw new GE(i);e.push(n)}return e}function Pn(r){return r.map(e=>(e>>4&15).toString(16)+(e&15).toString(16)).join("")}const ZE=31,Bm={ABS:!0,ADD:!0,ADDRESS:!0,AMOUNT:!0,AND:!0,APPLY:!0,BALANCE:!0,BLAKE2B:!0,CAR:!0,CDR:!0,CHAIN_ID:!0,CHECK_SIGNATURE:!0,COMPARE:!0,CONCAT:!0,CONS:!0,EDIV:!0,EQ:!0,EXEC:!0,FAILWITH:!0,GE:!0,GET_AND_UPDATE:!0,GT:!0,HASH_KEY:!0,IMPLICIT_ACCOUNT:!0,INT:!0,ISNAT:!0,JOIN_TICKETS:!0,KECCAK:!0,LE:!0,LEVEL:!0,LSL:!0,LSR:!0,LT:!0,MEM:!0,MUL:!0,NEG:!0,NEQ:!0,NEVER:!0,NOT:!0,NOW:!0,OR:!0,PACK:!0,PAIRING_CHECK:!0,READ_TICKET:!0,SAPLING_VERIFY_UPDATE:!0,SELF:!0,SELF_ADDRESS:!0,SENDER:!0,SET_DELEGATE:!0,SHA256:!0,SHA3:!0,SHA512:!0,SIZE:!0,SLICE:!0,SOME:!0,SOURCE:!0,SPLIT_TICKET:!0,SUB:!0,SWAP:!0,TICKET:!0,TICKET_DEPRECATED:!0,TOTAL_VOTING_POWER:!0,TRANSFER_TOKENS:!0,UNIT:!0,VOTING_POWER:!0,XOR:!0,RENAME:!0,OPEN_CHEST:!0,SUB_MUTEZ:!0,MIN_BLOCK_TIME:!0,BYTES:!0,NAT:!0,IS_IMPLICIT_ACCOUNT:!0,INDEX_ADDRESS:!0,GET_ADDRESS_INDEX:!0},Mm=Object.assign({},Bm,{CONTRACT:!0,CREATE_CONTRACT:!0,DIG:!0,DIP:!0,DROP:!0,DUG:!0,DUP:!0,EMIT:!0,EMPTY_BIG_MAP:!0,EMPTY_MAP:!0,EMPTY_SET:!0,GET:!0,IF:!0,IF_CONS:!0,IF_LEFT:!0,IF_NONE:!0,ITER:!0,LAMBDA:!0,LAMBDA_REC:!0,LEFT:!0,LOOP:!0,LOOP_LEFT:!0,MAP:!0,NIL:!0,NONE:!0,PAIR:!0,PUSH:!0,RIGHT:!0,SAPLING_EMPTY_STATE:!0,UNPACK:!0,UNPAIR:!0,UPDATE:!0,CAST:!0,VIEW:!0}),jm={unit:!0,never:!0,bool:!0,int:!0,nat:!0,string:!0,chain_id:!0,bytes:!0,mutez:!0,key_hash:!0,key:!0,signature:!0,timestamp:!0,address:!0,tx_rollup_l2_address:!0},Qn=Object.assign({},jm,{or:!0,pair:!0,set:!0,big_map:!0,contract:!0,lambda:!0,list:!0,map:!0,operation:!0,option:!0,bls12_381_g1:!0,bls12_381_g2:!0,bls12_381_fr:!0,sapling_transaction:!0,sapling_transaction_deprecated:!0,sapling_state:!0,ticket:!0,chest_key:!0,chest:!0});class Ce extends yr{constructor(e,t){super(e,t),this.val=e,this.message=t,this.name="MichelsonValidationError"}}function Nr(r){return"prim"in r}function JE(r){return Array.isArray(r)||"prim"in r}function Cm(r){if(Nr(r))return!0;throw new Ce(r,"prim expression expected")}function Bi(r){if(Array.isArray(r))return!0;throw new Ce(r,"sequence expression expected")}function Ft(r){if(JE(r))return!0;throw new Ce(r,"prim or sequence expression expected")}function Qu(r){if(r.int[0]==="-")throw new Ce(r,"natural number expected")}function yo(r){if("int"in r)return!0;throw new Ce(r,"int literal expected")}function zm(r){if("string"in r)return!0;throw new Ce(r,"string literal expected")}function YE(r){if("string"in r||"bytes"in r)return!0;throw new Ce(r,"string or bytes literal expected")}function Ie(r,e){var t;if(e===0&&r.args===void 0||((t=r.args)===null||t===void 0?void 0:t.length)===e)return!0;throw new Ce(r,`${e} arguments expected`)}function lr(r){var e,t;if(Array.isArray(r)){for(const i of r){if(!Array.isArray(i)&&!Nr(i))throw new Ce(r,"sequence or prim expected");lr(i)}return!0}if(Cm(r)){if(Object.prototype.hasOwnProperty.call(Bm,r.prim))return Ie(r,0),!0;switch(r.prim){case"DROP":case"PAIR":case"UNPAIR":case"DUP":case"UPDATE":case"GET":r.args!==void 0&&Ie(r,1)&&yo(r.args[0])&&Qu(r.args[0]);break;case"DIG":case"DUG":case"SAPLING_EMPTY_STATE":Ie(r,1)&&yo(r.args[0])&&Qu(r.args[0]);break;case"NONE":case"LEFT":case"RIGHT":case"NIL":case"CAST":Ie(r,1)&&kr(r.args[0]);break;case"UNPACK":Ie(r,1)&&cf(r.args[0]);break;case"CONTRACT":Ie(r,1)&&gs(r.args[0]);break;case"IF_NONE":case"IF_LEFT":case"IF_CONS":case"IF":Ie(r,2)&&(Bi(r.args[0])&&lr(r.args[0]),Bi(r.args[1])&&lr(r.args[1]));break;case"MAP":case"ITER":case"LOOP":case"LOOP_LEFT":Ie(r,1)&&lr(r.args[0]);break;case"CREATE_CONTRACT":Ie(r,1)&&Dm(r.args[0]);break;case"DIP":if(((e=r.args)===null||e===void 0?void 0:e.length)===2)yo(r.args[0])&&Qu(r.args[0]),Bi(r.args[1])&&lr(r.args[1]);else if(((t=r.args)===null||t===void 0?void 0:t.length)===1)Bi(r.args[0])&&lr(r.args[0]);else throw new Ce(r,"1 or 2 arguments expected");break;case"PUSH":Ie(r,2)&&(Kn(r.args[0]),Si(r.args[1]));break;case"EMPTY_SET":Ie(r,1)&&fi(r.args[0]);break;case"EMPTY_MAP":Ie(r,2)&&(fi(r.args[0]),kr(r.args[1]));break;case"EMPTY_BIG_MAP":Ie(r,2)&&(fi(r.args[0]),ms(r.args[1]));break;case"LAMBDA_REC":case"LAMBDA":Ie(r,3)&&(kr(r.args[0]),kr(r.args[1]),Bi(r.args[2])&&lr(r.args[2]));break;case"VIEW":Ie(r,2)&&(zm(r.args[0])&&Hm(r.args[0]),kr(r.args[1])&&Kn(r.args[1]));break;case"EMIT":r.args&&r.args.length>0?Ie(r,1):Ie(r,0);break;default:throw new Ce(r,"instruction expected")}}return!0}function fi(r){if(Ft(r)){if(Array.isArray(r)||r.prim==="pair"||r.prim==="or"||r.prim==="option")_n(r,e=>fi(e));else if(!Object.prototype.hasOwnProperty.call(jm,r.prim))throw new Ce(r,`${r.prim}: type is not comparable`)}return!0}function cf(r){if(Ft(r)&&Nr(r)){if(!Object.prototype.hasOwnProperty.call(Qn,r.prim)||r.prim==="big_map"||r.prim==="operation"||r.prim==="sapling_state"||r.prim==="ticket")throw new Ce(r,`${r.prim}: type can't be used inside PACK/UNPACK instructions`);_n(r,e=>cf(e))}return!0}function Kn(r){if(Ft(r)&&Nr(r)){if(!Object.prototype.hasOwnProperty.call(Qn,r.prim)||r.prim==="big_map"||r.prim==="operation"||r.prim==="sapling_state"||r.prim==="ticket"||r.prim==="contract")throw new Ce(r,`${r.prim}: type can't be pushed`);_n(r,e=>Kn(e))}return!0}function uf(r){if(Ft(r)&&Nr(r)){if(!Object.prototype.hasOwnProperty.call(Qn,r.prim)||r.prim==="operation"||r.prim==="contract")throw new Ce(r,`${r.prim}: type can't be used as part of a storage`);_n(r,e=>uf(e))}return!0}function gs(r){if(Ft(r)&&Nr(r)){if(!Object.prototype.hasOwnProperty.call(Qn,r.prim)||r.prim==="operation")throw new Ce(r,`${r.prim}: type can't be used as part of a parameter`);_n(r,e=>gs(e))}return!0}function ms(r){if(Ft(r)&&Nr(r)){if(!Object.prototype.hasOwnProperty.call(Qn,r.prim)||r.prim==="big_map"||r.prim==="operation"||r.prim==="sapling_state")throw new Ce(r,`${r.prim}: type can't be used inside a big_map`);_n(r,e=>ms(e))}return!0}const XE=new RegExp("^[a-zA-Z0-9_.%@]*$");function Hm(r){if(r.string.length>ZE)throw new Ce(r,`view name too long: ${r.string}`);if(!XE.test(r.string))throw new Ce(r,`invalid character(s) in view name: ${r.string}`)}function kr(r){if(Ft(r)&&Nr(r)){if(!Object.prototype.hasOwnProperty.call(Qn,r.prim))throw new Ce(r,"type expected");_n(r,e=>kr(e))}return!0}function _n(r,e){if(Array.isArray(r)||r.prim==="pair"){const t=Array.isArray(r)?r:r.args;if(t===void 0||t.length<2)throw new Ce(r,"at least 2 arguments expected");return t.forEach(i=>{Ft(i)&&e(i)}),!0}switch(r.prim){case"option":case"list":Ie(r,1)&&Ft(r.args[0])&&e(r.args[0]);break;case"contract":Ie(r,1)&&gs(r.args[0]);break;case"or":Ie(r,2)&&Ft(r.args[0])&&Ft(r.args[1])&&(e(r.args[0]),e(r.args[1]));break;case"lambda":Ie(r,2)&&(kr(r.args[0]),kr(r.args[1]));break;case"set":Ie(r,1)&&fi(r.args[0]);break;case"map":Ie(r,2)&&Ft(r.args[0])&&Ft(r.args[1])&&(fi(r.args[0]),e(r.args[1]));break;case"big_map":Ie(r,2)&&Ft(r.args[0])&&Ft(r.args[1])&&(fi(r.args[0]),ms(r.args[1]),e(r.args[1]));break;case"ticket":Ie(r,1)&&Ft(r.args[0])&&fi(r.args[0]);break;case"sapling_state":case"sapling_transaction":Ie(r,1)&&yo(r.args[0]);break;default:Ie(r,0)}return!0}function Si(r){if("int"in r||"string"in r||"bytes"in r)return!0;if(Array.isArray(r)){let e=0;for(const t of r)Nr(t)&&t.prim==="Elt"?(Ie(t,2)&&(Si(t.args[0]),Si(t.args[1])),e++):Si(t);if(e!==0&&e!==r.length)throw new Ce(r,"data entries and map elements can't be intermixed");return!0}if(Nr(r))switch(r.prim){case"Unit":case"True":case"False":case"None":Ie(r,0);break;case"Pair":if(r.args===void 0||r.args.length<2)throw new Ce(r,"at least 2 arguments expected");for(const e of r.args)Si(e);break;case"Left":case"Right":case"Some":Ie(r,1)&&Si(r.args[0]);break;case"Lambda_rec":r.args&&lr(r.args);break;case"Ticket":Ie(r,4)&&(YE(r.args[0]),kr(r.args[1]),Si(r.args[2]),yo(r.args[3]));break;default:if(Object.prototype.hasOwnProperty.call(Mm,r.prim))lr(r);else throw new Ce(r,"data entry or instruction expected")}else throw new Ce(r,"data entry expected");return!0}function Dm(r){if(Bi(r)){const e={},t={};for(const i of r)if(Cm(i)){if(i.prim!=="view"){if(i.prim in e)throw new Ce(r,`duplicate contract section: ${i.prim}`);e[i.prim]=!0}switch(i.prim){case"code":Ie(i,1)&&Bi(i.args[0])&&lr(i.args[0]);break;case"parameter":if(Ie(i,1)&&gs(i.args[0]),i.annots)throw new Ce(i,"Annotation must be part of the parameter type");break;case"storage":Ie(i,1)&&uf(i.args[0]);break;case"view":if(Ie(i,4)){if(zm(i.args[0])){const n=i.args[0];if(n.string in t)throw new Ce(r,`duplicate view name: ${n.string}`);t[n.string]=!0,Hm(n)}Kn(i.args[1]),Kn(i.args[2]),Bi(i.args[3])&&lr(i.args[3])}break;default:throw new Ce(r,`unexpected contract section: ${i.prim}`)}}}return!0}function Um(r){return Object.prototype.hasOwnProperty.call(Mm,r.prim)}function _l(r){if(!Array.isArray(r))return!1;for(const e of r)if("prim"in e){if(Um(e))throw new yr(r,`Instruction outside of a lambda: ${JSON.stringify(r)}`);if(e.prim==="Elt")throw new yr(r,`Elt item outside of a map literal: ${JSON.stringify(r)}`)}return!0}function QE(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}const e2=["parameter","storage","code","False","Elt","Left","None","Pair","Right","Some","True","Unit","PACK","UNPACK","BLAKE2B","SHA256","SHA512","ABS","ADD","AMOUNT","AND","BALANCE","CAR","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CREATE_ACCOUNT","CREATE_CONTRACT","IMPLICIT_ACCOUNT","DIP","DROP","DUP","EDIV","EMPTY_MAP","EMPTY_SET","EQ","EXEC","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","INT","LAMBDA","LE","LEFT","LOOP","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PAIR","PUSH","RIGHT","SIZE","SOME","SOURCE","SENDER","SELF","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","SET_DELEGATE","UNIT","UPDATE","XOR","ITER","LOOP_LEFT","ADDRESS","CONTRACT","ISNAT","CAST","RENAME","bool","contract","int","key","key_hash","lambda","list","map","big_map","nat","option","or","pair","set","signature","string","bytes","mutez","timestamp","unit","operation","address","SLICE","DIG","DUG","EMPTY_BIG_MAP","APPLY","chain_id","CHAIN_ID","LEVEL","SELF_ADDRESS","never","NEVER","UNPAIR","VOTING_POWER","TOTAL_VOTING_POWER","KECCAK","SHA3","PAIRING_CHECK","bls12_381_g1","bls12_381_g2","bls12_381_fr","sapling_state","sapling_transaction_deprecated","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","ticket","TICKET_DEPRECATED","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","GET_AND_UPDATE","chest","chest_key","OPEN_CHEST","VIEW","view","constant","SUB_MUTEZ","tx_rollup_l2_address","MIN_BLOCK_TIME","sapling_transaction","EMIT","Lambda_rec","LAMBDA_REC","TICKET","BYTES","NAT","Ticket","IS_IMPLICIT_ACCOUNT","INDEX_ADDRESS","GET_ADDRESS_INDEX"],t2=Object.assign({},...e2.map((r,e)=>({[r]:e})));var Ai;(function(r){r[r.Int=0]="Int",r[r.String=1]="String",r[r.Sequence=2]="Sequence",r[r.Prim0=3]="Prim0",r[r.Prim0Annot=4]="Prim0Annot",r[r.Prim1=5]="Prim1",r[r.Prim1Annot=6]="Prim1Annot",r[r.Prim2=7]="Prim2",r[r.Prim2Annot=8]="Prim2Annot",r[r.Prim=9]="Prim",r[r.Bytes=10]="Bytes"})(Ai||(Ai={}));class zn{constructor(){this.buffer=[]}get length(){return this.buffer.length}writeBytes(e){this.buffer.push(...e.map(t=>t&255))}writeUint8(e){const t=e|0;this.buffer.push(t&255)}writeUint16(e){const t=e|0;this.buffer.push(t>>8&255),this.buffer.push(t&255)}writeUint32(e){const t=e|0;this.buffer.push(t>>24&255),this.buffer.push(t>>16&255),this.buffer.push(t>>8&255),this.buffer.push(t&255)}writeInt8(e){this.writeUint8(e)}writeInt16(e){this.writeUint16(e)}writeInt32(e){this.writeUint32(e)}}const _i=new Error("bounds out of range");class $n{constructor(e,t=0,i=e.length){this.buffer=e,this.idx=t,this.cap=i}get length(){return this.cap-this.idx}readBytes(e){if(this.cap-this.idx<e)throw _i;const t=this.buffer.slice(this.idx,this.idx+e);return this.idx+=e,t}reader(e){if(this.cap-this.idx<e)throw _i;const t=new $n(this.buffer,this.idx,this.idx+e);return this.idx+=e,t}copy(){return new $n(this.buffer,this.idx,this.cap)}readUint8(){if(this.cap-this.idx<1)throw _i;return this.buffer[this.idx++]>>>0}readUint16(){if(this.cap-this.idx<2)throw _i;const e=this.buffer[this.idx++],t=this.buffer[this.idx++];return(e<<8|t)>>>0}readUint32(){if(this.cap-this.idx<4)throw _i;const e=this.buffer[this.idx++],t=this.buffer[this.idx++],i=this.buffer[this.idx++],n=this.buffer[this.idx++];return(e<<24|t<<16|i<<8|n)>>>0}readInt8(){if(this.cap-this.idx<1)throw _i;return this.buffer[this.idx++]<<24>>24}readInt16(){if(this.cap-this.idx<2)throw _i;const e=this.buffer[this.idx++],t=this.buffer[this.idx++];return(e<<8|t)<<16>>16}readInt32(){if(this.cap-this.idx<4)throw _i;const e=this.buffer[this.idx++],t=this.buffer[this.idx++],i=this.buffer[this.idx++],n=this.buffer[this.idx++];return e<<24|t<<16|i<<8|n}}var Vn;(function(r){r[r.Implicit=0]="Implicit",r[r.Originated=1]="Originated"})(Vn||(Vn={}));var zi;(function(r){r[r.ED25519=0]="ED25519",r[r.SECP256K1=1]="SECP256K1",r[r.P256=2]="P256"})(zi||(zi={}));function qm(r){let e;const t=r.readUint8();switch(t){case zi.ED25519:e="ED25519PublicKeyHash";break;case zi.SECP256K1:e="SECP256K1PublicKeyHash";break;case zi.P256:e="P256PublicKeyHash";break;default:throw new Error(`unknown public key hash tag: ${t}`)}return{type:e,hash:r.readBytes(20)}}function r2(r){let e;const t=r.readUint8();switch(t){case Vn.Implicit:e=qm(r);break;case Vn.Originated:e={type:"ContractHash",hash:r.readBytes(20)},r.readBytes(1);break;default:throw new Error(`unknown address tag: ${t}`)}if(r.length!==0){const i=new TextDecoder;e.entryPoint=i.decode(new Uint8Array(r.readBytes(r.length)))}return e}function Fm(r,e){let t;switch(r.type){case"ED25519PublicKeyHash":t=zi.ED25519;break;case"SECP256K1PublicKeyHash":t=zi.SECP256K1;break;case"P256PublicKeyHash":t=zi.P256;break;default:throw new Error(`unexpected address type: ${r.type}`)}e.writeUint8(t),e.writeBytes(Array.from(r.hash))}function i2(r,e){if(r.type==="ContractHash"?(e.writeUint8(Vn.Originated),e.writeBytes(Array.from(r.hash)),e.writeUint8(0)):(e.writeUint8(Vn.Implicit),Fm(r,e)),r.entryPoint!==void 0&&r.entryPoint!==""&&r.entryPoint!=="default"){const i=new TextEncoder().encode(r.entryPoint);e.writeBytes(Array.from(i))}}var Hi;(function(r){r[r.ED25519=0]="ED25519",r[r.SECP256K1=1]="SECP256K1",r[r.P256=2]="P256"})(Hi||(Hi={}));function n2(r){let e,t;const i=r.readUint8();switch(i){case Hi.ED25519:t="ED25519PublicKey",e=32;break;case Hi.SECP256K1:t="SECP256K1PublicKey",e=33;break;case Hi.P256:t="P256PublicKey",e=33;break;default:throw new Error(`unknown public key tag: ${i}`)}return{type:t,publicKey:r.readBytes(e)}}function o2(r,e){let t;switch(r.type){case"ED25519PublicKey":t=Hi.ED25519;break;case"SECP256K1PublicKey":t=Hi.SECP256K1;break;case"P256PublicKey":t=Hi.P256;break;default:throw new Error(`unexpected public key type: ${r.type}`)}e.writeUint8(t),e.writeBytes(Array.from(r.publicKey))}function _a(r,e,t){var i,n;const[o,a]=t(r);if(Array.isArray(o)){const u=new zn;for(const p of o){const f=a.next();if(f.done)throw new Error("REPORT ME: iterator is done");_a(p,u,f.value)}e.writeUint8(Ai.Sequence),e.writeUint32(u.length),e.writeBytes(u.buffer);return}if("string"in o){const p=new TextEncoder().encode(o.string);e.writeUint8(Ai.String),e.writeUint32(p.length),e.writeBytes(Array.from(p));return}if("int"in o){e.writeUint8(Ai.Int);let u=BigInt(o.int);const p=u<0;p&&(u=-u);let f=0;do{const l=BigInt(f===0?6:7);let d=u&(BigInt(1)<<l)-BigInt(1);u>>=l,u&&(d|=BigInt(128)),f===0&&p&&(d|=BigInt(64)),e.writeUint8(Number(d)),f++}while(u);return}if("bytes"in o){const u=WE(o.bytes);e.writeUint8(Ai.Bytes),e.writeUint32(u.length),e.writeBytes(u);return}const s=t2[o.prim];if(s===void 0)throw new TypeError(`Can't encode primary: ${o.prim}`);const c=(((i=o.args)===null||i===void 0?void 0:i.length)||0)<3?Ai.Prim0+(((n=o.args)===null||n===void 0?void 0:n.length)||0)*2+(o.annots===void 0||o.annots.length===0?0:1):Ai.Prim;if(e.writeUint8(c),e.writeUint8(s),o.args!==void 0)if(o.args.length<3)for(const u of o.args){const p=a.next();if(p.done)throw new Error("REPORT ME: iterator is done");_a(u,e,p.value)}else{const u=new zn;for(const p of o.args){const f=a.next();if(f.done)throw new Error("REPORT ME: iterator is done");_a(p,u,f.value)}e.writeUint32(u.length),e.writeBytes(u.buffer)}if(o.annots!==void 0&&o.annots.length!==0){const p=new TextEncoder().encode(o.annots.join(" "));e.writeUint32(p.length),e.writeBytes(Array.from(p))}else o.args!==void 0&&o.args.length>=3&&e.writeUint32(0)}const a2=r=>"prim"in r&&(r.prim==="Left"||r.prim==="Right"),s2=r=>"prim"in r&&(r.prim==="Some"||r.prim==="None"),Qi=r=>{if(oi(r))return e=>{if(!yl(e))throw new le(r,`pair expected: ${JSON.stringify(e)}`,e);_l(e);const t=er("pair",r);return[er("Pair",e),(function*(){for(const n of t.args)yield Qi(n)})()]};switch(r.prim){case"or":return e=>{if(!a2(e))throw new le(r,`or expected: ${JSON.stringify(e)}`,e);return[e,(function*(){yield Qi(r.args[e.prim==="Left"?0:1])})()]};case"option":return e=>{if(!s2(e))throw new le(r,`option expected: ${JSON.stringify(e)}`,e);return[e,(function*(){e.prim==="Some"&&(yield Qi(r.args[0]))})()]};case"list":case"set":return e=>{if(!Array.isArray(e))throw new le(r,`${r.prim} expected: ${JSON.stringify(e)}`,e);return[e,(function*(){for(const t of e)yield Qi(r.args[0])})()]};case"map":return e=>{if(!Array.isArray(e))throw new le(r,`map expected: ${JSON.stringify(e)}`,e);return[e,(function*(){for(const t of e)yield i=>{if(!("prim"in i)||i.prim!=="Elt")throw new le(r,`map element expected: ${JSON.stringify(i)}`,i);return[i,(function*(){for(const n of r.args)yield Qi(n)})()]}})()]};case"chain_id":return e=>{if(!("bytes"in e)&&!("string"in e))throw new le(r,`chain id expected: ${JSON.stringify(e)}`,e);let t;if("string"in e){const i=ni(e.string,"ChainID");if(i===null)throw new le(r,`chain id base58 expected: ${e.string}`,e);t={bytes:Pn(i[1])}}else t=e;return[t,[][Symbol.iterator]()]};case"signature":return e=>{if(!("bytes"in e)&&!("string"in e))throw new le(r,`signature expected: ${JSON.stringify(e)}`,e);let t;if("string"in e){const i=ni(e.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature");if(i===null)throw new le(r,`signature base58 expected: ${e.string}`,e);t={bytes:Pn(i[1])}}else t=e;return[t,[][Symbol.iterator]()]};case"key_hash":return e=>{if(!("bytes"in e)&&!("string"in e))throw new le(r,`key hash expected: ${JSON.stringify(e)}`,e);let t;if("string"in e){const i=ni(e.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash");if(i===null)throw new le(r,`key hash base58 expected: ${e.string}`,e);const n=new zn;Fm({type:i[0],hash:i[1]},n),t={bytes:Pn(n.buffer)}}else t=e;return[t,[][Symbol.iterator]()]};case"key":return e=>{if(!("bytes"in e)&&!("string"in e))throw new le(r,`public key expected: ${JSON.stringify(e)}`,e);let t;if("string"in e){const i=ni(e.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey");if(i===null)throw new le(r,`public key base58 expected: ${e.string}`,e);const n=new zn;o2({type:i[0],publicKey:i[1]},n),t={bytes:Pn(n.buffer)}}else t=e;return[t,[][Symbol.iterator]()]};case"address":return e=>{if(!("bytes"in e)&&!("string"in e))throw new le(r,`address expected: ${JSON.stringify(e)}`,e);let t;if("string"in e){const i=e.string.split("%"),n=ni(i[0],"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash");if(n===null)throw new le(r,`address base58 expected: ${e.string}`,e);const o=new zn;i2({type:n[0],hash:n[1],entryPoint:i.length>1?i[1]:void 0},o),t={bytes:Pn(o.buffer)}}else t=e;return[t,[][Symbol.iterator]()]};case"timestamp":return e=>{if(!("string"in e)&&!("int"in e))throw new le(r,`timestamp expected: ${JSON.stringify(e)}`,e);let t;if("string"in e){const i=Nm(e);if(i===null)throw new le(r,`can't parse date: ${e.string}`,e);t={int:String(Math.floor(i.getTime()/1e3))}}else t=e;return[t,[][Symbol.iterator]()]};default:return Ua}},c2=r=>"prim"in r&&r.prim==="PUSH",Ua=r=>c2(r)?(lr(r),[r,(function*(){yield Ua,yield Qi(r.args[0])})()]):[r,(function*(){for(;;)yield Ua})()];function u2(r,e){const t=new zn;return t.writeUint8(5),_a(r,t,e!==void 0?Qi(e):Ua),t.buffer}function l2(r,e){return{bytes:Pn(u2(r,e))}}function f2(r){const e=Cn(r.bytes);if(e===null)throw new Error(`can't parse bytes: "${r.bytes}"`);const t=new $n(new Uint8Array(e));return r2(t)}function h2(r){const e=Cn(r.bytes);if(e===null)throw new Error(`can't parse bytes: "${r.bytes}"`);const t=new $n(new Uint8Array(e));return qm(t)}function d2(r){const e=Cn(r.bytes);if(e===null)throw new Error(`can't parse bytes: "${r.bytes}"`);const t=new $n(new Uint8Array(e));return n2(t)}class xe extends yr{constructor(e,t,i){super(e,i),this.val=e,this.stackState=t,this.message=i,this.name="MichelsonInstructionError"}}function je(r){return Array.isArray(r)?"pair":r.prim}function qa(r){return"prim"in r?r.args:r}function fr(r,e,t=!1){if(je(r)!==je(e))throw new le(r,`types mismatch: ${je(r)} != ${je(e)}`,void 0);const i=[Gn(r),Gn(e)];if(i[0].t&&i[1].t&&i[0].t[0]!==i[1].t[0])throw new le(r,`${je(r)}: type names mismatch: ${i[0].t[0]} != ${i[1].t[0]}`,void 0);if(t&&i[0].f&&i[1].f&&i[0].f[0]!==i[1].f[0])throw new le(r,`${je(r)}: field names mismatch: ${i[0].f[0]} != ${i[1].f}`,void 0);if(oi(r)){const n=er("pair",r),o=er("pair",e);fr(n.args[0],o.args[0],!0),fr(n.args[1],o.args[1],!0);return}switch(r.prim){case"option":case"list":case"contract":case"set":case"ticket":fr(r.args[0],e.args[0]);break;case"or":fr(r.args[0],e.args[0],!0),fr(r.args[1],e.args[1],!0);break;case"lambda":case"map":case"big_map":fr(r.args[0],e.args[0]),fr(r.args[1],e.args[1]);break;case"sapling_state":case"sapling_transaction":if(parseInt(r.args[0].int,10)!==parseInt(e.args[0].int,10))throw new le(r,`${je(r)}: type argument mismatch: ${r.args[0].int} != ${e.args[0].int}`,void 0)}}function Gm(r,e){if(r.length!==e.length)throw new le(r,`stack length mismatch: ${r.length} != ${e.length}`,void 0);for(let t=0;t<r.length;t++)fr(r[t],e[t])}function De(r,e=!1){var t,i,n;if(!Array.isArray(r)){const o=Gn(r);if((((t=o.t)===null||t===void 0?void 0:t.length)||0)>1)throw new le(r,`${r.prim}: at most one type annotation allowed: ${r.annots}`,void 0);if(e){if((((i=o.f)===null||i===void 0?void 0:i.length)||0)>1)throw new le(r,`${r.prim}: at most one field annotation allowed: ${r.annots}`,void 0)}else if((((n=o.f)===null||n===void 0?void 0:n.length)||0)>0)throw new le(r,`${r.prim}: field annotations aren't allowed: ${r.annots}`,void 0)}if(oi(r)){const o=qa(r);for(const a of o)De(a,!0);return}switch(r.prim){case"option":case"list":case"contract":case"set":De(r.args[0]);break;case"or":for(const o of r.args)De(o,!0);break;case"lambda":case"map":case"big_map":De(r.args[0]),De(r.args[1])}}function Km(r){if(!Array.isArray(r))return!1;for(const e of r)if(!(Array.isArray(e)&&Km(e)||"prim"in e&&Um(e)))return!1;return!0}function Jt(r,e,t){if(oi(e)){if(yl(r)){_l(r);const i=er("Pair",r),n=er("pair",e);Jt(i.args[0],n.args[0],t),Jt(i.args[1],n.args[1],t);return}throw new le(e,`pair expected: ${JSON.stringify(r)}`,r)}switch(e.prim){case"int":if("int"in r&&vl(r.int))return;throw new le(e,`integer value expected: ${JSON.stringify(r)}`,r);case"nat":case"mutez":if("int"in r&&Lm(r.int))return;throw new le(e,`natural value expected: ${JSON.stringify(r)}`,r);case"string":if("string"in r)return;throw new le(e,`string value expected: ${JSON.stringify(r)}`,r);case"bytes":case"bls12_381_g1":case"bls12_381_g2":if("bytes"in r&&Cn(r.bytes)!==null)return;throw new le(e,`bytes value expected: ${JSON.stringify(r)}`,r);case"bool":if("prim"in r&&(r.prim==="True"||r.prim==="False"))return;throw new le(e,`boolean value expected: ${JSON.stringify(r)}`,r);case"key_hash":if("string"in r&&ni(r.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash")!==null)return;if("bytes"in r)try{h2(r);return}catch{}throw new le(e,`key hash expected: ${JSON.stringify(r)}`,r);case"timestamp":if(("string"in r||"int"in r)&&Nm(r)!==null)return;throw new le(e,`timestamp expected: ${JSON.stringify(r)}`,r);case"address":if("string"in r){let i=r.string;const n=r.string.indexOf("%");if(n>=0&&(i=r.string.slice(0,n)),ni(i,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","RollupAddress")!==null)return}else if("bytes"in r)try{f2(r);return}catch{}throw new le(e,`address expected: ${JSON.stringify(r)}`,r);case"key":if("string"in r&&ni(r.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey")!==null)return;if("bytes"in r)try{d2(r);return}catch{}throw new le(e,`public key expected: ${JSON.stringify(r)}`,r);case"unit":if("prim"in r&&r.prim==="Unit")return;throw new le(e,`unit value expected: ${JSON.stringify(r)}`,r);case"signature":if("bytes"in r||"string"in r&&ni(r.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature")!==null)return;throw new le(e,`signature expected: ${JSON.stringify(r)}`,r);case"chain_id":if(("bytes"in r||"string"in r)&&("string"in r?km(r.string):Cn(r.bytes))!==null)return;throw new le(e,`chain id expected: ${JSON.stringify(r)}`,r);case"option":if("prim"in r){if(r.prim==="None")return;if(r.prim==="Some"){Jt(r.args[0],e.args[0],t);return}}throw new le(e,`option expected: ${JSON.stringify(r)}`,r);case"list":case"set":if(_l(r)){for(const i of r)Jt(i,e.args[0],t);return}throw new le(e,`${e.prim} expected: ${JSON.stringify(r)}`,r);case"or":if("prim"in r){if(r.prim==="Left"){Jt(r.args[0],e.args[0],t);return}else if(r.prim==="Right"){Jt(r.args[0],e.args[1],t);return}}throw new le(e,`union (or) expected: ${JSON.stringify(r)}`,r);case"lambda":if(Km(r)){const i=Tt(r,[e.args[0]],t);if("failed"in i)throw new le(e,`function is failed with error type: ${i.failed}`,r);if(i.length!==1)throw new le(e,"function must return a value",r);fr(e.args[1],i[0]);return}throw new le(e,`function expected: ${JSON.stringify(r)}`,r);case"map":case"big_map":if(Array.isArray(r)){for(const i of r){if(!("prim"in i)||i.prim!=="Elt")throw new le(e,`map elements expected: ${JSON.stringify(r)}`,r);Jt(i.args[0],e.args[0],t),Jt(i.args[1],e.args[1],t)}return}throw new le(e,`${e.prim} expected: ${JSON.stringify(r)}`,r);case"bls12_381_fr":if("int"in r&&vl(r.int)||"bytes"in r&&Cn(r.bytes)!==null)return;throw new le(e,`BLS12-381 element expected: ${JSON.stringify(r)}`,r);case"sapling_state":if(Array.isArray(r))return;throw new le(e,`sapling state expected: ${JSON.stringify(r)}`,r);case"ticket":if("prim"in r&&r.prim==="Ticket"){Jt(r.args[0],{prim:"address"},t),v2(r.args[1],e.args[0]),Jt(r.args[2],e.args[0],t),Jt(r.args[3],{prim:"nat"},t);return}else if(yl(r)){Jt(r,{prim:"pair",args:[{prim:"address"},e.args[0],{prim:"nat"}]},t);return}throw new le(e,`ticket expected: ${JSON.stringify(r)}`,r);default:throw new le(e,`type ${je(e)} don't have Michelson literal representation`,r)}}function p2(r,e,t){let i=e,n=e,o=0;for(const a of r){const s=Tt(a,n,t);if(i=s,"failed"in s)break;n=s,o++}if("failed"in i&&i.level==0&&(!("prim"in i.failed)||i.failed.prim!=="never")&&o!==r.length-1)throw new xe(r,i,"FAIL must appear in a tail position");if(t?.traceCallback!==void 0){const a={op:r,in:e,out:i};t.traceCallback(a)}return"failed"in i?{failed:i.failed,level:i.level+1}:i}function Tt(r,e,t){const i=t?.protocol||Tm;if(Array.isArray(r))return p2(r,e,t);const n=r;function o(R,...M){if(e.length<M.length+R)throw new xe(n,e,`${n.prim}: stack must have at least ${M.length} element(s)`);let q=R;for(const P of M){if(P!==null&&P.length!==0){let h=0;for(;h<P.length&&P[h]!==je(e[q]);)h++;if(h===P.length)throw new xe(n,e,`${n.prim}: stack type mismatch: [${q}] expected to be ${P}, got ${je(e[q])} instead`)}q++}return e.slice(R,M.length+R)}function a(R){return(...M)=>{try{return R(...M)}catch(q){throw q instanceof yr?new xe(n,e,q.message):q}}}function s(R){return M=>{try{return R(M)}catch(q){throw q instanceof yr?new xe(n,e,q.message):q}}}const c=a(Gn),u=a(Gm),p=a(fr),f=s(fi),l=s(cf),d=s(uf),g=s(Kn),b=s(ms);function x(R,M){const q=c(n,Object.assign(Object.assign({},M),{emptyFields:R.f!==void 0&&R.f>1,emptyVar:R.v!==void 0&&R.v>1})),P=(h,y,m)=>{if(h&&h.length>(y||0))throw new xe(n,e,`${n.prim}: at most ${y||0} ${m} annotations allowed`)};return P(q.f,R.f,"field"),P(q.t,R.t,"type"),P(q.v,R.v,"variable"),q}function _(R,M){const q=R,P=Array.isArray(q)?{prim:"pair",args:q}:q,h=c(P),y=M.v!==void 0||M.t!==void 0||M.f!==void 0?[...(M.v===null?h.v:M.v)||[],...(M.t===null?h.t:M.t)||[],...(M.f===null?h.f:M.f)||[]]:void 0,{annots:m}=P,S=QE(P,["annots"]);return Object.assign(Object.assign({},S),y&&y.length!==0&&{annots:y})}function E(R,M){const q=x({v:1});return _(R,{v:q.v!==void 0?q.v:M!==void 0?[M]:null,t:null})}function O(R,M,q,P,h){var y,m,S,T;const k=(y=c(M).f)===null||y===void 0?void 0:y[0],U=(m=q.f)===null||m===void 0?void 0:m[P];if(U!==void 0&&U!=="%"&&k!==void 0&&U!==k)throw new xe(n,e,`${n.prim}: field names doesn't match: ${U} !== ${k}`);const I=(S=q.v)===null||S===void 0?void 0:S[P],w=(T=c(R).v)===null||T===void 0?void 0:T[0];return _(M,{t:null,v:I?I==="@%"?k?["@"+k.slice(1)]:void 0:I==="@%%"?w?["@"+w.slice(1)+"."+(k?k.slice(1):h)]:k?["@"+k.slice(1)]:void 0:[I]:null})}function A(R,M,q=M){const P=er("pair",R);if(q===1)return[P.args[0]];if(q===2)return P.args;const h=P.args[1];if(oi(h))return[P.args[0],...A(h,M,q-1)];throw new xe(n,e,`${n.prim}: at least ${M} fields are expected`)}function B(R,M,q=M){if(q===0)return R;const P=er("pair",R);if(q===1)return P.args[0];const h=P.args[1];if(oi(h))return B(h,M,q-2);if(q===2)return h;throw new xe(n,e,`${n.prim}: at least ${M+1} fields are expected`)}function N(R,M,q,P=q){if(P===0)return M;const h=er("pair",R);if(P===1)return Object.assign(Object.assign({},h),{args:[M,h.args[1]]});const y=h.args[1];if(oi(y))return Object.assign(Object.assign({},h),{args:[h.args[0],N(y,M,q,P-2)]});if(P===2)return Object.assign(Object.assign({},h),{args:[h.args[0],M]});throw new xe(n,e,`${n.prim}: at least ${q+1} fields are expected`)}const v=(R,M)=>["@"+(R.v?R.v[0].slice(1)+".":"")+M];function j(R,M){return"failed"in R||"failed"in M?"failed"in R?M:R:(u(R,M),R)}const D=(R=>{var M,q,P,h,y;switch(R.prim){case"DUP":{const m=R.args?parseInt(R.args[0].int,10):1;if(m===0)throw new xe(R,e,"DUP 0 is forbidden");const S=o(m-1,null)[0];if(je(S)==="ticket")throw new xe(R,e,"ticket can't be DUPed");return[S,...e]}case"SWAP":{const m=o(0,null,null);return x({}),[m[1],m[0],...e.slice(2)]}case"SOME":return[_({prim:"option",args:[o(0,null)[0]]},x({t:1,v:1})),...e.slice(1)];case"UNIT":return[_({prim:"unit"},x({v:1,t:1})),...e];case"PAIR":{const m=R.args?parseInt(R.args[0].int,10):2;if(m<2)throw new xe(R,e,`PAIR ${m} is forbidden`);const S=o(0,...new Array(m).fill(null)),T=x({f:m,t:1,v:1},{specialFields:!0}),k=I=>{const w=I.lastIndexOf(".");return I.slice(w>0?w+1:1)},U=S.map((I,w)=>{var L;const J=c(I),Y=T.f&&T.f.length>w&&T.f[w]!=="%"?T.f[w]==="%@"?J.v?["%"+k(((L=J.v)===null||L===void 0?void 0:L[0])||"")]:void 0:[T.f[w]]:void 0;return _(I,{v:null,t:null,f:Y})});return[_({prim:"pair",args:U},{t:T.t,v:T.v}),...e.slice(m)]}case"UNPAIR":{const m=R.args?parseInt(R.args[0].int,10):2;if(m<2)throw new xe(R,e,`UNPAIR ${m} is forbidden`);const S=o(0,["pair"])[0],T=x({f:2,v:2},{specialVar:!0});return[...A(S,m).map((U,I)=>O(S,U,T,I,I===0?"car":"cdr")),...e.slice(1)]}case"CAR":case"CDR":{const m=er("pair",o(0,["pair"])[0]),S=m.args[R.prim==="CAR"?0:1],T=x({f:1,v:1},{specialVar:!0});return[O(m,S,T,0,R.prim.toLocaleLowerCase()),...e.slice(1)]}case"CONS":{const m=o(0,null,["list"]);return p(m[0],m[1].args[0]),[E({prim:"list",args:[m[1].args[0]]}),...e.slice(2)]}case"SIZE":return o(0,["string","list","set","map","bytes"]),[E({prim:"nat"}),...e.slice(1)];case"MEM":{const m=o(0,null,["set","map","big_map"]);return f(m[0]),p(m[0],m[1].args[0]),[E({prim:"bool"}),...e.slice(2)]}case"GET":if(R.args){const m=parseInt(R.args[0].int,10),S=o(0,["pair"])[0];return[E(B(S,m)),...e.slice(1)]}else{const m=o(0,null,["map","big_map"]);return f(m[0]),p(m[0],m[1].args[0]),[E({prim:"option",args:[m[1].args[1]]}),...e.slice(2)]}case"UPDATE":if(R.args){const m=parseInt(R.args[0].int,10),S=o(0,null,["pair"]);return[E(N(S[1],S[0],m)),...e.slice(2)]}else{const m=o(0,null,["bool","option"]);if(f(m[0]),m[1].prim==="bool"){const T=o(2,["set"]);return p(m[0],T[0].args[0]),[E({prim:"set",args:[_(m[0],{t:null})]}),...e.slice(3)]}const S=o(2,["map","big_map"]);return p(m[0],S[0].args[0]),S[0].prim==="map"?[E({prim:"map",args:[_(m[0],{t:null}),_(m[1].args[0],{t:null})]}),...e.slice(3)]:(b(m[1].args[0]),[E({prim:"big_map",args:[_(m[0],{t:null}),_(m[1].args[0],{t:null})]}),...e.slice(3)])}case"GET_AND_UPDATE":{const m=x({v:2}),S=o(0,null,["option"],["map","big_map"]);f(S[0]),p(S[0],S[2].args[0]),p(S[1].args[0],S[2].args[1]);const T=(M=m.v)===null||M===void 0?void 0:M.map(k=>k!=="@"?[k]:void 0);return S[2].prim==="map"?[_({prim:"option",args:[S[2].args[1]]},{v:T?.[0]}),_({prim:"map",args:[_(S[0],{t:null}),_(S[1].args[0],{t:null})]},{v:T?.[1]}),...e.slice(3)]:(b(S[1].args[0]),[_({prim:"option",args:[S[2].args[1]]},{v:T?.[0]}),_({prim:"big_map",args:[_(S[0],{t:null}),_(S[1].args[0],{t:null})]},{v:T?.[1]}),...e.slice(3)])}case"EXEC":{const m=o(0,null,["lambda"]);return p(m[0],m[1].args[0]),[E(m[1].args[1]),...e.slice(2)]}case"APPLY":{const m=o(0,null,["lambda"]);if(d(m[0]),g(m[0]),!oi(m[1].args[0]))throw new xe(R,e,`${R.prim}: function's argument must be a pair: ${je(m[1].args[0])}`);const S=m[1].args[0];return p(m[0],qa(S)[0]),[E({prim:"lambda",args:[qa(S)[1],m[1].args[1]]}),...e.slice(2)]}case"FAILWITH":{const m=o(0,null)[0];return Ln(i,li.PtEdo2Zk)||l(m),{failed:m,level:0}}case"NEVER":return o(0,["never"]),{failed:{prim:"never"},level:0};case"RENAME":return[E(o(0,null)[0]),...e.slice(1)];case"CONCAT":{const m=o(0,["string","list","bytes"]);if(m[0].prim==="list"){if(je(m[0].args[0])!=="string"&&je(m[0].args[0])!=="bytes")throw new xe(R,e,`${R.prim}: can't concatenate list of ${je(m[0].args[0])}'s`);return[E(m[0].args[0]),...e.slice(1)]}const S=o(1,["string","bytes"]);if(m[0].prim!==S[0].prim)throw new xe(R,e,`${R.prim}: can't concatenate ${m[0].prim} with ${S[0].prim}`);return[E(S[0]),...e.slice(2)]}case"SLICE":return[E({prim:"option",args:[o(0,["nat"],["nat"],["string","bytes"])[2]]},"@slice"),...e.slice(3)];case"PACK":{const m=o(0,null)[0];return l(m),[E({prim:"bytes"},"@packed"),...e.slice(1)]}case"ADD":{const m=o(0,["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(m[0].prim==="nat"&&m[1].prim==="int"||m[0].prim==="int"&&m[1].prim==="nat")return[E({prim:"int"}),...e.slice(2)];if(m[0].prim==="int"&&m[1].prim==="timestamp"||m[0].prim==="timestamp"&&m[1].prim==="int")return[E({prim:"timestamp"}),...e.slice(2)];if((m[0].prim==="int"||m[0].prim==="nat"||m[0].prim==="mutez"||m[0].prim==="bls12_381_g1"||m[0].prim==="bls12_381_g2"||m[0].prim==="bls12_381_fr")&&m[0].prim===m[1].prim)return[E(m[0]),...e.slice(2)];throw new xe(R,e,`${R.prim}: can't add ${m[0].prim} to ${m[1].prim}`)}case"SUB":{const m=Ln(i,li.PsiThaCa)?o(0,["nat","int","timestamp","mutez"],["nat","int","timestamp","mutez"]):o(0,["nat","int","timestamp"],["nat","int","timestamp"]);if((m[0].prim==="nat"||m[0].prim==="int")&&(m[1].prim==="nat"||m[1].prim==="int")||m[0].prim==="timestamp"&&m[1].prim==="timestamp")return[E({prim:"int"}),...e.slice(2)];if(m[0].prim==="timestamp"&&m[1].prim==="int")return[E({prim:"timestamp"}),...e.slice(2)];if(m[0].prim==="mutez"&&m[1].prim==="mutez")return[E({prim:"mutez"}),...e.slice(2)];throw new xe(R,e,`${R.prim}: can't subtract ${m[0].prim} from ${m[1].prim}`)}case"SUB_MUTEZ":return o(0,["mutez"],["mutez"]),[E({prim:"option",args:[{prim:"mutez"}]}),...e.slice(2)];case"MUL":{const m=o(0,["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(m[0].prim==="nat"&&m[1].prim==="int"||m[0].prim==="int"&&m[1].prim==="nat")return[E({prim:"int"}),...e.slice(2)];if(m[0].prim==="nat"&&m[1].prim==="mutez"||m[0].prim==="mutez"&&m[1].prim==="nat")return[E({prim:"mutez"}),...e.slice(2)];if((m[0].prim==="bls12_381_g1"||m[0].prim==="bls12_381_g2"||m[0].prim==="bls12_381_fr")&&m[1].prim==="bls12_381_fr"||(m[0].prim==="nat"||m[0].prim==="int")&&m[0].prim===m[1].prim)return[E(m[0]),...e.slice(2)];if((m[0].prim==="nat"||m[0].prim==="int")&&m[1].prim==="bls12_381_fr"||(m[1].prim==="nat"||m[1].prim==="int")&&m[0].prim==="bls12_381_fr")return[E({prim:"bls12_381_fr"}),...e.slice(2)];throw new xe(R,e,`${R.prim}: can't multiply ${m[0].prim} by ${m[1].prim}`)}case"EDIV":{const m=(T,k)=>({prim:"option",args:[{prim:"pair",args:[{prim:T},{prim:k}]}]}),S=o(0,["nat","int","mutez"],["nat","int","mutez"]);if(S[0].prim==="nat"&&S[1].prim==="nat")return[E(m("nat","nat")),...e.slice(2)];if((S[0].prim==="nat"||S[0].prim==="int")&&(S[1].prim==="nat"||S[1].prim==="int"))return[E(m("int","nat")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="nat")return[E(m("mutez","mutez")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="mutez")return[E(m("nat","mutez")),...e.slice(2)];throw new xe(R,e,`${R.prim}: can't euclideally divide ${S[0].prim} by ${S[1].prim}`)}case"ABS":return o(0,["int"]),[E({prim:"nat"}),...e.slice(1)];case"ISNAT":return o(0,["int"]),[E({prim:"option",args:[{prim:"nat"}]}),...e.slice(1)];case"INT":return o(0,["nat","bls12_381_fr","bytes"]),[E({prim:"int"}),...e.slice(1)];case"BYTES":return o(0,["nat","int"]),[E({prim:"bytes"}),...e.slice(1)];case"NAT":return o(0,["bytes"]),[E({prim:"nat"}),...e.slice(1)];case"NEG":{const m=o(0,["nat","int","bls12_381_g1","bls12_381_g2","bls12_381_fr"])[0];return m.prim==="nat"||m.prim==="int"?[E({prim:"int"}),...e.slice(1)]:[E(m),...e.slice(1)]}case"LSL":case"LSR":return o(0,["nat","bytes"],["nat","bytes"]),[E({prim:"nat"}),...e.slice(2)];case"OR":case"XOR":{const m=o(0,["nat","bytes","bool"],["nat","bytes","bool"]);if(m[0].prim!==m[1].prim)throw new xe(R,e,`${R.prim}: both arguments must be of the same type: ${m[0].prim}, ${m[1].prim}`);return[E(m[1]),...e.slice(2)]}case"AND":{const m=o(0,["nat","bytes","bool","int"],["nat","bytes","bool"]);if((m[0].prim!=="int"||m[1].prim!=="nat")&&m[0].prim!==m[1].prim)throw new xe(R,e,`${R.prim}: both arguments must be of the same type: ${m[0].prim}, ${m[1].prim}`);return[E(m[1]),...e.slice(2)]}case"NOT":return o(0,["nat","bytes","bool","int"])[0].prim==="bool"?[E({prim:"bool"}),...e.slice(1)]:[E({prim:"int"}),...e.slice(1)];case"COMPARE":{const m=o(0,null,null);return f(m[0]),f(m[1]),[E({prim:"int"}),...e.slice(2)]}case"EQ":case"NEQ":case"LT":case"GT":case"LE":case"GE":return o(0,["int"]),[E({prim:"bool"}),...e.slice(1)];case"SELF":{if(t?.contract===void 0)throw new xe(R,e,`${R.prim}: contract required`);const m=x({f:1,v:1}),S=wl(t.contract,(q=m.f)===null||q===void 0?void 0:q[0]);if(S===null)throw new xe(R,e,`${R.prim}: contract has no entrypoint ${S}`);return[_({prim:"contract",args:[S]},{v:m.v?m.v:["@self"]}),...e]}case"TRANSFER_TOKENS":{const m=o(0,null,["mutez"],["contract"]);return p(m[0],m[2].args[0]),[E({prim:"operation"}),...e.slice(3)]}case"SET_DELEGATE":{const m=o(0,["option"])[0];if(je(m.args[0])!=="key_hash")throw new xe(R,e,`${R.prim}: key hash expected: ${je(m.args[0])}`);return[E({prim:"operation"}),...e.slice(1)]}case"IMPLICIT_ACCOUNT":return o(0,["key_hash"]),[E({prim:"contract",args:[{prim:"unit"}]}),...e.slice(1)];case"NOW":return[E({prim:"timestamp"},"@now"),...e];case"AMOUNT":return[E({prim:"mutez"},"@amount"),...e];case"BALANCE":return[E({prim:"mutez"},"@balance"),...e];case"CHECK_SIGNATURE":return o(0,["key"],["signature"],["bytes"]),[E({prim:"bool"}),...e.slice(3)];case"BLAKE2B":case"SHA256":case"SHA512":case"KECCAK":case"SHA3":return o(0,["bytes"]),[E({prim:"bytes"}),...e.slice(1)];case"HASH_KEY":return o(0,["key"]),[E({prim:"key_hash"}),...e.slice(1)];case"SOURCE":return[E({prim:"address"},"@source"),...e];case"SENDER":return[E({prim:"address"},"@sender"),...e];case"ADDRESS":{const m=o(0,["contract"])[0],S=x({v:1});return[_({prim:"address",[ua]:m},{v:S.v?S.v:v(c(m),"address")}),...e.slice(1)]}case"SELF_ADDRESS":{const m={prim:"address"};return t?.contract!==void 0&&(m[ua]={prim:"contract",args:[Ir(t.contract,"parameter").args[0]]}),[E(m,"@address"),...e]}case"CHAIN_ID":return[E({prim:"chain_id"}),...e];case"DROP":{x({});const m=R.args!==void 0?parseInt(R.args[0].int,10):1;return o(m-1,null),e.slice(m)}case"DIG":{x({});const m=parseInt(R.args[0].int,10);return[o(m,null)[0],...e.slice(0,m),...e.slice(m+1)]}case"DUG":{x({});const m=parseInt(R.args[0].int,10);return[...e.slice(1,m+1),o(0,null)[0],...e.slice(m+1)]}case"NONE":return De(R.args[0]),[_({prim:"option",args:[R.args[0]]},x({t:1,v:1})),...e];case"LEFT":case"RIGHT":{const m=o(0,null)[0],S=x({f:2,t:1,v:1},{specialFields:!0}),T=c(m),k=[_(m,{t:null,v:null,f:S.f&&S.f.length>0&&S.f[0]!=="%"?S.f[0]==="%@"?T.v?["%"+T.v[0].slice(1)]:void 0:S.f:void 0}),_(R.args[0],{t:null,f:S.f&&S.f.length>1&&S.f[1]!=="%"?S.f:void 0})];return[_({prim:"or",args:R.prim==="LEFT"?k:[k[1],k[0]]},{t:S.t,v:S.v}),...e.slice(1)]}case"NIL":return De(R.args[0]),[_({prim:"list",args:[R.args[0]]},x({t:1,v:1})),...e];case"UNPACK":return o(0,["bytes"]),De(R.args[0]),[E({prim:"option",args:[R.args[0]]},"@unpacked"),...e.slice(1)];case"CONTRACT":{const m=o(0,["address"])[0];De(R.args[0]);const S=x({v:1,f:1}),T=m[ua];if(T!==void 0){const k=wl(T,(P=S.f)===null||P===void 0?void 0:P[0]);if(k===null)throw new xe(R,e,`${R.prim}: contract has no entrypoint ${k}`);p(k,R.args[0])}return[_({prim:"option",args:[{prim:"contract",args:[R.args[0]]}]},{v:S.v?S.v:v(c(m),"contract")}),...e.slice(1)]}case"CAST":{x({});const m=o(0,null)[0];return De(R.args[0]),p(R.args[0],m),[R.args[0],...e.slice(1)]}case"IF_NONE":{x({});const m=o(0,["option"])[0],S=e.slice(1),T=Tt(R.args[0],S,t),k=Tt(R.args[1],[_(m.args[0],{t:null,v:v(c(m),"some")}),...S],t);return j(T,k)}case"IF_LEFT":{x({});const m=o(0,["or"])[0],S=c(m),T=c(m.args[0]),k=c(m.args[1]),U=e.slice(1),I=Tt(R.args[0],[_(m.args[0],{t:null,v:v(S,T.f?T.f[0].slice(1):"left")}),...U],t),w=Tt(R.args[1],[_(m.args[1],{t:null,v:v(S,k.f?k.f[0].slice(1):"right")}),...U],t);return j(I,w)}case"IF_CONS":{x({});const m=o(0,["list"])[0],S=c(m),T=e.slice(1),k=Tt(R.args[0],[_(m.args[0],{t:null,v:v(S,"hd")}),_(m,{t:null,v:v(S,"tl")}),...T],t),U=Tt(R.args[1],T,t);return j(k,U)}case"IF":{x({}),o(0,["bool"]);const m=e.slice(1),S=Tt(R.args[0],m,t),T=Tt(R.args[1],m,t);return j(S,T)}case"MAP":{const m=o(0,["list","map","option"])[0],S=e.slice(1),T=m.prim==="map"?{prim:"pair",args:m.args}:m.args[0],k=Tt(R.args[0],[_(T,{t:null,v:v(c(m),"elt")}),...S],t);if("failed"in k){if(!("prim"in k.failed)||k.failed.prim!=="never")throw new xe(R,e,`${R.prim}: FAIL is not allowed in MAP`);return{failed:k.failed,level:k.level+1}}if(k.length<1)throw new xe(R,e,`${R.prim}: function must return a value`);return u(k.slice(1),S),m.prim==="list"?[E({prim:"list",args:[k[0]]}),...S]:m.prim==="map"?[E({prim:"map",args:[m.args[0],k[0]]}),...S]:[E({prim:"option",args:[k[0]]}),...S]}case"ITER":{x({});const m=o(0,["set","list","map"])[0],S=e.slice(1),T=m.prim==="map"?{prim:"pair",args:m.args}:m.args[0],k=Tt(R.args[0],[_(T,{t:null,v:v(c(m),"elt")}),...S],t);return"failed"in k?{failed:k.failed,level:k.level+1}:(u(k,S),S)}case"LOOP":{x({}),o(0,["bool"]);const m=e.slice(1),S=Tt(R.args[0],m,t);return"failed"in S?{failed:S.failed,level:S.level+1}:(u(S,[{prim:"bool"},...m]),m)}case"LOOP_LEFT":{x({});const m=o(0,["or"])[0],S=e.slice(1),T=Tt(R.args[0],[_(m.args[0],{t:null,v:v(c(m),"left")}),...S],t);return"failed"in T?{failed:T.failed,level:T.level+1}:(u(T,[m,...S]),[_(m.args[1],{t:null,v:x({v:1}).v}),...S])}case"DIP":{x({});const m=R.args.length===2?parseInt(R.args[0].int,10):1;o(m-1,null);const S=e.slice(0,m),T=e.slice(m),k=R.args.length===2?Tt(R.args[1],T,t):Tt(R.args[0],T,t);return"failed"in k?{failed:k.failed,level:k.level+1}:[...S,...k]}case"CREATE_CONTRACT":{const m=x({v:2}),S=o(0,["option"],["mutez"],null);if(je(S[0].args[0])!=="key_hash")throw new xe(R,e,`${R.prim}: key hash expected: ${je(S[0].args[0])}`);d(S[2])&&(Vm(R.args[0]),fr(Ir(R.args[0],"storage").args[0],S[2]));const T=(h=m.v)===null||h===void 0?void 0:h.map(k=>k!=="@"?[k]:void 0);return[_({prim:"operation"},{v:T?.[0]}),_({prim:"address",[ua]:{prim:"contract",args:[Ir(R.args[0],"parameter").args[0]]}},{v:T?.[1]}),...e.slice(3)]}case"PUSH":return De(R.args[0]),Jt(R.args[1],R.args[0],Object.assign(Object.assign({},t),{contract:void 0})),[E(R.args[0]),...e];case"EMPTY_SET":return De(R.args[0]),f(R.args[0]),[_({prim:"set",args:R.args},x({t:1,v:1})),...e];case"EMPTY_MAP":return De(R.args[0]),f(R.args[0]),De(R.args[1]),[_({prim:"map",args:R.args},x({t:1,v:1})),...e];case"EMPTY_BIG_MAP":return De(R.args[0]),f(R.args[0]),De(R.args[1]),b(R.args[0]),[_({prim:"big_map",args:R.args},x({t:1,v:1})),...e];case"LAMBDA_REC":case"LAMBDA":{De(R.args[0]),De(R.args[1]);const m=[R.args[0]];R.prim==="LAMBDA_REC"&&m.push({prim:"lambda",args:[R.args[0],R.args[1]]});const S=Tt(R.args[2],m,Object.assign(Object.assign({},t),{contract:void 0}));if("failed"in S)return{failed:S.failed,level:S.level+1};if(S.length!==1)throw new xe(R,e,`${R.prim}: function must return a value`);return p(R.args[1],S[0]),[E({prim:"lambda",args:[R.args[0],R.args[1]]}),...e]}case"LEVEL":return[E({prim:"nat"},"@level"),...e];case"TOTAL_VOTING_POWER":return[E({prim:"nat"}),...e];case"VOTING_POWER":return o(0,["key_hash"]),[E({prim:"nat"}),...e.slice(1)];case"TICKET":{const m=o(0,null,["nat"])[0];return f(m),Ln(i,li.PtLimaPtL)?[_({prim:"ticket",args:[m]},x({t:1,v:1})),...e.slice(2)]:[E({prim:"option",args:[_({prim:"ticket",args:[m]},x({t:1,v:1}))]}),...e.slice(2)]}case"JOIN_TICKETS":{const m=er("pair",o(0,["pair"])[0]);if(je(m.args[0])!=="ticket")throw new xe(R,e,`${R.prim}: ticket expected: ${je(m.args[0])}`);return p(m.args[0],m.args[1]),[E({prim:"option",args:[_(m.args[0],{t:null})]}),...e.slice(1)]}case"SPLIT_TICKET":{const m=o(0,["ticket"],["pair"]),S=er("pair",m[1]);if(je(S.args[0])!=="nat")throw new xe(R,e,`${R.prim}: nat expected: ${je(S.args[0])}`);return p(S.args[0],S.args[1]),[E({prim:"option",args:[{prim:"pair",args:[_(m[0],{t:null}),_(m[0],{t:null})]}]}),...e.slice(2)]}case"READ_TICKET":{const m=x({v:2}),S=o(0,["ticket"])[0],T=(y=m.v)===null||y===void 0?void 0:y.map(k=>k!=="@"?[k]:void 0);return[_({prim:"pair",args:[{prim:"address"},_(S.args[0],{t:null}),{prim:"nat"}]},{v:T?.[0]}),_(S,{v:T?.[1],t:null}),...e.slice(1)]}case"PAIRING_CHECK":{const m=o(0,["list"])[0].args[0];if(!oi(m))throw new xe(R,e,`${R.prim}: pair expected: ${je(m)}`);const S=er("pair",m);if(je(S.args[0])!=="bls12_381_g1")throw new xe(R,e,`${R.prim}: bls12_381_g1 expected: ${je(S.args[0])}`);if(je(S.args[1])!=="bls12_381_g2")throw new xe(R,e,`${R.prim}: bls12_381_g2 expected: ${je(S.args[1])}`);return[E({prim:"bool"}),...e.slice(1)]}case"SAPLING_EMPTY_STATE":return[_({prim:"sapling_state",args:[R.args[0]]},x({v:1,t:1})),...e];case"SAPLING_VERIFY_UPDATE":{const m=o(0,["sapling_transaction"],["sapling_state"]);if(parseInt(m[0].args[0].int,10)!==parseInt(m[1].args[0].int,10))throw new xe(R,e,`${R.prim}: sapling memo size mismatch: ${m[0].args[0].int} != ${m[1].args[0].int}`);return Ln(i,li.PtJakarta)?[E({prim:"option",args:[{prim:"pair",args:[{prim:"int"},_(m[1],{t:null})]}]}),...e.slice(2)]:[E({prim:"option",args:[{prim:"pair",args:[{prim:"bytes"},{prim:"pair",args:[{prim:"int"},_(m[1],{t:null})]}]}]}),...e.slice(2)]}case"OPEN_CHEST":return o(0,["chest_key"],["chest"],["nat"]),[E({prim:"or",args:[{prim:"bytes"},{prim:"bool"}]}),...e.slice(3)];case"VIEW":{const m=o(0,null,["address"]);return g(m[0]),[E({prim:"option",args:[R.args[1]]}),...e.slice(2)]}case"MIN_BLOCK_TIME":return[E({prim:"nat"}),...e];case"EMIT":{const m=x({f:1,t:1});if(R.args){const S=o(0,null);return p(S[0],R.args[0]),[_({prim:"operation"},m),...e.slice(1)]}return[_({prim:"operation"},m),...e.slice(1)]}case"IS_IMPLICIT_ACCOUNT":return o(0,["address"]),[E({prim:"option",args:[{prim:"key_hash"}]}),...e.slice(1)];case"INDEX_ADDRESS":return o(0,["address"]),[E({prim:"nat"}),...e.slice(1)];case"GET_ADDRESS_INDEX":return o(0,["address"]),[E({prim:"option",args:[{prim:"nat"}]}),...e.slice(1)];default:throw new yr(R,`unexpected instruction: ${R.prim}`)}})(n);if(t?.traceCallback!==void 0){const R={op:n,in:e,out:D};t.traceCallback(R)}return D}function Ir(r,e){for(const t of r)if(t.prim===e)return t;throw new yr(r,`missing contract section: ${e}`)}function g2(r){const e={};for(const t of r)t.prim==="view"&&(e[t.args[0].string]=t);return e}function $m(r){if(Array.isArray(r)){for(const e of r)if("prim"in e&&(e.prim==="parameter"||e.prim==="storage"||e.prim==="code"))return!0}return!1}function wl(r,e){e=e||"%default";const t=Fa(r).find(i=>i[0]===e);return t!==void 0?t[1]:e==="%default"?$m(r)?Ir(r,"parameter").args[0]:r:null}function m2(r){return Array.isArray(r)||r.prim==="or"}function Fa(r){if($m(r)){const e=Ir(r,"parameter"),t=Fa(e.args[0]),i=Gn(e);return i.f?[[i.f[0],e.args[0]],...t]:t}if(m2(r)){const e=qa(r),t=i=>{const n=Gn(e[i]);if(je(e[i])==="or"){const o=Fa(e[i]);return n.f?[[n.f[0],e[i]],...o]:o}return n.f?[[n.f[0],e[i]]]:[]};return[...t(0),...t(1)]}return[]}function Vm(r,e){const t=(c,u,p,f)=>{De(c,!0),De(u);const l={prim:"pair",args:[Object.assign(Object.assign({},c),{annots:["@parameter"]}),Object.assign(Object.assign({},u),{annots:["@storage"]})]},d=Tt(f,[l],Object.assign(Object.assign({},e),{contract:r}));if("failed"in d)return d;try{Gm(d,[p])}catch(g){throw g instanceof yr?new xe(f,d,g.message):g}return d},i=Ir(r,"parameter").args[0],n=Ir(r,"storage").args[0],o=Ir(r,"code").args[0],s=t(i,n,{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},n]},o);for(const c of Object.values(g2(r)))t(c.args[1],n,c.args[2],c.args[3]);return s}function Wm(r,e,t){De(e),Jt(r,e,t||null)}function b2(r,e,t){for(const i of e)De(i);if(t?.contract!==void 0)for(const i of["parameter","storage"]){const n=Ir(t.contract,i).args[0];De(n)}return Tt(r,e,t||null)}function v2(r,e,t=!1){if(Array.isArray(r)){for(const i of r)De(i);for(const i of e)De(i)}else De(r),De(e);fr(r,e,t)}function y2(r,e,t){try{return Wm(r,e,t),!0}catch{return!1}}class lf{constructor(e,t){this.contract=e,this.ctx=Object.assign({contract:e},t),this.output=Vm(e,this.ctx)}static parse(e,t){const i=new ln(t),n=typeof e=="string"?i.parseScript(e):i.parseJSON(e);if(n===null)throw new HE("empty Michelson");if(Dm(n))return new lf(n,t)}static parseTypeExpression(e,t){const i=new ln(t),n=typeof e=="string"?i.parseScript(e):i.parseJSON(e);if(n===null)throw new DE("empty type expression");if(kr(n))return De(n),n}static parseDataExpression(e,t){const i=new ln(t),n=typeof e=="string"?i.parseScript(e):i.parseJSON(e);if(n===null)throw new UE("empty data expression");if(Si(n))return n;throw void 0}section(e){return Ir(this.contract,e)}entryPoints(){return Fa(this.contract)}entryPoint(e){return wl(this.contract,e)}assertDataValid(e,t){Wm(e,t,this.ctx)}isDataValid(e,t){return y2(e,t,this.ctx)}assertParameterValid(e,t){const i=this.entryPoint(e||void 0);if(i===null)throw new qE(e?.toString());this.assertDataValid(t,i)}isParameterValid(e,t){try{return this.assertParameterValid(e,t),!0}catch{return!1}}functionType(e,t){return b2(e,t,this.ctx)}}new lf([{prim:"parameter",args:[{prim:"unit"}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}]);var el={},S0;function _2(){return S0||(S0=1,(function(r){function e(_,E){var O;return _ instanceof Buffer?O=_:O=Buffer.from(_.buffer,_.byteOffset,_.byteLength),O.toString(E)}var t=function(_){return Buffer.from(_)};function i(_){for(var E=0,O=Math.min(256*256,_.length+1),A=new Uint16Array(O),B=[],N=0;;){var v=E<_.length;if(!v||N>=O-1){var j=A.subarray(0,N),D=j;if(B.push(String.fromCharCode.apply(null,D)),!v)return B.join("");_=_.subarray(E),E=0,N=0}var R=_[E++];if((R&128)===0)A[N++]=R;else if((R&224)===192){var M=_[E++]&63;A[N++]=(R&31)<<6|M}else if((R&240)===224){var M=_[E++]&63,q=_[E++]&63;A[N++]=(R&31)<<12|M<<6|q}else if((R&248)===240){var M=_[E++]&63,q=_[E++]&63,P=_[E++]&63,h=(R&7)<<18|M<<12|q<<6|P;h>65535&&(h-=65536,A[N++]=h>>>10&1023|55296,h=56320|h&1023),A[N++]=h}}}function n(_){for(var E=0,O=_.length,A=0,B=Math.max(32,O+(O>>>1)+7),N=new Uint8Array(B>>>3<<3);E<O;){var v=_.charCodeAt(E++);if(v>=55296&&v<=56319){if(E<O){var j=_.charCodeAt(E);(j&64512)===56320&&(++E,v=((v&1023)<<10)+(j&1023)+65536)}if(v>=55296&&v<=56319)continue}if(A+4>N.length){B+=8,B*=1+E/_.length*2,B=B>>>3<<3;var D=new Uint8Array(B);D.set(N),N=D}if((v&4294967168)===0){N[A++]=v;continue}else if((v&4294965248)===0)N[A++]=v>>>6&31|192;else if((v&4294901760)===0)N[A++]=v>>>12&15|224,N[A++]=v>>>6&63|128;else if((v&4292870144)===0)N[A++]=v>>>18&7|240,N[A++]=v>>>12&63|128,N[A++]=v>>>6&63|128;else continue;N[A++]=v&63|128}return N.slice?N.slice(0,A):N.subarray(0,A)}var o="Failed to ",a=function(_,E,O){if(_)throw new Error("".concat(o).concat(E,": the '").concat(O,"' option is unsupported."))},s=typeof Buffer=="function"&&Buffer.from,c=s?t:n;function u(){this.encoding="utf-8"}u.prototype.encode=function(_,E){return a(E&&E.stream,"encode","stream"),c(_)};function p(_){var E;try{var O=new Blob([_],{type:"text/plain;charset=UTF-8"});E=URL.createObjectURL(O);var A=new XMLHttpRequest;return A.open("GET",E,!1),A.send(),A.responseText}finally{E&&URL.revokeObjectURL(E)}}var f=!s&&typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function",l=["utf-8","utf8","unicode-1-1-utf-8"],d=i;s?d=e:f&&(d=function(_){try{return p(_)}catch{return i(_)}});var g="construct 'TextDecoder'",b="".concat(o," ").concat(g,": the ");function x(_,E){a(E&&E.fatal,g,"fatal"),_=_||"utf-8";var O;if(s?O=Buffer.isEncoding(_):O=l.indexOf(_.toLowerCase())!==-1,!O)throw new RangeError("".concat(b," encoding label provided ('").concat(_,"') is invalid."));this.encoding=_,this.fatal=!1,this.ignoreBOM=!1}x.prototype.decode=function(_,E){a(E&&E.stream,"decode","stream");var O;return _ instanceof Uint8Array?O=_:_.buffer instanceof ArrayBuffer?O=new Uint8Array(_.buffer):O=new Uint8Array(_),d(O,this.encoding)},r.TextEncoder=r.TextEncoder||u,r.TextDecoder=r.TextDecoder||x})(typeof window<"u"?window:typeof Ke<"u"?Ke:el)),el}_2();const El=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),$e=(r,e=8)=>r.toString(16).padStart(e,"0"),ff=31;var F;(function(r){r.SECRET="secret",r.RAW="raw",r.TZ1="tz1",r.BRANCH="branch",r.ZARITH="zarith",r.PUBLIC_KEY="public_key",r.PKH="pkh",r.PKH_ARR="pkhArr",r.DELEGATE="delegate",r.SCRIPT="script",r.BALLOT_STATEMENT="ballotStmt",r.PROPOSAL="proposal",r.PROPOSAL_ARR="proposalArr",r.INT32="int32",r.INT16="int16",r.PARAMETERS="parameters",r.ADDRESS="address",r.SMART_CONTRACT_ADDRESS="smart_contract_address",r.SMART_ROLLUP_ADDRESS="smart_rollup_address",r.SMART_ROLLUP_COMMITMENT_HASH="smart_rollup_commitment_hash",r.VALUE="value",r.PADDED_BYTES="padded_bytes",r.SMART_ROLLUP_MESSAGE="smart_rollup_message",r.MANAGER="manager",r.BLOCK_PAYLOAD_HASH="blockPayloadHash",r.ENTRYPOINT="entrypoint",r.OPERATION="operation",r.OP_ACTIVATE_ACCOUNT="activate_account",r.OP_DELEGATION="delegation",r.OP_TRANSACTION="transaction",r.OP_ORIGINATION="origination",r.OP_BALLOT="ballot",r.OP_FAILING_NOOP="failing_noop",r.OP_ATTESTATION="attestation",r.OP_ATTESTATION_WITH_DAL="attestation_with_dal",r.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",r.OP_REVEAL="reveal",r.OP_PROPOSALS="proposals",r.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",r.OP_TRANSFER_TICKET="transfer_ticket",r.BURN_LIMIT="burn_limit",r.OP_INCREASE_PAID_STORAGE="increase_paid_storage",r.OP_UPDATE_CONSENSUS_KEY="update_consensus_key",r.OP_UPDATE_COMPANION_KEY="update_companion_key",r.SIGNATURE_PROOF="signature_proof",r.OP_DRAIN_DELEGATE="drain_delegate",r.DEPOSITS_LIMIT="deposits_limit",r.OP_SET_DEPOSITS_LIMIT="set_deposits_limit",r.OP_SMART_ROLLUP_ORIGINATE="smart_rollup_originate",r.PVM_KIND="pvm_kind",r.OP_SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",r.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message",r.OP_DAL_PUBLISH_COMMITMENT="dal_publish_commitment",r.SLOT_HEADER="slot_header"})(F||(F={}));const Or={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET_DEPRECATED",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT",98:"Lambda_rec",99:"LAMBDA_REC","9a":"TICKET","9b":"BYTES","9c":"NAT","9d":"Ticket","9e":"IS_IMPLICIT_ACCOUNT","9f":"INDEX_ADDRESS",a0:"GET_ADDRESS_INDEX"},w2=(()=>{const r={};return Object.keys(Or).forEach(e=>{r[Or[e]]=e}),r})(),xl={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"attestation",23:"attestation_with_dal",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",158:"transfer_ticket",112:"set_deposits_limit",113:"increase_paid_storage",114:"update_consensus_key",115:"update_companion_key",9:"drain_delegate",200:"smart_rollup_originate",201:"smart_rollup_add_messages",206:"smart_rollup_execute_outbox_message",230:"dal_publish_commitment",17:"failing_noop"},A0=(()=>{const r={};return Object.keys(xl).forEach(e=>{const t=typeof e=="string"?parseInt(e,10):e;r[xl[t]]=$e(t,2)}),r})(),Ga={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate","05":"deposit","06":"stake","07":"unstake","08":"finalize_unstake","09":"set_delegate_parameters"},R0=(()=>{const r={};return Object.keys(Ga).forEach(e=>{r[Ga[e]]=e}),r})();class O0 extends we{constructor(e,t){super(),this.operation=e,this.errorDetail=t,this.name="InvalidOperationSchemaError",this.message="Invalid operation content recevied",t&&(this.message+=` ${t}.`)}}class Zm extends we{constructor(e){super(),this.entrypoint=e,this.name="OversizedEntryPointError",this.message=`Invalid entrypoint length "${e.length}", maximum length is "${ff}".`}}class E2 extends we{constructor(e){super(),this.ballotValue=e,this.name="InvalidBallotValueError",this.message=`Invalid ballot value "${e}" expecting one of the following: "yay", "nay", "pass".`}}class x2 extends we{constructor(e){super(),this.ballotValue=e,this.name="DecodeBallotValueError",this.message=`Invalid ballot value "${e}", cannot be decoded.`}}class S2 extends we{constructor(e){super(),this.value=e,this.name="UnexpectedMichelsonValueError",this.message=`Invalid Michelson value "${e}", unalbe to encode.`}}class Jm extends we{constructor(e){super(),this.message=e,this.name="OperationDecodingError"}}class A2 extends we{constructor(e){super(),this.message=e,this.name="OperationEncodingError"}}class R2 extends we{constructor(e){super(),this.op=e,this.name="UnsupportedOperationError",this.message=`Unsupported operation "${e}", can submit an issue on our github for feature request.`}}class O2 extends we{constructor(e){super(),this.pvm=e,this.name="UnsupportedPvmKindError",this.message=`Invalid Pvm kind "${e}" expecting either "arith" or "wasm_2_0_0".`}}class P2 extends we{constructor(e){super(),this.pvm=e,this.name="DecodePvmKindError",this.message=`Invalid Pvm kind "${e}", cannot be decoded.`}}class T2 extends we{constructor(e,t){super(),this.address=e,this.errorDetail=t,this.name="InvalidSmartRollupAddress",this.message=`Invalid smart rollup address "${e}"`,t&&(this.message+=` ${t}.`)}}class k2 extends we{constructor(e,t){super(),this.hash=e,this.errorDetail=t,this.name="InvalidSmartRollupCommitmentHashError",this.message=`Invalid smart rollup commitment hash "${e}"`,t&&(this.message+=` ${t}.`)}}class I2 extends we{constructor(e,t){super(),this.commitment=e,this.errorDetail=t,this.name="InvalidDalCommitmentError",this.message=`Invalid dal commitment "${e}"`,t&&(this.message+=` ${t}.`)}}class wr{static fromHexString(e){const t=e.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(t)){const i=new Uint8Array((t.match(/([a-z]|\d){2}/g)||[]).map(n=>parseInt(n,16)));return new wr(i)}else throw new Bl(t)}constructor(e,t=0){this.arr=e,this.offset=t}consume(e){const t=this.arr.subarray(this.offset,this.offset+e);return this.offset+=e,t}get(e){return this.arr[this.offset+e]}length(){return this.arr.length-this.offset}slice(e,t){return new wr(this.arr.slice(e,t))}}const L2=r=>"prim"in r,N2=r=>"bytes"in r&&typeof r.bytes=="string",B2=r=>"string"in r&&typeof r.string=="string",M2=r=>"int"in r&&typeof r.int=="string",j2=r=>{const e=Fi(r.code),t=Fi(r.storage);return`${$e(e.length/2,8)}${e}${$e(t.length/2,8)}${t}`},C2=r=>{const e=pr(r),t=pr(r);return{code:Gi(new wr(e)),storage:Gi(new wr(t))}},Fi=r=>{if(Array.isArray(r)){const e=r.map(i=>Fi(i)).join(""),t=e.length/2;return`02${$e(t)}${e}`}else{if(L2(r))return K2(r);if(N2(r))return H2(r);if(B2(r))return U2(r);if(M2(r))return F2(r)}throw new S2(JSON.stringify(r))},Gi=r=>{const e=r.consume(1);switch(e[0]){case 10:return D2(r);case 1:return q2(r);case 0:return G2(r);case 2:{const t=new wr(pr(r)),i=[];for(;t.length()>0;)i.push(Gi(t));return i}default:return $2(r,e)}},pr=(r,e=4)=>{const t=r.consume(e),i=parseInt(Buffer.from(t).toString("hex"),16);return r.consume(i)},z2=(r,e=4)=>{const t=[];let i=r;for(;i.length();){const n=i.consume(e),o=parseInt(Buffer.from(n).toString("hex"),16);t.push(i.consume(o)),i=i.slice(o+e)}return t},H2=r=>{if(!/^([A-Fa-f0-9]{2})*$/.test(r.bytes))throw new Bl(r.bytes);const e=r.bytes.length/2;return`0a${$e(e)}${r.bytes}`},D2=r=>{const e=pr(r);return{bytes:Buffer.from(e).toString("hex")}},U2=r=>{const e=Buffer.from(r.string,"utf8").toString("hex"),t=e.length/2;return`01${$e(t)}${e}`},q2=r=>{const e=pr(r);return{string:Buffer.from(e).toString("utf8")}},F2=({int:r})=>{const e=new te(r,10),t=e.toString(2)[0]==="-"?"1":"0",i=e.toString(2).replace(/-/g,""),n=i.length<=6?6:(i.length-6)%7?i.length+7-(i.length-6)%7:i.length,a=i.padStart(n,"0").match(/\d{6,7}/g).reverse();return a[0]=t+a[0],`00${a.map((c,u)=>parseInt((u===a.length-1?"0":"1")+c,2).toString(16).padStart(2,"0")).join("")}`},G2=r=>{let e=r.consume(1)[0];const t=[],i=128;for(;e&i;)t.push(e),e=r.consume(1)[0];t.push(e);const n=!!(64&t[0]);t[0]=t[0]&127;const o=t.map((s,c)=>s.toString(2).slice(c===0?-6:-7).padStart(c===0?6:7,"0")).reverse();let a=new te(o.join(""),2);return n&&(a=a.times(-1)),{int:a.toFixed()}},K2=r=>{const e=+Array.isArray(r.annots),t=Array.isArray(r.args)?r.args.length:0,i=$e(Math.min(2*t+e+3,9),2),n=w2[r.prim];let o=(r.args||[]).map(s=>Fi(s)).join("");const a=Array.isArray(r.annots)?Z2(r.annots):"";return(r.prim==="LAMBDA"||r.prim==="LAMBDA_REC")&&t&&(o=$e(o.length/2)+o+$e(0)),(r.prim==="pair"||r.prim==="Pair")&&t>2&&(o=a===""?$e(o.length/2)+o+$e(0):$e(o.length/2)+o),r.prim==="view"&&r.args&&(o=$e(o.length/2)+o+$e(0)),`${i}${n}${o}${a}`},$2=(r,e)=>{const t=(e[0]-3)%2===1;let i=Math.floor((e[0]-3)/2);const n=r.consume(1)[0].toString(16).padStart(2,"0"),o={prim:Or[n]};if((Or[n]==="LAMBDA"||Or[n]==="LAMBDA_REC")&&r.consume(4),Or[n]==="view")return i!=0?V2(r,o):o;let a,s;(Or[n]==="pair"||Or[n]==="Pair")&&i>2&&(a=W2(r),i=0,s=P0(r));const c=new Array(i).fill(0).map(()=>Gi(r));return(Or[n]==="LAMBDA"||Or[n]==="LAMBDA_REC")&&r.consume(4),a?o.args=a:c.length&&(o.args=c),s&&s[0]!==""?o.annots=s:t&&(o.annots=P0(r)),o},V2=(r,e)=>(r.consume(4),e.args=new Array(4).fill(0).map(()=>Gi(r)),r.consume(4),e),W2=r=>{const e=new wr(pr(r)),t=[];for(;e.length()>0;)t.push(Gi(e));return t},Z2=r=>{const e=r.map(i=>Buffer.from(i,"utf8").toString("hex")).join("20"),t=e.length/2;return`${$e(t)}${e}`},P0=r=>{const e=r.consume(4),t=parseInt(Buffer.from(e).toString("hex"),16),i=r.consume(t);return Buffer.from(i).toString("hex").split("20").map(o=>Buffer.from(o,"hex").toString("utf8"))},wn=r=>e=>{const[t]=Ge(e,[r]);return Sa(t)},Nt=r=>e=>{const t=e.consume(il[r]);return kt(t,r)},J2=Nt(X.Ed25519PublicKeyHash),Y2=Nt(X.BlockHash),bs=r=>{const e=r.consume(1);if(e[0]===0)return Nt(X.Ed25519PublicKeyHash)(r);if(e[0]===1)return Nt(X.Secp256k1PublicKeyHash)(r);if(e[0]===2)return Nt(X.P256PublicKeyHash)(r);if(e[0]===3)return Nt(X.BLS12_381PublicKeyHash)(r)},X2=r=>{if(!hf(r))return;const e=[];for(r.consume(4);r.length()>0;)e.push(bs(r));return e},Q2=wn(X.BlockHash),ex=wn(X.Ed25519PublicKeyHash),hn=r=>r?"ff":"00",Ym=r=>wn(X.ProtocolHash)(r),Xm=r=>Nt(X.ProtocolHash)(r),tx=r=>{const e=[];for(r.consume(4);r.length()>0;)e.push(Xm(r));return e},rx=r=>$e(32*r.length)+r.map(e=>Ym(e)).join(""),ix=r=>{switch(r){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new E2(r)}},nx=r=>{const e=r.consume(1);switch(e[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new x2(e[0].toString())}},ox=r=>{switch(r){case"arith":return"00";case"wasm_2_0_0":return"01";case"riscv":return"02";default:throw new O2(r)}},ax=r=>{const e=r.consume(1);switch(e[0]){case 0:return"arith";case 1:return"wasm_2_0_0";case 2:return"riscv";default:throw new P2(e[0].toString())}},sx=r=>r?hn(!0)+df(r):hn(!1),cx=r=>{const e=parseInt(String(r),10),t=[];for(let i=0;i<4;i++){const n=(4-(i+1))*8;t.push((e&255<<n)>>n)}return Buffer.from(t).toString("hex")},ux=r=>{const e=r.consume(4);let t=0;for(let i=0;i<e.length;i++)t=t|e[i]<<(e.length-(i+1))*8;return t},lx=r=>{const e=parseInt(String(r),10),t=[];for(let i=0;i<2;i++){const n=(2-(i+1))*8;t.push((e&255<<n)>>n)}return Buffer.from(t).toString("hex")},fx=r=>{const e=r.consume(2);let t=0;for(let i=0;i<e.length;i++)t=t|e[i]<<(e.length-(i+1))*8;return t},hf=r=>r.consume(1)[0]===255,hx=r=>{if(hf(r))return bs(r)},df=r=>{try{return rl(r)}catch(e){throw new jl(r,e instanceof we?e.result:void 0)}},dx=r=>{if(!r)return hn(!1);if(r.length===0)return hn(!0)+$e(0);const e=r.reduce((t,i)=>t+df(i),"");return hn(!0)+$e(e.length/2)+e},px=r=>{try{return dv(r)}catch(e){throw new jo(r,e instanceof we?e.result:void 0)}},gx=r=>po(r),mx=r=>{try{return wn(X.SmartRollupHash)(r)}catch(e){throw e instanceof we?new T2(r):e}},bx=r=>po(r),vx=r=>{switch(r.consume(1)[0]){case 0:return Nt(X.Ed25519PublicKey)(r);case 1:return Nt(X.Secp256k1PublicKey)(r);case 2:return Nt(X.P256PublicKey)(r);case 3:return Nt(X.BLS12_381PublicKey)(r);default:throw new jo(void 0,se.NO_PREFIX_MATCHED)}},yx=r=>{try{return wn(X.SmartRollupCommitmentHash)(r)}catch(e){throw e instanceof we?new k2(r):e}},_x=r=>{switch(r.consume(1)[0]){case 0:return bs(r);case 1:{const t=Nt(X.ContractHash)(r);return r.consume(1),t}default:throw new Te(r.toString(),": Unable to decode.")}},wx=r=>Nt(X.SmartRollupHash)(r),Ex=r=>{if(r.consume(1)[0]===1){const t=Nt(X.ContractHash)(r);return r.consume(1),t}throw new wo(r.toString(),se.NO_PREFIX_MATCHED)},xx=r=>Nt(X.SmartRollupCommitmentHash)(r),pf=r=>{const e=[];let t=new te(r,10);if(t.isNaN())throw new TypeError(`Invalid zarith number ${r}`);for(;;)if(t.lt(128)){t.lt(16)&&e.push("0"),e.push(t.toString(16));break}else{let i=t.mod(128);t=t.minus(i),t=t.dividedBy(128),i=i.plus(128),e.push(i.toString(16))}return e.join("")},gf=r=>{let e=0;for(;e<r.length()&&(r.get(e)&128)!==0;)e+=1;let t=new te(0);for(let i=e;i>=0;i-=1){const n=r.get(i)&127;t=t.multipliedBy(128),t=t.plus(n)}return r.consume(e+1),new te(t).toString()},Sx=r=>{const e=$e(r.consume(1)[0],2);if(e in Ga)return Ga[e];{const t=pr(r,1),i=Buffer.from(t).toString("utf8");if(i.length>ff)throw new Zm(i);return i}},Ax=r=>{if(r.consume(1)[0]!==0){const t=Sx(r),i=pr(r),n=Gi(new wr(i));return{entrypoint:t,value:n}}},Rx=r=>{if(r in R0)return`${R0[r]}`;if(r.length>ff)throw new Zm(r);return`ff${Fi({string:r}).slice(8)}`},Ox=r=>{if(!r||r.entrypoint==="default"&&"prim"in r.value&&r.value.prim==="Unit")return"00";const e=Rx(r.entrypoint),t=Fi(r.value),i=$e(t.length/2);return`ff${e}${i}${t}`},Px=r=>{const e=Fi(r);return`${$e(e.length/2)}${e}`},Tx=r=>{const e=pr(r);return Gi(new wr(e))},kx=wn(X.ValueHash),Ix=Nt(X.ValueHash),Lx=r=>`${Fi({string:r}).slice(2)}`,Nx=r=>{const e=pr(r);return Buffer.from(e).toString("utf8")},Bx=r=>r?`ff${pf(r)}`:"00",Mx=r=>{const e=r.consume(1);if(Buffer.from(e).toString("hex")!=="00")return gf(r)},jx=r=>r?`ff${pf(r)}`:"00",Cx=r=>{const e=r.consume(1);if(Buffer.from(e).toString("hex")!=="00")return gf(r)},zx=r=>{try{const[e,t]=Ge(r,pv);if(t===X.BLS12_381Signature)return Qm(Sa(e));throw new Ht("we only support encoding of BLSIG signatures from protocol Seoul")}catch(e){throw e instanceof we?new gv(r,e.result):e}},Hx=r=>{if(r.consume(4),r.length().toString()==="96")return Nt(X.BLS12_381Signature)(r);throw new Ht("we only support decoding of BLSIG signatures")},Dx=r=>r?hn(!0)+zx(r):hn(!1),Ux=r=>{if(hf(r))return Hx(r)},Qm=(r,e=8)=>`${$e(r.length/2,e)}${r}`,qx=r=>{const e=pr(r);return Buffer.from(e).toString("hex")},Fx=r=>{const e=r.reduce((t,i)=>t+`${$e(i.length/2)}${i}`,"");return`${$e(e.length/2)}${e}`},Gx=r=>{const e=pr(r);return z2(new wr(e)).map(i=>Buffer.from(i).toString("hex"))},Kx=r=>{try{return wn(X.SlotHeader)(r)}catch(e){throw e instanceof we?new I2(r):e}},$x=r=>Nt(X.SlotHeader)(r),Vx=r=>$e(r.slot_index,2)+Kx(r.commitment)+r.commitment_proof,Wx=r=>{const e=r.consume(1);return{slot_index:Number(e[0].toString(10)),commitment:$x(r),commitment_proof:El(r.consume(96))}},eb={branch:F.BRANCH,contents:[F.OPERATION]},mf={pkh:F.TZ1,secret:F.SECRET},bf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,public_key:F.PUBLIC_KEY,proof:F.SIGNATURE_PROOF},vf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,delegate:F.DELEGATE},yf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,amount:F.ZARITH,destination:F.ADDRESS,parameters:F.PARAMETERS},_f={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,balance:F.ZARITH,delegate:F.DELEGATE,script:F.SCRIPT},wf={source:F.PKH,period:F.INT32,proposal:F.PROPOSAL,ballot:F.BALLOT_STATEMENT},Ef={slot:F.INT16,level:F.INT32,round:F.INT32,block_payload_hash:F.BLOCK_PAYLOAD_HASH},xf={slot:F.INT16,level:F.INT32,round:F.INT32,block_payload_hash:F.BLOCK_PAYLOAD_HASH,dal_attestation:F.ZARITH},Sf={level:F.INT32,nonce:F.RAW},Af={source:F.PKH,period:F.INT32,proposals:F.PROPOSAL_ARR},Rf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,value:F.VALUE},Of={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,ticket_contents:F.VALUE,ticket_ty:F.VALUE,ticket_ticketer:F.ADDRESS,ticket_amount:F.ZARITH,destination:F.ADDRESS,entrypoint:F.ENTRYPOINT},Pf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,amount:F.ZARITH,destination:F.SMART_CONTRACT_ADDRESS},Tf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,pk:F.PUBLIC_KEY,proof:F.SIGNATURE_PROOF},kf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,pk:F.PUBLIC_KEY,proof:F.SIGNATURE_PROOF},If={consensus_key:F.PKH,delegate:F.PKH,destination:F.PKH},Lf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,limit:F.DEPOSITS_LIMIT},Nf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,pvm_kind:F.PVM_KIND,kernel:F.PADDED_BYTES,parameters_ty:F.VALUE,whitelist:F.PKH_ARR},Bf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,message:F.SMART_ROLLUP_MESSAGE},Mf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,rollup:F.SMART_ROLLUP_ADDRESS,cemented_commitment:F.SMART_ROLLUP_COMMITMENT_HASH,output_proof:F.PADDED_BYTES},jf={source:F.PKH,fee:F.ZARITH,counter:F.ZARITH,gas_limit:F.ZARITH,storage_limit:F.ZARITH,slot_header:F.SLOT_HEADER},Cf={arbitrary:F.PADDED_BYTES},Zx=r=>e=>{if(!(e.kind in r)||!(e.kind in A0))throw new Di(e.kind);return A0[e.kind]+r[e.kind](e)},Jx=r=>e=>{const t=e.consume(1),i=xl[t[0]];if(i===void 0)throw new R2(t[0].toString());const n=r[i](e);if(typeof n!="object")throw new Jm("Invalid operation, cannot be decoded.");return Object.assign({kind:i},n)},Qe=r=>e=>t=>Object.keys(e).reduce((n,o)=>{const a=e[o];if(t&&Array.isArray(a)){const s=r[a[0]],c=t[o];if(!Array.isArray(c))throw new A2(`Invalid operation value "${JSON.stringify(c)}" of key "${o}, expected value to be Array.`);return n+c.reduce((u,p)=>u+s(p),"")}else{const s=r[a];return n+s(t[o])}},""),et=r=>e=>t=>Object.keys(e).reduce((n,o)=>{const a=e[o];if(Array.isArray(a)){const s=r[a[0]],c=[],u=t.length();for(;t.length()>0;)if(c.push(s(t)),u===t.length())throw new Jm("Unable to decode value");return Object.assign(Object.assign({},n),{[o]:c})}else{const s=r[a],c=s(t);return typeof c<"u"?Object.assign(Object.assign({},n),{[o]:c}):Object.assign({},n)}},{}),de={[F.SECRET]:r=>El(r.consume(20)),[F.RAW]:r=>El(r.consume(32)),[F.TZ1]:J2,[F.BRANCH]:Y2,[F.ZARITH]:gf,[F.PUBLIC_KEY]:vx,[F.PKH]:bs,[F.PKH_ARR]:X2,[F.DELEGATE]:hx,[F.INT32]:ux,[F.SCRIPT]:C2,[F.BALLOT_STATEMENT]:nx,[F.PROPOSAL]:Xm,[F.PROPOSAL_ARR]:tx,[F.PARAMETERS]:Ax,[F.ADDRESS]:_x,[F.SMART_ROLLUP_ADDRESS]:wx,[F.SMART_CONTRACT_ADDRESS]:Ex,[F.SMART_ROLLUP_COMMITMENT_HASH]:xx,[F.VALUE]:Tx,[F.INT16]:fx,[F.BLOCK_PAYLOAD_HASH]:Ix,[F.ENTRYPOINT]:Nx,[F.BURN_LIMIT]:Mx,[F.DEPOSITS_LIMIT]:Cx,[F.SIGNATURE_PROOF]:Ux,[F.PVM_KIND]:ax,[F.PADDED_BYTES]:qx,[F.SMART_ROLLUP_MESSAGE]:Gx,[F.SLOT_HEADER]:Wx};de[F.OPERATION]=Jx(de);de[F.OP_ACTIVATE_ACCOUNT]=r=>et(de)(mf)(r);de[F.OP_FAILING_NOOP]=r=>et(de)(Cf)(r);de[F.OP_DELEGATION]=r=>et(de)(vf)(r);de[F.OP_TRANSACTION]=r=>et(de)(yf)(r);de[F.OP_ORIGINATION]=r=>et(de)(_f)(r);de[F.OP_BALLOT]=r=>et(de)(wf)(r);de[F.OP_ATTESTATION]=r=>et(de)(Ef)(r);de[F.OP_ATTESTATION_WITH_DAL]=r=>et(de)(xf)(r);de[F.OP_SEED_NONCE_REVELATION]=r=>et(de)(Sf)(r);de[F.OP_PROPOSALS]=r=>et(de)(Af)(r);de[F.OP_REVEAL]=r=>et(de)(bf)(r);de[F.OP_REGISTER_GLOBAL_CONSTANT]=r=>et(de)(Rf)(r);de[F.OP_TRANSFER_TICKET]=r=>et(de)(Of)(r);de[F.OP_INCREASE_PAID_STORAGE]=r=>et(de)(Pf)(r);de[F.OP_UPDATE_CONSENSUS_KEY]=r=>et(de)(Tf)(r);de[F.OP_UPDATE_COMPANION_KEY]=r=>et(de)(kf)(r);de[F.OP_DRAIN_DELEGATE]=r=>et(de)(If)(r);de[F.OP_SMART_ROLLUP_ORIGINATE]=r=>et(de)(Nf)(r);de[F.OP_SMART_ROLLUP_ADD_MESSAGES]=r=>et(de)(Bf)(r);de[F.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=r=>et(de)(Mf)(r);de[F.OP_DAL_PUBLISH_COMMITMENT]=r=>et(de)(jf)(r);de[F.MANAGER]=et(de)(eb);de[F.OP_SET_DEPOSITS_LIMIT]=r=>et(de)(Lf)(r);const pe={[F.SECRET]:r=>r,[F.RAW]:r=>r,[F.TZ1]:ex,[F.BRANCH]:Q2,[F.ZARITH]:pf,[F.PUBLIC_KEY]:px,[F.PKH]:df,[F.PKH_ARR]:dx,[F.DELEGATE]:sx,[F.SCRIPT]:j2,[F.BALLOT_STATEMENT]:ix,[F.PROPOSAL]:Ym,[F.PROPOSAL_ARR]:rx,[F.INT32]:cx,[F.PARAMETERS]:Ox,[F.ADDRESS]:gx,[F.SMART_ROLLUP_ADDRESS]:mx,[F.SMART_CONTRACT_ADDRESS]:bx,[F.SMART_ROLLUP_COMMITMENT_HASH]:yx,[F.VALUE]:Px,[F.INT16]:lx,[F.BLOCK_PAYLOAD_HASH]:kx,[F.ENTRYPOINT]:Lx,[F.BURN_LIMIT]:Bx,[F.DEPOSITS_LIMIT]:jx,[F.SIGNATURE_PROOF]:Dx,[F.PVM_KIND]:ox,[F.PADDED_BYTES]:Qm,[F.SMART_ROLLUP_MESSAGE]:Fx,[F.SLOT_HEADER]:Vx};pe[F.OPERATION]=Zx(pe);pe[F.OP_ACTIVATE_ACCOUNT]=r=>Qe(pe)(mf)(r);pe[F.OP_DELEGATION]=r=>Qe(pe)(vf)(r);pe[F.OP_TRANSACTION]=r=>Qe(pe)(yf)(r);pe[F.OP_ORIGINATION]=r=>Qe(pe)(_f)(r);pe[F.OP_BALLOT]=r=>Qe(pe)(wf)(r);pe[F.OP_ATTESTATION]=r=>Qe(pe)(Ef)(r);pe[F.OP_ATTESTATION_WITH_DAL]=r=>Qe(pe)(xf)(r);pe[F.OP_SEED_NONCE_REVELATION]=r=>Qe(pe)(Sf)(r);pe[F.OP_PROPOSALS]=r=>Qe(pe)(Af)(r);pe[F.OP_REVEAL]=r=>Qe(pe)(bf)(r);pe[F.OP_REGISTER_GLOBAL_CONSTANT]=r=>Qe(pe)(Rf)(r);pe[F.OP_TRANSFER_TICKET]=r=>Qe(pe)(Of)(r);pe[F.OP_INCREASE_PAID_STORAGE]=r=>Qe(pe)(Pf)(r);pe[F.OP_UPDATE_CONSENSUS_KEY]=r=>Qe(pe)(Tf)(r);pe[F.OP_UPDATE_COMPANION_KEY]=r=>Qe(pe)(kf)(r);pe[F.OP_DRAIN_DELEGATE]=r=>Qe(pe)(If)(r);pe[F.OP_SMART_ROLLUP_ORIGINATE]=r=>Qe(pe)(Nf)(r);pe[F.OP_SMART_ROLLUP_ADD_MESSAGES]=r=>Qe(pe)(Bf)(r);pe[F.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=r=>Qe(pe)(Mf)(r);pe[F.OP_DAL_PUBLISH_COMMITMENT]=r=>Qe(pe)(jf)(r);pe[F.MANAGER]=Qe(pe)(eb);pe[F.OP_SET_DEPOSITS_LIMIT]=r=>Qe(pe)(Lf)(r);pe[F.OP_FAILING_NOOP]=r=>Qe(pe)(Cf)(r);const tb={activate_account:mf,reveal:bf,delegation:vf,transaction:yf,origination:_f,ballot:wf,attestation:Ef,attestation_with_dal:xf,seed_nonce_revelation:Sf,proposals:Af,register_global_constant:Rf,transfer_ticket:Of,increase_paid_storage:Pf,update_consensus_key:Tf,update_companion_key:kf,drain_delegate:If,set_deposits_limit:Lf,smart_rollup_originate:Nf,smart_rollup_add_messages:Bf,smart_rollup_execute_outbox_message:Mf,dal_publish_commitment:jf,failing_noop:Cf},Yx=(r,e)=>e.filter(t=>!r.includes(t)),Xx=(r,e)=>r.filter(t=>t!==e),Qx=r=>Object.keys(tb).includes(r),eS=r=>{const e=r.kind,t=Object.keys(r),i=Xx(t,"kind"),n=Object.keys(tb[e]);return Yx(i,n)};var Sl;(function(r){r.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",r.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",r.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",r.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",r.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",r.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",r.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",r.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",r.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",r.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",r.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",r.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",r.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",r.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",r.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",r.PtNairobi="PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf",r.ProxfordY="ProxfordYmVfjWnRcgjWH36fW6PArwqykTFzotUxRs6gmTcZDuH",r.PtParisBx="PtParisBxoLz5gzMmn3d9WBQNoPSZakgnkMC2VNuQ3KXfUtUQeZ",r.PsParisCZ="PsParisCZo7KAh1Z1smVd9ZMZ1HHn5gkzbM94V3PLCpknFWhUAi",r.PsQuebecn="PsQuebecnLByd3JwTiGadoG4nGWi3HYiLXUjkibeFV8dCFeVMUg",r.PsRiotuma="PsRiotumaAMotcRoDWW1bysEhQy2n1M5fy8JgRp8jjRfHGmfeA7",r.PtSeouLou="PtSeouLouXkxhg39oWzjxDWaCydNfR3RxCUrNe4Q9Ro8BTehcbh",r.PtTALLiNt="PtTALLiNtPec7mE7yY4m3k26J8Qukef3E3ehzhfXgFZKGtDdAXu",r.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Sl||(Sl={}));typeof globalThis.TextEncoder>"u"&&(globalThis.TextEncoder=TextEncoder);typeof globalThis.TextDecoder>"u"&&(globalThis.TextDecoder=TextDecoder);const tS=Sl.PtTALLiNt;function rS(r,e){return{encoder:pe[r],decoder:t=>{const i=wr.fromHexString(t);return de[r](i)}}}class rb{constructor(e=tS){this.protocolHash=e,this.codec=rS(F.MANAGER,this.protocolHash)}forge(e){const t=fv(e.branch);if(t!==se.VALID)throw new hv(e.branch,t);for(const n of e.contents){if(!Qx(n.kind))throw new Di(n.kind);const o=eS(n);if(o.length===1){if(n.kind==="delegation"&&o[0]==="delegate")continue;if(n.kind==="origination"&&o[0]==="delegate")continue;if(n.kind==="transaction"&&o[0]==="parameters")continue;if(n.kind==="set_deposits_limit"&&o[0]==="limit")continue;if(n.kind==="smart_rollup_originate"&&o[0]==="whitelist")continue;if(n.kind==="update_consensus_key"&&o[0]==="proof")continue;if(n.kind==="update_companion_key"&&o[0]==="proof")continue;if(n.kind==="reveal"&&o[0]==="proof")continue;throw new O0(n,`missing properties "${o.join(", ")}"`)}else if(o.length>1)throw new O0(n,`missing properties "${o.join(", ")}"`)}const i=this.codec.encoder(e).toLowerCase();return Promise.resolve(i)}parse(e){return Promise.resolve(this.codec.decoder(e))}}const lA=new rb;function Ze(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}function G(r,e,t,i){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(p){try{u(i.next(p))}catch(f){a(f)}}function c(p){try{u(i.throw(p))}catch(f){a(f)}}function u(p){p.done?o(p.value):n(p.value).then(s,c)}u((i=i.apply(r,e||[])).next())})}function la(r,e,t,i){if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(r):i?i.value:e.get(r)}function Ye(r,e,t,i,n){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}function iS(r,e){const t=JSON.parse(r.body);if(t[0]&&t[0].kind&&t[0].msg){const i=JSON.stringify({kind:t[0].kind,id:t[0].id,msg:t[0].msg.replace(e,"")});return new dn(`Http error response: (${r.status}) ${i}`,r.status,r.statusText,i,r.url)}else return r}class zf{constructor(e){this.context=e}inject(e){return G(this,void 0,void 0,function*(){let t;try{t=yield this.context.rpc.injectOperation(e)}catch(i){const n=". You may want to use --replace to provide adequate fee and replace it";throw i instanceof dn&&i.message.includes(n)?iS(i,n):i}return t})}}class fa extends Xa{constructor(){super(),this.name="UnconfiguredSignerError",this.message="No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."}}class Al{publicKey(){return G(this,void 0,void 0,function*(){throw new fa})}publicKeyHash(){return G(this,void 0,void 0,function*(){throw new fa})}secretKey(){return G(this,void 0,void 0,function*(){throw new fa})}sign(e,t){return G(this,void 0,void 0,function*(){throw new fa})}}function ib(r){return new it(e=>(r.on("data",t=>{e.next(t)}),r.on("error",t=>{e.error(t)}),r.on("close",()=>{e.complete()}),()=>{r.close()}))}const Ar=(r,e)=>Object.assign(Object.assign({},r),{kind:e}),Ka=(r,e)=>{if(Array.isArray(r)){const t=r.find(i=>i.kind===e);if(t&&nb(t,e))return t}},nb=(r,e)=>r.kind===e,ob=r=>{var e;return r.kind===V.TRANSACTION&&(!((e=r.destination)===null||e===void 0)&&e.startsWith("KT1"))?!0:["origination","register_global_constant","transfer_ticket","update_consensus_key","update_companion_key","smart_rollup_add_messages","smart_rollup_originate"].indexOf(r.kind)!==-1},$a=r=>["transaction","delegation","origination","reveal","register_global_constant","increase_paid_storage","transfer_ticket","update_consensus_key","update_companion_key","smart_rollup_add_messages","smart_rollup_originate","smart_rollup_execute_outbox_message"].indexOf(r.kind)!==-1,Hf=r=>["transaction","delegation","origination","register_global_constant","increase_paid_storage","transfer_ticket","update_consensus_key","update_companion_key","smart_rollup_add_messages","smart_rollup_originate","smart_rollup_execute_outbox_message"].indexOf(r.kind)!==-1,nS=r=>["transaction","delegation","origination","reveal","ballot"].indexOf(r.kind)!==-1,vs=r=>"metadata"in r,En=r=>vs(r)&&"operation_result"in r.metadata,ab=r=>vs(r)&&"internal_operation_results"in r.metadata,ha={TZ1:171,TZ2:157,TZ3:447,TZ4:3252},da={TZ1:278,TZ2:277,TZ3:306,TZ4:736},Rl=0,oS=257,sb=250;var He;(function(r){r.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",r.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",r.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",r.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",r.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",r.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",r.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",r.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",r.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",r.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",r.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",r.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",r.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",r.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",r.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",r.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",r.PtNairobi="PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf",r.ProxfordY="ProxfordYmVfjWnRcgjWH36fW6PArwqykTFzotUxRs6gmTcZDuH",r.PtParisBx="PtParisBxoLz5gzMmn3d9WBQNoPSZakgnkMC2VNuQ3KXfUtUQeZ",r.PsParisCZ="PsParisCZo7KAh1Z1smVd9ZMZ1HHn5gkzbM94V3PLCpknFWhUAi",r.PsQuebecn="PsQuebecnLByd3JwTiGadoG4nGWi3HYiLXUjkibeFV8dCFeVMUg",r.PsRiotuma="PsRiotumaAMotcRoDWW1bysEhQy2n1M5fy8JgRp8jjRfHGmfeA7",r.PtSeouLou="PtSeouLouXkxhg39oWzjxDWaCydNfR3RxCUrNe4Q9Ro8BTehcbh",r.PtTALLiNt="PtTALLiNtPec7mE7yY4m3k26J8Qukef3E3ehzhfXgFZKGtDdAXu",r.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(He||(He={}));const aS={"004":[He.Pt24m4xi],"005":[He.PsBABY5H,He.PsBabyM1],"006":[He.PsCARTHA],"007":[He.PsDELPH1],"008":[He.PtEdo2Zk],"009":[He.PsFLorena],"010":[He.PtGRANADs],"011":[He.PtHangz2],"012":[He.PsiThaCa,He.Psithaca2],"013":[He.PtJakart2],"014":[He.PtKathman],"015":[He.PtLimaPtL],"016":[He.PtMumbai2],"017":[He.PtNairobi],"019":[He.ProxfordY],"020":[He.PtParisBx,He.PsParisCZ],"021":[He.PsQuebecn],"022":[He.PsRiotuma],"023":[He.PtSeouLou],"024":[He.PtTALLiNt],"025":[He.ProtoALpha]};var Ol;(function(r){r.MAINNET="NetXdQprcVkpaWU",r.GHOSTNET="NetXnHfVqm9iesp",r.SHADOWNET="NetXsqzbfFenSTS",r.CARTHAGENET="NetXjD3HPJJjmcd",r.DELPHINET="NetXm8tYqnMWky1",r.EDONET="NetXSgo1ZT2DRUG",r.FLORENCENET="NetXxkAx4woPLyu",r.GRANADANET="NetXz969SFaFn8k",r.HANGZHOUNET="NetXZSsxBpMQeAT",r.ITHACANET="NetXbhmtAbMukLc",r.JAKARTANET2="NetXLH1uAxK7CCh",r.KATHMANDUNET="NetXazhm4yetmff",r.LIMANET="NetXizpkH94bocH",r.MUMBAINET="NetXQw6nWSnrJ5t",r.MUMBAINET2="NetXgbcrNtXD2yA",r.NAIROBINET="NetXyuzvDo2Ugzb",r.OXFORDNET2="NetXxWsskGahzQB",r.PARISBNET="NetXo8SqH1c38SS",r.PARISCNET="NetXXWAHLEvre9b",r.QUEBECNET="NetXuTeGinLEqxp",r.RIONET="NetXPdgaoabtBth",r.SEOULNET="NetXd56aBs1aeW3",r.TALLINNNET="NetXe8DbhW9A1eS"})(Ol||(Ol={}));const Va=r=>Math.round(sS(r)*37/10),sS=r=>{switch(r.substring(0,3)){case"tz1":return ha.TZ1;case"tz2":return ha.TZ2;case"tz3":return ha.TZ3;case"tz4":return ha.TZ4;default:throw new Error(`Cannot estimate reveal gas limit for ${r}`)}},Pl=r=>Math.round(cb(r)*12/10),cb=r=>{switch(r.substring(0,3)){case"tz1":return da.TZ1;case"tz2":return da.TZ2;case"tz3":return da.TZ3;case"tz4":return da.TZ4*1.7;default:throw new Error(`Cannot estimate reveal fee for ${r}`)}},cS=r=>"with"in r;class Df extends Ya{constructor(e,t,i){super(),this.errors=e,this.errorDetails=t,this.operationsWithResults=i,this.name="TezosOperationError",this.lastError=e[e.length-1],this.message=`(${this.kind}) ${this.id}`,cS(this.lastError)&&(this.lastError.with.string?this.message=this.lastError.with.string:this.lastError.with.int?this.message=this.lastError.with.int:this.message=JSON.stringify(this.lastError.with))}get id(){return this.lastError.id}get kind(){return this.lastError.kind}}class ub extends Error{constructor(e){super(),this.result=e,this.name="TezosPreapplyFailureError",this.message="Preapply returned an unexpected result"}}const Lr=r=>{const e=Array.isArray(r)?r:[r],t=[];for(let i=0;i<e.length;i++)for(let n=0;n<e[i].contents.length;n++){const o=e[i].contents[n];En(o)&&"fee"in o&&(t.push(Object.assign({fee:o.fee},o.metadata.operation_result)),Array.isArray(o.metadata.internal_operation_results)&&o.metadata.internal_operation_results.forEach(a=>t.push(a.result)))}return t},Wn=(r,e="failed")=>{const t=Array.isArray(r)?r:[r];let i=[];for(let n=0;n<t.length;n++)for(let o=0;o<t[n].contents.length;o++){const a=t[n].contents[o];if(vs(a)&&(En(a)&&a.metadata.operation_result.status===e&&(i=i.concat(a.metadata.operation_result.errors||[])),ab(a)&&Array.isArray(a.metadata.internal_operation_results)))for(const s of a.metadata.internal_operation_results)"result"in s&&s.result.status===e&&(i=i.concat(s.result.errors||[]))}return i};class uS extends qe{constructor(e){super(),this.message=e,this.name="OriginationOperationError"}}class wa extends we{constructor(e){super(),this.message=e,this.name="InvalidEstimateValueError"}}const lS=(r,{ALLOCATION_BURN:e,ORIGINATION_BURN:t}={ALLOCATION_BURN:257,ORIGINATION_BURN:257})=>{te.config({DECIMAL_PLACES:0,ROUNDING_MODE:te.ROUND_UP});const i=Lr({contents:r});let n=new te(0),o=new te(0),a=new te(0),s=new te(0),c=new te(0),u=new te(0);return i.forEach(p=>{a=a.plus(p.fee||0),s=s.plus(Array.isArray(p.originated_contracts)?p.originated_contracts.length*t:0),c=c.plus("allocated_destination_contract"in p?e:0),n=n.plus(p.consumed_milligas||0),u=u.plus("paid_storage_size_diff"in p&&Number(p.paid_storage_size_diff)||0)}),o=o.plus(c).plus(s).plus(u),{totalFee:a,totalMilliGas:n,totalGas:n.dividedBy(1e3),totalStorage:o,totalAllocationBurn:c,totalOriginationBurn:s,totalPaidStorageDiff:u,totalStorageBurn:new te(o.multipliedBy(sb))}};class lb extends we{constructor(e){super(),this.invalidConfirmations=e,this.name="InvalidConfirmationCountError",this.message=`Invalid confirmation count ${e} expecting at least 1`}}class fb extends No{constructor(e){super(),this.message=e,this.name="ConfirmationTimeoutError"}}class pa extends Ya{constructor(e,t){super(),this.message=e,this.cause=t,this.name="RPCResponseError"}}class fS extends Xa{constructor(){super(),this.name="ConfirmationUndefinedError",this.message="Default confirmation count can not be undefined"}}class Dt extends No{constructor(e){super(),this.message=e,this.name="ObservableError"}}const hS=60;class di{operationResults(){return G(this,void 0,void 0,function*(){return this._operationResult.pipe(ri()).toPromise()})}receipt(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(!e)throw new Dt("Unable to get operation results");return lS(e)})}constructor(e,t,i){if(this.opHash=e,this.context=t,this._newHead$=i,this._operationResult=new en(1),this._includedInBlock=new en(1),this._included=!1,this.newHead$=this._newHead$.pipe(si(n=>{var o,a;const s=(a=(o=this.lastHead)===null||o===void 0?void 0:o.header.level)!==null&&a!==void 0?a:n.header.level-1;return ql(s+1,n.header.level-s-1).pipe(Do(c=>this.context.readProvider.getBlock(c)),gg(n))}),Pa(n=>this.lastHead=n),Ao({connector:()=>new en(1),resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0})),this.confirmed$=this.newHead$.pipe(ji(n=>{for(const o of n.operations)for(const a of o)if(a.hash===this.opHash)return this._included=!0,this._includedInBlock.next(n),this._operationResult.next(a.contents),n}),sl(n=>typeof n<"u"),ri(),Ao({connector:()=>new en(1),resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0})),C0(this.opHash)!==se.VALID)throw new z0(this.opHash);this.confirmed$.pipe(ri(),is(()=>rs(void 0))).subscribe()}getCurrentConfirmation(){return G(this,void 0,void 0,function*(){return this._included?Sh([this._includedInBlock,$i(this.context.readProvider.getBlock("head"))]).pipe(ji(([e,t])=>t.header.level-e.header.level+1),ri()).toPromise():0})}isInCurrentBranch(){return G(this,arguments,void 0,function*(e="head"){if(!this._included)return!0;const t=yield this.context.readProvider.getBlockLevel(e),i=yield this._includedInBlock.pipe(ri()).toPromise();if(!i)throw new Dt("Inclusion block is undefined");const n=t-i.header.level;if(n<=0)return!0;const o=Math.min(i.header.level+n,i.header.level+hS);return new Set(yield this.context.readProvider.getLiveBlocks(o)).has(i.hash)})}confirmationObservable(e){if(typeof e<"u"&&e<1)throw new lb(e);const{defaultConfirmationCount:t}=this.context.config,i=e!==void 0?e:t;if(i===void 0)throw new fS;return Sh([this._includedInBlock,this.newHead$]).pipe(pg(([,n],[,o])=>n.hash===o.hash),ji(([n,o])=>({block:o,expectedConfirmation:i,currentConfirmation:o.header.level-n.header.level+1,completed:o.header.level-n.header.level>=i-1,isInCurrentBranch:()=>this.isInCurrentBranch(o.hash)})),Ry(({completed:n})=>!n,!0))}confirmation(e){return this.confirmationObservable(e).toPromise()}}const dS=[V.REVEAL,V.ORIGINATION,V.TRANSACTION,V.DELEGATION,V.REGISTER_GLOBAL_CONSTANT,V.INCREASE_PAID_STORAGE,V.TRANSFER_TICKET];class pS extends di{constructor(e,t,i){super(e,t,i),this.opHash=e,this.context=t,this.getOriginatedContractAddresses=()=>G(this,void 0,void 0,function*(){const n=yield this.operationResults();if(n){const o=n.filter(s=>s.kind==="origination");let a=[];for(const s of o)s.metadata.operation_result.originated_contracts&&(a=[...a,...s.metadata.operation_result.originated_contracts]);return a}else throw new Dt("Unable to fetch operation results")})}revealOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(t=>t.kind===V.REVEAL);throw new Dt("Unable to fetch operation results")})}status(){return G(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.operationResults();if(e)return e.filter(t=>dS.indexOf(t.kind)!==-1).map(t=>En(t)?t.metadata.operation_result.status:"unknown")[0]||"unknown";throw new Dt("Unable to fetch operation results")})}}class hb extends di{constructor(e,t,i){super(e,t,i),this.opHash=e,this.context=t}revealOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(t=>t.kind===V.REVEAL);throw new Dt("Unable to fetch operation result")})}delegationOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(t=>t.kind===V.DELEGATION);throw new Dt("Unable to fetch operation result")})}status(){return G(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.delegationOperation();return e?e.metadata.operation_result.status:"unknown"})}}class gS extends di{constructor(e,t,i){super(e,t,i),this.opHash=e,this.context=t}revealOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(t=>t.kind===V.REVEAL);throw new Dt("Unable to fetch operation result")})}increasePaidStorageOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(t=>t.kind===V.INCREASE_PAID_STORAGE);throw new Dt("Unable to fetch operation result")})}status(){return G(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.increasePaidStorageOperation();return e?e.metadata.operation_result.status:"unknown"})}}class db extends di{constructor(e,t,i){super(e,t,i),this.opHash=e,this.context=t}originationOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return Ka(e,V.ORIGINATION);throw new Dt("Unable to fetch operation result")})}revealOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return Ka(e,V.REVEAL);throw new Dt("Unable to fetch operation result")})}status(){return G(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.originationOperation();return e?e.metadata.operation_result.status:"unknown"})}contract(){return G(this,void 0,void 0,function*(){const e=yield this.originationOperation(),t=(e?.metadata.operation_result.originated_contracts||[])[0];return this.context.wallet.at(t)})}}class pb extends di{constructor(e,t,i){super(e,t,i),this.opHash=e,this.context=t}revealOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(!e)throw new Dt("operationResult returned undefined");return e.find(t=>t.kind===V.REVEAL)})}transactionOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(!e)throw new Dt("operationResult returned undefined");return e.find(t=>t.kind===V.TRANSACTION)})}status(){return G(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.transactionOperation();return e?e.metadata.operation_result.status:"unknown"})}}class gb extends di{constructor(e,t,i){super(e,t,i),this.opHash=e,this.context=t}revealOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(!e)throw new Dt("operationResult returned undefined");return e.find(t=>t.kind===V.REVEAL)})}transferTicketOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(!e)throw new Dt("operationResult returned undefined");return e.find(t=>t.kind===V.TRANSFER_TICKET)})}status(){return G(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.transferTicketOperation();return e?e.metadata.operation_result.status:"unknown"})}}class mb extends di{constructor(e,t,i){super(e,t,i),this.opHash=e,this.context=t}revealOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(!e)throw new Dt("operationResult returned undefined");return e.find(t=>t.kind===V.REVEAL)})}registerGlobalConstantOperation(){return G(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return Ka(e,V.REGISTER_GLOBAL_CONSTANT);throw new Dt("Unable to fetch operation result")})}status(){return G(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.registerGlobalConstantOperation();return e?e.metadata.operation_result.status:"unknown"})}globalConstantHash(){return G(this,void 0,void 0,function*(){const e=yield this.registerGlobalConstantOperation();return e?.metadata.operation_result.global_address})}}function mS(r){return function(t){return new es(null).pipe(hg({each:r,with:()=>ug(()=>new fb("Confirmation polling timed out"))}),So(()=>t))}}const bS=(r,e,t)=>r.pipe(mS(e.config.confirmationPollingTimeoutSecond*1e3),Ao({connector:()=>new en(1),resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0}));class vS{constructor(e){this.context=e,this.sharedHeadObs=dg(()=>ib(this.context.stream.subscribeBlock("head")))}createNewHeadObservable(){return G(this,void 0,void 0,function*(){return bS(this.sharedHeadObs,this.context)})}createPastBlockWalker(e,t=1){return $i(this.context.readProvider.getBlock(e)).pipe(si(i=>t===1?rs(i):ql(i.header.level,t-1).pipe(Sy(i),Do(n=>G(this,void 0,void 0,function*(){return this.context.readProvider.getBlock(typeof n=="number"?n:n.header.level)})))))}createHeadObservableFromConfig(e){return G(this,arguments,void 0,function*({blockIdentifier:t}){const i=[];return t&&i.push(this.createPastBlockWalker(t)),i.push(yield this.createNewHeadObservable()),Oa(...i)})}createOperation(e){return G(this,arguments,void 0,function*(t,i={}){return new di(t,this.context.clone(),yield this.createHeadObservableFromConfig(i))})}createBatchOperation(e){return G(this,arguments,void 0,function*(t,i={}){return new pS(t,this.context.clone(),yield this.createHeadObservableFromConfig(i))})}createTransactionOperation(e){return G(this,arguments,void 0,function*(t,i={}){return new pb(t,this.context.clone(),yield this.createHeadObservableFromConfig(i))})}createTransferTicketOperation(e){return G(this,arguments,void 0,function*(t,i={}){return new gb(t,this.context.clone(),yield this.createHeadObservableFromConfig(i))})}createDelegationOperation(e){return G(this,arguments,void 0,function*(t,i={}){return new hb(t,this.context.clone(),yield this.createHeadObservableFromConfig(i))})}createOriginationOperation(e){return G(this,arguments,void 0,function*(t,i={}){return new db(t,this.context.clone(),yield this.createHeadObservableFromConfig(i))})}createIncreasePaidStorageOperation(e){return G(this,arguments,void 0,function*(t,i={}){return new gS(t,this.context.clone(),yield this.createHeadObservableFromConfig(i))})}createRegisterGlobalConstantOperation(e){return G(this,arguments,void 0,function*(t,i={}){return new mb(t,this.context.clone(),yield this.createHeadObservableFromConfig(i))})}}class Mt{get includedInBlock(){return this._foundAt}constructor(e,t,i,n){if(this.hash=e,this.raw=t,this.results=i,this.context=n,this._pollingConfig$=new en(1),this.currentHead$=this._pollingConfig$.pipe(si(o=>new es(o).pipe(hg({each:o.timeout*1e3,with:()=>ug(()=>new fb("Confirmation polling timed out"))}))),si(()=>dg(()=>ib(this.context.stream.subscribeBlock("head"))).pipe(si(o=>{var a,s;const c=(s=(a=this.lastHead)===null||a===void 0?void 0:a.header.level)!==null&&s!==void 0?s:o.header.level-1;return ql(c+1,o.header.level-c-1).pipe(Do(u=>this.context.readProvider.getBlock(u)),gg(o))}),Pa(o=>this.lastHead=o))),Rh({refCount:!0})),this.confirmed$=this.currentHead$.pipe(ji(o=>{for(let a=3;a>=0;a--)o.operations[a].forEach(s=>{s.hash===this.hash&&(this._foundAt=o.header.level)});if(o.header.level-this._foundAt>=0)return this._foundAt}),sl(o=>o!==void 0),ri(),Rh()),this._foundAt=Number.POSITIVE_INFINITY,C0(this.hash)!==se.VALID)throw new z0(this.hash);this.confirmed$.pipe(ri(),is(()=>rs(Ul))).subscribe()}get revealOperation(){return Array.isArray(this.results)&&this.results.find(e=>e.kind==="reveal")}get revealStatus(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"}get status(){return this.results.map(e=>En(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}confirmation(e,t){return G(this,void 0,void 0,function*(){if(typeof e<"u"&&e<1)throw new lb(e);const{defaultConfirmationCount:i,confirmationPollingTimeoutSecond:n}=this.context.config;this._pollingConfig$.next({timeout:t||n});const o=e!==void 0?e:i;return new Promise((a,s)=>{this.confirmed$.pipe(si(()=>this.currentHead$),sl(c=>c.header.level-this._foundAt>=o-1),ri()).subscribe({error:c=>s(c),complete:()=>a(this._foundAt+(o-1))})})})}}class bb extends we{constructor(e,t,i){super(),this.smartContractMethodName=e,this.sigs=t,this.invalidParams=i,this.name="InvalidParameterError",this.message=`${e} Received ${i.length} arguments while expecting one of the following signatures (${JSON.stringify(t)})`}}class vb extends we{constructor(e){super(),this.source=e,this.name="InvalidDelegationSource",this.message=`Since Babylon delegation source can no longer be a contract address ${e}. Please use the smart contract abstraction to set your delegate.`}}class Io extends we{constructor(e,t){super(),this.message=e,this.data=t,this.name="InvalidCodeParameter"}}class Uf extends we{constructor(e,t){super(),this.message=e,this.data=t,this.name="InvalidInitParameter"}}class yb extends Ya{constructor(e,t,i,n){super(),this.message=e,this.viewName=t,this.failWith=i,this.cause=n,this.name="ViewSimulationError"}}const _b=r=>{if(yS(r.body)){const e=JSON.parse(r.body);if(Array.isArray(e)&&"with"in e[e.length-1])return e[e.length-1].with}},yS=r=>{try{JSON.parse(r)}catch{return!1}return!0};class Tl extends we{constructor(e){super(),this.info=e,this.name="InvalidViewSimulationContext",this.message=`${e} Please configure the context of the view execution in the executeView method.`}}class wb extends Ya{constructor(e){super(),this.message=e,this.name="RevealOperationError"}}class Eb extends we{constructor(e){super(),this.message=e,this.name}}class xb extends we{constructor(e){super(),this.message=e,this.name="InvalidBalanceError"}}const Sb=r=>G(void 0,[r],void 0,function*({pkh:e,secret:t}){return{kind:V.ACTIVATION,pkh:e,secret:t}}),ys=r=>G(void 0,[r],void 0,function*({code:e,init:t,balance:i="0",delegate:n,storage:o,fee:a,gasLimit:s,storageLimit:c,mutez:u=!1}){if(o!==void 0&&t!==void 0)throw new Eb("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(e))throw new Io("Wrong code parameter type, expected an array",e);let p;if(o!==void 0){const d=e.find(b=>"prim"in b&&b.prim==="storage");if(d?.args===void 0)throw new Io("The storage section is missing from the script",e);p=new _r(d.args[0]).Encode(o)}else if(t!==void 0&&typeof t=="object")p=t;else throw new Uf("Wrong init parameter type, expected JSON Michelson",t);const f={code:e,storage:p};if(isNaN(Number(i)))throw new xb(`Invalid Balance "${i}", cannot be converted to a number`);const l={kind:V.ORIGINATION,fee:a,gas_limit:s,storage_limit:c,balance:u?i.toString():Cl("tz","mutez",i).toString(),script:f};return n&&(l.delegate=n),l}),fn=r=>G(void 0,[r],void 0,function*({to:e,amount:t,parameter:i,fee:n,gasLimit:o,storageLimit:a,mutez:s=!1}){return{kind:V.TRANSACTION,fee:n,gas_limit:o,storage_limit:a,amount:s?t.toString():Cl("tz","mutez",t).toString(),destination:e,parameters:i}}),_s=r=>G(void 0,[r],void 0,function*({delegate:e,source:t,fee:i,gasLimit:n,storageLimit:o}){return{kind:V.DELEGATION,source:t,fee:i,gas_limit:n,storage_limit:o,delegate:e}}),Ab=(r,e)=>G(void 0,[r,e],void 0,function*({fee:t,gasLimit:i,storageLimit:n},o){return{kind:V.DELEGATION,fee:t,gas_limit:i,storage_limit:n,delegate:o}}),Ea=(r,e,t)=>G(void 0,[r,e,t],void 0,function*({fee:i,gasLimit:n,storageLimit:o,proof:a},s,c){return{kind:V.REVEAL,fee:i,public_key:c,source:s,gas_limit:n??Va(s),storage_limit:o,proof:a}}),ws=r=>G(void 0,[r],void 0,function*({value:e,source:t,fee:i,gasLimit:n,storageLimit:o}){return{kind:V.REGISTER_GLOBAL_CONSTANT,value:e,fee:i,gas_limit:n,storage_limit:o,source:t}}),Es=r=>G(void 0,[r],void 0,function*({ticketContents:e,ticketTy:t,ticketTicketer:i,ticketAmount:n,destination:o,entrypoint:a,source:s,fee:c,gasLimit:u,storageLimit:p}){return{kind:V.TRANSFER_TICKET,fee:c,gas_limit:u,storage_limit:p,source:s,ticket_contents:e,ticket_ty:t,ticket_ticketer:i,ticket_amount:n,destination:o,entrypoint:a}}),xs=r=>G(void 0,[r],void 0,function*({source:e,fee:t,gasLimit:i,storageLimit:n,amount:o,destination:a}){return{kind:V.INCREASE_PAID_STORAGE,source:e,fee:t,gas_limit:i,storage_limit:n,amount:o,destination:a}}),Rb=r=>G(void 0,[r],void 0,function*({consensus_key:e,delegate:t,destination:i}){return{kind:V.DRAIN_DELEGATE,consensus_key:e,delegate:t,destination:i}}),Ob=r=>G(void 0,[r],void 0,function*({source:e,proposal:t,ballot:i}){return{kind:V.BALLOT,source:e,proposal:t,ballot:i}}),Pb=r=>G(void 0,[r],void 0,function*({source:e,proposals:t}){return{kind:V.PROPOSALS,source:e,proposals:t}}),Ss=r=>G(void 0,[r],void 0,function*({source:e,fee:t,gasLimit:i,storageLimit:n,pk:o,proof:a}){return{kind:V.UPDATE_CONSENSUS_KEY,source:e,fee:t,gas_limit:i,storage_limit:n,pk:o,proof:a}}),As=r=>G(void 0,[r],void 0,function*({source:e,fee:t,gasLimit:i,storageLimit:n,pk:o,proof:a}){return{kind:V.UPDATE_COMPANION_KEY,source:e,fee:t,gas_limit:i,storage_limit:n,pk:o,proof:a}}),Rs=r=>G(void 0,[r],void 0,function*({source:e,fee:t,gasLimit:i,storageLimit:n,message:o}){return{kind:V.SMART_ROLLUP_ADD_MESSAGES,source:e,fee:t,gas_limit:i,storage_limit:n,message:o}}),Os=r=>G(void 0,[r],void 0,function*({source:e,fee:t,gasLimit:i,storageLimit:n,pvmKind:o,kernel:a,parametersType:s}){return{kind:V.SMART_ROLLUP_ORIGINATE,source:e,fee:t,gas_limit:i,storage_limit:n,pvm_kind:o,kernel:a,parameters_ty:s}}),Ps=r=>G(void 0,[r],void 0,function*({source:e,fee:t,gasLimit:i,storageLimit:n,rollup:o,cementedCommitment:a,outputProof:s}){return{kind:V.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE,source:e,fee:t,gas_limit:i,storage_limit:n,rollup:o,cemented_commitment:a,output_proof:s}});class Vo{get rpc(){return this.context.rpc}get signer(){return this.context.signer}constructor(e){this.context=e}forge(e){return G(this,arguments,void 0,function*({opOb:{branch:t,contents:i,protocol:n},counter:o}){return{opbytes:yield this.context.forger.forge({branch:t,contents:i}),opOb:{branch:t,contents:i,protocol:n},counter:o}})}estimate(e,t){return G(this,void 0,void 0,function*(){var{fee:i,gasLimit:n,storageLimit:o}=e,a=Ze(e,["fee","gasLimit","storageLimit"]);let s=i,c=n,u=o;if(s&&s%1!==0)throw new wa(`Fee value must not be a decimal: ${s}`);if(c&&c%1!==0)throw new wa(`Gas Limit value must not be a decimal: ${c}`);if(u&&u%1!==0)throw new wa(`Storage Limit value must not be a decimal: ${u}`);if(i===void 0||n===void 0||o===void 0){const p=yield t(Object.assign({fee:i,gasLimit:n,storageLimit:o},a));s??(s=p.suggestedFeeMutez),c??(c=p.gasLimit),u??(u=p.storageLimit)}return{fee:s,gasLimit:c,storageLimit:u}})}getRPCOp(e){return G(this,void 0,void 0,function*(){switch(e.kind){case V.TRANSACTION:return fn(Object.assign({},e));case V.ORIGINATION:return ys(yield this.context.parser.prepareCodeOrigination(Object.assign({},e)));case V.DELEGATION:return _s(Object.assign({},e));case V.REGISTER_GLOBAL_CONSTANT:return ws(Object.assign({},e));case V.INCREASE_PAID_STORAGE:return xs(Object.assign({},e));case V.UPDATE_CONSENSUS_KEY:return Ss(Object.assign({},e));case V.UPDATE_COMPANION_KEY:return As(Object.assign({},e));case V.TRANSFER_TICKET:return Es(Object.assign({},e));case V.SMART_ROLLUP_ADD_MESSAGES:return Rs(Object.assign({},e));case V.SMART_ROLLUP_ORIGINATE:return Os(Object.assign({},e));case V.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE:return Ps(Object.assign({},e));default:throw new Di(e.kind)}})}simulate(e){return G(this,void 0,void 0,function*(){return{opResponse:yield this.rpc.simulateOperation(e),op:e,context:this.context.clone()}})}isRevealOpNeeded(e,t){return G(this,void 0,void 0,function*(){return!(!(yield this.isAccountRevealRequired(t))||!this.isRevealRequiredForOpType(e))})}isAccountRevealRequired(e){return G(this,void 0,void 0,function*(){return!(yield this.context.readProvider.isAccountRevealed(e,"head"))})}isRevealRequiredForOpType(e){let t=!1;for(const i of e)Hf(i)&&(t=!0);return t}signAndInject(e){return G(this,void 0,void 0,function*(){const t=yield this.signer.sign(e.opbytes,new Uint8Array([3]));e.opbytes=t.sbytes,e.opOb.signature=t.prefixSig;const i=[],n=yield this.rpc.preapplyOperations([e.opOb]);if(!Array.isArray(n))throw new ub(n);for(let a=0;a<n.length;a++)for(let s=0;s<n[a].contents.length;s++)i.push(n[a].contents[s]);const o=Wn(n);if(o.length)throw new Df(o,"Error occurred during validation simulation of operation",i);return{hash:yield this.context.injector.inject(e.opbytes),forgedBytes:e,opResponse:i,context:this.context.clone()}})}}const Wa="default";class Tb{constructor(e,t,i,n,o="unit",a=!0,s=!1){this.provider=e,this.address=t,this.parameterSchema=i,this.name=n,this.args=o,this.isMultipleEntrypoint=a,this.isAnonymous=s}getSignature(){const e=this.parameterSchema.generateSchema();if(this.isAnonymous){const t=e.schema;return t?.[this.name]}return e}send(e={}){return this.provider&&"pkh"in this.provider?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:t,storageLimit:i,source:n,amount:o=0,mutez:a=!1}={}){return{to:this.address,amount:o,fee:e,mutez:a,source:n,gasLimit:t,storageLimit:i,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:Wa,value:this.isAnonymous?this.parameterSchema.EncodeObject({[this.name]:this.args}):this.parameterSchema.EncodeObject(this.args)}}}}class _S{constructor(e,t,i,n,o,a="Unit"){this._rpc=e,this._readProvider=t,this._contractAddress=i,this._smartContractViewSchema=n,this._contractStorageType=o,this._args=a}getSignature(){return{parameter:this._smartContractViewSchema.extractArgsSchema(),result:this._smartContractViewSchema.extractResultSchema()}}executeView(e){return G(this,void 0,void 0,function*(){this.verifyContextExecution(e);const t=yield this._readProvider.getChainId(),i=this.transformArgsToMichelson(),n={contract:this._contractAddress,view:this._smartContractViewSchema.viewName,input:i,chain_id:t,source:e.viewCaller};return e.source&&(n.payer=e.source),this.executeViewAndDecodeResult(n)})}verifyContextExecution(e){if(e.source&&ye(e.source)!==se.VALID)throw new Tl(`The source account who initialized the view execution is invalid: ${e.source}.`);if(!e.viewCaller||ye(e.viewCaller)!==se.VALID)throw new Tl(`The contract which is the caller of view is invalid: ${e.viewCaller}.`)}transformArgsToMichelson(){try{return this._smartContractViewSchema.encodeViewArgs(this._args)}catch(e){throw new M0(this._smartContractViewSchema.viewName,this.getSignature(),this._args,e)}}adaptViewCodeToContext(e,t,i){const n={BALANCE:[{prim:"PUSH",args:[{prim:"mutez"},{int:i}]}],SENDER:[{prim:"PUSH",args:[{prim:"address"},{string:t}]}],SELF_ADDRESS:[{prim:"PUSH",args:[{prim:"address"},{string:this._contractAddress}]}],AMOUNT:[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]};return e.forEach((o,a)=>{o.prim in n&&(e[a]=Object(n)[o.prim]),o.args&&o.args.length!==0?this.adaptViewCodeToContext(o.args,t,i):Array.isArray(o)&&this.adaptViewCodeToContext(o,t,i)}),e}executeViewAndDecodeResult(e){return G(this,void 0,void 0,function*(){let t;try{t=(yield this._rpc.runScriptView(e)).data}catch(i){const n=_b(i);throw n?new yb(`The simulation of the on-chain view named ${this._smartContractViewSchema.viewName} failed with: ${JSON.stringify(n)}`,this._smartContractViewSchema.viewName,n,i):i}return this._smartContractViewSchema.decodeViewResult(t)})}}class wS{constructor(e,t){this.provider=e,this.contractAddress=t}createContractMethodObjectParam(e,t,i,n=!0,o=!1){return new Tb(this.provider,this.contractAddress,e,t,i,n,o)}createContractViewObjectParam(e,t,i,n,o){return new _S(e,t,this.contractAddress,i,n,o)}}class kb{constructor(e,t,i,n,o,a,s){this.currentContract=e,this.name=t,this.callbackParametersSchema=i,this.parameterSchema=n,this.args=o,this.rpc=a,this.readProvider=s}read(e){return G(this,void 0,void 0,function*(){const t=j0(e??"");if(_o(e??"")==se.VALID)throw new H0("Since version 12, the lambda view no longer depends on a lambda contract. The read method no longer accepts a contract address as a parameter.");if(e&&t!==se.VALID)throw new bv(e,t);const i=this.parameterSchema.Encode(...this.args),n=yield this.rpc.runView({contract:this.currentContract.address,entrypoint:this.name,input:i,chain_id:e||(yield this.readProvider.getChainId())});return this.callbackParametersSchema.Execute(n.data)})}}const ES=(r,e,t)=>{const i=e.ExtractSignatures();if(!i.find(n=>n.length===r.length))throw new bb(t,i,r)},xS=r=>{let e=!1;if("prim"in r&&r.prim==="pair"&&r.args){const t=r.args[r.args.length-1];"prim"in t&&t.prim==="contract"&&(e=!0)}return e};class qf{constructor(e,t,i,n,o,a,s){this.address=e,this.script=t,this.storageProvider=n,this.entrypoints=o,this.rpc=a,this.readProvider=s,this.methodsObject={},this.views={},this.contractViews={},this.contractMethodFactory=new wS(i,e),this.schema=_r.fromRPCResponse({script:this.script}),this.parameterSchema=In.fromRPCResponse({script:this.script}),this.viewSchema=sf.fromRPCResponse({script:this.script}),this.viewSchema.length!==0&&this._initializeOnChainViews(this,a,this.readProvider,this.viewSchema),this.eventSchema=xi.fromRPCResponse({script:this.script}),this._initializeMethods(this,this.entrypoints.entrypoints,this.rpc,this.readProvider)}_initializeMethods(e,t,i,n){const o=this.parameterSchema,a=Object.keys(t);if(o.isMultipleEntryPoint){a.forEach(p=>{const f=new In(t[p]);if(this.methodsObject[p]=function(l){return e.contractMethodFactory.createContractMethodObjectParam(f,p,l)},xS(t[p])){const l=function(...d){const g=t[p].args[0],b=new In(g),x=t[p].args[1].args[0],_=new In(x);return ES(d,b,p),new kb(e,p,_,b,d,i,n)};this.views[p]=l}});const s=o.generateSchema();(s.schema&&typeof s.schema=="object"?Object.keys(s.schema):[]).filter(p=>Object.keys(t).indexOf(p)===-1).forEach(p=>{this.methodsObject[p]=function(f){return e.contractMethodFactory.createContractMethodObjectParam(o,p,f,!1,!0)}})}else{const s=this.parameterSchema;this.methodsObject[Wa]=function(c){return e.contractMethodFactory.createContractMethodObjectParam(s,Wa,c,!1)}}}_initializeOnChainViews(e,t,i,n){const o=this.schema.val;n.forEach(a=>{this.contractViews[a.viewName]=function(s){return e.contractMethodFactory.createContractViewObjectParam(t,i,a,o,s)}})}storage(){return this.storageProvider.getStorage(this.address,this.schema)}}const SS=r=>[{prim:"DROP"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PUSH",args:[{prim:"key_hash"},{string:r}]},{prim:"SOME"},{prim:"SET_DELEGATE"},{prim:"CONS"}],AS=(r,e)=>[{prim:"DROP"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PUSH",args:[{prim:"key_hash"},{string:r}]},{prim:"IMPLICIT_ACCOUNT"},{prim:"PUSH",args:[{prim:"mutez"},{int:`${e}`}]},{prim:"UNIT"},{prim:"TRANSFER_TOKENS"},{prim:"CONS"}],RS=()=>[{prim:"DROP"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"NONE",args:[{prim:"key_hash"}]},{prim:"SET_DELEGATE"},{prim:"CONS"}],OS=(r,e)=>[{prim:"DROP"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PUSH",args:[{prim:"address"},{string:r}]},{prim:"CONTRACT",args:[{prim:"unit"}]},{prim:"IF_NONE",args:[[{prim:"UNIT"},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[{prim:"mutez"},{int:`${e}`}]},{prim:"UNIT"},{prim:"TRANSFER_TOKENS"},{prim:"CONS"}],PS={setDelegate:SS,removeDelegate:RS,transferImplicit:AS,transferToContract:OS},TS=[{prim:"parameter",args:[{prim:"lambda",args:[{prim:"unit"},{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},{prim:"unit"}]}]}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"UNIT"},{prim:"EXEC"}]]}],kS="Unit",IS={code:TS,storage:kS};function LS(r,e){return(t,i)=>e(r(t,i),i)}class Ib{constructor(e,t){this.id=e,this.provider=t}getSaplingDiff(e){return G(this,void 0,void 0,function*(){return this.provider.getSaplingDiffByID(this.id.toString(),e)})}getId(){return this.id.toString()}}class Lb{constructor(e,t,i){this.id=e,this.schema=t,this.provider=i}get(e,t){return G(this,void 0,void 0,function*(){try{return yield this.provider.getBigMapKeyByID(this.id.toString(),e,this.schema,t)}catch(i){if(i instanceof dn&&i.status===Eo.NOT_FOUND)return;throw i}})}getMultipleValues(e,t){return G(this,arguments,void 0,function*(i,n,o=5){return this.provider.getBigMapKeysByID(this.id.toString(),i,this.schema,n,o)})}toJSON(){return this.id.toString()}toString(){return this.id.toString()}}const kl=r=>({big_map:(e,t)=>{if(!e||!("int"in e)||e.int===void 0)return{};{const i=new _r(t);return new Lb(new te(e.int),i,r)}},sapling_state:e=>!e||!("int"in e)||e.int===void 0?{}:new Ib(new te(e.int),r)});var Me;const Pt=(r,e)=>{var t,i,n;return{fee:(t=r.fee)!==null&&t!==void 0?t:e.fee,gasLimit:(i=r.gasLimit)!==null&&i!==void 0?i:e.gasLimit,storageLimit:(n=r.storageLimit)!==null&&n!==void 0?n:e.storageLimit}};class eo extends Vo{constructor(e){super(e),this.context=e,Me.set(this,void 0),Ye(this,Me,{})}getBlockHash(e){return G(this,void 0,void 0,function*(){return this.context.readProvider.getBlockHash(e??"head~2")})}getProtocolHash(){return G(this,void 0,void 0,function*(){return this.context.readProvider.getNextProtocol("head")})}getHeadCounter(e){return G(this,void 0,void 0,function*(){var t;return(t=this.context.readProvider.getCounter(e,"head"))!==null&&t!==void 0?t:"0"})}adjustGasForBatchOperation(e,t,i){return te.min(t,e.div(i+1))}getOperationLimits(e,t){return G(this,void 0,void 0,function*(){const{hard_gas_limit_per_operation:i,hard_gas_limit_per_block:n,hard_storage_limit_per_operation:o}=e;return{fee:0,gasLimit:t?Math.floor(this.adjustGasForBatchOperation(n,i,t).toNumber()):i.toNumber(),storageLimit:o.toNumber()}})}getFee(e,t,i){return(!la(this,Me,"f")[t]||la(this,Me,"f")[t]<i)&&(la(this,Me,"f")[t]=i),{counter:`${++la(this,Me,"f")[t]}`,fee:typeof e.fee>"u"?"0":`${e.fee}`,gas_limit:typeof e.gas_limit>"u"?"0":`${e.gas_limit}`,storage_limit:typeof e.storage_limit>"u"?"0":`${e.storage_limit}`}}getSource(e,t,i){return{source:typeof e.source>"u"?i||t:e.source}}addRevealOperationIfNeeded(e,t){return G(this,void 0,void 0,function*(){if(Hf(e)){const i=[e],{publicKey:n,pkh:o}=yield this.getKeys();if(yield this.isAccountRevealRequired(t)){if(!n)throw new Zs(o);const[,a]=Ge(o,go);return i.unshift(yield Ea({fee:Pl(o),storageLimit:Rl,gasLimit:Va(o),proof:a===X.BLS12_381PublicKeyHash?(yield this.signer.provePossession()).prefixSig:void 0},t,n)),i}}return e})}getKeys(){return G(this,void 0,void 0,function*(){const e=this.context.isAnySignerConfigured();return{pkh:e?yield this.signer.publicKeyHash():yield this.context.wallet.pkh(),publicKey:e?yield this.signer.publicKey():yield this.context.wallet.pk()}})}convertIntoArray(e){return Array.isArray(e)?[...e]:[e]}constructOpContents(e,t,i,n,o){return e.map(a=>{switch(a.kind){case V.ACTIVATION:case V.DRAIN_DELEGATE:return Object.assign({},a);case V.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},a),{balance:typeof a.balance<"u"?`${a.balance}`:"0"}),this.getSource(a,i,n)),this.getFee(a,i,t));case V.TRANSACTION:{const s=Object.assign(Object.assign(Object.assign(Object.assign({},a),{amount:typeof a.amount<"u"?`${a.amount}`:"0"}),this.getSource(a,i,n)),this.getFee(a,i,t));if(s.source.toLowerCase().startsWith("kt1"))throw new H0(`KT1 addresses are not supported as source since ${He.PsBabyM1}`);return s}case V.REVEAL:case V.DELEGATION:case V.REGISTER_GLOBAL_CONSTANT:case V.UPDATE_CONSENSUS_KEY:case V.UPDATE_COMPANION_KEY:case V.SMART_ROLLUP_ADD_MESSAGES:case V.SMART_ROLLUP_ORIGINATE:case V.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE:return Object.assign(Object.assign(Object.assign({},a),this.getSource(a,i,n)),this.getFee(a,i,t));case V.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},a),{ticket_amount:`${a.ticket_amount}`}),this.getSource(a,i,n)),this.getFee(a,i,t));case V.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},a),{amount:`${a.amount}`}),this.getSource(a,i,n)),this.getFee(a,i,t));case V.BALLOT:if(o===void 0)throw new pa("Failed to get the current voting period index");return Object.assign(Object.assign(Object.assign({},a),{period:o?.voting_period.index}),this.getSource(a,i,n));case V.PROPOSALS:if(o===void 0)throw new pa("Failed to get the current voting period index");return Object.assign(Object.assign(Object.assign({},a),{period:o?.voting_period.index}),this.getSource(a,i,n));default:throw new Di(a.kind)}})}activate(e){return G(this,arguments,void 0,function*({pkh:t,secret:i}){const n=yield Sb({pkh:t,secret:i}),o=this.convertIntoArray(n),a=yield this.getBlockHash(),s=yield this.getProtocolHash();Ye(this,Me,{});const c=parseInt(yield this.getHeadCounter(t),10),u=this.constructOpContents(o,c,t);return{opOb:{branch:a,contents:u,protocol:s},counter:c}})}reveal(e){return G(this,arguments,void 0,function*({fee:t,gasLimit:i,storageLimit:n,proof:o}){const{pkh:a,publicKey:s}=yield this.getKeys();if(!s)throw new Zs(a);const[,c]=Ge(a,go);if(c===X.BLS12_381PublicKeyHash)if(o)Ge(o,[X.BLS12_381Signature]);else{const{prefixSig:E}=yield this.signer.provePossession();o=E}else if(o)throw new Ht("Proof field is only allowed to reveal a bls account ");const u=yield this.context.readProvider.getProtocolConstants("head"),p=yield this.getOperationLimits(u),f=Pt({fee:t,storageLimit:n,gasLimit:i},p),l=yield Ea({fee:f.fee,gasLimit:f.gasLimit,storageLimit:f.storageLimit,proof:o},a,s),d=this.convertIntoArray(l),g=yield this.getBlockHash(),b=yield this.getProtocolHash();Ye(this,Me,{});const x=parseInt(yield this.getHeadCounter(a),10),_=this.constructOpContents(d,x,a);return{opOb:{branch:g,contents:_,protocol:b},counter:x}})}originate(e,t){return G(this,void 0,void 0,function*(){var{fee:i,storageLimit:n,gasLimit:o}=e,a=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),c=yield this.context.readProvider.getProtocolConstants("head"),u=yield this.getOperationLimits(c),p=yield ys(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},a),Pt({fee:i,storageLimit:n,gasLimit:o},u)))),f=yield this.addRevealOperationIfNeeded(p,s),l=this.convertIntoArray(f),d=yield this.getBlockHash(),g=yield this.getProtocolHash();Ye(this,Me,{});const b=parseInt(yield this.getHeadCounter(s),10),x=this.constructOpContents(l,b,s,t);return{opOb:{branch:d,contents:x,protocol:g},counter:b}})}transaction(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield fn(Object.assign(Object.assign({},o),Pt({fee:t,storageLimit:i,gasLimit:n},c))),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}stake(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield fn(Object.assign(Object.assign(Object.assign(Object.assign({},o),{to:a}),Pt({fee:t,storageLimit:i,gasLimit:n},c)),{parameter:{entrypoint:"stake",value:{prim:"Unit"}}})),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}unstake(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield fn(Object.assign(Object.assign(Object.assign(Object.assign({},o),{to:a}),Pt({fee:t,storageLimit:i,gasLimit:n},c)),{parameter:{entrypoint:"unstake",value:{prim:"Unit"}}})),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}finalizeUnstake(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n,to:o}=e,a=Ze(e,["fee","storageLimit","gasLimit","to"]);const{pkh:s}=yield this.getKeys(),c=yield this.context.readProvider.getProtocolConstants("head"),u=yield this.getOperationLimits(c),p=yield fn(Object.assign(Object.assign(Object.assign(Object.assign({},a),{to:o||s,amount:0}),Pt({fee:t,storageLimit:i,gasLimit:n},u)),{parameter:{entrypoint:"finalize_unstake",value:{prim:"Unit"}}})),f=yield this.addRevealOperationIfNeeded(p,s),l=this.convertIntoArray(f),d=yield this.getBlockHash(),g=yield this.getProtocolHash();Ye(this,Me,{});const b=parseInt(yield this.getHeadCounter(s),10),x=this.constructOpContents(l,b,s,a.source);return{opOb:{branch:d,contents:x,protocol:g},counter:b}})}delegation(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield _s(Object.assign(Object.assign({},o),Pt({fee:t,storageLimit:i,gasLimit:n},c))),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}registerDelegate(e,t){return G(this,arguments,void 0,function*({fee:i,storageLimit:n,gasLimit:o},a){const{pkh:s}=yield this.getKeys(),c=yield this.context.readProvider.getProtocolConstants("head"),u=yield this.getOperationLimits(c),p=Pt({fee:i,storageLimit:n,gasLimit:o},u),f=yield Ab({fee:p.fee,storageLimit:p.storageLimit,gasLimit:p.gasLimit},s),l=yield this.addRevealOperationIfNeeded(f,s),d=this.convertIntoArray(l),g=yield this.getBlockHash(),b=yield this.getProtocolHash();Ye(this,Me,{});const x=parseInt(yield this.getHeadCounter(s),10),_=this.constructOpContents(d,x,s,a);return{opOb:{branch:g,contents:_,protocol:b},counter:x}})}registerGlobalConstant(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield ws(Object.assign(Object.assign({},o),Pt({fee:t,storageLimit:i,gasLimit:n},c))),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}updateConsensusKey(e,t){return G(this,void 0,void 0,function*(){var{fee:i,storageLimit:n,gasLimit:o}=e,a=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),[,c]=Ge(a.pk,Ui);if(c===X.BLS12_381PublicKey){if(!a.proof)throw new qi("Proof is required to set a bls account as consensus key ")}else if(a.proof)throw new Ht("Proof field is only allowed for a bls account as consensus key");const u=yield this.context.readProvider.getProtocolConstants("head"),p=yield this.getOperationLimits(u),f=yield Ss(Object.assign(Object.assign({},a),Pt({fee:i,storageLimit:n,gasLimit:o},p))),l=yield this.addRevealOperationIfNeeded(f,s),d=this.convertIntoArray(l),g=yield this.getBlockHash(),b=yield this.getProtocolHash();Ye(this,Me,{});const x=parseInt(yield this.getHeadCounter(s),10),_=this.constructOpContents(d,x,s,t);return{opOb:{branch:g,contents:_,protocol:b},counter:x}})}updateCompanionKey(e,t){return G(this,void 0,void 0,function*(){var{fee:i,storageLimit:n,gasLimit:o}=e,a=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),[,c]=Ge(a.pk,Ui);if(c!==X.BLS12_381PublicKey)throw new Ht("companion key must be a bls account");if(!a.proof)throw new qi("Proof is required to set a bls account as companion key ");const u=yield this.context.readProvider.getProtocolConstants("head"),p=yield this.getOperationLimits(u),f=yield As(Object.assign(Object.assign({},a),Pt({fee:i,storageLimit:n,gasLimit:o},p))),l=yield this.addRevealOperationIfNeeded(f,s),d=this.convertIntoArray(l),g=yield this.getBlockHash(),b=yield this.getProtocolHash();Ye(this,Me,{});const x=parseInt(yield this.getHeadCounter(s),10),_=this.constructOpContents(d,x,s,t);return{opOb:{branch:g,contents:_,protocol:b},counter:x}})}increasePaidStorage(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield xs(Object.assign(Object.assign({},o),Pt({fee:t,storageLimit:i,gasLimit:n},c))),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}ballot(e){return G(this,void 0,void 0,function*(){const{pkh:t}=yield this.getKeys(),i=yield Ob(Object.assign({},e)),n=this.convertIntoArray(i),o=yield this.getBlockHash(),a=yield this.getProtocolHash();Ye(this,Me,{});const s=parseInt(yield this.getHeadCounter(t),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new pa("Failed to get the current voting period index")}const u=this.constructOpContents(n,s,t,e.source,c);return{opOb:{branch:o,contents:u,protocol:a},counter:s}})}proposals(e){return G(this,void 0,void 0,function*(){const{pkh:t}=yield this.getKeys(),i=yield Pb(Object.assign({},e)),n=this.convertIntoArray(i),o=yield this.getBlockHash(),a=yield this.getProtocolHash();Ye(this,Me,{});const s=parseInt(yield this.getHeadCounter(t),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new pa("Failed to get the current voting period index")}const u=this.constructOpContents(n,s,t,e.source,c);return{opOb:{branch:o,contents:u,protocol:a},counter:s}})}drainDelegate(e,t){return G(this,void 0,void 0,function*(){const{pkh:i}=yield this.getKeys(),n=yield Rb(Object.assign({},e)),o=this.convertIntoArray(n),a=yield this.getBlockHash(),s=yield this.getProtocolHash();Ye(this,Me,{});const c=parseInt(yield this.getHeadCounter(i),10),u=this.constructOpContents(o,c,i,t);return{opOb:{branch:a,contents:u,protocol:s},counter:c}})}transferTicket(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield Es(Object.assign(Object.assign({},o),Pt({fee:t,storageLimit:i,gasLimit:n},c))),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}smartRollupAddMessages(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield Rs(Object.assign(Object.assign({},o),Pt({fee:t,storageLimit:i,gasLimit:n},c))),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}smartRollupOriginate(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield Os(Object.assign(Object.assign({},Pt({fee:t,storageLimit:i,gasLimit:n},c)),o)),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}smartRollupExecuteOutboxMessage(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(s),u=yield Ps(Object.assign(Object.assign({},o),Pt({fee:t,storageLimit:i,gasLimit:n},c))),p=yield this.addRevealOperationIfNeeded(u,a),f=this.convertIntoArray(p),l=yield this.getBlockHash(),d=yield this.getProtocolHash();Ye(this,Me,{});const g=parseInt(yield this.getHeadCounter(a),10),b=this.constructOpContents(f,g,a,o.source);return{opOb:{branch:l,contents:b,protocol:d},counter:g}})}batch(e,t){return G(this,void 0,void 0,function*(){const{pkh:i,publicKey:n}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o,e.length),s=yield this.isRevealOpNeeded(e,i),c=[];if(t)for(const d of e)if($a(d)){const g=t.shift(),b=Pt(d,{fee:g.suggestedFeeMutez,storageLimit:g.storageLimit,gasLimit:g.gasLimit});c.push(yield this.getRPCOp(Object.assign(Object.assign({},d),b)))}else c.push(Object.assign({},d));else for(const d of e)if($a(d)){const g=Pt(d,a);c.push(yield this.getRPCOp(Object.assign(Object.assign({},d),g)))}else c.push(Object.assign({},d));if(s){if(!n)throw new Zs(i);const[,d]=Ge(i,go);c.unshift(yield Ea({fee:Pl(i),storageLimit:Rl,gasLimit:Va(i),proof:d===X.BLS12_381PublicKeyHash?(yield this.signer.provePossession()).prefixSig:void 0},i,n))}const u=yield this.getBlockHash(),p=yield this.getProtocolHash();Ye(this,Me,{});const f=parseInt(yield this.getHeadCounter(i),10),l=this.constructOpContents(c,f,i);return{opOb:{branch:u,contents:l,protocol:p},counter:f}})}contractCall(e){return G(this,void 0,void 0,function*(){var t,i,n;const o=yield this.getBlockHash(),a=yield this.getProtocolHash(),{pkh:s}=yield this.getKeys();Ye(this,Me,{});const c=parseInt(yield this.getHeadCounter(s),10),u=e.toTransferParams(),p=yield this.context.readProvider.getProtocolConstants("head"),f=yield this.getOperationLimits(p),l=Pt({fee:u.fee,storageLimit:u.storageLimit,gasLimit:u.gasLimit},f),d={kind:V.TRANSACTION,fee:(t=u.fee)!==null&&t!==void 0?t:l.fee,gas_limit:(i=u.gasLimit)!==null&&i!==void 0?i:l.gasLimit,storage_limit:(n=u.storageLimit)!==null&&n!==void 0?n:l.storageLimit,amount:String(u.amount),destination:u.to,parameters:u.parameter},g=yield this.addRevealOperationIfNeeded(d,s),b=this.convertIntoArray(g),x=this.constructOpContents(b,c,s);return{opOb:{branch:o,contents:x,protocol:a},counter:c}})}toPreapply(e){return G(this,void 0,void 0,function*(){const{opOb:{contents:t,branch:i,protocol:n}}=e,o=this.toForge(e),a=yield this.context.forger.forge(o),s=yield this.context.signer.sign(a,new Uint8Array([3]));return[{contents:t,branch:i,protocol:n,signature:s.prefixSig}]})}toForge({opOb:{contents:e,branch:t}}){return{branch:t,contents:e}}}Me=new WeakMap;class NS extends Vo{constructor(e){super(e),this.prepare=new eo(this.context)}getBalance(e){return G(this,void 0,void 0,function*(){const t=ye(e);if(t!==se.VALID)throw new Te(e,t);return this.context.readProvider.getBalance(e,"head")})}getSpendable(e){return G(this,void 0,void 0,function*(){const t=ye(e);if(t!==se.VALID)throw new Te(e,t);return this.context.readProvider.getSpendable(e,"head")})}getDelegate(e){return G(this,void 0,void 0,function*(){const t=ye(e);if(t!==se.VALID)throw new Te(e,t);return this.context.readProvider.getDelegate(e,"head")})}activate(e,t){return G(this,void 0,void 0,function*(){const i=Ml(e);if(i!==se.VALID)throw new jl(e,i);const n=yield this.prepare.activate({pkh:e,secret:t}),o=yield this.forge(n),a=`${o.opbytes}00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`;return new Mt(yield this.rpc.injectOperation(a),Object.assign(Object.assign({},o),{opbytes:a}),[],this.context.clone())})}}const ga=100,BS=1,MS=.1;class tt{constructor(e,t,i,n,o=ga){this._milligasLimit=e,this._storageLimit=t,this.opSize=i,this.minimalFeePerStorageByteMutez=n,this.baseFeeMutez=o}get burnFeeMutez(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))}get storageLimit(){return Math.max(Number(this._storageLimit),0)}get gasLimit(){return this.roundUp(Number(this._milligasLimit)/1e3)}get operationFeeMutez(){return this.gasLimit*MS+Number(this.opSize)*BS}roundUp(e){return Math.ceil(Number(e))}get minimalFeeMutez(){return this.roundUp(this.operationFeeMutez+ga)}get suggestedFeeMutez(){return this.roundUp(this.operationFeeMutez+ga*1.2)}get usingBaseFeeMutez(){return Math.max(Number(this.baseFeeMutez),ga)+this.roundUp(this.operationFeeMutez)}get totalCost(){return this.minimalFeeMutez+this.burnFeeMutez}get consumedMilligas(){return Number(this._milligasLimit)}static createEstimateInstanceFromProperties(e){let t=0,i=0,n=0,o=0,a;return e.forEach(s=>{t+=s.milligasLimit,i+=s.storageLimit,n+=s.opSize,o=Math.max(s.minimalFeePerStorageByteMutez,o),s.baseFeeMutez&&(a=a?a+s.baseFeeMutez:s.baseFeeMutez)}),new tt(t,i,n,o,a)}static createArrayEstimateInstancesFromProperties(e){return e.map(t=>new tt(t.milligasLimit,t.storageLimit,t.opSize,t.minimalFeePerStorageByteMutez,t.baseFeeMutez))}}class Nb extends qe{constructor(){super(),this.name="RevealEstimateError",this.message="Public key is unknown, unable to estimate the reveal operation in Wallet API."}}const jS="edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg";class Bb extends Vo{constructor(){super(...arguments),this.REVEAL_LENGTH=324,this.REVEAL_LENGTH_TZ4=622,this.MILLIGAS_BUFFER=100*1e3,this.STORAGE_BUFFER=20,this.prepare=new eo(this.context)}getKeys(){return G(this,void 0,void 0,function*(){const e=this.context.isAnySignerConfigured();return{publicKeyHash:e?yield this.signer.publicKeyHash():yield this.context.wallet.pkh(),publicKey:e?yield this.signer.publicKey():yield this.context.wallet.pk()}})}getEstimationPropertiesFromOperationContent(e,t,i,n){const o=Lr({contents:[e]});let a=0,s=0;return o.forEach(c=>{a+=Number(c.consumed_milligas)||0,s+="allocated_destination_contract"in c?n:0,s+="originated_contracts"in c&&Array.isArray(c.originated_contracts)?c.originated_contracts.length*n:0,s+="storage_size"in c&&"global_address"in c&&Number(c.storage_size)||0,s+="paid_storage_size_diff"in c&&Number(c.paid_storage_size_diff)||0,s+="genesis_commitment_hash"in c&&Number(c.size)||0}),$a(e)?{milligasLimit:ob(e)?a+Number(this.MILLIGAS_BUFFER):a,storageLimit:s>0?s+this.STORAGE_BUFFER:0,opSize:t,minimalFeePerStorageByteMutez:i.toNumber()}:{milligasLimit:0,storageLimit:0,opSize:t,minimalFeePerStorageByteMutez:i.toNumber(),baseFeeMutez:0}}calculateEstimates(e,t){return G(this,void 0,void 0,function*(){const{opbytes:i,opOb:{branch:n,contents:o}}=yield this.forge(e),a={operation:{branch:n,contents:o,signature:jS},chain_id:yield this.context.readProvider.getChainId()},{opResponse:s}=yield this.simulate(a),{cost_per_byte:c,origination_size:u}=t,p=[...Wn(s,"backtracked"),...Wn(s)];if(p.length)throw new Df(p,"Error occurred during estimation",s.contents);let f=1;return Array.isArray(e.opOb.contents)&&e.opOb.contents.length>1&&(f=s.contents[0].kind==="reveal"?e.opOb.contents.length-1:e.opOb.contents.length),s.contents.map(l=>{const d=l;d.source=d.source||"";let g,b;return d.source.startsWith(X.BLS12_381PublicKeyHash)?(g=this.REVEAL_LENGTH_TZ4/2,b=(i.length/2+il[X.BLS12_381Signature])/f):(g=this.REVEAL_LENGTH/2,b=(i.length/2+il[X.Ed25519Signature])/f),this.getEstimationPropertiesFromOperationContent(l,l.kind==="reveal"?g:b,c,u??257)})})}originate(e){return G(this,void 0,void 0,function*(){const t=yield this.prepare.originate(e),i=yield this.context.readProvider.getProtocolConstants("head"),n=yield this.calculateEstimates(t,i);if(t.opOb.contents[0].kind==="reveal"){const o=t.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;n.shift(),n[0].opSize-=o}return tt.createEstimateInstanceFromProperties(n)})}transfer(e){return G(this,void 0,void 0,function*(){var t,{fee:i,storageLimit:n,gasLimit:o}=e,a=Ze(e,["fee","storageLimit","gasLimit"]);const s=ye(a.to);if(s!==se.VALID)throw new Te(a.to,s);const c=ye((t=a.source)!==null&&t!==void 0?t:"");if(a.source&&c!==se.VALID)throw new Te(a.source,c);if(a.amount<0)throw new ai(a.amount.toString());const u=yield this.prepare.transaction(Object.assign({fee:i,storageLimit:n,gasLimit:o},a)),p=yield this.context.readProvider.getProtocolConstants("head"),f=yield this.calculateEstimates(u,p);if(u.opOb.contents[0].kind==="reveal"){const l=u.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;f.shift(),f[0].opSize-=l}return tt.createEstimateInstanceFromProperties(f)})}stake(e){return G(this,void 0,void 0,function*(){var t,{fee:i,storageLimit:n,gasLimit:o}=e,a=Ze(e,["fee","storageLimit","gasLimit"]);const s=ye((t=a.source)!==null&&t!==void 0?t:"");if(a.source&&s!==se.VALID)throw new Te(a.source,s);if(a.to||(a.to=a.source),a.to&&a.to!==a.source)throw new Hn(a.to);if(a.amount<0)throw new ai(a.amount.toString());const c=yield this.prepare.stake(Object.assign({fee:i,storageLimit:n,gasLimit:o},a)),u=yield this.context.readProvider.getProtocolConstants("head"),p=yield this.calculateEstimates(c,u);if(c.opOb.contents[0].kind==="reveal"){p.shift();const f=c.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;p[0].opSize-=f}return tt.createEstimateInstanceFromProperties(p)})}unstake(e){return G(this,void 0,void 0,function*(){var t,{fee:i,storageLimit:n,gasLimit:o}=e,a=Ze(e,["fee","storageLimit","gasLimit"]);const s=ye((t=a.source)!==null&&t!==void 0?t:"");if(a.source&&s!==se.VALID)throw new Te(a.source,s);if(a.to||(a.to=a.source),a.to&&a.to!==a.source)throw new Hn(a.to);if(a.amount<0)throw new ai(a.amount.toString());const c=yield this.prepare.unstake(Object.assign({fee:i,storageLimit:n,gasLimit:o},a)),u=yield this.context.readProvider.getProtocolConstants("head"),p=yield this.calculateEstimates(c,u);if(c.opOb.contents[0].kind==="reveal"){p.shift();const f=c.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;p[0].opSize-=f}return tt.createEstimateInstanceFromProperties(p)})}finalizeUnstake(e){return G(this,void 0,void 0,function*(){var t,{fee:i,storageLimit:n,gasLimit:o}=e,a=Ze(e,["fee","storageLimit","gasLimit"]);const s=ye((t=a.source)!==null&&t!==void 0?t:"");if(a.source&&s!==se.VALID)throw new Te(a.source,s);if(a.to||(a.to=a.source),a.amount||(a.amount=0),a.amount!==void 0&&a.amount!==0)throw new Error("Amount must be 0 for finalize_unstake operation");const c=yield this.prepare.finalizeUnstake(Object.assign({fee:i,storageLimit:n,gasLimit:o},a)),u=yield this.context.readProvider.getProtocolConstants("head"),p=yield this.calculateEstimates(c,u);if(c.opOb.contents[0].kind==="reveal"){p.shift();const f=c.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;p[0].opSize-=f}return tt.createEstimateInstanceFromProperties(p)})}transferTicket(e){return G(this,void 0,void 0,function*(){var t,{fee:i,storageLimit:n,gasLimit:o}=e,a=Ze(e,["fee","storageLimit","gasLimit"]);const s=ye(a.destination);if(s!==se.VALID)throw new Te(a.destination,s);const c=ye((t=a.source)!==null&&t!==void 0?t:"");if(a.source&&c!==se.VALID)throw new Te(a.source,c);const u=yield this.context.readProvider.getProtocolConstants("head"),p=yield this.prepare.transferTicket(Object.assign({fee:i,storageLimit:n,gasLimit:o},a)),f=yield this.calculateEstimates(p,u);if(p.opOb.contents[0].kind==="reveal"){f.shift();const l=p.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;f[0].opSize-=l}return tt.createEstimateInstanceFromProperties(f)})}setDelegate(e){return G(this,void 0,void 0,function*(){var t,i,{fee:n,gasLimit:o,storageLimit:a}=e,s=Ze(e,["fee","gasLimit","storageLimit"]);const c=ye((t=s.source)!==null&&t!==void 0?t:"");if(s.source&&c!==se.VALID)throw new Te(s.source,c);const u=ye((i=s.delegate)!==null&&i!==void 0?i:"");if(s.delegate&&u!==se.VALID)throw new Te(s.delegate,u);const p=yield this.prepare.delegation(Object.assign({fee:n,storageLimit:a,gasLimit:o},s)),f=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.calculateEstimates(p,f);if(p.opOb.contents[0].kind==="reveal"){l.shift();const d=p.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;l[0].opSize-=d}return tt.createEstimateInstanceFromProperties(l)})}batch(e){return G(this,void 0,void 0,function*(){const t=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.batch(e),n=yield this.calculateEstimates(i,t);return tt.createArrayEstimateInstancesFromProperties(n)})}registerDelegate(e,t){return G(this,void 0,void 0,function*(){var{fee:i,storageLimit:n,gasLimit:o}=e,a=Ze(e,["fee","storageLimit","gasLimit"]);const s=(yield this.getKeys()).publicKeyHash,c=yield this.context.readProvider.getProtocolConstants("head"),u=t||s,p=yield this.prepare.registerDelegate(Object.assign({fee:i,storageLimit:n,gasLimit:o},a),u),f=yield this.calculateEstimates(p,c);if(p.opOb.contents[0].kind==="reveal"){f.shift();const l=p.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;f[0].opSize-=l}return tt.createEstimateInstanceFromProperties(f)})}reveal(e){return G(this,void 0,void 0,function*(){const{publicKeyHash:t,publicKey:i}=yield this.getKeys();if(!i)throw new Nb;if(yield this.isAccountRevealRequired(t)){const[,n]=Ge(t,go);if(n===X.BLS12_381PublicKeyHash)if(e&&e.proof)Ge(e.proof,[X.BLS12_381Signature]);else{const{prefixSig:c}=yield this.signer.provePossession();e=Object.assign(Object.assign({},e),{proof:c})}else if(e&&e.proof)throw new Ht("Proof field is only allowed to reveal a bls account ");const o=yield this.context.readProvider.getProtocolConstants("head"),a=e?yield this.prepare.reveal(e):yield this.prepare.reveal({}),s=yield this.calculateEstimates(a,o);return tt.createEstimateInstanceFromProperties(s)}})}registerGlobalConstant(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);const a=yield this.prepare.registerGlobalConstant(Object.assign({fee:t,storageLimit:i,gasLimit:n},o)),s=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.calculateEstimates(a,s);if(a.opOb.contents[0].kind==="reveal"){c.shift();const u=a.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;c[0].opSize-=u}return tt.createEstimateInstanceFromProperties(c)})}increasePaidStorage(e){return G(this,void 0,void 0,function*(){var{fee:t,storageLimit:i,gasLimit:n}=e,o=Ze(e,["fee","storageLimit","gasLimit"]);if(o.amount<=0)throw new ai(o.amount.toString());const a=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.prepare.increasePaidStorage(Object.assign({fee:t,storageLimit:i,gasLimit:n},o)),c=yield this.calculateEstimates(s,a);if(s.opOb.contents[0].kind==="reveal"){c.shift();const u=s.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;c[0].opSize-=u}return tt.createEstimateInstanceFromProperties(c)})}updateConsensusKey(e){return G(this,void 0,void 0,function*(){const[,t]=Ge(e.pk,Ui);if(t===X.BLS12_381PublicKey){if(!e.proof)throw new qi("Proof is required to set a bls account as consensus key ")}else if(e.proof)throw new Ht("Proof field is only allowed for a bls account as consensus key");const i=yield this.context.readProvider.getProtocolConstants("head"),n=yield this.prepare.updateConsensusKey(e),o=yield this.calculateEstimates(n,i);if(n.opOb.contents[0].kind==="reveal"){o.shift();const a=n.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;o[0].opSize-=a}return tt.createEstimateInstanceFromProperties(o)})}updateCompanionKey(e){return G(this,void 0,void 0,function*(){const[,t]=Ge(e.pk,Ui);if(t!==X.BLS12_381PublicKey)throw new Ht("companion key must be a bls account");if(!e.proof)throw new qi("Proof is required to set a bls account as companion key ");const i=yield this.context.readProvider.getProtocolConstants("head"),n=yield this.prepare.updateCompanionKey(e),o=yield this.calculateEstimates(n,i);if(n.opOb.contents[0].kind==="reveal"){o.shift();const a=n.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;o[0].opSize-=a}return tt.createEstimateInstanceFromProperties(o)})}smartRollupAddMessages(e){return G(this,void 0,void 0,function*(){const t=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.smartRollupAddMessages(e),n=yield this.calculateEstimates(i,t);if(i.opOb.contents[0].kind==="reveal"){n.shift();const o=i.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;n[0].opSize-=o}return tt.createEstimateInstanceFromProperties(n)})}smartRollupOriginate(e){return G(this,void 0,void 0,function*(){const t=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.smartRollupOriginate(e),n=yield this.calculateEstimates(i,t);if(i.opOb.contents[0].kind==="reveal"){n.shift();const o=i.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;n[0].opSize-=o}return tt.createEstimateInstanceFromProperties(n)})}smartRollupExecuteOutboxMessage(e){return G(this,void 0,void 0,function*(){const t=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.smartRollupExecuteOutboxMessage(e),n=yield this.calculateEstimates(i,t);return i.opOb.contents[0].kind==="reveal"&&n.shift(),tt.createEstimateInstanceFromProperties(n)})}contractCall(e){return G(this,void 0,void 0,function*(){const t=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.contractCall(e),n=yield this.calculateEstimates(i,t);if(i.opOb.contents[0].kind==="reveal"){n.shift();const o=i.opOb.contents[0].source.startsWith(X.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;n[0].opSize-=o}return tt.createEstimateInstanceFromProperties(n)})}}const CS=[V.ACTIVATION,V.ORIGINATION,V.TRANSACTION,V.DELEGATION,V.REGISTER_GLOBAL_CONSTANT,V.INCREASE_PAID_STORAGE,V.TRANSFER_TICKET,V.SMART_ROLLUP_ADD_MESSAGES,V.SMART_ROLLUP_ORIGINATE,V.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE];class Mb extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}sumProp(e,t){return e.reduce((i,n)=>t in n?Number(n[t])+i:i,0)}getOriginatedContractAddresses(){const e=this.results.filter(i=>i.kind==="origination");let t=[];for(const i of e)i.metadata.operation_result.originated_contracts&&(t=[...t,...i.metadata.operation_result.originated_contracts]);return t}get status(){return this.results.filter(e=>CS.indexOf(e.kind)!==-1).map(e=>En(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}get fee(){return this.sumProp(this.params,"fee")}get gasLimit(){return this.sumProp(this.params,"gas_limit")}get storageLimit(){return this.sumProp(this.params,"storage_limit")}get consumedGas(){return te.config({DECIMAL_PLACES:0,ROUNDING_MODE:te.ROUND_UP}),new te(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(Lr({contents:this.results}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(Lr({contents:this.results}),"paid_storage_size_diff"))}get errors(){return Wn({contents:this.results})}}class Ff extends Vo{constructor(e,t){super(e),this.estimator=t,this.operations=[],this.prepare=new eo(this.context)}withTransfer(e){const t=ye(e.to);if(e.amount<0)throw new ai(e.amount.toString());if(t!==se.VALID)throw new Te(e.to,t);return this.operations.push(Object.assign({kind:V.TRANSACTION},e)),this}withTransferTicket(e){const t=ye(e.destination);if(t!==se.VALID)throw new Te(e.destination,t);return this.operations.push(Object.assign({kind:V.TRANSFER_TICKET},e)),this}withContractCall(e,t={}){return this.withTransfer(e.toTransferParams(t))}withDelegation(e){var t,i;const n=ye((t=e.source)!==null&&t!==void 0?t:"");if(e.source&&n!==se.VALID)throw new Te(e.source,n);const o=ye((i=e.delegate)!==null&&i!==void 0?i:"");if(e.delegate&&o!==se.VALID)throw new Te(e.delegate,o);return this.operations.push(Object.assign({kind:V.DELEGATION},e)),this}withActivation({pkh:e,secret:t}){const i=Ml(e);if(i!==se.VALID)throw new jl(e,i);return this.operations.push({kind:V.ACTIVATION,pkh:e,secret:t}),this}withOrigination(e){return this.operations.push(Object.assign({kind:V.ORIGINATION},e)),this}withRegisterGlobalConstant(e){return this.operations.push(Object.assign({kind:V.REGISTER_GLOBAL_CONSTANT},e)),this}withIncreasePaidStorage(e){return this.operations.push(Object.assign({kind:V.INCREASE_PAID_STORAGE},e)),this}withUpdateConsensusKey(e){const[,t]=Ge(e.pk,Ui);if(t===X.BLS12_381PublicKey){if(!e.proof)throw new qi("Proof is required to set a bls account as consensus key ")}else if(e.proof)throw new Ht("Proof field is only allowed for a bls account as consensus key");return this.operations.push(Object.assign({kind:V.UPDATE_CONSENSUS_KEY},e)),this}withUpdateCompanionKey(e){const[,t]=Ge(e.pk,Ui);if(t!==X.BLS12_381PublicKey)throw new Ht("companion key must be a bls account");if(!e.proof)throw new qi("Proof is required to set a bls account as companion key ");return this.operations.push(Object.assign({kind:V.UPDATE_COMPANION_KEY},e)),this}withSmartRollupAddMessages(e){return this.operations.push(Object.assign({kind:V.SMART_ROLLUP_ADD_MESSAGES},e)),this}withSmartRollupOriginate(e){return this.operations.push(Object.assign({kind:V.SMART_ROLLUP_ORIGINATE},e)),this}withSmartRollupExecuteOutboxMessage(e){return this.operations.push(Object.assign({kind:V.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE},e)),this}getRPCOp(e){return G(this,void 0,void 0,function*(){switch(e.kind){case V.TRANSACTION:return fn(Object.assign({},e));case V.ORIGINATION:return ys(yield this.context.parser.prepareCodeOrigination(Object.assign({},e)));case V.DELEGATION:return _s(Object.assign({},e));case V.REGISTER_GLOBAL_CONSTANT:return ws(Object.assign({},e));case V.INCREASE_PAID_STORAGE:return xs(Object.assign({},e));case V.UPDATE_CONSENSUS_KEY:return Ss(Object.assign({},e));case V.UPDATE_COMPANION_KEY:return As(Object.assign({},e));case V.TRANSFER_TICKET:return Es(Object.assign({},e));case V.SMART_ROLLUP_ADD_MESSAGES:return Rs(Object.assign({},e));case V.SMART_ROLLUP_ORIGINATE:return Os(Object.assign({},e));case V.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE:return Ps(Object.assign({},e));default:throw new Di(JSON.stringify(e.kind))}})}with(e){for(const t of e)switch(t.kind){case V.TRANSACTION:this.withTransfer(t);break;case V.ORIGINATION:this.withOrigination(t);break;case V.DELEGATION:this.withDelegation(t);break;case V.ACTIVATION:this.withActivation(t);break;case V.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(t);break;case V.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(t);break;case V.TRANSFER_TICKET:this.withTransferTicket(t);break;case V.SMART_ROLLUP_ADD_MESSAGES:this.withSmartRollupAddMessages(t);break;case V.SMART_ROLLUP_ORIGINATE:this.withSmartRollupOriginate(t);break;case V.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE:this.withSmartRollupExecuteOutboxMessage(t);break;default:throw new Di(JSON.stringify(t.kind))}return this}send(e){return G(this,void 0,void 0,function*(){const t=yield this.signer.publicKeyHash(),i=e&&e.source||t,n=yield this.estimator.batch(this.operations);n.length!==this.operations.length&&n.shift();const o=yield this.prepare.batch(this.operations,n),a=yield this.forge(o),{hash:s,context:c,forgedBytes:u,opResponse:p}=yield this.signAndInject(a);return new Mb(s,o.opOb.contents,i,u,p,c)})}}class zS{constructor(e,t){this.context=e,this.estimator=t}batch(e){const t=new Ff(this.context,this.estimator);return Array.isArray(e)&&t.with(e),t}}class Il extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="delegation"),t=e&&e.metadata&&e.metadata.operation_result;return t||void 0}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get delegate(){return this.params.delegate}get isRegisterOperation(){return this.delegate===this.source}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedGas(){return te.config({DECIMAL_PLACES:0,ROUNDING_MODE:te.ROUND_UP}),this.consumedMilliGas?new te(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class jb extends Mt{constructor(e,t,i,n,o,a){super(e,i,n,o),this.params=t,this.contractProvider=a;const s=this.operationResults&&this.operationResults.originated_contracts;Array.isArray(s)&&(this.contractAddress=s[0])}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="origination"),t=e&&En(e)&&e.metadata.operation_result;return t||void 0}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedGas(){return te.config({DECIMAL_PLACES:0,ROUNDING_MODE:te.ROUND_UP}),this.consumedMilliGas?new te(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get storageDiff(){const e=this.operationResults&&this.operationResults.paid_storage_size_diff;return e||void 0}get storageSize(){const e=this.operationResults&&this.operationResults.storage_size;return e||void 0}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}contract(e,t){return G(this,void 0,void 0,function*(){if(!this.contractAddress)throw new uS("No contract was originated in this operation");return yield this.confirmation(e,t),this.contractProvider.at(this.contractAddress)})}}class Cb extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i,this.globalConstantHash=this.operationResults&&this.operationResults.global_address}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="register_global_constant"),t=e&&e.metadata&&e.metadata.operation_result;return t||void 0}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get registeredExpression(){return this.params.value}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return te.config({DECIMAL_PLACES:0,ROUNDING_MODE:te.ROUND_UP}),this.consumedMilliGas?new te(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class zb extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(t=>t.kind==="reveal");return e?[e]:[]}get status(){const t=this.operationResults[0];return t?t.metadata.operation_result.status:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get publicKey(){return this.params.public_key}get proof(){if(this.params.proof)return this.params.proof;throw new Ht("Only BLS key has proof")}sumProp(e,t){return e.reduce((i,n)=>t in n?Number(n[t])+i:i,0)}get consumedGas(){return te.config({DECIMAL_PLACES:0,ROUNDING_MODE:te.ROUND_UP}),new te(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(Lr({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(Lr({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(Lr({contents:this.operationResults}),"storage_size"))}get errors(){return Wn({contents:this.operationResults})}}class fo extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(t=>t.kind==="transaction");return e?[e]:[]}get status(){const t=this.operationResults[0];return t?t.metadata.operation_result.status:"unknown"}get amount(){return new te(this.params.amount)}get destination(){return this.params.destination}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}sumProp(e,t){return e.reduce((i,n)=>t in n?Number(n[t])+i:i,0)}get consumedGas(){return te.config({DECIMAL_PLACES:0,ROUNDING_MODE:te.ROUND_UP}),new te(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(Lr({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(Lr({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(Lr({contents:this.operationResults}),"storage_size"))}get errors(){return Wn({contents:this.operationResults})}}class Hb extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind===V.TRANSFER_TICKET),t=e&&e.metadata&&e.metadata.operation_result;return t||void 0}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedGas(){return te.config({DECIMAL_PLACES:0,ROUNDING_MODE:te.ROUND_UP}),this.consumedMilliGas?new te(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class Db extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="increase_paid_storage"),t=e&&e.metadata&&e.metadata.operation_result;return t||void 0}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get amount(){return this.params.amount}get destination(){return this.params.destination}}class Ub extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const t=Array.isArray(this.results)&&this.results.find(i=>i.kind==="ballot");return t||void 0}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}get proposal(){return this.params.proposal}get ballot(){return this.params.ballot}}class qb extends Mt{constructor(e,t,i,n,o){super(e,i,n,o),this.params=t}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="drain_delegate"),t=e&&e.metadata&&e.metadata.balance_updates;return t||void 0}get consensusKey(){return this.params.consensus_key}get delegate(){return this.params.delegate}get destination(){return this.params.destination}}class Fb extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const t=Array.isArray(this.results)&&this.results.find(i=>i.kind==="proposals");return t||void 0}get proposals(){return this.params.proposals}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}}class Gb extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="update_consensus_key"),t=e&&e.metadata&&e.metadata.operation_result;return t||void 0}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get pk(){return this.params.pk}get proof(){if(this.params.proof)return this.params.proof;throw new Ht("Only updating consensus key to a BLS account has proof")}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class Kb extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="update_companion_key"),t=e&&e.metadata&&e.metadata.operation_result;return t||void 0}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get pk(){return this.params.pk}get proof(){if(this.params.proof)return this.params.proof;throw new Ht("Only updating companion key to a BLS account has proof")}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class $b extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="smart_rollup_add_messages"),t=e&&e.metadata&&e.metadata.operation_result;return t||void 0}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get message(){return this.params.message}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class Vb extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind===V.SMART_ROLLUP_ORIGINATE),t=e&&e.metadata&&e.metadata.operation_result;return t||void 0}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get pvmKind(){return this.params.pvm_kind}get kernel(){return this.params.kernel}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class HS extends Mt{constructor(e,t,i,n,o,a){super(e,n,o,a),this.params=t,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind===V.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE),t=e&&e.metadata&&e.metadata.operation_result;return t||void 0}get status(){var e,t;return(t=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&t!==void 0?t:"unknown"}get rollup(){return this.params.rollup}get cementedCommitment(){return this.params.cemented_commitment}get outputProof(){return this.params.output_proof}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class DS extends Vo{constructor(e,t){super(e),this.estimator=t,this.contractProviderTypeSymbol=Symbol.for("taquito-contract-provider-type-symbol"),this.prepare=new eo(this.context)}getStorage(e,t){return G(this,void 0,void 0,function*(){const i=_o(e);if(i!==se.VALID)throw new wo(e,i);const n=yield this.context.readProvider.getScript(e,"head");t||(t=n);let o;return _r.isSchema(t)?o=t:o=_r.fromRPCResponse({script:t}),o.Execute(n.storage,kl(this))})}getBigMapKeyByID(e,t,i,n){return G(this,void 0,void 0,function*(){const{key:o,type:a}=i.EncodeBigMapKey(t),{packed:s}=yield this.context.packer.packData({data:o,type:a}),c=mv(s),u=n?yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},n):yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},"head");return i.ExecuteOnBigMapValue(u,kl(this))})}getBigMapKeysByID(e,t,i,n){return G(this,arguments,void 0,function*(o,a,s,c,u=5){const p=yield this.getBlockForRequest(a,c),f=new Yt;let l=0,d=[];for(;l<a.length;){const b=a.slice(l,l+u).map(x=>this.getBigMapValueOrUndefined(x,o,s,p));d=[...d,...yield Promise.all(b)],l+=u}for(let g=0;g<d.length;g++)f.set(a[g],d[g]);return f})}getBlockForRequest(e,t){return G(this,void 0,void 0,function*(){return e.length===1||typeof t<"u"?t:yield this.context.readProvider.getBlockLevel("head")})}getBigMapValueOrUndefined(e,t,i,n){return G(this,void 0,void 0,function*(){try{return yield this.getBigMapKeyByID(t,e,i,n)}catch(o){if(o instanceof dn&&o.status===Eo.NOT_FOUND)return;throw o}})}getSaplingDiffByID(e,t){return G(this,void 0,void 0,function*(){return t?yield this.context.readProvider.getSaplingDiffById({id:e.toString()},t):yield this.context.readProvider.getSaplingDiffById({id:e.toString()},"head")})}originate(e){return G(this,void 0,void 0,function*(){const t=yield this.estimate(e,this.estimator.originate.bind(this.estimator)),i=yield this.prepare.originate(Object.assign(Object.assign({},e),t)),n=i.opOb.contents.find(p=>p.kind===V.ORIGINATION),o=yield this.forge(i),{hash:a,context:s,forgedBytes:c,opResponse:u}=yield this.signAndInject(o);return new jb(a,n,c,u,s,this)})}setDelegate(e){return G(this,void 0,void 0,function*(){var t,i,n,o;const a=ye((t=e.source)!==null&&t!==void 0?t:"");if(e.source&&a!==se.VALID)throw new Te(e.source,a);const s=ye((i=e.delegate)!==null&&i!==void 0?i:"");if(e.delegate&&s!==se.VALID)throw new Te(e.delegate,s);if(/^kt1/i.test((n=e.source)!==null&&n!==void 0?n:""))throw new vb((o=e.source)!==null&&o!==void 0?o:"");const c=yield this.signer.publicKeyHash(),u=e.source||c,p=yield this.estimate(e,this.estimator.setDelegate.bind(this.estimator)),f=yield this.prepare.delegation(Object.assign(Object.assign({},e),p)),l=f.opOb.contents.find(E=>E.kind===V.DELEGATION),d=yield this.forge(f),{hash:g,context:b,forgedBytes:x,opResponse:_}=yield this.signAndInject(d);return new Il(g,l,u,x,_,b)})}registerDelegate(e){return G(this,void 0,void 0,function*(){const t=yield this.estimate(e,this.estimator.registerDelegate.bind(this.estimator)),i=yield this.signer.publicKeyHash(),n=yield this.prepare.registerDelegate(Object.assign(Object.assign({},e),t)),o=n.opOb.contents.find(f=>f.kind===V.DELEGATION),a=yield this.forge(n),{hash:s,context:c,forgedBytes:u,opResponse:p}=yield this.signAndInject(a);return new Il(s,o,i,u,p,c)})}transfer(e){return G(this,void 0,void 0,function*(){var t;const i=ye(e.to);if(i!==se.VALID)throw new Te(e.to,i);const n=ye((t=e.source)!==null&&t!==void 0?t:"");if(e.source&&n!==se.VALID)throw new Te(e.source,n);if(e.amount<0)throw new ai(e.amount.toString());const o=yield this.signer.publicKeyHash(),a=yield this.estimate(e,this.estimator.transfer.bind(this.estimator)),s=e.source||o,c=yield this.prepare.transaction(Object.assign(Object.assign({},e),a)),u=c.opOb.contents.find(b=>b.kind===V.TRANSACTION),p=yield this.forge(c),{hash:f,context:l,forgedBytes:d,opResponse:g}=yield this.signAndInject(p);return new fo(f,u,s,d,g,l)})}stake(e){return G(this,void 0,void 0,function*(){var t;const i=ye((t=e.source)!==null&&t!==void 0?t:"");if(e.source&&i!==se.VALID)throw new Te(e.source,i);if(e.to||(e.to=e.source),e.to&&e.to!==e.source)throw new Hn(e.to);if(e.amount<0)throw new ai(e.amount.toString());const n=yield this.signer.publicKeyHash(),o=yield this.estimate(e,this.estimator.stake.bind(this.estimator)),a=e.source||n,s=yield this.prepare.stake(Object.assign(Object.assign({},e),o)),c=s.opOb.contents.find(g=>g.kind===V.TRANSACTION),u=yield this.forge(s),{hash:p,context:f,forgedBytes:l,opResponse:d}=yield this.signAndInject(u);return new fo(p,c,a,l,d,f)})}unstake(e){return G(this,void 0,void 0,function*(){var t;const i=ye((t=e.source)!==null&&t!==void 0?t:"");if(e.source&&i!==se.VALID)throw new Te(e.source,i);if(e.to||(e.to=e.source),e.to&&e.to!==e.source)throw new Hn(e.to);if(e.amount<0)throw new ai(e.amount.toString());const n=yield this.signer.publicKeyHash(),o=yield this.estimate(e,this.estimator.unstake.bind(this.estimator)),a=e.source||n,s=yield this.prepare.unstake(Object.assign(Object.assign({},e),o)),c=s.opOb.contents.find(g=>g.kind===V.TRANSACTION),u=yield this.forge(s),{hash:p,context:f,forgedBytes:l,opResponse:d}=yield this.signAndInject(u);return new fo(p,c,a,l,d,f)})}finalizeUnstake(e){return G(this,void 0,void 0,function*(){var t;const i=ye((t=e.source)!==null&&t!==void 0?t:"");if(e.source&&i!==se.VALID)throw new Te(e.source,i);if(e.to||(e.to=e.source),e.amount||(e.amount=0),e.amount!==void 0&&e.amount>0)throw new D0("Amount must be 0 to finalize unstake.");const n=yield this.signer.publicKeyHash(),o=yield this.estimate(e,this.estimator.finalizeUnstake.bind(this.estimator)),a=e.source||n,s=yield this.prepare.finalizeUnstake(Object.assign(Object.assign({},e),o)),c=s.opOb.contents.find(g=>g.kind===V.TRANSACTION),u=yield this.forge(s),{hash:p,context:f,forgedBytes:l,opResponse:d}=yield this.signAndInject(u);return new fo(p,c,a,l,d,f)})}transferTicket(e){return G(this,void 0,void 0,function*(){var t,i;const n=ye(e.destination);if(n!==se.VALID)throw new Te(e.destination,n);const o=ye((t=e.source)!==null&&t!==void 0?t:"");if(e.source&&o!==se.VALID)throw new Te(e.source,o);const a=yield this.signer.publicKeyHash(),s=(i=e.source)!==null&&i!==void 0?i:a,c=yield this.estimate(e,this.estimator.transferTicket.bind(this.estimator)),u=yield this.prepare.transferTicket(Object.assign(Object.assign({},e),c)),p=u.opOb.contents.find(x=>x.kind===V.TRANSFER_TICKET),f=yield this.forge(u),{hash:l,context:d,forgedBytes:g,opResponse:b}=yield this.signAndInject(f);return new Hb(l,p,s,g,b,d)})}reveal(e){return G(this,void 0,void 0,function*(){const t=yield this.signer.publicKeyHash(),[,i]=Ge(t,go);if(i===X.BLS12_381PublicKeyHash)if(e.proof)Ge(e.proof,[X.BLS12_381Signature]);else{const{prefixSig:o}=yield this.signer.provePossession();e.proof=o}else if(e.proof)throw new Ht("Proof field is only allowed to reveal a bls account ");const n=yield this.estimator.reveal(e);if(n){const o=yield this.estimate(e,()=>G(this,void 0,void 0,function*(){return n})),a=yield this.prepare.reveal(Object.assign(Object.assign({},e),o)),s=a.opOb.contents.find(d=>d.kind===V.REVEAL),c=yield this.forge(a),{hash:u,context:p,forgedBytes:f,opResponse:l}=yield this.signAndInject(c);return new zb(u,s,t,f,l,p)}else throw new wb(`The publicKeyHash '${t}' has already been revealed.`)})}registerGlobalConstant(e){return G(this,void 0,void 0,function*(){const t=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.registerGlobalConstant.bind(this.estimator)),n=yield this.prepare.registerGlobalConstant(Object.assign(Object.assign({},e),i)),o=n.opOb.contents.find(f=>f.kind===V.REGISTER_GLOBAL_CONSTANT),a=yield this.forge(n),{hash:s,context:c,forgedBytes:u,opResponse:p}=yield this.signAndInject(a);return new Cb(s,o,t,u,p,c)})}increasePaidStorage(e){return G(this,void 0,void 0,function*(){if(e.amount<=0)throw new ai(e.amount.toString());const t=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.increasePaidStorage.bind(this.estimator)),n=yield this.prepare.increasePaidStorage(Object.assign(Object.assign({},e),i)),o=n.opOb.contents.find(f=>f.kind===V.INCREASE_PAID_STORAGE),a=yield this.forge(n),{hash:s,context:c,forgedBytes:u,opResponse:p}=yield this.signAndInject(a);return new Db(s,o,t,u,p,c)})}drainDelegate(e){return G(this,void 0,void 0,function*(){const t=yield this.prepare.drainDelegate(e),i=t.opOb.contents.find(u=>u.kind===V.DRAIN_DELEGATE),n=yield this.forge(t),{hash:o,context:a,forgedBytes:s,opResponse:c}=yield this.signAndInject(n);return new qb(o,i,s,c,a)})}ballot(e){return G(this,void 0,void 0,function*(){var t,i;const n=yield this.signer.publicKeyHash(),o=ye((t=e.source)!==null&&t!==void 0?t:"");if(e.source&&o!==se.VALID)throw new Te(e.source,o);const a=(i=e.source)!==null&&i!==void 0?i:n,s=yield this.prepare.ballot(Object.assign(Object.assign({},e),{source:a})),c=s.opOb.contents.find(g=>g.kind===V.BALLOT),u=yield this.forge(s),{hash:p,context:f,forgedBytes:l,opResponse:d}=yield this.signAndInject(u);return new Ub(p,c,n,l,d,f)})}proposals(e){return G(this,void 0,void 0,function*(){var t,i;const n=yield this.signer.publicKeyHash(),o=ye((t=e.source)!==null&&t!==void 0?t:"");if(e.source&&o!==se.VALID)throw new Te(e.source,o);const a=(i=e.source)!==null&&i!==void 0?i:n,s=yield this.prepare.proposals(Object.assign(Object.assign({},e),{source:a})),c=s.opOb.contents.find(g=>g.kind===V.PROPOSALS),u=yield this.forge(s),{hash:p,context:f,forgedBytes:l,opResponse:d}=yield this.signAndInject(u);return new Fb(p,c,n,l,d,f)})}updateConsensusKey(e){return G(this,void 0,void 0,function*(){const t=yield this.signer.publicKeyHash(),[,i]=Ge(e.pk,Ui);if(i===X.BLS12_381PublicKey){if(!e.proof)throw new qi("Proof is required to set a bls account as consensus key ")}else if(e.proof)throw new Ht("Proof field is only allowed for a bls account as consensus key");const n=yield this.estimate(e,this.estimator.updateConsensusKey.bind(this.estimator)),o=yield this.prepare.updateConsensusKey(Object.assign(Object.assign({},e),n)),a=o.opOb.contents.find(l=>l.kind===V.UPDATE_CONSENSUS_KEY),s=yield this.forge(o),{hash:c,context:u,forgedBytes:p,opResponse:f}=yield this.signAndInject(s);return new Gb(c,a,t,p,f,u)})}updateCompanionKey(e){return G(this,void 0,void 0,function*(){const t=yield this.signer.publicKeyHash(),[,i]=Ge(e.pk,Ui);if(i!==X.BLS12_381PublicKey)throw new Ht("Proof field is only allowed for a bls account as companion key");if(!e.proof)throw new qi("Proof is required to set a bls account as companion key ");const n=yield this.estimate(e,this.estimator.updateCompanionKey.bind(this.estimator)),o=yield this.prepare.updateCompanionKey(Object.assign(Object.assign({},e),n)),a=o.opOb.contents.find(l=>l.kind===V.UPDATE_COMPANION_KEY),s=yield this.forge(o),{hash:c,context:u,forgedBytes:p,opResponse:f}=yield this.signAndInject(s);return new Kb(c,a,t,p,f,u)})}smartRollupAddMessages(e){return G(this,void 0,void 0,function*(){const t=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.smartRollupAddMessages.bind(this.estimator)),n=yield this.prepare.smartRollupAddMessages(Object.assign(Object.assign({},e),i)),o=n.opOb.contents.find(f=>f.kind===V.SMART_ROLLUP_ADD_MESSAGES),a=yield this.forge(n),{hash:s,context:c,forgedBytes:u,opResponse:p}=yield this.signAndInject(a);return new $b(s,o,t,u,p,c)})}smartRollupOriginate(e){return G(this,void 0,void 0,function*(){const t=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.smartRollupOriginate.bind(this.estimator)),n=yield this.prepare.smartRollupOriginate(Object.assign(Object.assign({},e),i)),o=n.opOb.contents.find(f=>f.kind===V.SMART_ROLLUP_ORIGINATE),a=yield this.forge(n),{hash:s,context:c,forgedBytes:u,opResponse:p}=yield this.signAndInject(a);return new Vb(s,o,t,u,p,c)})}smartRollupExecuteOutboxMessage(e){return G(this,void 0,void 0,function*(){const t=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.smartRollupExecuteOutboxMessage.bind(this.estimator)),n=yield this.prepare.smartRollupExecuteOutboxMessage(Object.assign(Object.assign({},e),i)),o=n.opOb.contents.find(f=>f.kind===V.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE),a=yield this.forge(n),{hash:s,context:c,forgedBytes:u,opResponse:p}=yield this.signAndInject(a);return new HS(s,o,t,u,p,c)})}failingNoop(e){return G(this,void 0,void 0,function*(){const t={kind:V.FAILING_NOOP,arbitrary:e.arbitrary},i=yield this.context.readProvider.getBlockHash(e.basedOnBlock),n=yield this.context.forger.forge({branch:i,contents:[t]}),{prefixSig:o}=yield this.signer.sign(n,new Uint8Array([3]));return{signature:o,bytes:n,signedContent:{branch:i,contents:[{kind:V.FAILING_NOOP,arbitrary:e.arbitrary}]}}})}at(e){return G(this,arguments,void 0,function*(t,i=n=>n){const n=_o(t);if(n!==se.VALID)throw new wo(t,n);const o=this.context.withExtensions().rpc,a=this.context.withExtensions().readProvider,s=yield a.getScript(t,"head"),c=yield a.getEntrypoints(t),u=new qf(t,s,this,this,c,o,a);return i(u,this.context)})}batch(e){const t=new Ff(this.context,this.estimator);return Array.isArray(e)&&t.with(e),t}}class Wb{constructor(e,t){this.walletProvider=e,this.context=t,this.operations=[]}withTransfer(e){const t=ye(e.to);if(t!==se.VALID)throw new Te(e.to,t);return this.operations.push(Object.assign({kind:V.TRANSACTION},e)),this}withContractCall(e,t={}){return this.withTransfer(e.toTransferParams(t))}withDelegation(e){var t;const i=ye((t=e.delegate)!==null&&t!==void 0?t:"");if(e.delegate&&i!==se.VALID)throw new Te(e.delegate,i);return this.operations.push(Object.assign({kind:V.DELEGATION},e)),this}withOrigination(e){return this.operations.push(Object.assign({kind:V.ORIGINATION},e)),this}withIncreasePaidStorage(e){const t=ye(e.destination);if(t!==se.VALID)throw new Te(e.destination,t);return this.operations.push(Object.assign({kind:V.INCREASE_PAID_STORAGE},e)),this}withTransferTicket(e){const t=ye(e.destination);if(t!==se.VALID)throw new Te(e.destination,t);return this.operations.push(Object.assign({kind:V.TRANSFER_TICKET},e)),this}withRegisterGlobalConstant(e){return this.operations.push(Object.assign({kind:V.REGISTER_GLOBAL_CONSTANT},e)),this}mapOperation(e){return G(this,void 0,void 0,function*(){switch(e.kind){case V.TRANSACTION:return this.walletProvider.mapTransferParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return e}));case V.ORIGINATION:return this.walletProvider.mapOriginateParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return this.context.parser.prepareCodeOrigination(Object.assign({},e))}));case V.DELEGATION:return this.walletProvider.mapDelegateParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return e}));case V.INCREASE_PAID_STORAGE:return this.walletProvider.mapIncreasePaidStorageWalletParams(()=>G(this,void 0,void 0,function*(){return e}));case V.REGISTER_GLOBAL_CONSTANT:return this.walletProvider.mapRegisterGlobalConstantParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return e}));case V.TRANSFER_TICKET:return this.walletProvider.mapTransferTicketParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return e}));default:throw new Di(JSON.stringify(e.kind))}})}with(e){for(const t of e)switch(t.kind){case V.TRANSACTION:this.withTransfer(t);break;case V.ORIGINATION:this.withOrigination(t);break;case V.DELEGATION:this.withDelegation(t);break;case V.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(t);break;case V.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(t);break;case V.TRANSFER_TICKET:this.withTransferTicket(t);break;default:throw new Di(JSON.stringify(t.kind))}return this}send(){return G(this,void 0,void 0,function*(){const e=[];for(const i of this.operations)e.push(yield this.mapOperation(i));const t=yield this.walletProvider.sendOperations(e);return this.context.operationFactory.createBatchOperation(t)})}}class Gf{constructor(e){this.context=e,this.walletCommand=t=>({send:t})}get walletProvider(){return this.context.walletProvider}pkh(){return G(this,arguments,void 0,function*({forceRefetch:e}={}){return(!this._pkh||e)&&(this._pkh=yield this.walletProvider.getPKH()),this._pkh})}pk(){return G(this,arguments,void 0,function*({forceRefetch:e}={}){return(!this._pk||e)&&(this._pk=yield this.walletProvider.getPK()),this._pk})}originate(e){return this.walletCommand(()=>G(this,void 0,void 0,function*(){const t=yield this.walletProvider.mapOriginateParamsToWalletParams(()=>this.context.parser.prepareCodeOrigination(Object.assign({},e))),i=yield this.walletProvider.sendOperations([t]);return this.context.operationFactory.createOriginationOperation(i)}))}setDelegate(e){var t;const i=ye((t=e.delegate)!==null&&t!==void 0?t:"");if(e.delegate&&i!==se.VALID)throw new Te(e.delegate,i);return this.walletCommand(()=>G(this,void 0,void 0,function*(){const n=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return e})),o=yield this.walletProvider.sendOperations([n]);return this.context.operationFactory.createDelegationOperation(o)}))}signFailingNoop(e){return G(this,void 0,void 0,function*(){const t={kind:V.FAILING_NOOP,arbitrary:e.arbitrary},i=yield this.context.readProvider.getBlockHash(e.basedOnBlock),n=yield this.context.forger.forge({branch:i,contents:[t]});return{signature:yield this.walletProvider.sign(n,Uint8Array.from([3])),bytes:n,signedContent:{branch:i,contents:[{kind:V.FAILING_NOOP,arbitrary:e.arbitrary}]}}})}registerDelegate(){return this.walletCommand(()=>G(this,void 0,void 0,function*(){const e=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return{delegate:yield this.pkh()}})),t=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createDelegationOperation(t)}))}transfer(e){const t=ye(e.to);if(t!==se.VALID)throw new Te(e.to,t);return this.walletCommand(()=>G(this,void 0,void 0,function*(){const i=yield this.walletProvider.mapTransferParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([i]);return this.context.operationFactory.createTransactionOperation(n)}))}transferTicket(e){const t=ye(e.destination);if(t!==se.VALID)throw new Te(e.destination,t);return this.walletCommand(()=>G(this,void 0,void 0,function*(){const i=yield this.walletProvider.mapTransferTicketParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([i]);return this.context.operationFactory.createTransferTicketOperation(n)}))}stake(e){return this.walletCommand(()=>G(this,void 0,void 0,function*(){const t=yield this.walletProvider.mapStakeParamsToWalletParams(()=>G(this,void 0,void 0,function*(){const n=yield this.pkh();if(e.to||(e.to=n),e.to!==n)throw new Hn(e.to);return e.parameter={entrypoint:"stake",value:{prim:"Unit"}},e})),i=yield this.walletProvider.sendOperations([t]);return this.context.operationFactory.createTransactionOperation(i)}))}unstake(e){return this.walletCommand(()=>G(this,void 0,void 0,function*(){const t=yield this.walletProvider.mapUnstakeParamsToWalletParams(()=>G(this,void 0,void 0,function*(){const n=yield this.pkh();if(e.to||(e.to=n),e.to!==n)throw new Hn(e.to);return e.parameter={entrypoint:"unstake",value:{prim:"Unit"}},e})),i=yield this.walletProvider.sendOperations([t]);return yield this.context.operationFactory.createTransactionOperation(i)}))}finalizeUnstake(e){return this.walletCommand(()=>G(this,void 0,void 0,function*(){const t=yield this.walletProvider.mapFinalizeUnstakeParamsToWalletParams(()=>G(this,void 0,void 0,function*(){const n=yield this.pkh();if(e.to||(e.to=n),e.amount||(e.amount=0),e.amount!==0)throw new D0("Amount must be 0 to finalize unstake.");return e.parameter={entrypoint:"finalize_unstake",value:{prim:"Unit"}},e})),i=yield this.walletProvider.sendOperations([t]);return yield this.context.operationFactory.createTransactionOperation(i)}))}increasePaidStorage(e){const t=ye(e.destination);if(t!==se.VALID)throw new Te(e.destination,t);return this.walletCommand(()=>G(this,void 0,void 0,function*(){const i=yield this.walletProvider.mapIncreasePaidStorageWalletParams(()=>G(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([i]);return this.context.operationFactory.createIncreasePaidStorageOperation(n)}))}registerGlobalConstant(e){return this.walletCommand(()=>G(this,void 0,void 0,function*(){const t=yield this.walletProvider.mapRegisterGlobalConstantParamsToWalletParams(()=>G(this,void 0,void 0,function*(){return e})),i=yield this.walletProvider.sendOperations([t]);return this.context.operationFactory.createRegisterGlobalConstantOperation(i)}))}batch(e){const t=new Wb(this.walletProvider,this.context);return Array.isArray(e)&&t.with(e),t}at(e){return G(this,arguments,void 0,function*(t,i=n=>n){const n=_o(t);if(n!==se.VALID)throw new wo(t,n);const o=this.context.withExtensions().rpc,a=this.context.withExtensions().readProvider,s=yield a.getScript(t,"head"),c=yield a.getEntrypoints(t),u=new qf(t,s,this,this.context.contract,c,o,a);return i(u,this.context)})}}class Kf{constructor(e){this.context=e}getPKH(){return G(this,void 0,void 0,function*(){return this.context.signer.publicKeyHash()})}getPK(){return G(this,void 0,void 0,function*(){return this.context.signer.publicKey()})}mapTransferParamsToWalletParams(e){return G(this,void 0,void 0,function*(){return Ar(yield e(),V.TRANSACTION)})}mapStakeParamsToWalletParams(e){return G(this,void 0,void 0,function*(){return Ar(yield e(),V.TRANSACTION)})}mapUnstakeParamsToWalletParams(e){return G(this,void 0,void 0,function*(){return Ar(yield e(),V.TRANSACTION)})}mapFinalizeUnstakeParamsToWalletParams(e){return G(this,void 0,void 0,function*(){return Ar(yield e(),V.TRANSACTION)})}mapOriginateParamsToWalletParams(e){return G(this,void 0,void 0,function*(){return Ar(yield e(),V.ORIGINATION)})}mapDelegateParamsToWalletParams(e){return G(this,void 0,void 0,function*(){return Ar(yield e(),V.DELEGATION)})}mapIncreasePaidStorageWalletParams(e){return G(this,void 0,void 0,function*(){return Ar(yield e(),V.INCREASE_PAID_STORAGE)})}mapTransferTicketParamsToWalletParams(e){return G(this,void 0,void 0,function*(){return Ar(yield e(),V.TRANSFER_TICKET)})}mapRegisterGlobalConstantParamsToWalletParams(e){return G(this,void 0,void 0,function*(){return Ar(yield e(),V.REGISTER_GLOBAL_CONSTANT)})}sendOperations(e){return G(this,void 0,void 0,function*(){return(yield this.context.batch.batch(e).send()).hash})}sign(e,t){return G(this,void 0,void 0,function*(){const{prefixSig:i}=yield this.context.signer.sign(e,t);return i})}}class $f{constructor(e){this.context=e}getNextProto(){return G(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}parseScript(e){return G(this,void 0,void 0,function*(){return new ln({protocol:yield this.getNextProto()}).parseScript(e)})}parseMichelineExpression(e){return G(this,void 0,void 0,function*(){return new ln({protocol:yield this.getNextProto()}).parseMichelineExpression(e)})}parseJSON(e){return G(this,void 0,void 0,function*(){return new ln({protocol:yield this.getNextProto()}).parseJSON(e)})}prepareCodeOrigination(e){return G(this,void 0,void 0,function*(){const t=e;if(t.code=yield this.formatCodeParam(e.code),e.init)t.init=yield this.formatInitParam(e.init);else if(e.storage){const i=t.code.find(a=>"prim"in a&&a.prim==="storage");if(!i?.args)throw new Io("The storage section is missing from the script",e.code);const n=new _r(i.args[0]),o=yield this.findGlobalConstantsHashAndValue(n);if(Object.keys(o).length!==0){const s=new ln({expandGlobalConstant:o}).parseJSON(i.args[0]),c=new _r(s);t.init=c.Encode(e.storage)}else t.init=n.Encode(e.storage);delete t.storage}return t})}formatCodeParam(e){return G(this,void 0,void 0,function*(){let t;if(typeof e=="string"){const i=yield this.parseScript(e);if(i===null)throw new Io("Unable to parse",e);t=i}else{const i=yield this.parseJSON(e),n=["parameter","storage","code"];t=i.sort((o,a)=>n.indexOf(o.prim)-n.indexOf(a.prim))}return t})}formatInitParam(e){return G(this,void 0,void 0,function*(){let t;if(typeof e=="string"){const i=yield this.parseMichelineExpression(e);if(i===null)throw new Uf("Invalid init parameter",e);t=i}else t=yield this.parseJSON(e);return t})}findGlobalConstantsHashAndValue(e){return G(this,void 0,void 0,function*(){const t=e.findToken("constant"),i={};if(t.length!==0)for(const n of t){const o=n.tokenVal.args;if(o){const a=o[0];if(a.string){const s=a.string,c=yield this.context.globalConstantsProvider.getGlobalConstantByHash(s);Object.assign(i,{[s]:c})}}}return i})}}class Vf{constructor(e){this.context=e}packData(e){return G(this,void 0,void 0,function*(){return this.context.rpc.packData(e)})}}class Zb extends qe{constructor(e){super(),this.hash=e,this.name="GlobalConstantNotFound",this.message=`Please load the value associated with the constant ${e} using the loadGlobalConstant method of the DefaultGlobalConstantsProvider.`}}class Jb extends Xa{constructor(){super(),this.name="UnconfiguredGlobalConstantsProviderError",this.message="No global constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."}}class Yb{getGlobalConstantByHash(e){return G(this,void 0,void 0,function*(){throw new Jb})}}class Wf{constructor(e){this.rpc=e}getBalance(e,t){return G(this,void 0,void 0,function*(){return this.rpc.getBalance(e,{block:String(t)})})}getSpendable(e,t){return G(this,void 0,void 0,function*(){return this.rpc.getSpendable(e,{block:String(t)})})}getDelegate(e,t){return G(this,void 0,void 0,function*(){return this.rpc.getDelegate(e,{block:String(t)})})}getNextProtocol(e){return G(this,void 0,void 0,function*(){return(yield this.rpc.getProtocols({block:String(e)})).next_protocol})}getProtocolConstants(e){return G(this,void 0,void 0,function*(){const{time_between_blocks:t,minimal_block_delay:i,hard_gas_limit_per_operation:n,hard_gas_limit_per_block:o,hard_storage_limit_per_operation:a,cost_per_byte:s,smart_rollup_origination_size:c}=yield this.rpc.getConstants({block:String(e)});return{time_between_blocks:t,minimal_block_delay:i,hard_gas_limit_per_operation:n,hard_gas_limit_per_block:o,hard_storage_limit_per_operation:a,cost_per_byte:s,smart_rollup_origination_size:c}})}getScript(e,t){return G(this,void 0,void 0,function*(){const{script:i}=yield this.rpc.getContract(e,{block:String(t)});return i})}getStorage(e,t){return G(this,void 0,void 0,function*(){return this.rpc.getStorage(e,{block:String(t)})})}getBlockHash(e){return G(this,void 0,void 0,function*(){const{hash:t}=yield this.rpc.getBlockHeader({block:String(e)});return t})}getBlockLevel(e){return G(this,void 0,void 0,function*(){const{level:t}=yield this.rpc.getBlockHeader({block:String(e)});return t})}getCounter(e,t){return G(this,void 0,void 0,function*(){const{counter:i}=yield this.rpc.getContract(e,{block:String(t)});return i||"0"})}getBlockTimestamp(e){return G(this,void 0,void 0,function*(){const{timestamp:t}=yield this.rpc.getBlockHeader({block:String(e)});return t})}getBigMapValue(e,t){return G(this,void 0,void 0,function*(){return this.rpc.getBigMapExpr(e.id,e.expr,{block:String(t)})})}getSaplingDiffById(e,t){return G(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffById(e.id,{block:String(t)})})}getSaplingDiffByContract(e,t){return G(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffByContract(e,{block:String(t)})})}getEntrypoints(e){return G(this,void 0,void 0,function*(){return this.rpc.getEntrypoints(e)})}getChainId(){return G(this,void 0,void 0,function*(){return this.rpc.getChainId()})}isAccountRevealed(e,t){return G(this,void 0,void 0,function*(){const i=yield this.rpc.getManagerKey(e,{block:String(t)});return i&&typeof i=="object"?!!i.key:!!i})}getBlock(e){return G(this,void 0,void 0,function*(){return this.rpc.getBlock({block:String(e)})})}getLiveBlocks(e){return this.rpc.getLiveBlocks({block:String(e)})}getAdaptiveIssuanceLaunchCycle(e){return this.rpc.getAdaptiveIssuanceLaunchCycle({block:String(e)})}}class T0 extends we{constructor(e){super(),this.type=e,this.name="UnsupportedEventError",this.message=`Unsupported event type "${e}" expecting one of the "data", "error", or "close".`}}class US extends we{constructor(e){super(),this.invalidExpression=e,this.name="InvalidFilterExpressionError",this.message="Invalid filter expression expecting the object to contain either and/or property"}}const qS=(r,e)=>r.hash===e.opHash,FS=(r,e)=>{switch(r.kind){case"attestation":return"metadata"in r&&r.metadata.delegate===e.source;case"activate_account":return"metadata"in r&&r.pkh===e.source;default:return"source"in r&&r.source===e.source}},GS=(r,e)=>"kind"in r&&r.kind===e.kind,KS=(r,e)=>{switch(r.kind){case"delegation":return r.delegate===e.destination;case"origination":if("metadata"in r&&"operation_result"in r.metadata&&"originated_contracts"in r.metadata.operation_result&&Array.isArray(r.metadata.operation_result.originated_contracts))return r.metadata.operation_result.originated_contracts.some(t=>t===e.destination);break;case"transaction":return r.destination===e.destination;default:return!1}},$S=(r,e,t,i)=>!(r.kind!=="event"||t&&r.tag!==t||e&&r.source!==e||i&&r.result.status!=="applied"),VS=(r,e)=>"opHash"in e?qS(r,e):"source"in e?FS(r,e):"kind"in e?GS(r,e):"destination"in e?KS(r,e):!1,WS=(r,e)=>{if(Array.isArray(e.and))return e.and.every(t=>Ll(r,t));if(Array.isArray(e.or))return e.or.some(t=>Ll(r,t));throw new US(e)},Ll=(r,e)=>{const t=[];return Array.isArray(e)?t.push(...e):t.push(e),t.every(i=>"and"in i||"or"in i?WS(r,i):VS(r,i))};class ho{constructor(e,t=!1,i=mg()){this.shouldRetry=t,this.operatorFunction=i,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new Ho,e.pipe(Ay(this.completed$),Pa(n=>{this.call(this.messageListeners,n)},n=>{this.call(this.errorListeners,n)},()=>{this.call(this.closeListeners)}),this.shouldRetry?i:Pa(),is(()=>by)).subscribe()}call(e,t){for(const i of e)try{i(t)}catch(n){console.error(n)}}remove(e,t){const i=e.indexOf(t);i!==-1&&e.splice(i,1)}on(e,t){switch(e){case"data":this.messageListeners.push(t);break;case"error":this.errorListeners.push(t);break;case"close":this.closeListeners.push(t);break;default:throw new T0(e)}}off(e,t){switch(e){case"data":this.remove(this.messageListeners,t);break;case"error":this.remove(this.errorListeners,t);break;case"close":this.remove(this.closeListeners,t);break;default:throw new T0(e)}}close(){this.completed$.next()}}const ZS={shouldObservableSubscriptionRetry:!1,observableSubscriptionRetryFunction:mg()},JS=r=>$i(r.rpc.getBlock()).pipe(ri()),YS=r=>Do(e=>new it(t=>{for(const i of e.operations)for(const n of i)for(const o of n.contents)Ll(Object.assign({hash:n.hash},o),r)&&t.next(Object.assign({hash:n.hash},o));t.complete()})),XS=r=>Do(e=>new it(t=>{for(const i of e.operations)for(const n of i)for(const o of n.contents){const s=o.metadata.internal_operation_results;if(s)for(const c of s)$S(c,r?.address,r?.tag,r?.excludeFailedOperations)&&t.next(Object.assign({opHash:n.hash,blockHash:e.hash,level:e.header.level},c))}t.complete()}));class Za{constructor(e,t={}){this.context=e,this._config$=new es(Object.assign(Object.assign({},ZS),t)),this.timer$=this._config$.pipe(ji(i=>i?.pollingIntervalMilliseconds),si(i=>i?al(0,i):$i(this.getConfirmationPollingInterval()).pipe(si(n=>al(0,n))))),this.newBlock$=this.timer$.pipe(si(()=>JS(this.context)),wy("hash"),Ao({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0}))}get config(){return this._config$.getValue()}getConfirmationPollingInterval(){return G(this,void 0,void 0,function*(){if(!this.config.pollingIntervalMilliseconds)try{const i=yield this.context.readProvider.getProtocolConstants("head"),o=(i.minimal_block_delay?i.minimal_block_delay.multipliedBy(1e3):new te(5e3)).dividedBy(3);this.config.pollingIntervalMilliseconds=o.toNumber()===0?700:Math.max(o.toNumber(),700)}catch{return 5e3}return this.config.pollingIntervalMilliseconds})}subscribeBlock(e){return new ho(this.newBlock$,this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribe(e){return new ho(this.newBlock$.pipe(ji(t=>t?.hash)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeOperation(e){return new ho(this.newBlock$.pipe(YS(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeEvent(e){return new ho(this.newBlock$.pipe(XS(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}}class Zf{constructor(e){this.context=e}getNextProto(){return G(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}forge(e){return G(this,arguments,void 0,function*({branch:t,contents:i}){return new rb(yield this.getNextProto()).forge({branch:t,contents:i})})}}const Xb={defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180};class Lo{constructor(e,t=new Al,i,n=new es(Object.assign({},Xb)),o,a,s,c,u,p,f,l){this._rpc=e,this._signer=t,this._proto=i,this._config=n,this.providerDecorator=[],this.tz=new NS(this),this.estimate=new Bb(this),this.contract=new DS(this,this.estimate),this.prepare=new eo(this),this.batch=new zS(this,this.estimate),this.wallet=new Gf(this),this.withExtensions=()=>{let d=this.clone();return this.providerDecorator.forEach(g=>{d=g(d)}),d},typeof this._rpc=="string"?this._rpcClient=new ma(this._rpc):this._rpcClient=this._rpc,this._forger=o||new Zf(this),this._injector=a||new zf(this),this.operationFactory=new vS(this),this._walletProvider=c||new Kf(this),this._parser=u||new $f(this),this._packer=s||new Vf(this),this._globalConstantsProvider=p||new Yb,this._readProvider=f||new Wf(this._rpcClient),this._stream=l||new Za(this)}get config(){return this._config.getValue()}set config(e){this._config.next(Object.assign({},e))}setPartialConfig(e){this._config.next(Object.assign(Object.assign({},this._config.getValue()),e))}get rpc(){return this._rpcClient}set rpc(e){this._rpcClient=e}get injector(){return this._injector}set injector(e){this._injector=e}get forger(){return this._forger}set forger(e){this._forger=e}get signer(){return this._signer}set signer(e){this._signer=e}get walletProvider(){return this._walletProvider}set walletProvider(e){this._walletProvider=e}set proto(e){this._proto=e}get proto(){return this._proto}get parser(){return this._parser}set parser(e){this._parser=e}get packer(){return this._packer}set packer(e){this._packer=e}get globalConstantsProvider(){return this._globalConstantsProvider}set globalConstantsProvider(e){this._globalConstantsProvider=e}get readProvider(){return this._readProvider}set readProvider(e){this._readProvider=e}get stream(){return this._stream}set stream(e){this._stream=e}isAnyProtocolActive(){return G(this,arguments,void 0,function*(e=[]){if(this._proto)return e.includes(this._proto);{const t=yield this.readProvider.getNextProtocol("head");return e.includes(t)}})}isAnySignerConfigured(){return!(this.signer instanceof Al)}clone(){return new Lo(this.rpc,this.signer,this.proto,this._config,this.forger,this._injector,this.packer,this._walletProvider,this._parser,this._globalConstantsProvider,this._readProvider,this._stream)}registerProviderDecorator(e){this.providerDecorator.push(e)}}const QS={commitHash:"d809b5118dbca5e61edb8228a83b4831be32903b",version:"24.0.0"};class eA extends qe{constructor(e){super(),this.results=e,this.name="ForgingMismatchError",this.message="Forging mismatch error"}}class k0 extends Xa{constructor(){super(),this.name="UnspecifiedForgerError",this.message="No forger has been configured. Please configure new CompositeForger([rpcForger, localForger]) with your TezosToolkit instance."}}class tA{constructor(e){if(this.forgers=e,e.length===0)throw new k0}forge(e){return G(this,arguments,void 0,function*({branch:t,contents:i}){const n=yield Promise.all(this.forgers.map(a=>a.forge({branch:t,contents:i})));if(n.length===0)throw new k0;let o=n.pop();for(;n.length;){const a=n.pop();if(a!==o)throw new eA([o,a]);o=a}return o})}}class rA{constructor(e){this.context=e}forge({branch:e,contents:t}){return this.context.rpc.forgeOperations({branch:e,contents:t})}}class iA{prepareCodeOrigination(e){return G(this,void 0,void 0,function*(){return e})}}class nA{packData(e){return G(this,void 0,void 0,function*(){const{bytes:t}=l2(e.data,e.type);return{packed:t}})}}class oA{constructor(){this._globalConstantsLibrary={}}loadGlobalConstant(e){for(const t in e)Object.assign(this._globalConstantsLibrary,{[t]:e[t]})}getGlobalConstantByHash(e){return G(this,void 0,void 0,function*(){const t=this._globalConstantsLibrary[e];if(!t)throw new Zb(e);return t})}}function aA(r,e,t,i,n){return G(this,void 0,void 0,function*(){if(e&&t&&i&&n){const o=jn.fromFundraiser(e,t,i);r.setProvider({signer:o});const a=yield o.publicKeyHash();let s;try{s=yield r.tz.activate(a,n)}catch(c){if(!(c&&c.body&&/Invalid activation/.test(c.body)))throw c}s&&(yield s.confirmation())}else{const o=yield jn.fromSecretKey(e,t);r.setProvider({signer:o})}})}class sA{constructor(e){this._rpc=e,this._options={},this.format=Cl,typeof this._rpc=="string"?this._rpcClient=new ma(this._rpc):this._rpcClient=this._rpc,this._context=new Lo(e),this._wallet=new Gf(this._context),this.setProvider({rpc:this._rpcClient})}setProvider({rpc:e,stream:t,signer:i,protocol:n,config:o,forger:a,wallet:s,packer:c,globalConstantsProvider:u,readProvider:p,parserProvider:f,injectorProvider:l}){this.setRpcProvider(e),this.setStreamProvider(t),this.setSignerProvider(i),this.setForgerProvider(a),this.setWalletProvider(s),this.setPackerProvider(c),this.setGlobalConstantsProvider(u),this.setReadProvider(p),this.setParserProvider(f),this.setInjectorProvider(l),this._context.proto=n,o&&this._context.setPartialConfig(o)}setSignerProvider(e){!this._options.signer&&typeof e>"u"?(this._context.signer=new Al,this._options.signer=e):typeof e<"u"&&(this._context.signer=e,this._options.signer=e)}setRpcProvider(e){typeof e=="string"?this._rpcClient=new ma(e):e===void 0||(this._rpcClient=e),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient}setForgerProvider(e){if(typeof e<"u")this._options.forger=e,this._context.forger=e;else if(this._options.forger===void 0){const t=this.getFactory(Zf)();this._options.forger=t,this._context.forger=t}}setStreamProvider(e){if(typeof e=="string"){const t=new Za(new Lo(new ma(e)));this._options.stream=t,this._context.stream=t}else if(typeof e<"u")this._options.stream=e,this._context.stream=e;else if(this._options.stream===void 0){const t=this.getFactory(Za)();this._options.stream=t,this._context.stream=t}}setWalletProvider(e){if(!this._options.wallet&&typeof e>"u"){const t=this.getFactory(Kf)();this._options.wallet=t,this._context.walletProvider=t}else typeof e<"u"&&(this._options.wallet=e,this._context.walletProvider=e)}setPackerProvider(e){if(!this._options.packer&&typeof e>"u"){const t=this.getFactory(Vf)();this._context.packer=t,this._options.packer=t}else typeof e<"u"&&(this._context.packer=e,this._options.packer=e)}setGlobalConstantsProvider(e){if(!this._options.globalConstantsProvider&&typeof e>"u"){const t=new Yb;this._context.globalConstantsProvider=t,this._options.globalConstantsProvider=t}else typeof e<"u"&&(this._context.globalConstantsProvider=e,this._options.globalConstantsProvider=e)}setReadProvider(e){const t=e||new Wf(this._context.rpc);this._options.readProvider=t,this._context.readProvider=t}setParserProvider(e){if(!this._options.parserProvider&&typeof e>"u"){const t=new $f(this._context);this._context.parser=t,this._options.parserProvider=t}else typeof e<"u"&&(this._context.parser=e,this._options.parserProvider=e)}setInjectorProvider(e){if(!this._options.injectorProvider&&typeof e>"u"){const t=new zf(this._context);this._context.injector=t,this._options.injectorProvider=t}else typeof e<"u"&&(this._context.injector=e,this._options.injectorProvider=e)}setFieldNumberingStrategy(e){Ue.fieldNumberingStrategy=e}get tz(){return this._context.tz}get contract(){return this._context.contract}get prepare(){return this._context.prepare}get wallet(){return this._wallet}get operation(){return this._context.operationFactory}get estimate(){return this._context.estimate}get stream(){return this._context.stream}get rpc(){return this._context.rpc}get signer(){return this._context.signer}get globalConstants(){return this._context.globalConstantsProvider}addExtension(e){Array.isArray(e)?e.forEach(t=>t.configureContext(this._context)):e.configureContext(this._context)}getFactory(e){return(...t)=>new e(this._context,...t)}getVersionInfo(){return QS}}const fA=Object.freeze(Object.defineProperty({__proto__:null,BallotOperation:Ub,BatchOperation:Mb,BigMapAbstraction:Lb,COST_PER_BYTE:sb,get ChainIds(){return Ol},CompositeForger:tA,Context:Lo,ContractAbstraction:qf,ContractMethodObject:Tb,ContractView:kb,DEFAULT_SMART_CONTRACT_METHOD_NAME:Wa,DefaultGlobalConstantsProvider:oA,DelegateOperation:Il,DelegationWalletOperation:hb,DrainDelegateOperation:qb,Estimate:tt,GlobalConstantNotFound:Zb,IncreasePaidStorageOperation:Db,InvalidBalanceError:xb,InvalidCodeParameter:Io,InvalidDelegationSource:vb,InvalidEstimateValueError:wa,InvalidInitParameter:Uf,InvalidParameterError:bb,InvalidViewSimulationContext:Tl,LegacyWalletProvider:Kf,MANAGER_LAMBDA:PS,MichelCodecPacker:nA,MichelCodecParser:$f,MichelsonMap:Yt,NoopParser:iA,ORIGINATION_SIZE:oS,ObservableSubscription:ho,get OpKind(){return V},Operation:Mt,OperationBatch:Ff,OriginationOperation:jb,OriginationParameterError:Eb,OriginationWalletOperation:db,PollingSubscribeProvider:Za,PrepareProvider:eo,ProposalsOperation:Fb,get Protocols(){return He},REVEAL_STORAGE_LIMIT:Rl,RPCEstimateProvider:Bb,RegisterGlobalConstantOperation:Cb,RegisterGlobalConstantWalletOperation:mb,RevealEstimateError:Nb,RevealOperation:zb,RevealOperationError:wb,RpcForger:rA,RpcInjector:zf,RpcPacker:Vf,RpcReadAdapter:Wf,SaplingStateAbstraction:Ib,SmartRollupAddMessagesOperation:$b,SmartRollupOriginateOperation:Vb,TaquitoLocalForger:Zf,TezosOperationError:Df,TezosPreapplyFailureError:ub,TezosToolkit:sA,Token:Ue,TransactionOperation:fo,TransactionWalletOperation:pb,TransferTicketOperation:Hb,TransferTicketWalletOperation:gb,UnconfiguredGlobalConstantsProviderError:Jb,UnitValue:gl,UpdateCompanionKeyOperation:Kb,UpdateConsensusKeyOperation:Gb,VIEW_LAMBDA:IS,ViewSimulationError:yb,Wallet:Gf,WalletOperation:di,WalletOperationBatch:Wb,attachKind:Ar,compose:LS,createActivationOperation:Sb,createBallotOperation:Ob,createDrainDelegateOperation:Rb,createIncreasePaidStorageOperation:xs,createOriginationOperation:ys,createProposalsOperation:Pb,createRegisterDelegateOperation:Ab,createRegisterGlobalConstantOperation:ws,createRevealOperation:Ea,createSetDelegateOperation:_s,createSmartRollupAddMessagesOperation:Rs,createSmartRollupExecuteOutboxMessageOperation:Ps,createSmartRollupOriginateOperation:Os,createTransferOperation:fn,createTransferTicketOperation:Es,createUpdateCompanionKeyOperation:As,createUpdateConsensusKeyOperation:Ss,defaultConfigConfirmation:Xb,findWithKind:Ka,getRevealFee:Pl,getRevealFeeInternal:cb,getRevealGasLimit:Va,hasMetadata:vs,hasMetadataWithInternalOperationResult:ab,hasMetadataWithResult:En,importKey:aA,isKind:nb,isOpRequireReveal:Hf,isOpWithFee:$a,isOpWithGasBuffer:ob,isSourceOp:nS,protocols:aS,smartContractAbstractionSemantic:kl,validateAndExtractFailwith:_b},Symbol.toStringTag,{value:"Module"}));export{Lb as B,wv as H,V as O,In as P,Eo as S,yb as V,dn as a,Es as b,fn as c,xs as d,ys as e,_s as f,ws as g,_r as h,Za as i,P_ as j,mm as k,lA as l,Go as m,v_ as n,Fo as o,pm as p,k_ as q,nm as r,T_ as s,ar as t,Ji as u,_b as v,fA as w};
