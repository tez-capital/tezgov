import{f as S,a as y,c as Ve,t as ge}from"./DljAxy3Z.js";import{p as ke,u as be,a5 as D,a3 as pe,m as s,c as r,r as o,s as i,am as Ne,a2 as x,t as k,a as xe,f as ue}from"./BlY1XL9l.js";import{s as f,d as Be}from"./CcIOLF5O.js";import{p as Ue,i as te}from"./D8UL9bPb.js";import{e as Ee,i as Te}from"./DT9dCdGd.js";import{B as $,b as je}from"./BtqFYaCn.js";import{g as m,a as oe,h as re,S as De,E as Ie,A as qe}from"./CNTQov_x.js";import{S as Ce,e as $e,B as Me,a as Fe}from"./g-yTiGzY.js";import{r as He,a as We}from"./Ch-Ke4Ks.js";import{n as Ge}from"./DJPHATO1.js";import{I as ye}from"./Bvy74EuI.js";import{O as Je}from"./tlcAfby8.js";import{b as _e,a as Qe}from"./DftKOtMP.js";import{T as Pe}from"./dvkIo9Yu.js";import{w as Xe}from"./B9UkGA8o.js";import{f as Ye}from"./CShHGJ4Y.js";const Ze=()=>"Proposal can not be empty",Ke=()=>"La propuesta no puede estar vacía",et=()=>"Návrh nesmí být prázdný",tt=()=>"Ehdotus ei voi olla tyhjä",rt=()=>"提案を空にすることはできません",ot=()=>"Propunerea nu poate fi goală",nt=()=>"Пропозиція не може бути порожньою",st=()=>"La proposition ne peut être vide",at=(n={},t={})=>{const e=t.locale??m();return e==="en"?Ze():e==="es"?Ke():e==="cs"?et():e==="fi"?tt():e==="ja"?rt():e==="ro"?ot():e==="ua"?nt():st()},it=()=>"Proposal has to start with 'P'",ut=()=>"La propuesta debe comenzar con 'P'",pt=()=>"Návrh musí začínat znakem 'P'",_t=()=>"Ehdotuksen täytyy alkaa merkillä 'P'",ct=()=>"提案は「P」で始める必要があります",lt=()=>"Propunerea trebuie să înceapă cu 'P'",vt=()=>"Пропозиція повинна починатися з 'P'",dt=()=>"Le hash de la proposition doit démarrer par 'P'",ft=(n={},t={})=>{const e=t.locale??m();return e==="en"?it():e==="es"?ut():e==="cs"?pt():e==="fi"?_t():e==="ja"?ct():e==="ro"?lt():e==="ua"?vt():dt()},mt=()=>"New proposal",ht=()=>"Nueva propuesta",gt=()=>"Nový návrh",bt=()=>"Uusi ehdotus",jt=()=>"新しい提案",yt=()=>"Propunere nouă",Pt=()=>"Нова пропозиція",wt=()=>"Nouvelle proposition",ce=(n={},t={})=>{const e=t.locale??m();return e==="en"?mt():e==="es"?ht():e==="cs"?gt():e==="fi"?bt():e==="ja"?jt():e==="ro"?yt():e==="ua"?Pt():wt()},kt=()=>"Statement",xt=()=>"Declaración",Ot=()=>"Prohlášení",At=()=>"Lausunto",Rt=()=>"声明",St=()=>"Declarație",zt=()=>"Заява",Lt=()=>"Déclaration",Vt=(n={},t={})=>{const e=t.locale??m();return e==="en"?kt():e==="es"?xt():e==="cs"?Ot():e==="fi"?At():e==="ja"?Rt():e==="ro"?St():e==="ua"?zt():Lt()},Nt=()=>"If you want to make a statement, write it in the 'statement' field; this will generate a proposal hash for you.",Bt=()=>"Si desea hacer una declaración, escríbala en el campo 'declaración'; esto generará un hash de propuesta para usted.",Ut=()=>"Pokud chcete vytvořit prohlášení, napište jej do pole 'prohlášení'; tím vygenerujete hash návrhu.",Et=()=>"Jos haluat tehdä lausunnon, kirjoita se 'lausunto'-kenttään; tämä luo ehdotuksen hashin.",Tt=()=>"声明を作成したい場合は「声明」欄に記入してください。これにより提案ハッシュが生成されます。",Dt=()=>"Dacă doriți să faceți o declarație, scrieți-o în câmpul 'declarație'; acest lucru va genera un hash pentru propunere.",It=()=>"Якщо ви хочете зробити заяву, напишіть її у полі 'Заява'; це згенерує хеш пропозиції для вас.",qt=()=>`Si vous souhaitez faire une déclaration, veuillez l'écrire dans le champ "Déclaration". Cela générera un hash de proposition pour vous.`,Ct=(n={},t={})=>{const e=t.locale??m();return e==="en"?Nt():e==="es"?Bt():e==="cs"?Ut():e==="fi"?Et():e==="ja"?Tt():e==="ro"?Dt():e==="ua"?It():qt()},$t=()=>"To inject a proper protocol upgrade proposal, write the hash in the 'new proposal' field and leave the 'statement' blank.",Mt=()=>"Para inyectar una propuesta adecuada de actualización del protocolo, escriba el hash en el campo 'nueva propuesta' y deje en blanco la 'declaración'.",Ft=()=>"Pro vložení řádného návrhu na upgrade protokolu napište hash do pole 'nový návrh' a pole 'prohlášení' nechte prázdné.",Ht=()=>"Syötä protokollan päivitysehdotuksen hash 'uusi ehdotus'-kenttään ja jätä 'lausunto' tyhjäksi.",Wt=()=>"正規のプロトコルアップグレード提案を注入する場合は、「新しい提案」欄にハッシュを記入し、「声明」は空欄のままにしてください。",Gt=()=>"Pentru a introduce o propunere reală de actualizare a protocolului, scrieți hash-ul în câmpul 'propunere nouă' și lăsați gol câmpul 'declarație'.",Jt=()=>"Щоб внести реальну пропозицію оновлення протоколу, напишіть хеш у полі 'Нова пропозиція', а поле 'Заява' залиште порожнім.",Qt=()=>'Pour injecter une proposition de mise à jour de protocole, écrivez le hash dans le champ "Nouvelle proposition" et laissez le champ "Déclaration" vide.',Xt=(n={},t={})=>{const e=t.locale??m();return e==="en"?$t():e==="es"?Mt():e==="cs"?Ft():e==="fi"?Ht():e==="ja"?Wt():e==="ro"?Gt():e==="ua"?Jt():Qt()},Yt=()=>"* Please refrain from using this feature for spamming.",Zt=()=>"* Por favor absténgase de usar esta función para spam.",Kt=()=>"* Prosíme, nezneužívejte tuto funkci ke spamu.",er=()=>"* Älä käytä tätä ominaisuutta roskapostin lähettämiseen.",tr=()=>"※この機能をスパム目的で使用しないでください。",rr=()=>"* Vă rugăm să nu folosiți această funcție pentru spam.",or=()=>"* Будь ласка, не використовуйте цю функцію для спаму.",nr=()=>"* Merci de ne pas utiliser cette fonction à des fins de spam.",sr=(n={},t={})=>{const e=t.locale??m();return e==="en"?Yt():e==="es"?Zt():e==="cs"?Kt():e==="fi"?er():e==="ja"?tr():e==="ro"?rr():e==="ua"?or():nr()},ar=()=>"Remember that you can propose or vote for a proposal only",ir=()=>"Recuerde que solo puede proponer o votar una propuesta",ur=()=>"Pamatujte, že můžete navrhovat nebo hlasovat pouze",pr=()=>"Muista, että voit ehdottaa tai äänestää vain",_r=()=>"提案または投票できるのは",cr=()=>"Rețineți că puteți propune sau vota o singură propunere",lr=()=>"Пам'ятайте, що ви можете пропонувати або голосувати за пропозицію лише",vr=()=>"Rappelez-vous que vous ne pouvez proposer ou voter que des propositions",dr=(n={},t={})=>{const e=t.locale??m();return e==="en"?ar():e==="es"?ir():e==="cs"?ur():e==="fi"?pr():e==="ja"?_r():e==="ro"?cr():e==="ua"?lr():vr()},fr=()=>"10 times per period",mr=()=>"10 veces por período",hr=()=>"10 krát za období",gr=()=>"10 kertaa kaudessa",br=()=>"1期間につき10回までです",jr=()=>"de 10 ori pe perioadă",yr=()=>"10 разів за період",Pr=()=>"10 fois par période",wr=(n={},t={})=>{const e=t.locale??m();return e==="en"?fr():e==="es"?mr():e==="cs"?hr():e==="fi"?gr():e==="ja"?br():e==="ro"?jr():e==="ua"?yr():Pr()},kr=()=>"You can provide proposal hash",xr=()=>"Puede proporcionar el hash de la propuesta",Or=()=>"Můžete zadat hash návrhu",Ar=()=>"Voit antaa ehdotuksen hashin",Rr=()=>"提案ハッシュを提供できます",Sr=()=>"Puteți furniza hash-ul propunerii",zr=()=>"Ви можете надати хеш пропозиції",Lr=()=>"Vous pouvez indiquer un hash de proposition",Vr=(n={},t={})=>{const e=t.locale??m();return e==="en"?kr():e==="es"?xr():e==="cs"?Or():e==="fi"?Ar():e==="ja"?Rr():e==="ro"?Sr():e==="ua"?zr():Lr()},Nr=()=>"inject",Br=()=>"inyectar",Ur=()=>"vložit",Er=()=>"lisää",Tr=()=>"注入",Dr=()=>"introduceți",Ir=()=>"вставити",qr=()=>"injecter",Cr=(n={},t={})=>{const e=t.locale??m();return e==="en"?Nr():e==="es"?Br():e==="cs"?Ur():e==="fi"?Er():e==="ja"?Tr():e==="ro"?Dr():e==="ua"?Ir():qr()},$r=()=>"upvotes",Mr=()=>"votos a favor",Fr=()=>"hlasy pro",Hr=()=>"puoltoäänet",Wr=()=>"アップボート",Gr=()=>"voturi pentru",Jr=()=>"голоси 'за'",Qr=()=>"votes pour",Xr=(n={},t={})=>{const e=t.locale??m();return e==="en"?$r():e==="es"?Mr():e==="cs"?Fr():e==="fi"?Hr():e==="ja"?Wr():e==="ro"?Gr():e==="ua"?Jr():Qr()},Yr=()=>"UPVOTED",Zr=()=>"VOTADO",Kr=()=>"HLASOVÁNO",eo=()=>"PUOLLETTU",to=()=>"アップボート済み",ro=()=>"VOTAT",oo=()=>"ПРОГОЛОСОВАНО 'ЗА'",no=()=>"VOTEE POUR",so=(n={},t={})=>{const e=t.locale??m();return e==="en"?Yr():e==="es"?Zr():e==="cs"?Kr():e==="fi"?eo():e==="ja"?to():e==="ro"?ro():e==="ua"?oo():no()},ao=()=>"UPVOTE",io=()=>"VOTAR A FAVOR",uo=()=>"HLASOVAT PRO",po=()=>"PUOLLA",_o=()=>"アップボート",co=()=>"VOTEAZĂ",lo=()=>"ПРОГОЛОСУВАТИ 'ЗА'",vo=()=>"VOTEE CONTRE",fo=(n={},t={})=>{const e=t.locale??m();return e==="en"?ao():e==="es"?io():e==="cs"?uo():e==="fi"?po():e==="ja"?_o():e==="ro"?co():e==="ua"?lo():vo()},le="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",mo=34,ho=51,go=n=>{let t=0n;for(const e of n)t*=58n,t+=BigInt(le.indexOf(e));return t},we=n=>{const t=[];for(;n>0n;)t.push(Number(n%256n)),n=n/256n;return t.reverse()},bo=n=>{const t=mo,e=go(n),_=Qe.decode(n).length+1,c=BigInt(8*(t-_+4)),z=ho-n.length;let h=e*58n**BigInt(z);h=h>>c,h+=h===h>>c<<c?0n:1n;let L=(e+1n)*58n**BigInt(z)-(1n<<c)+1n;if(L=L>>c,L>=h){const d=Uint8Array.from(Array.from({...we(h),length:t}).map(g=>g===void 0?0:g)),V=_e.encode(d);if(!V.startsWith(n)||V.length!==z+n.length)return null;const N=Uint8Array.from(Array.from({...we(h),length:t}).map(g=>g===void 0?255:g)),O=_e.encode(N);return!O.startsWith(n)||O.length!==z+n.length?null:d}return null},jo=n=>{let t="Pt1";for(const _ of n){if(le.includes(_)){t+=_;continue}if(le.includes(_.toLowerCase())){t+=_.toLowerCase();continue}}const e=bo(t);return e===null?[!1,"Can not generate protocol hash from provided message"]:[!0,_e.encode(new Uint8Array(e))]};var yo=S('<div class="center svelte-tptxau"><div class="content sl-card svelte-tptxau"><b class="title svelte-tptxau"> </b> <div></div> <div class="text"> </div> <div class="text"> </div> <div class="text"><b> </b></div> <div class="text"> <b> </b>.</div> <div></div> <!> <!> <div class="controls svelte-tptxau"><!> <div><!></div></div></div></div>');function Po(n,t){ke(t,!0);let e=Ue(t,"open",15,!1),_=pe(""),c=pe("");async function z(){t.onnewproposal(s(c)),e(!1)}const h=[d=>!!d||at(),d=>d.startsWith("P")||ft()];be(()=>{e()&&(D(_,""),D(c,""))}),be(()=>{if(s(_)){const[d,V]=jo(s(_));d&&D(c,V,!0)}});let L=x(()=>h.every(d=>d(s(c))===!0));Je(n,{get open(){return e()},persistent:!0,children:(d,V)=>{var N=yo(),O=r(N),g=r(O),ne=r(g,!0);o(g);var M=i(g,4),se=r(M,!0);o(M);var F=i(M,2),ae=r(F,!0);o(F);var H=i(F,2),a=r(H),p=r(a,!0);o(a),o(H);var P=i(H,2),B=r(P),l=i(B),Y=r(l,!0);o(l),Ne(),o(P);var E=i(P,4);{let A=x(()=>Vt());ye(E,{get label(){return s(A)},get value(){return s(_)},set value(T){D(_,T,!0)}})}var W=i(E,2);{let A=x(()=>ce()),T=x(()=>Vr());ye(W,{get label(){return s(A)},get hint(){return s(T)},get rules(){return h},get value(){return s(c)},set value(J){D(c,J,!0)}})}var I=i(W,2),q=r(I);$(q,{label:"Cancel",onclick:()=>e(!1)});var G=i(q,2);let C;var Z=r(G);{let A=x(()=>Cr());$(Z,{get label(){return s(A)},onclick:z})}o(G),o(I),o(O),o(N),k((A,T,J,Q,K,ee)=>{f(ne,A),f(se,T),f(ae,J),f(p,Q),f(B,`${K??""} `),f(Y,ee),C=oe(G,1,"",null,C,{disabled:!s(L)})},[()=>ce(),()=>Ct(),()=>Xt(),()=>sr(),()=>dr(),()=>wr()]),y(d,N)},$$slots:{default:!0}}),xe()}var wo=S('<div class="no-proposals svelte-13nge0n"> </div>'),ko=S('<div class="button-content svelte-13nge0n"><div class="label svelte-13nge0n"> </div> <div class="icon svelte-13nge0n"><!></div></div>'),xo=S('<div class="button-content svelte-13nge0n"><div class="label svelte-13nge0n"> </div> <div class="icon svelte-13nge0n"><!></div></div>'),Oo=S('<div class="button-content upvoted svelte-13nge0n"><div class="label svelte-13nge0n"> </div> <div class="icon svelte-13nge0n"><!></div></div>'),Ao=S('<div class="button-content svelte-13nge0n"><div class="label svelte-13nge0n"> </div> <div class="icon svelte-13nge0n"><!></div></div>'),Ro=S('<div><div class="title svelte-13nge0n"><button class="unstyle-button"> </button></div> <div class="upvotes svelte-13nge0n"> <!></div> <div class="upvote-bar svelte-13nge0n"><svg width="100%" height="15"><rect width="100%" y="5" height="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--progress-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--progress-color)" rx="2" ry="2"></rect></svg></div> <div class="vote-section svelte-13nge0n"><!> <!> <div><!></div></div></div> <div class="separator svelte-13nge0n"><!></div>',1),So=S("<div><!></div>"),zo=S('<div class="proposal-period-wrap svelte-13nge0n"><div class="proposal-period svelte-13nge0n"><!></div> <!></div> <!>',1);function Go(n,t){ke(t,!0);let e=x(()=>t.session.account),_=x(()=>s(e).id===t.session.account.delegate?.pkh),c=pe(!1);function z(a){window.open(`${Ie}/${a}`,"_blank")}function h(a){window.open(`${qe}/${a}/${t.period.index}`,"_blank")}async function L(a){await t.onNewOperation(async()=>await t.session.upvote(a,t.period.index))}const d=x(()=>t.period.voters.reduce((a,p)=>a+BigInt(p.votingPower.toString()),0n));let V=x(()=>t.period.proposals.map(a=>{const p=Number(BigInt(a.upvotes.toString())*100000n/s(d))/1e3;return{...a,upvotes:a.upvotes,upvotesFormatted:Ye(a.upvotes.toString()),percentage:Math.round(p*100)/100,percentageString:`${p}%`,quorumReached:BigInt(a.upvotes.toString())>s(d)/100n*re}}));var N=zo(),O=ue(N),g=r(O),ne=r(g);{var M=a=>{var p=wo(),P=r(p,!0);o(p),k(B=>f(P,B),[()=>Ge()]),y(a,p)},se=a=>{var p=Ve(),P=ue(p);Ee(P,17,()=>s(V),Te,(B,l)=>{var Y=Ro(),E=ue(Y);let W;var I=r(E),q=r(I);q.__click=()=>Xe(s(l).proposal);var G=r(q,!0);o(q),o(I);var C=i(I,2),Z=r(C),A=i(Z);{var T=u=>{var b=ge();k(v=>f(b,`(${re??""}% ${v??""})`),[()=>He()]),y(u,b)},J=u=>{var b=ge();k(v=>f(b,`(${v??""} ${re??""}%)`),[()=>We()]),y(u,b)};te(A,u=>{s(l).quorumReached?u(T):u(J,!1)})}o(C);var Q=i(C,2),K=r(Q),ee=i(r(K)),Oe=i(ee);o(K),o(Q);var ve=i(Q,2),de=r(ve);$(de,{onclick:()=>z(s(l).proposal),children:(u,b)=>{var v=ko(),j=r(v),w=r(j,!0);o(j);var R=i(j,2),U=r(R);Ce(U),o(R),o(v),k(X=>f(w,X),[()=>$e()]),y(u,v)},$$slots:{default:!0}});var fe=i(de,2);$(fe,{onclick:()=>h(s(l).proposal),children:(u,b)=>{var v=xo(),j=r(v),w=r(j,!0);o(j);var R=i(j,2),U=r(R);Me(U),o(R),o(v),k(X=>f(w,X),[()=>Fe()]),y(u,v)},$$slots:{default:!0}});var ie=i(fe,2);let me;var Ae=r(ie);{var Re=u=>{var b=Oo(),v=r(b),j=r(v,!0);o(v);var w=i(v,2),R=r(w);Pe(R),o(w),o(b),k(U=>f(j,U),[()=>so()]),y(u,b)},Se=u=>{$(u,{class:"upvote",onclick:()=>L([s(l).proposal]),children:(b,v)=>{var j=Ao(),w=r(j),R=r(w,!0);o(w);var U=i(w,2),X=r(U);Pe(X),o(U),o(j),k(Le=>f(R,Le),[()=>fo()]),y(b,j)},$$slots:{default:!0}})};te(Ae,u=>{t.period.votes&&t.period.votes[s(l).proposal].includes(s(e).delegate?.pkh??"")?u(Re):u(Se,!1)})}o(ie),o(ve),o(E);var he=i(E,2),ze=r(he);De(ze),o(he),k(u=>{W=oe(E,1,"proposal svelte-13nge0n",null,W,{success:s(l).quorumReached}),f(G,s(l).proposal),f(Z,`${s(l).upvotesFormatted??""}
						${u??""} ~ ${s(l).percentage??""}% `),je(ee,"width",s(l).percentageString),je(Oe,"x",`${re}%`),me=oe(ie,1,"upvote svelte-13nge0n",null,me,{disabled:!s(_)})},[()=>Xr()]),y(B,Y)}),y(a,p)};te(ne,a=>{s(V).length===0?a(M):a(se,!1)})}o(g);var F=i(g,2);{var ae=a=>{var p=So();let P;var B=r(p);{let l=x(()=>ce());$(B,{get label(){return s(l)},onclick:()=>D(c,!0)})}o(p),k(()=>P=oe(p,1,"new-proposal svelte-13nge0n",null,P,{disabled:!s(_)})),y(a,p)};te(F,a=>{s(_)&&a(ae)})}o(O);var H=i(O,2);Po(H,{onnewproposal:a=>L([a]),get open(){return s(c)},set open(a){D(c,a,!0)}}),y(n,N),xe()}Be(["click"]);export{Go as default};
