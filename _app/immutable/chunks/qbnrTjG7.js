import"./CWj6FrbW.js";import{p as ge,f as P,d as r,r as e,s,m as i,a3 as b,t as f,b as c,c as fe,al as w,a as me}from"./C-S9Tcds.js";import{s as d,d as ye}from"./DwdxVzkQ.js";import{i as q}from"./BOcg6rm_.js";import{B as E,s as N}from"./CNZpNcpS.js";import{g as L,S as Ar,a as Er,P as Sr,E as be,A as pe}from"./6JxTeoFN.js";import{S as je,e as he,B as xe,a as ke}from"./g3SvtI7y.js";import{T as Or,F as Tr,n as Lr,p as Mr,y as Ur,s as we}from"./CeepirVv.js";import{r as Vr,a as Yr}from"./DgSb12wf.js";import{T as Cr}from"./BMX1muvm.js";import{w as Pe}from"./B9UkGA8o.js";import{s as qe}from"./BL1FD6PC.js";const Be=()=>"You voted",Re=()=>"Usted votó",Ie=()=>"Hlasovali jste",Ne=()=>"Äänestit",Ae=()=>"あなたは投票しました",Ee=()=>"Ați votat",Se=()=>"Ви проголосували",Oe=(_={},t={})=>{const o=t.locale??L();return o==="en"?Be():o==="es"?Re():o==="cs"?Ie():o==="fi"?Ne():o==="jp"?Ae():o==="ro"?Ee():Se()},Te=()=>"quorum",Le=()=>"quórum",Me=()=>"kvorum",Ue=()=>"päätösvaltaisuus",Ve=()=>"定足数",Ye=()=>"cvorum",Ce=()=>"кворум",Fe=(_={},t={})=>{const o=t.locale??L();return o==="en"?Te():o==="es"?Le():o==="cs"?Me():o==="fi"?Ue():o==="jp"?Ve():o==="ro"?Ye():Ce()},Ge=()=>"supermajority",Qe=()=>"supermayoría",De=()=>"supervětšina",He=()=>"määräenemmistö",Je=()=>"特別多数",Xe=()=>"supermajoritate",ze=()=>"абсолютна більшість",Ke=(_={},t={})=>{const o=t.locale??L();return o==="en"?Ge():o==="es"?Qe():o==="cs"?De():o==="fi"?He():o==="jp"?Je():o==="ro"?Xe():ze()},We=()=>"Your baker voted",Ze=()=>"Tu baker ha votado",$e=()=>"Váš baker hlasoval",rt=()=>"Leipurisi äänesti",et=()=>"あなたのベーカーが投票しました",tt=()=>"Validatorul (baker) dvs. a votat",at=()=>"Ваш пекар проголосував",it=(_={},t={})=>{const o=t.locale??L();return o==="en"?We():o==="es"?Ze():o==="cs"?$e():o==="fi"?rt():o==="jp"?et():o==="ro"?tt():at()};function sr(_){return typeof _=="bigint"&&(_=_.toString()),!_||typeof _!="string"?"N/A":_==="0"?"0 ꜩ":`${_.substring(0,_.length-6)}.${_.substring(_.length-6)} ꜩ`}var st=(_,t)=>Pe(t.period.proposal),ot=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),vt=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),nt=P('<div class="existing-vote svelte-g0fgbj"><!> <div class="ballot svelte-g0fgbj"><!></div></div>'),dt=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),lt=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),ut=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),ct=P('<div class="nay svelte-g0fgbj"><!></div> <div class="pass svelte-g0fgbj"><!></div> <div class="yay svelte-g0fgbj"><!></div>',1),_t=P('<div class="note svelte-g0fgbj"> </div>'),gt=P('<div><div class="period svelte-g0fgbj"><div class="proposal svelte-g0fgbj"><div class="title svelte-g0fgbj"><button class="unstyle-button"> </button></div> <div class="vote-summary svelte-g0fgbj"><div class="nay value svelte-g0fgbj"> <div class="icon svelte-g0fgbj"><!></div></div> <div class="pass value svelte-g0fgbj"> <div class="icon svelte-g0fgbj"><!></div></div> <div class="yay value svelte-g0fgbj"> <div class="icon svelte-g0fgbj"><!></div></div></div> <div class="separator svelte-g0fgbj"><!></div> <div class="bar svelte-g0fgbj"><div class="bar-title svelte-g0fgbj"> </div> <div class="bar-description svelte-g0fgbj"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--quorum-color)" rx="2" ry="2"></rect></svg></div> <div class="bar svelte-g0fgbj"><div class="bar-title svelte-g0fgbj"> </div> <div class="bar-description svelte-g0fgbj"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--majority-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--majority-color)" rx="2" ry="2"></rect></svg></div> <!> <!> <div class="separator svelte-g0fgbj"><!></div> <div><!></div></div></div> <!></div>');function Bt(_,t){ge(t,!0);let o=b(()=>t.session.account),A=b(()=>t.period.voters.reduce((a,v)=>a+BigInt(v.votingPower.toString()),0n)),M=b(()=>t.period.summary.yay+t.period.summary.nay||1n),or=b(()=>Math.round(Number(BigInt(t.period.summary.yay)*100000n/i(A))/10)/100),S=b(()=>Math.round(Number(BigInt(t.period.summary.nay)*100000n/i(A))/10)/100),U=b(()=>Math.round(Number(BigInt(t.period.summary.pass)*100000n/i(A))/10)/100);const Fr=b(()=>i(M)+BigInt(t.period.summary.pass));let vr=b(()=>i(Fr)>i(A)*BigInt(t.period.quorum)/10000n),Gr=b(()=>Math.min(Number(BigInt(t.period.summary.yay+t.period.summary.nay+t.period.summary.pass)*100000n/i(A))/1e3,100)),V=Number(t.period.quorum)/100,nr=b(()=>BigInt(t.period.summary.yay)>=i(M)*Sr/100n),dr=b(()=>Math.round(Number(BigInt(t.period.summary.yay)*100000n/i(M))/10)/100),Y=b(()=>Number(Sr));function Qr(){window.open(`${be}/${t.period.proposal}`,"_blank")}function Dr(){window.open(`${pe}/${t.period.proposal}/${t.period.index}`,"_blank")}async function C(a){await t.onNewOperation(async()=>await t.session.vote(t.period.proposal,a,t.period.index))}let O=b(()=>t.period.ballots.find(a=>a.pkh===i(o).delegate?.pkh)),F=b(()=>qe(t.period.voters,a=>a.pkh===i(o).id));var T=gt();let lr;var G=r(T),ur=r(G),Q=r(ur),D=r(Q);D.__click=[st,t];var Hr=r(D,!0);e(D),e(Q);var H=s(Q,2),J=r(H),cr=r(J),_r=s(cr),Jr=r(_r);Or(Jr),e(_r),e(J);var X=s(J,2),gr=r(X),fr=s(gr),Xr=r(fr);Tr(Xr),e(fr),e(X);var mr=s(X,2),yr=r(mr),br=s(yr),zr=r(br);Cr(zr),e(br),e(mr),e(H);var z=s(H,2),Kr=r(z);Ar(Kr),e(z);var K=s(z,2),W=r(K),Wr=r(W,!0);e(W);var Z=s(W,2),pr=r(Z),Zr=s(pr);{var $r=a=>{var v=w();f(n=>d(v,`(${V}% ${n??""})`),[()=>Vr()]),c(a,v)},re=a=>{var v=w();f(n=>d(v,`(${n??""} ${V}%)`),[()=>Yr()]),c(a,v)};q(Zr,a=>{i(vr)?a($r):a(re,!1)})}e(Z);var jr=s(Z,2),hr=s(r(jr)),xr=s(hr),kr=s(xr),ee=s(kr);e(jr),e(K);var $=s(K,2),rr=r($),te=r(rr,!0);e(rr);var er=s(rr,2),wr=r(er),ae=s(wr);{var ie=a=>{var v=w();f(n=>d(v,`(${i(Y)??""}% ${n??""})`),[()=>Vr()]),c(a,v)},se=a=>{var v=w();f(n=>d(v,`(${n??""} ${i(Y)??""}%)`),[()=>Yr()]),c(a,v)};q(ae,a=>{i(nr)?a(ie):a(se,!1)})}e(er);var Pr=s(er,2),qr=s(r(Pr)),oe=s(qr);e(Pr),e($);var Br=s($,2);E(Br,{onclick:()=>Qr(),children:(a,v)=>{var n=ot(),m=r(n),j=r(m,!0);e(m);var p=s(m,2),h=r(p);je(h),e(p),e(n),f(B=>d(j,B),[()=>he()]),c(a,n)},$$slots:{default:!0}});var Rr=s(Br,2);E(Rr,{onclick:()=>Dr(),children:(a,v)=>{var n=vt(),m=r(n),j=r(m,!0);e(m);var p=s(m,2),h=r(p);xe(h),e(p),e(n),f(B=>d(j,B),[()=>ke()]),c(a,n)},$$slots:{default:!0}});var tr=s(Rr,2),ve=r(tr);Ar(ve),e(tr);var ar=s(tr,2);let Ir;var ne=r(ar);{var de=a=>{var v=nt(),n=r(v);{var m=g=>{var l=w();f(u=>d(l,`${u??""}:`),[()=>it()]),c(g,l)},j=g=>{var l=w();f(u=>d(l,u),[()=>Oe()]),c(g,l)};q(n,g=>{i(F)?g(m):g(j,!1)})}var p=s(n,2),h=r(p);{var B=g=>{var l=w();f(u=>d(l,u),[()=>Ur()]),c(g,l)},R=(g,l)=>{{var u=y=>{var x=w();f(k=>d(x,k),[()=>Lr()]),c(y,x)},I=(y,x)=>{{var k=ir=>{var Nr=w();f(_e=>d(Nr,_e),[()=>Mr()]),c(ir,Nr)};q(y,ir=>{i(O).ballot==="pass"&&ir(k)},x)}};q(g,y=>{i(O).ballot==="nay"?y(u):y(I,!1)},l)}};q(h,g=>{i(O).ballot==="yay"?g(B):g(R,!1)})}e(p),e(v),c(a,v)},le=a=>{var v=ct(),n=me(v),m=r(n);E(m,{onclick:()=>C("nay"),children:(R,g)=>{var l=dt(),u=r(l),I=r(u,!0);e(u);var y=s(u,2),x=r(y);Or(x),e(y),e(l),f(k=>d(I,k),[()=>Lr()]),c(R,l)},$$slots:{default:!0}}),e(n);var j=s(n,2),p=r(j);E(p,{onclick:()=>C("pass"),children:(R,g)=>{var l=lt(),u=r(l),I=r(u,!0);e(u);var y=s(u,2),x=r(y);Tr(x),e(y),e(l),f(k=>d(I,k),[()=>Mr()]),c(R,l)},$$slots:{default:!0}}),e(j);var h=s(j,2),B=r(h);E(B,{onclick:()=>C("yay"),children:(R,g)=>{var l=ut(),u=r(l),I=r(u,!0);e(u);var y=s(u,2),x=r(y);Cr(x),e(y),e(l),f(k=>d(I,k),[()=>Ur()]),c(R,l)},$$slots:{default:!0}}),e(h),c(a,v)};q(ne,a=>{i(O)?a(de):a(le,!1)})}e(ar),e(ur),e(G);var ue=s(G,2);{var ce=a=>{var v=_t(),n=r(v,!0);e(v),f(m=>d(n,m),[()=>we()]),c(a,v)};q(ue,a=>{i(F)||a(ce)})}e(T),f((a,v,n,m,j,p,h)=>{lr=Er(T,1,"period-wrap svelte-g0fgbj",null,lr,a),d(Hr,t.period.proposal),d(cr,`${v??""} (${i(S)??""} %) `),d(gr,`${n??""} (${i(U)??""} %) `),d(yr,`${m??""} (${i(or)??""} %) `),d(Wr,j),d(pr,`${i(Gr)??""} % `),N(hr,"width",`${i(S)+i(U)+i(or)}%`),N(xr,"width",`${i(S)+i(U)}%`),N(kr,"width",`${i(S)}%`),N(ee,"x",`${V}%`),d(te,p),d(wr,`${i(dr)??""} `),N(qr,"width",`${i(dr)}%`),N(oe,"x",`${i(Y)}%`),Ir=Er(ar,1,"vote-section svelte-g0fgbj",null,Ir,h)},[()=>({"quorum-reached":i(vr),"majority-reached":i(nr)}),()=>sr(t.period.summary.nay),()=>sr(t.period.summary.pass),()=>sr(t.period.summary.yay),()=>Fe(),()=>Ke(),()=>({disabled:!i(F)})]),c(_,T),fe()}ye(["click"]);export{Bt as default};
