import"./CWj6FrbW.js";import{p as fe,f as P,d as r,r as e,s as o,m as i,a3 as b,t as g,b as c,c as ge,al as w,a as me}from"./C-S9Tcds.js";import{s as d,d as ye}from"./DwdxVzkQ.js";import{i as q}from"./BOcg6rm_.js";import{B as E,s as N}from"./BINBZkZd.js";import{g as L,S as Ar,a as Er,P as Sr,E as be,A as je}from"./BujL7lQb.js";import{S as pe,e as he,B as xe,a as ke}from"./DqQOT3my.js";import{T as Or,F as Tr,n as Lr,p as Mr,y as Vr,s as we}from"./Ic_1AIOs.js";import{r as Ur,a as Yr}from"./DxxDCV8s.js";import{T as Cr}from"./BMX1muvm.js";import{w as Pe}from"./B9UkGA8o.js";import{s as qe}from"./BL1FD6PC.js";const Be=()=>"You voted",Re=()=>"Usted votó",Ie=()=>"Hlasovali jste",Ne=()=>"Äänestit",Ae=()=>"あなたは投票しました",Ee=()=>"Ați votat",Se=()=>"Ви проголосували",Oe=()=>"Vous avez voté",Te=(_={},t={})=>{const s=t.locale??L();return s==="en"?Be():s==="es"?Re():s==="cs"?Ie():s==="fi"?Ne():s==="ja"?Ae():s==="ro"?Ee():s==="ua"?Se():Oe()},Le=()=>"quorum",Me=()=>"quórum",Ve=()=>"kvorum",Ue=()=>"päätösvaltaisuus",Ye=()=>"定足数",Ce=()=>"cvorum",Fe=()=>"кворум",Ge=()=>"quorum",Qe=(_={},t={})=>{const s=t.locale??L();return s==="en"?Le():s==="es"?Me():s==="cs"?Ve():s==="fi"?Ue():s==="ja"?Ye():s==="ro"?Ce():s==="ua"?Fe():Ge()},ze=()=>"supermajority",De=()=>"supermayoría",He=()=>"supervětšina",Je=()=>"määräenemmistö",Xe=()=>"特別多数",Ke=()=>"supermajoritate",We=()=>"абсолютна більшість",Ze=()=>"super-majorité",$e=(_={},t={})=>{const s=t.locale??L();return s==="en"?ze():s==="es"?De():s==="cs"?He():s==="fi"?Je():s==="ja"?Xe():s==="ro"?Ke():s==="ua"?We():Ze()},rt=()=>"Your baker voted",et=()=>"Tu baker ha votado",tt=()=>"Váš baker hlasoval",at=()=>"Leipurisi äänesti",it=()=>"あなたのベーカーが投票しました",st=()=>"Validatorul (baker) dvs. a votat",ot=()=>"Ваш пекар проголосував",vt=()=>"Votre baker a voté",nt=(_={},t={})=>{const s=t.locale??L();return s==="en"?rt():s==="es"?et():s==="cs"?tt():s==="fi"?at():s==="ja"?it():s==="ro"?st():s==="ua"?ot():vt()};function sr(_){return typeof _=="bigint"&&(_=_.toString()),!_||typeof _!="string"?"N/A":_==="0"?"0 ꜩ":`${_.substring(0,_.length-6)}.${_.substring(_.length-6)} ꜩ`}var dt=(_,t)=>Pe(t.period.proposal),lt=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),ut=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),ct=P('<div class="existing-vote svelte-g0fgbj"><!> <div class="ballot svelte-g0fgbj"><!></div></div>'),_t=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),ft=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),gt=P('<div class="button-content svelte-g0fgbj"><div class="label svelte-g0fgbj"> </div> <div class="icon svelte-g0fgbj"><!></div></div>'),mt=P('<div class="nay svelte-g0fgbj"><!></div> <div class="pass svelte-g0fgbj"><!></div> <div class="yay svelte-g0fgbj"><!></div>',1),yt=P('<div class="note svelte-g0fgbj"> </div>'),bt=P('<div><div class="period svelte-g0fgbj"><div class="proposal svelte-g0fgbj"><div class="title svelte-g0fgbj"><button class="unstyle-button"> </button></div> <div class="vote-summary svelte-g0fgbj"><div class="nay value svelte-g0fgbj"> <div class="icon svelte-g0fgbj"><!></div></div> <div class="pass value svelte-g0fgbj"> <div class="icon svelte-g0fgbj"><!></div></div> <div class="yay value svelte-g0fgbj"> <div class="icon svelte-g0fgbj"><!></div></div></div> <div class="separator svelte-g0fgbj"><!></div> <div class="bar svelte-g0fgbj"><div class="bar-title svelte-g0fgbj"> </div> <div class="bar-description svelte-g0fgbj"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--quorum-color)" rx="2" ry="2"></rect></svg></div> <div class="bar svelte-g0fgbj"><div class="bar-title svelte-g0fgbj"> </div> <div class="bar-description svelte-g0fgbj"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--majority-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--majority-color)" rx="2" ry="2"></rect></svg></div> <!> <!> <div class="separator svelte-g0fgbj"><!></div> <div><!></div></div></div> <!></div>');function At(_,t){fe(t,!0);let s=b(()=>t.session.account),A=b(()=>t.period.voters.reduce((a,v)=>a+BigInt(v.votingPower.toString()),0n)),M=b(()=>t.period.summary.yay+t.period.summary.nay||1n),or=b(()=>Math.round(Number(BigInt(t.period.summary.yay)*100000n/i(A))/10)/100),S=b(()=>Math.round(Number(BigInt(t.period.summary.nay)*100000n/i(A))/10)/100),V=b(()=>Math.round(Number(BigInt(t.period.summary.pass)*100000n/i(A))/10)/100);const Fr=b(()=>i(M)+BigInt(t.period.summary.pass));let vr=b(()=>i(Fr)>i(A)*BigInt(t.period.quorum)/10000n),Gr=b(()=>Math.min(Number(BigInt(t.period.summary.yay+t.period.summary.nay+t.period.summary.pass)*100000n/i(A))/1e3,100)),U=Number(t.period.quorum)/100,nr=b(()=>BigInt(t.period.summary.yay)>=i(M)*Sr/100n),dr=b(()=>Math.round(Number(BigInt(t.period.summary.yay)*100000n/i(M))/10)/100),Y=b(()=>Number(Sr));function Qr(){window.open(`${be}/${t.period.proposal}`,"_blank")}function zr(){window.open(`${je}/${t.period.proposal}/${t.period.index}`,"_blank")}async function C(a){await t.onNewOperation(async()=>await t.session.vote(t.period.proposal,a,t.period.index))}let O=b(()=>t.period.ballots.find(a=>a.pkh===i(s).delegate?.pkh)),F=b(()=>qe(t.period.voters,a=>a.pkh===i(s).id));var T=bt();let lr;var G=r(T),ur=r(G),Q=r(ur),z=r(Q);z.__click=[dt,t];var Dr=r(z,!0);e(z),e(Q);var D=o(Q,2),H=r(D),cr=r(H),_r=o(cr),Hr=r(_r);Or(Hr),e(_r),e(H);var J=o(H,2),fr=r(J),gr=o(fr),Jr=r(gr);Tr(Jr),e(gr),e(J);var mr=o(J,2),yr=r(mr),br=o(yr),Xr=r(br);Cr(Xr),e(br),e(mr),e(D);var X=o(D,2),Kr=r(X);Ar(Kr),e(X);var K=o(X,2),W=r(K),Wr=r(W,!0);e(W);var Z=o(W,2),jr=r(Z),Zr=o(jr);{var $r=a=>{var v=w();g(n=>d(v,`(${U}% ${n??""})`),[()=>Ur()]),c(a,v)},re=a=>{var v=w();g(n=>d(v,`(${n??""} ${U}%)`),[()=>Yr()]),c(a,v)};q(Zr,a=>{i(vr)?a($r):a(re,!1)})}e(Z);var pr=o(Z,2),hr=o(r(pr)),xr=o(hr),kr=o(xr),ee=o(kr);e(pr),e(K);var $=o(K,2),rr=r($),te=r(rr,!0);e(rr);var er=o(rr,2),wr=r(er),ae=o(wr);{var ie=a=>{var v=w();g(n=>d(v,`(${i(Y)??""}% ${n??""})`),[()=>Ur()]),c(a,v)},se=a=>{var v=w();g(n=>d(v,`(${n??""} ${i(Y)??""}%)`),[()=>Yr()]),c(a,v)};q(ae,a=>{i(nr)?a(ie):a(se,!1)})}e(er);var Pr=o(er,2),qr=o(r(Pr)),oe=o(qr);e(Pr),e($);var Br=o($,2);E(Br,{onclick:()=>Qr(),children:(a,v)=>{var n=lt(),m=r(n),p=r(m,!0);e(m);var j=o(m,2),h=r(j);pe(h),e(j),e(n),g(B=>d(p,B),[()=>he()]),c(a,n)},$$slots:{default:!0}});var Rr=o(Br,2);E(Rr,{onclick:()=>zr(),children:(a,v)=>{var n=ut(),m=r(n),p=r(m,!0);e(m);var j=o(m,2),h=r(j);xe(h),e(j),e(n),g(B=>d(p,B),[()=>ke()]),c(a,n)},$$slots:{default:!0}});var tr=o(Rr,2),ve=r(tr);Ar(ve),e(tr);var ar=o(tr,2);let Ir;var ne=r(ar);{var de=a=>{var v=ct(),n=r(v);{var m=f=>{var l=w();g(u=>d(l,`${u??""}:`),[()=>nt()]),c(f,l)},p=f=>{var l=w();g(u=>d(l,u),[()=>Te()]),c(f,l)};q(n,f=>{i(F)?f(m):f(p,!1)})}var j=o(n,2),h=r(j);{var B=f=>{var l=w();g(u=>d(l,u),[()=>Vr()]),c(f,l)},R=(f,l)=>{{var u=y=>{var x=w();g(k=>d(x,k),[()=>Lr()]),c(y,x)},I=(y,x)=>{{var k=ir=>{var Nr=w();g(_e=>d(Nr,_e),[()=>Mr()]),c(ir,Nr)};q(y,ir=>{i(O).ballot==="pass"&&ir(k)},x)}};q(f,y=>{i(O).ballot==="nay"?y(u):y(I,!1)},l)}};q(h,f=>{i(O).ballot==="yay"?f(B):f(R,!1)})}e(j),e(v),c(a,v)},le=a=>{var v=mt(),n=me(v),m=r(n);E(m,{onclick:()=>C("nay"),children:(R,f)=>{var l=_t(),u=r(l),I=r(u,!0);e(u);var y=o(u,2),x=r(y);Or(x),e(y),e(l),g(k=>d(I,k),[()=>Lr()]),c(R,l)},$$slots:{default:!0}}),e(n);var p=o(n,2),j=r(p);E(j,{onclick:()=>C("pass"),children:(R,f)=>{var l=ft(),u=r(l),I=r(u,!0);e(u);var y=o(u,2),x=r(y);Tr(x),e(y),e(l),g(k=>d(I,k),[()=>Mr()]),c(R,l)},$$slots:{default:!0}}),e(p);var h=o(p,2),B=r(h);E(B,{onclick:()=>C("yay"),children:(R,f)=>{var l=gt(),u=r(l),I=r(u,!0);e(u);var y=o(u,2),x=r(y);Cr(x),e(y),e(l),g(k=>d(I,k),[()=>Vr()]),c(R,l)},$$slots:{default:!0}}),e(h),c(a,v)};q(ne,a=>{i(O)?a(de):a(le,!1)})}e(ar),e(ur),e(G);var ue=o(G,2);{var ce=a=>{var v=yt(),n=r(v,!0);e(v),g(m=>d(n,m),[()=>we()]),c(a,v)};q(ue,a=>{i(F)||a(ce)})}e(T),g((a,v,n,m,p,j,h)=>{lr=Er(T,1,"period-wrap svelte-g0fgbj",null,lr,a),d(Dr,t.period.proposal),d(cr,`${v??""} (${i(S)??""} %) `),d(fr,`${n??""} (${i(V)??""} %) `),d(yr,`${m??""} (${i(or)??""} %) `),d(Wr,p),d(jr,`${i(Gr)??""} % `),N(hr,"width",`${i(S)+i(V)+i(or)}%`),N(xr,"width",`${i(S)+i(V)}%`),N(kr,"width",`${i(S)}%`),N(ee,"x",`${U}%`),d(te,j),d(wr,`${i(dr)??""} `),N(qr,"width",`${i(dr)}%`),N(oe,"x",`${i(Y)}%`),Ir=Er(ar,1,"vote-section svelte-g0fgbj",null,Ir,h)},[()=>({"quorum-reached":i(vr),"majority-reached":i(nr)}),()=>sr(t.period.summary.nay),()=>sr(t.period.summary.pass),()=>sr(t.period.summary.yay),()=>Qe(),()=>$e(),()=>({disabled:!i(F)})]),c(_,T),ge()}ye(["click"]);export{At as default};
