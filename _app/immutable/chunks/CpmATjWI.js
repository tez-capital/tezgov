import{f as w,a as l,t as j,c as Sr}from"./DljAxy3Z.js";import{p as he,c as r,r as e,s as o,m as i,a2 as p,t as y,a as ge,f as or}from"./BlY1XL9l.js";import{s as u,d as be}from"./CcIOLF5O.js";import{i as q}from"./D8UL9bPb.js";import{B as E,b as N}from"./BtqFYaCn.js";import{g as L,S as Or,a as Tr,P as Lr,E as xe,A as ke}from"./CNTQov_x.js";import{S as je,e as we,B as Pe,a as qe}from"./g-yTiGzY.js";import{T as Mr,F as Vr,n as Ur,p as Yr,y as Cr,s as Be}from"./BTgjcjoq.js";import{r as Fr,a as Gr}from"./Ch-Ke4Ks.js";import{T as Qr}from"./dvkIo9Yu.js";import{w as Re}from"./B9UkGA8o.js";import{s as Ie}from"./aKxUtk1J.js";const Ne=()=>"You voted",Ae=()=>"Usted votó",Ee=()=>"Hlasovali jste",Se=()=>"Äänestit",Oe=()=>"あなたは投票しました",Te=()=>"Ați votat",Le=()=>"Ви проголосували",Me=()=>"Vous avez voté",Ve=(c={},t={})=>{const s=t.locale??L();return s==="en"?Ne():s==="es"?Ae():s==="cs"?Ee():s==="fi"?Se():s==="ja"?Oe():s==="ro"?Te():s==="ua"?Le():Me()},Ue=()=>"quorum",Ye=()=>"quórum",Ce=()=>"kvorum",Fe=()=>"päätösvaltaisuus",Ge=()=>"定足数",Qe=()=>"cvorum",ze=()=>"кворум",De=()=>"quorum",He=(c={},t={})=>{const s=t.locale??L();return s==="en"?Ue():s==="es"?Ye():s==="cs"?Ce():s==="fi"?Fe():s==="ja"?Ge():s==="ro"?Qe():s==="ua"?ze():De()},Je=()=>"supermajority",Xe=()=>"supermayoría",Ke=()=>"supervětšina",We=()=>"määräenemmistö",Ze=()=>"特別多数",$e=()=>"supermajoritate",rt=()=>"абсолютна більшість",et=()=>"super-majorité",tt=(c={},t={})=>{const s=t.locale??L();return s==="en"?Je():s==="es"?Xe():s==="cs"?Ke():s==="fi"?We():s==="ja"?Ze():s==="ro"?$e():s==="ua"?rt():et()},at=()=>"Your baker voted",it=()=>"Tu baker ha votado",st=()=>"Váš baker hlasoval",ot=()=>"Leipurisi äänesti",vt=()=>"あなたのベーカーが投票しました",nt=()=>"Validatorul (baker) dvs. a votat",dt=()=>"Ваш пекар проголосував",ut=()=>"Votre baker a voté",lt=(c={},t={})=>{const s=t.locale??L();return s==="en"?at():s==="es"?it():s==="cs"?st():s==="fi"?ot():s==="ja"?vt():s==="ro"?nt():s==="ua"?dt():ut()};function vr(c){return typeof c=="bigint"&&(c=c.toString()),!c||typeof c!="string"?"N/A":c==="0"?"0 ꜩ":`${c.substring(0,c.length-6)}.${c.substring(c.length-6)} ꜩ`}var _t=w('<div class="button-content svelte-mp4rra"><div class="label svelte-mp4rra"> </div> <div class="icon svelte-mp4rra"><!></div></div>'),ct=w('<div class="button-content svelte-mp4rra"><div class="label svelte-mp4rra"> </div> <div class="icon svelte-mp4rra"><!></div></div>'),mt=w('<div class="existing-vote svelte-mp4rra"><!> <div class="ballot svelte-mp4rra"><!></div></div>'),yt=w('<div class="button-content svelte-mp4rra"><div class="label svelte-mp4rra"> </div> <div class="icon svelte-mp4rra"><!></div></div>'),ft=w('<div class="button-content svelte-mp4rra"><div class="label svelte-mp4rra"> </div> <div class="icon svelte-mp4rra"><!></div></div>'),pt=w('<div class="button-content svelte-mp4rra"><div class="label svelte-mp4rra"> </div> <div class="icon svelte-mp4rra"><!></div></div>'),ht=w('<div class="nay svelte-mp4rra"><!></div> <div class="pass svelte-mp4rra"><!></div> <div class="yay svelte-mp4rra"><!></div>',1),gt=w('<div class="note svelte-mp4rra"> </div>'),bt=w('<div><div class="period svelte-mp4rra"><div class="proposal svelte-mp4rra"><div class="title svelte-mp4rra"><button class="unstyle-button"> </button></div> <div class="vote-summary svelte-mp4rra"><div class="nay value svelte-mp4rra"> <div class="icon svelte-mp4rra"><!></div></div> <div class="pass value svelte-mp4rra"> <div class="icon svelte-mp4rra"><!></div></div> <div class="yay value svelte-mp4rra"> <div class="icon svelte-mp4rra"><!></div></div></div> <div class="separator svelte-mp4rra"><!></div> <div class="bar svelte-mp4rra"><div class="bar-title svelte-mp4rra"> </div> <div class="bar-description svelte-mp4rra"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--quorum-color)" rx="2" ry="2"></rect></svg></div> <div class="bar svelte-mp4rra"><div class="bar-title svelte-mp4rra"> </div> <div class="bar-description svelte-mp4rra"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--majority-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--majority-color)" rx="2" ry="2"></rect></svg></div> <!> <!> <div class="separator svelte-mp4rra"><!></div> <div><!></div></div></div> <!></div>');function St(c,t){he(t,!0);let s=p(()=>t.session.account),A=p(()=>t.period.voters.reduce((a,v)=>a+BigInt(v.votingPower.toString()),0n)),M=p(()=>t.period.summary.yay+t.period.summary.nay||1n),nr=p(()=>Math.round(Number(BigInt(t.period.summary.yay)*100000n/i(A))/10)/100),S=p(()=>Math.round(Number(BigInt(t.period.summary.nay)*100000n/i(A))/10)/100),V=p(()=>Math.round(Number(BigInt(t.period.summary.pass)*100000n/i(A))/10)/100);const zr=p(()=>i(M)+BigInt(t.period.summary.pass));let dr=p(()=>i(zr)>i(A)*BigInt(t.period.quorum)/10000n),Dr=p(()=>Math.min(Number(BigInt(t.period.summary.yay+t.period.summary.nay+t.period.summary.pass)*100000n/i(A))/1e3,100)),U=Number(t.period.quorum)/100,ur=p(()=>BigInt(t.period.summary.yay)>=i(M)*Lr/100n),lr=p(()=>Math.round(Number(BigInt(t.period.summary.yay)*100000n/i(M))/10)/100),Y=p(()=>Number(Lr));function Hr(){window.open(`${xe}/${t.period.proposal}`,"_blank")}function Jr(){window.open(`${ke}/${t.period.proposal}/${t.period.index}`,"_blank")}async function C(a){await t.onNewOperation(async()=>await t.session.vote(t.period.proposal,a,t.period.index))}let O=p(()=>t.period.ballots.find(a=>a.pkh===i(s).delegate?.pkh)),F=p(()=>Ie(t.period.voters,a=>a.pkh===i(s).id));var T=bt();let _r;var G=r(T),cr=r(G),Q=r(cr),z=r(Q);z.__click=()=>Re(t.period.proposal);var Xr=r(z,!0);e(z),e(Q);var D=o(Q,2),H=r(D),mr=r(H),yr=o(mr),Kr=r(yr);Mr(Kr),e(yr),e(H);var J=o(H,2),fr=r(J),pr=o(fr),Wr=r(pr);Vr(Wr),e(pr),e(J);var hr=o(J,2),gr=r(hr),br=o(gr),Zr=r(br);Qr(Zr),e(br),e(hr),e(D);var X=o(D,2),$r=r(X);Or($r),e(X);var K=o(X,2),W=r(K),re=r(W,!0);e(W);var Z=o(W,2),xr=r(Z),ee=o(xr);{var te=a=>{var v=j();y(n=>u(v,`(${U}% ${n??""})`),[()=>Fr()]),l(a,v)},ae=a=>{var v=j();y(n=>u(v,`(${n??""} ${U}%)`),[()=>Gr()]),l(a,v)};q(ee,a=>{i(dr)?a(te):a(ae,!1)})}e(Z);var kr=o(Z,2),jr=o(r(kr)),wr=o(jr),Pr=o(wr),ie=o(Pr);e(kr),e(K);var $=o(K,2),rr=r($),se=r(rr,!0);e(rr);var er=o(rr,2),qr=r(er),oe=o(qr);{var ve=a=>{var v=j();y(n=>u(v,`(${i(Y)??""}% ${n??""})`),[()=>Fr()]),l(a,v)},ne=a=>{var v=j();y(n=>u(v,`(${n??""} ${i(Y)??""}%)`),[()=>Gr()]),l(a,v)};q(oe,a=>{i(ur)?a(ve):a(ne,!1)})}e(er);var Br=o(er,2),Rr=o(r(Br)),de=o(Rr);e(Br),e($);var Ir=o($,2);E(Ir,{onclick:()=>Hr(),children:(a,v)=>{var n=_t(),f=r(n),g=r(f,!0);e(f);var x=o(f,2),P=r(x);je(P),e(x),e(n),y(B=>u(g,B),[()=>we()]),l(a,n)},$$slots:{default:!0}});var Nr=o(Ir,2);E(Nr,{onclick:()=>Jr(),children:(a,v)=>{var n=ct(),f=r(n),g=r(f,!0);e(f);var x=o(f,2),P=r(x);Pe(P),e(x),e(n),y(B=>u(g,B),[()=>qe()]),l(a,n)},$$slots:{default:!0}});var tr=o(Nr,2),ue=r(tr);Or(ue),e(tr);var ar=o(tr,2);let Ar;var le=r(ar);{var _e=a=>{var v=mt(),n=r(v);{var f=m=>{var d=j();y(_=>u(d,`${_??""}:`),[()=>lt()]),l(m,d)},g=m=>{var d=j();y(_=>u(d,_),[()=>Ve()]),l(m,d)};q(n,m=>{i(F)?m(f):m(g,!1)})}var x=o(n,2),P=r(x);{var B=m=>{var d=j();y(_=>u(d,_),[()=>Cr()]),l(m,d)},R=m=>{var d=Sr(),_=or(d);{var I=h=>{var b=j();y(ir=>u(b,ir),[()=>Ur()]),l(h,b)},k=h=>{var b=Sr(),ir=or(b);{var fe=sr=>{var Er=j();y(pe=>u(Er,pe),[()=>Yr()]),l(sr,Er)};q(ir,sr=>{i(O).ballot==="pass"&&sr(fe)},!0)}l(h,b)};q(_,h=>{i(O).ballot==="nay"?h(I):h(k,!1)},!0)}l(m,d)};q(P,m=>{i(O).ballot==="yay"?m(B):m(R,!1)})}e(x),e(v),l(a,v)},ce=a=>{var v=ht(),n=or(v),f=r(n);E(f,{onclick:()=>C("nay"),children:(R,m)=>{var d=yt(),_=r(d),I=r(_,!0);e(_);var k=o(_,2),h=r(k);Mr(h),e(k),e(d),y(b=>u(I,b),[()=>Ur()]),l(R,d)},$$slots:{default:!0}}),e(n);var g=o(n,2),x=r(g);E(x,{onclick:()=>C("pass"),children:(R,m)=>{var d=ft(),_=r(d),I=r(_,!0);e(_);var k=o(_,2),h=r(k);Vr(h),e(k),e(d),y(b=>u(I,b),[()=>Yr()]),l(R,d)},$$slots:{default:!0}}),e(g);var P=o(g,2),B=r(P);E(B,{onclick:()=>C("yay"),children:(R,m)=>{var d=pt(),_=r(d),I=r(_,!0);e(_);var k=o(_,2),h=r(k);Qr(h),e(k),e(d),y(b=>u(I,b),[()=>Cr()]),l(R,d)},$$slots:{default:!0}}),e(P),l(a,v)};q(le,a=>{i(O)?a(_e):a(ce,!1)})}e(ar),e(cr),e(G);var me=o(G,2);{var ye=a=>{var v=gt(),n=r(v,!0);e(v),y(f=>u(n,f),[()=>Be()]),l(a,v)};q(me,a=>{i(F)||a(ye)})}e(T),y((a,v,n,f,g)=>{_r=Tr(T,1,"period-wrap svelte-mp4rra",null,_r,{"quorum-reached":i(dr),"majority-reached":i(ur)}),u(Xr,t.period.proposal),u(mr,`${a??""} (${i(S)??""} %) `),u(fr,`${v??""} (${i(V)??""} %) `),u(gr,`${n??""} (${i(nr)??""} %) `),u(re,f),u(xr,`${i(Dr)??""} % `),N(jr,"width",`${i(S)+i(V)+i(nr)}%`),N(wr,"width",`${i(S)+i(V)}%`),N(Pr,"width",`${i(S)}%`),N(ie,"x",`${U}%`),u(se,g),u(qr,`${i(lr)??""} `),N(Rr,"width",`${i(lr)}%`),N(de,"x",`${i(Y)}%`),Ar=Tr(ar,1,"vote-section svelte-mp4rra",null,Ar,{disabled:!i(F)})},[()=>vr(t.period.summary.nay),()=>vr(t.period.summary.pass),()=>vr(t.period.summary.yay),()=>He(),()=>tt()]),l(c,T),ge()}be(["click"]);export{St as default};
