import"./CWj6FrbW.js";import{p as Re,f as d,d as a,s as n,r,t as p,b as v,c as Fe,m as t,a3 as f,a as I,al as te}from"./C-S9Tcds.js";import{s as c,d as Je}from"./DwdxVzkQ.js";import{i as N}from"./BOcg6rm_.js";import{e as Me,i as Ke}from"./DbHg6iZr.js";import{s as ae,B as re}from"./CNZpNcpS.js";import{g as j,S as pe}from"./6JxTeoFN.js";import{s as Ze,y as fe,n as ye,p as me,T as qe,F as Qe}from"./y-Ugipcy.js";import{n as We}from"./DSYtXXHC.js";import{T as Xe}from"./BMX1muvm.js";import{w as $e}from"./B9UkGA8o.js";import{P as ze}from"./CortT5Za.js";import{f as se}from"./CKdr_FP8.js";import{c as et}from"./DXFdm1rA.js";const tt=()=>"Signal yay",at=()=>"Señalar si",rt=()=>"Signalizovat ano",st=()=>"Signaali kyllä",nt=()=>"賛成シグナル",it=()=>"Exprimați „Da”",ot=()=>"Сигнал 'так'",lt=(y={},s={})=>{const e=s.locale??j();return e==="en"?tt():e==="es"?at():e==="cs"?rt():e==="fi"?st():e==="jp"?nt():e==="ro"?it():ot()},vt=()=>"Signal nay",ct=()=>"Señalar no",_t=()=>"Signalizovat ne",ut=()=>"Signaali ei",dt=()=>"反対シグナル",gt=()=>"Exprimați „Nu”",pt=()=>"Сигнал 'ні'",ft=(y={},s={})=>{const e=s.locale??j();return e==="en"?vt():e==="es"?ct():e==="cs"?_t():e==="fi"?ut():e==="jp"?dt():e==="ro"?gt():pt()},yt=()=>"Signal pass",mt=()=>"Señalar abstención",zt=()=>"Signalizovat zdržení se",wt=()=>"Signaali ohita",ht=()=>"棄権シグナル",bt=()=>"Exprimați abținere",xt=()=>"Сигнал 'пропустити'",St=(y={},s={})=>{const e=s.locale??j();return e==="en"?yt():e==="es"?mt():e==="cs"?zt():e==="fi"?wt():e==="jp"?ht():e==="ro"?bt():xt()},kt=()=>"You signaled",jt=()=>"Has señalado",Pt=()=>"Signalizovali jste",Vt=()=>"Sinä annoit signaalin",Nt=()=>"シグナルしました",Dt=()=>"Ați exprimat",Et=()=>"Ви подали сигнал",Ot=(y={},s={})=>{const e=s.locale??j();return e==="en"?kt():e==="es"?jt():e==="cs"?Pt():e==="fi"?Vt():e==="jp"?Nt():e==="ro"?Dt():Et()},Tt=()=>"Graphs of signal votes display only the votes within the scope of a baker. Votes from other bakers and their delegators/stakers are not shown.",At=()=>"Los gráficos de votos solo muestran votos referentes a un baker. No se muestran los votos de otros bakers ni de sus delegadores o apiladores(stakers).",Lt=()=>"Grafy signalizačních hlasů zobrazují pouze hlasy v rámci jednoho bakera. Hlasy jiných bakerů a jejich delegátorů či stakerů nejsou zobrazeny.",Bt=()=>"Signaaliäänten kaaviot näyttävät vain leipurin toimialueeseen kuuluvat äänet. Muiden leipureiden ja heidän delegaattiensa/panostajiensa ääniä ei näytetä.",Gt=()=>"シグナル投票のグラフは、1人のベーカー内の投票のみ表示します。他のベーカーやその委任者/ステーカーの投票は表示されません。",Ut=()=>"Graficele voturilor de exprimare afișează doar voturile în cadrul aceluiași validator (baker). Voturile altor validatori (bakeri) și ale delegatarilor/stakerilor lor nu sunt afișate.",Yt=()=>"Графіки сигналів відображають голоси лише у межах одного пекаря. Голоси інших пекарів і їхніх делегатів не показуються.",Ct=(y={},s={})=>{const e=s.locale??j();return e==="en"?Tt():e==="es"?At():e==="cs"?Lt():e==="fi"?Bt():e==="jp"?Gt():e==="ro"?Ut():Yt()},Ht=()=>"Signal votes",It=()=>"Votos señalados",Rt=()=>"Signalizační hlasy",Ft=()=>"Signaaliäänet",Jt=()=>"シグナル投票",Mt=()=>"Voturi de exprimare",Kt=()=>"Сигнали голосування",Zt=(y={},s={})=>{const e=s.locale??j();return e==="en"?Ht():e==="es"?It():e==="cs"?Rt():e==="fi"?Ft():e==="jp"?Jt():e==="ro"?Mt():Kt()},qt=()=>"Loading signal votes...",Qt=()=>"Cargando votos señalados...",Wt=()=>"Načítání signalizačních hlasů...",Xt=()=>"Ladataan signaaliääniä...",$t=()=>"シグナル投票を読み込み中...",ea=()=>"Se încarcă voturile de exprimare...",ta=()=>"Завантаження сигналів голосування...",we=(y={},s={})=>{const e=s.locale??j();return e==="en"?qt():e==="es"?Qt():e==="cs"?Wt():e==="fi"?Xt():e==="jp"?$t():e==="ro"?ea():ta()},aa=()=>"You can signal only ONCE per period (for only ONE proposal). Your signal is not binding or protocol-enforced.",ra=()=>"Puedes señalar SOLO UNA VEZ por período (y solo para UNA propuesta). Tu señal no es vinculante ni impuesta por el protocolo.",sa=()=>"Signalizovat můžete pouze JEDNOU za období (a pouze pro JEDEN návrh). Váš signál není závazný ani vynucený protokolem.",na=()=>"Voit antaa signaalin VAIN KERRAN kaudessa (vain YHTEEN ehdotukseen). Signaalisi ei ole sitova eikä protokollan valvoma.",ia=()=>"1期間につき1つの提案だけに1回だけシグナルできます。シグナルは拘束力のある投票ではありません。",oa=()=>"Puteți exprima doar O DATĂ pe perioadă (și doar pentru O SINGURĂ propunere). Exprimarea dvs. nu este obligatorie și nici impusă de protocol.",la=()=>"Ви можете подати сигнал лише РАЗ за період (лише за ОДНУ пропозицію). Ваш сигнал не є обов'язковим або примусовим за протоколом.",va=(y={},s={})=>{const e=s.locale??j();return e==="en"?aa():e==="es"?ra():e==="cs"?sa():e==="fi"?na():e==="jp"?ia():e==="ro"?oa():la()};var ca=d('<div class="row sl-card"><!></div>'),_a=d('<div class="row"></div> <div class="no-proposals svelte-c7wvzv"> </div>',1),ua=(y,s)=>$e(t(s).proposal),da=d('<div class="loading-signal-votes svelte-c7wvzv"><!></div>'),ga=d('<div class="existing-vote svelte-c7wvzv"><div class="ballot svelte-c7wvzv"> <!></div></div>'),pa=d('<div class="button-content svelte-c7wvzv"><div class="label svelte-c7wvzv"> </div> <div class="icon svelte-c7wvzv"><!></div></div>'),fa=d('<div class="button-content svelte-c7wvzv"><div class="label svelte-c7wvzv"> </div> <div class="icon svelte-c7wvzv"><!></div></div>'),ya=d('<div class="button-content svelte-c7wvzv"><div class="label svelte-c7wvzv"> </div> <div class="icon svelte-c7wvzv"><!></div></div>'),ma=d('<div class="nay svelte-c7wvzv"><!></div> <div class="pass svelte-c7wvzv"><!></div> <div class="yay svelte-c7wvzv"><!></div>',1),za=d('<div class="bar svelte-c7wvzv"><div class="bar-title svelte-c7wvzv"> </div> <div class="bar-description svelte-c7wvzv"> </div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect></svg></div> <!>',1),wa=d('<div class="separator svelte-c7wvzv"><!></div> <div class="proposal svelte-c7wvzv"><div class="title svelte-c7wvzv"><button class="unstyle-button"> </button></div> <!></div>',1),ha=d('<div class="scope-notice svelte-c7wvzv"> </div> <div class="limit-notice svelte-c7wvzv"> </div> <!>',1),ba=d('<div class="signaling-votes svelte-c7wvzv"><!></div>'),xa=d('<div class="signaling-votes-wrap svelte-c7wvzv"><!> <div class="row"></div> <div class="row"></div> <div class="separator"><!></div> <div class="note svelte-c7wvzv"> </div></div>');function Ua(y,s){Re(s,!0);let e=f(()=>s.session.account),ne=f(()=>Object.values(t(e).delegateDelegators??[]).reduce((l,i)=>l+BigInt(i.toString()),0n)),he=f(()=>s.period.kind==="proposal"?s.period.proposals.map(l=>l.proposal):[s.period.proposal]);const be=f(()=>et(t(e).delegateDelegators??{},t(e).delegateDelegatorsVotes??{}));let ie=f(()=>t(he).map(l=>{const i=t(be)[l]||{yay:0n,nay:0n,pass:0n},P=t(ne)>0n?t(ne):1n;return{proposal:l,yay:i.yay,yayPercentage:Number(i.yay*100n/P),nay:i.nay,nayPercentage:Number(i.nay*100n/P),pass:i.pass,passPercentage:Number(i.pass*100n/P)}}));async function F(l,i){await s.onNewOperation(async()=>await s.session.signalVote(l,i,s.period.index))}let R=f(()=>t(e).delegateDelegatorsVotes?.[t(e).id]);var J=xa(),oe=a(J);{var xe=l=>{var i=ca(),P=a(i);const K=f(()=>we());ze(P,{progress:"indeterminate",get message(){return t(K)}}),r(i),v(l,i)},Se=l=>{var i=ba(),P=a(i);{var K=D=>{var G=_a(),E=n(I(G),2),Z=a(E,!0);r(E),p(U=>c(Z,U),[()=>We()]),v(D,G)},Pe=D=>{var G=ha(),E=I(G),Z=a(E,!0);r(E);var U=n(E,2),Ve=a(U,!0);r(U);var Ne=n(U,2);Me(Ne,17,()=>t(ie),Ke,(q,_)=>{var ve=wa();const De=f(()=>t(_).yayPercentage||0),Q=f(()=>t(_).nayPercentage||0),ce=f(()=>t(_).passPercentage||0);var W=I(ve),Ee=a(W);pe(Ee),r(W);var _e=n(W,2),X=a(_e),$=a(X);$.__click=[ua,_];var Oe=a($,!0);r($),r(X);var Te=n(X,2);{var Ae=O=>{var T=da(),Y=a(T);const C=f(()=>we());ze(Y,{progress:"indeterminate",get message(){return t(C)}}),r(T),v(O,T)},Le=O=>{var T=za(),Y=I(T),C=a(Y),Be=a(C,!0);r(C);var ee=n(C,2),Ge=a(ee);r(ee);var ue=n(ee,2),de=n(a(ue)),ge=n(de),Ue=n(ge);r(ue),r(Y);var Ye=n(Y,2);{var Ce=b=>{var x=ga(),S=a(x),A=a(S),V=n(A);{var H=m=>{var z=te();p(B=>c(z,B),[()=>fe()]),v(m,z)},L=(m,z)=>{{var B=o=>{var w=te();p(g=>c(w,g),[()=>ye()]),v(o,w)},u=(o,w)=>{{var g=h=>{var k=te();p(Ie=>c(k,Ie),[()=>me()]),v(h,k)};N(o,h=>{t(R).vote==="pass"&&h(g)},w)}};N(m,o=>{t(R).vote==="nay"?o(B):o(u,!1)},z)}};N(V,m=>{t(R).vote==="yay"?m(H):m(L,!1)})}r(S),r(x),p(m=>c(A,`${m??""}: `),[()=>Ot()]),v(b,x)},He=b=>{var x=ma(),S=I(x),A=a(S);re(A,{onclick:()=>F(t(_).proposal,"nay"),children:(z,B)=>{var u=pa(),o=a(u),w=a(o,!0);r(o);var g=n(o,2),h=a(g);qe(h),r(g),r(u),p(k=>c(w,k),[()=>ft()]),v(z,u)},$$slots:{default:!0}}),r(S);var V=n(S,2),H=a(V);re(H,{onclick:()=>F(t(_).proposal,"pass"),children:(z,B)=>{var u=fa(),o=a(u),w=a(o,!0);r(o);var g=n(o,2),h=a(g);Qe(h),r(g),r(u),p(k=>c(w,k),[()=>St()]),v(z,u)},$$slots:{default:!0}}),r(V);var L=n(V,2),m=a(L);re(m,{onclick:()=>F(t(_).proposal,"yay"),children:(z,B)=>{var u=ya(),o=a(u),w=a(o,!0);r(o);var g=n(o,2),h=a(g);Xe(h),r(g),r(u),p(k=>c(w,k),[()=>lt()]),v(z,u)},$$slots:{default:!0}}),r(L),v(b,x)};N(Ye,b=>{t(R)?b(Ce):b(He,!1)})}p((b,x,S,A,V,H,L)=>{c(Be,b),c(Ge,`${x??""}: ${S??""} | ${A??""}
									${V??""} | ${H??""}
									${L??""}`),ae(de,"width",`${t(Q)+t(ce)+t(De)}%`),ae(ge,"width",`${t(Q)+t(ce)}%`),ae(Ue,"width",`${t(Q)}%`)},[()=>Zt(),()=>fe(),()=>se(t(_).yay,0),()=>ye(),()=>se(t(_).nay,0),()=>me(),()=>se(t(_).pass,0)]),v(O,T)};N(Te,O=>{s.session.state.isLoadingDelegateDelegatorsVotes?O(Ae):O(Le,!1)})}r(_e),p(()=>c(Oe,t(_).proposal)),v(q,ve)}),p((q,_)=>{c(Z,q),c(Ve,_)},[()=>Ct(),()=>va()]),v(D,G)};N(P,D=>{t(ie).length===0?D(K):D(Pe,!1)})}r(i),v(l,i)};N(oe,l=>{s.session.state.isLoadingDelegateDelegators?l(xe):l(Se,!1)})}var M=n(oe,6),ke=a(M);pe(ke),r(M);var le=n(M,2),je=a(le,!0);r(le),r(J),p(l=>c(je,l),[()=>Ze()]),v(y,J),Fe()}Je(["click"]);export{Ua as default};
