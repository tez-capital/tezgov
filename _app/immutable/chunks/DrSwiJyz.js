import"./CWj6FrbW.js";import{p as Je,f as g,d as t,s,r,t as p,b as o,c as Me,m as a,a5 as m,a as N,aR as te,a9 as ye}from"./zf1WrKjG.js";import{s as c,d as Ke}from"./C4ZcjmJS.js";import{i as D}from"./CG0HDjPF.js";import{e as Ze,i as Qe}from"./UeecasE0.js";import{s as re,B as ne}from"./Bb7xfo9i.js";import{g as k,S as me}from"./BkPAUj_K.js";import{s as We,y as he,n as ze,p as we,T as Xe,F as $e}from"./B2oLgtOS.js";import{n as ea}from"./CMjCUYOx.js";import{T as aa}from"./D4TYd8Eh.js";import{w as ta}from"./B9UkGA8o.js";import{P as be}from"./Byh-_tvu.js";import{f as se}from"./CCEnqy-m.js";import{c as ra}from"./Co67WHB_.js";const na=()=>"Signal yay",sa=()=>"Señalar si",ia=()=>"Signalizovat ano",oa=()=>"Signaali kyllä",la=()=>"賛成シグナル",va=()=>"Exprimați „Da”",ca=()=>"Сигнал 'так'",ua=()=>"Indiquer pour",_a=(h={},n={})=>{const e=n.locale??k();return e==="en"?na():e==="es"?sa():e==="cs"?ia():e==="fi"?oa():e==="ja"?la():e==="ro"?va():e==="ua"?ca():ua()},da=()=>"Signal nay",ga=()=>"Señalar no",fa=()=>"Signalizovat ne",pa=()=>"Signaali ei",ya=()=>"反対シグナル",ma=()=>"Exprimați „Nu”",ha=()=>"Сигнал 'ні'",za=()=>"Indiquer contre",wa=(h={},n={})=>{const e=n.locale??k();return e==="en"?da():e==="es"?ga():e==="cs"?fa():e==="fi"?pa():e==="ja"?ya():e==="ro"?ma():e==="ua"?ha():za()},ba=()=>"Signal pass",xa=()=>"Señalar abstención",Sa=()=>"Signalizovat zdržení se",ka=()=>"Signaali ohita",ja=()=>"棄権シグナル",Va=()=>"Exprimați abținere",Pa=()=>"Сигнал 'пропустити'",Na=()=>"Indiquer passer",Da=(h={},n={})=>{const e=n.locale??k();return e==="en"?ba():e==="es"?xa():e==="cs"?Sa():e==="fi"?ka():e==="ja"?ja():e==="ro"?Va():e==="ua"?Pa():Na()},Ea=()=>"You signaled",La=()=>"Has señalado",Oa=()=>"Signalizovali jste",Ta=()=>"Sinä annoit signaalin",Aa=()=>"シグナルしました",Ia=()=>"Ați exprimat",qa=()=>"Ви подали сигнал",Ba=()=>"Vous avez indiqué",Ga=(h={},n={})=>{const e=n.locale??k();return e==="en"?Ea():e==="es"?La():e==="cs"?Oa():e==="fi"?Ta():e==="ja"?Aa():e==="ro"?Ia():e==="ua"?qa():Ba()},Ra=()=>"Graphs of signal votes display only the votes within the scope of a baker. Votes from other bakers and their delegators/stakers are not shown.",Ua=()=>"Los gráficos de votos solo muestran votos referentes a un baker. No se muestran los votos de otros bakers ni de sus delegadores o apiladores(stakers).",Ya=()=>"Grafy signalizačních hlasů zobrazují pouze hlasy v rámci jednoho bakera. Hlasy jiných bakerů a jejich delegátorů či stakerů nejsou zobrazeny.",Ca=()=>"Signaaliäänten kaaviot näyttävät vain leipurin toimialueeseen kuuluvat äänet. Muiden leipureiden ja heidän delegaattiensa/panostajiensa ääniä ei näytetä.",Ha=()=>"シグナル投票のグラフは、1人のベーカー内の投票のみ表示します。他のベーカーやその委任者/ステーカーの投票は表示されません。",Fa=()=>"Graficele voturilor de exprimare afișează doar voturile în cadrul aceluiași validator (baker). Voturile altor validatori (bakeri) și ale delegatarilor/stakerilor lor nu sunt afișate.",Ja=()=>"Графіки сигналів відображають голоси лише у межах одного пекаря. Голоси інших пекарів і їхніх делегатів не показуються.",Ma=()=>"Les gaphs d'indications de vote n'affichent que celles concernant un baker donné. Les votes d'autres bakers ou de leurs délégateurs ou stakers ne sont pas affichés.",Ka=(h={},n={})=>{const e=n.locale??k();return e==="en"?Ra():e==="es"?Ua():e==="cs"?Ya():e==="fi"?Ca():e==="ja"?Ha():e==="ro"?Fa():e==="ua"?Ja():Ma()},Za=()=>"Signal votes",Qa=()=>"Votos señalados",Wa=()=>"Signalizační hlasy",Xa=()=>"Signaaliäänet",$a=()=>"シグナル投票",et=()=>"Voturi de exprimare",at=()=>"Сигнали голосування",tt=()=>"Indications de votes",rt=(h={},n={})=>{const e=n.locale??k();return e==="en"?Za():e==="es"?Qa():e==="cs"?Wa():e==="fi"?Xa():e==="ja"?$a():e==="ro"?et():e==="ua"?at():tt()},nt=()=>"Loading signal votes...",st=()=>"Cargando votos señalados...",it=()=>"Načítání signalizačních hlasů...",ot=()=>"Ladataan signaaliääniä...",lt=()=>"シグナル投票を読み込み中...",vt=()=>"Se încarcă voturile de exprimare...",ct=()=>"Завантаження сигналів голосування...",ut=()=>"chargement des indications de votes...",xe=(h={},n={})=>{const e=n.locale??k();return e==="en"?nt():e==="es"?st():e==="cs"?it():e==="fi"?ot():e==="ja"?lt():e==="ro"?vt():e==="ua"?ct():ut()},_t=()=>"You can signal only ONCE per period (for only ONE proposal). Your signal is not binding or protocol-enforced.",dt=()=>"Puedes señalar SOLO UNA VEZ por período (y solo para UNA propuesta). Tu señal no es vinculante ni impuesta por el protocolo.",gt=()=>"Signalizovat můžete pouze JEDNOU za období (a pouze pro JEDEN návrh). Váš signál není závazný ani vynucený protokolem.",ft=()=>"Voit antaa signaalin VAIN KERRAN kaudessa (vain YHTEEN ehdotukseen). Signaalisi ei ole sitova eikä protokollan valvoma.",pt=()=>"1期間につき1つの提案だけに1回だけシグナルできます。シグナルは拘束力のある投票ではありません。",yt=()=>"Puteți exprima doar O DATĂ pe perioadă (și doar pentru O SINGURĂ propunere). Exprimarea dvs. nu este obligatorie și nici impusă de protocol.",mt=()=>"Ви можете подати сигнал лише РАЗ за період (лише за ОДНУ пропозицію). Ваш сигнал не є обов'язковим або примусовим за протоколом.",ht=()=>"Vous ne pouvez fournir une indication qu'une fois par période, pour une seule proposition. Votre indication n'est ni contraignante ni gérée par le protocole.",zt=(h={},n={})=>{const e=n.locale??k();return e==="en"?_t():e==="es"?dt():e==="cs"?gt():e==="fi"?ft():e==="ja"?pt():e==="ro"?yt():e==="ua"?mt():ht()};var wt=g('<div class="row sl-card"><!></div>'),bt=g('<div class="row"></div> <div class="no-proposals svelte-c7wvzv"> </div>',1),xt=(h,n)=>ta(a(n).proposal),St=g('<div class="loading-signal-votes svelte-c7wvzv"><!></div>'),kt=g('<div class="existing-vote svelte-c7wvzv"><div class="ballot svelte-c7wvzv"> <!></div></div>'),jt=g('<div class="button-content svelte-c7wvzv"><div class="label svelte-c7wvzv"> </div> <div class="icon svelte-c7wvzv"><!></div></div>'),Vt=g('<div class="button-content svelte-c7wvzv"><div class="label svelte-c7wvzv"> </div> <div class="icon svelte-c7wvzv"><!></div></div>'),Pt=g('<div class="button-content svelte-c7wvzv"><div class="label svelte-c7wvzv"> </div> <div class="icon svelte-c7wvzv"><!></div></div>'),Nt=g('<div class="nay svelte-c7wvzv"><!></div> <div class="pass svelte-c7wvzv"><!></div> <div class="yay svelte-c7wvzv"><!></div>',1),Dt=g('<div class="bar svelte-c7wvzv"><div class="bar-title svelte-c7wvzv"> </div> <div class="bar-description svelte-c7wvzv"> </div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect></svg></div> <!>',1),Et=g('<div class="separator svelte-c7wvzv"><!></div> <div class="proposal svelte-c7wvzv"><div class="title svelte-c7wvzv"><button class="unstyle-button"> </button></div> <!></div>',1),Lt=g('<div class="scope-notice svelte-c7wvzv"> </div> <div class="limit-notice svelte-c7wvzv"> </div> <!>',1),Ot=g('<div class="signaling-votes svelte-c7wvzv"><!></div>'),Tt=g('<div class="signaling-votes-wrap svelte-c7wvzv"><!> <div class="row"></div> <div class="row"></div> <div class="separator"><!></div> <div class="note svelte-c7wvzv"> </div></div>');function Zt(h,n){Je(n,!0);let e=m(()=>n.session.account),ie=m(()=>Object.values(a(e).delegateDelegators??[]).reduce((l,i)=>l+BigInt(i.toString()),0n)),Se=m(()=>n.period.kind==="proposal"?n.period.proposals.map(l=>l.proposal):[n.period.proposal]);const ke=m(()=>ra(a(e).delegateDelegators??{},a(e).delegateDelegatorsVotes??{}));let oe=m(()=>a(Se).map(l=>{const i=a(ke)[l]||{yay:0n,nay:0n,pass:0n},j=a(ie)>0n?a(ie):1n;return{proposal:l,yay:i.yay,yayPercentage:Number(i.yay*100n/j),nay:i.nay,nayPercentage:Number(i.nay*100n/j),pass:i.pass,passPercentage:Number(i.pass*100n/j)}}));async function H(l,i){await n.onNewOperation(async()=>await n.session.signalVote(l,i,n.period.index))}let C=m(()=>a(e).delegateDelegatorsVotes?.[a(e).id]);var F=Tt(),le=t(F);{var je=l=>{var i=wt(),j=t(i);{let M=m(()=>xe());be(j,{progress:"indeterminate",get message(){return a(M)}})}r(i),o(l,i)},Ve=l=>{var i=Ot(),j=t(i);{var M=E=>{var B=bt(),L=s(N(B),2),K=t(L,!0);r(L),p(G=>c(K,G),[()=>ea()]),o(E,B)},De=E=>{var B=Lt(),L=N(B),K=t(L,!0);r(L);var G=s(L,2),Ee=t(G,!0);r(G);var Le=s(G,2);Ze(Le,17,()=>a(oe),Qe,(Z,u)=>{const Oe=m(()=>a(u).yayPercentage||0),Q=m(()=>a(u).nayPercentage||0),ce=m(()=>a(u).passPercentage||0);var ue=Et(),W=N(ue),Te=t(W);me(Te),r(W);var _e=s(W,2),X=t(_e),$=t(X);$.__click=[xt,u];var Ae=t($,!0);r($),r(X);var Ie=s(X,2);{var qe=O=>{var T=St(),R=t(T);{let U=m(()=>xe());be(R,{progress:"indeterminate",get message(){return a(U)}})}r(T),o(O,T)},Be=O=>{var T=Dt(),R=N(T),U=t(R),Ge=t(U,!0);r(U);var ee=s(U,2),Re=t(ee);r(ee);var de=s(ee,2),ge=s(t(de)),fe=s(ge),Ue=s(fe);r(de),r(R);var Ye=s(R,2);{var Ce=b=>{var x=kt(),S=t(x),A=t(S),V=s(A);{var Y=z=>{var y=te();p(q=>c(y,q),[()=>he()]),o(z,y)},I=z=>{var y=ye(),q=N(y);{var _=f=>{var v=te();p(w=>c(v,w),[()=>ze()]),o(f,v)},d=f=>{var v=ye(),w=N(v);{var P=ae=>{var pe=te();p(Fe=>c(pe,Fe),[()=>we()]),o(ae,pe)};D(w,ae=>{a(C).vote==="pass"&&ae(P)},!0)}o(f,v)};D(q,f=>{a(C).vote==="nay"?f(_):f(d,!1)},!0)}o(z,y)};D(V,z=>{a(C).vote==="yay"?z(Y):z(I,!1)})}r(S),r(x),p(z=>c(A,`${z??""}: `),[()=>Ga()]),o(b,x)},He=b=>{var x=Nt(),S=N(x),A=t(S);ne(A,{onclick:()=>H(a(u).proposal,"nay"),children:(y,q)=>{var _=jt(),d=t(_),f=t(d,!0);r(d);var v=s(d,2),w=t(v);Xe(w),r(v),r(_),p(P=>c(f,P),[()=>wa()]),o(y,_)},$$slots:{default:!0}}),r(S);var V=s(S,2),Y=t(V);ne(Y,{onclick:()=>H(a(u).proposal,"pass"),children:(y,q)=>{var _=Vt(),d=t(_),f=t(d,!0);r(d);var v=s(d,2),w=t(v);$e(w),r(v),r(_),p(P=>c(f,P),[()=>Da()]),o(y,_)},$$slots:{default:!0}}),r(V);var I=s(V,2),z=t(I);ne(z,{onclick:()=>H(a(u).proposal,"yay"),children:(y,q)=>{var _=Pt(),d=t(_),f=t(d,!0);r(d);var v=s(d,2),w=t(v);aa(w),r(v),r(_),p(P=>c(f,P),[()=>_a()]),o(y,_)},$$slots:{default:!0}}),r(I),o(b,x)};D(Ye,b=>{a(C)?b(Ce):b(He,!1)})}p((b,x,S,A,V,Y,I)=>{c(Ge,b),c(Re,`${x??""}: ${S??""} | ${A??""}
									${V??""} | ${Y??""}
									${I??""}`),re(ge,"width",`${a(Q)+a(ce)+a(Oe)}%`),re(fe,"width",`${a(Q)+a(ce)}%`),re(Ue,"width",`${a(Q)}%`)},[()=>rt(),()=>he(),()=>se(a(u).yay,0),()=>ze(),()=>se(a(u).nay,0),()=>we(),()=>se(a(u).pass,0)]),o(O,T)};D(Ie,O=>{n.session.state.isLoadingDelegateDelegatorsVotes?O(qe):O(Be,!1)})}r(_e),p(()=>c(Ae,a(u).proposal)),o(Z,ue)}),p((Z,u)=>{c(K,Z),c(Ee,u)},[()=>Ka(),()=>zt()]),o(E,B)};D(j,E=>{a(oe).length===0?E(M):E(De,!1)})}r(i),o(l,i)};D(le,l=>{n.session.state.isLoadingDelegateDelegators?l(je):l(Ve,!1)})}var J=s(le,6),Pe=t(J);me(Pe),r(J);var ve=s(J,2),Ne=t(ve,!0);r(ve),r(F),p(l=>c(Ne,l),[()=>We()]),o(h,F),Me()}Ke(["click"]);export{Zt as default};
