import{f as g,a as o,t as ae,c as me}from"./DljAxy3Z.js";import{p as Je,c as a,s,r,t as f,a as Me,m as t,a2 as y,f as N}from"./BlY1XL9l.js";import{s as d,d as Ke}from"./CcIOLF5O.js";import{i as D}from"./D8UL9bPb.js";import{e as Ze,i as Qe}from"./DT9dCdGd.js";import{b as re,B as ne}from"./BtqFYaCn.js";import{g as z,S as ye}from"./CNTQov_x.js";import{s as We,y as he,n as be,p as xe,T as Xe,F as $e}from"./BTgjcjoq.js";import{n as et}from"./DJPHATO1.js";import{T as tt}from"./dvkIo9Yu.js";import{w as at}from"./B9UkGA8o.js";import{P as Se}from"./DWgtsGCx.js";import{f as se}from"./D4R2zZkd.js";import{c as rt}from"./CShHGJ4Y.js";const nt=()=>"Signal yay",st=()=>"Señalar si",it=()=>"Signalizovat ano",ot=()=>"Signaali kyllä",lt=()=>"賛成シグナル",vt=()=>"Exprimați „Da”",dt=()=>"Сигнал 'так'",ct=()=>"Indiquer pour",ut=(b={},n={})=>{const e=n.locale??z();return e==="en"?nt():e==="es"?st():e==="cs"?it():e==="fi"?ot():e==="ja"?lt():e==="ro"?vt():e==="ua"?dt():ct()},_t=()=>"Signal nay",gt=()=>"Señalar no",pt=()=>"Signalizovat ne",ft=()=>"Signaali ei",mt=()=>"反対シグナル",yt=()=>"Exprimați „Nu”",ht=()=>"Сигнал 'ні'",bt=()=>"Indiquer contre",xt=(b={},n={})=>{const e=n.locale??z();return e==="en"?_t():e==="es"?gt():e==="cs"?pt():e==="fi"?ft():e==="ja"?mt():e==="ro"?yt():e==="ua"?ht():bt()},St=()=>"Signal pass",kt=()=>"Señalar abstención",jt=()=>"Signalizovat zdržení se",zt=()=>"Signaali ohita",Vt=()=>"棄権シグナル",wt=()=>"Exprimați abținere",Pt=()=>"Сигнал 'пропустити'",Nt=()=>"Indiquer passer",Dt=(b={},n={})=>{const e=n.locale??z();return e==="en"?St():e==="es"?kt():e==="cs"?jt():e==="fi"?zt():e==="ja"?Vt():e==="ro"?wt():e==="ua"?Pt():Nt()},Et=()=>"You signaled",Lt=()=>"Has señalado",Ot=()=>"Signalizovali jste",Tt=()=>"Sinä annoit signaalin",At=()=>"シグナルしました",It=()=>"Ați exprimat",qt=()=>"Ви подали сигнал",Bt=()=>"Vous avez indiqué",Gt=(b={},n={})=>{const e=n.locale??z();return e==="en"?Et():e==="es"?Lt():e==="cs"?Ot():e==="fi"?Tt():e==="ja"?At():e==="ro"?It():e==="ua"?qt():Bt()},Ut=()=>"Graphs of signal votes display only the votes within the scope of a baker. Votes from other bakers and their delegators/stakers are not shown.",Yt=()=>"Los gráficos de votos solo muestran votos referentes a un baker. No se muestran los votos de otros bakers ni de sus delegadores o apiladores(stakers).",Ct=()=>"Grafy signalizačních hlasů zobrazují pouze hlasy v rámci jednoho bakera. Hlasy jiných bakerů a jejich delegátorů či stakerů nejsou zobrazeny.",Ht=()=>"Signaaliäänten kaaviot näyttävät vain leipurin toimialueeseen kuuluvat äänet. Muiden leipureiden ja heidän delegaattiensa/panostajiensa ääniä ei näytetä.",Rt=()=>"シグナル投票のグラフは、1人のベーカー内の投票のみ表示します。他のベーカーやその委任者/ステーカーの投票は表示されません。",Ft=()=>"Graficele voturilor de exprimare afișează doar voturile în cadrul aceluiași validator (baker). Voturile altor validatori (bakeri) și ale delegatarilor/stakerilor lor nu sunt afișate.",Jt=()=>"Графіки сигналів відображають голоси лише у межах одного пекаря. Голоси інших пекарів і їхніх делегатів не показуються.",Mt=()=>"Les gaphs d'indications de vote n'affichent que celles concernant un baker donné. Les votes d'autres bakers ou de leurs délégateurs ou stakers ne sont pas affichés.",Kt=(b={},n={})=>{const e=n.locale??z();return e==="en"?Ut():e==="es"?Yt():e==="cs"?Ct():e==="fi"?Ht():e==="ja"?Rt():e==="ro"?Ft():e==="ua"?Jt():Mt()},Zt=()=>"Signal votes",Qt=()=>"Votos señalados",Wt=()=>"Signalizační hlasy",Xt=()=>"Signaaliäänet",$t=()=>"シグナル投票",ea=()=>"Voturi de exprimare",ta=()=>"Сигнали голосування",aa=()=>"Indications de votes",ra=(b={},n={})=>{const e=n.locale??z();return e==="en"?Zt():e==="es"?Qt():e==="cs"?Wt():e==="fi"?Xt():e==="ja"?$t():e==="ro"?ea():e==="ua"?ta():aa()},na=()=>"Loading signal votes...",sa=()=>"Cargando votos señalados...",ia=()=>"Načítání signalizačních hlasů...",oa=()=>"Ladataan signaaliääniä...",la=()=>"シグナル投票を読み込み中...",va=()=>"Se încarcă voturile de exprimare...",da=()=>"Завантаження сигналів голосування...",ca=()=>"chargement des indications de votes...",ke=(b={},n={})=>{const e=n.locale??z();return e==="en"?na():e==="es"?sa():e==="cs"?ia():e==="fi"?oa():e==="ja"?la():e==="ro"?va():e==="ua"?da():ca()},ua=()=>"You can signal only ONCE per period (for only ONE proposal). Your signal is not binding or protocol-enforced.",_a=()=>"Puedes señalar SOLO UNA VEZ por período (y solo para UNA propuesta). Tu señal no es vinculante ni impuesta por el protocolo.",ga=()=>"Signalizovat můžete pouze JEDNOU za období (a pouze pro JEDEN návrh). Váš signál není závazný ani vynucený protokolem.",pa=()=>"Voit antaa signaalin VAIN KERRAN kaudessa (vain YHTEEN ehdotukseen). Signaalisi ei ole sitova eikä protokollan valvoma.",fa=()=>"1期間につき1つの提案だけに1回だけシグナルできます。シグナルは拘束力のある投票ではありません。",ma=()=>"Puteți exprima doar O DATĂ pe perioadă (și doar pentru O SINGURĂ propunere). Exprimarea dvs. nu este obligatorie și nici impusă de protocol.",ya=()=>"Ви можете подати сигнал лише РАЗ за період (лише за ОДНУ пропозицію). Ваш сигнал не є обов'язковим або примусовим за протоколом.",ha=()=>"Vous ne pouvez fournir une indication qu'une fois par période, pour une seule proposition. Votre indication n'est ni contraignante ni gérée par le protocole.",ba=(b={},n={})=>{const e=n.locale??z();return e==="en"?ua():e==="es"?_a():e==="cs"?ga():e==="fi"?pa():e==="ja"?fa():e==="ro"?ma():e==="ua"?ya():ha()};var xa=g('<div class="row sl-card"><!></div>'),Sa=g('<div class="row"></div> <div class="no-proposals svelte-dg0mpd"> </div>',1),ka=g('<div class="loading-signal-votes svelte-dg0mpd"><!></div>'),ja=g('<div class="existing-vote svelte-dg0mpd"><div class="ballot svelte-dg0mpd"> <!></div></div>'),za=g('<div class="button-content svelte-dg0mpd"><div class="label svelte-dg0mpd"> </div> <div class="icon svelte-dg0mpd"><!></div></div>'),Va=g('<div class="button-content svelte-dg0mpd"><div class="label svelte-dg0mpd"> </div> <div class="icon svelte-dg0mpd"><!></div></div>'),wa=g('<div class="button-content svelte-dg0mpd"><div class="label svelte-dg0mpd"> </div> <div class="icon svelte-dg0mpd"><!></div></div>'),Pa=g('<div class="nay svelte-dg0mpd"><!></div> <div class="pass svelte-dg0mpd"><!></div> <div class="yay svelte-dg0mpd"><!></div>',1),Na=g('<div class="bar svelte-dg0mpd"><div class="bar-title svelte-dg0mpd"> </div> <div class="bar-description svelte-dg0mpd"> </div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect></svg></div> <!>',1),Da=g('<div class="separator svelte-dg0mpd"><!></div> <div class="proposal svelte-dg0mpd"><div class="title svelte-dg0mpd"><button class="unstyle-button"> </button></div> <!></div>',1),Ea=g('<div class="scope-notice svelte-dg0mpd"> </div> <div class="limit-notice svelte-dg0mpd"> </div> <!>',1),La=g('<div class="signaling-votes svelte-dg0mpd"><!></div>'),Oa=g('<div class="signaling-votes-wrap svelte-dg0mpd"><!> <div class="row"></div> <div class="row"></div> <div class="separator"><!></div> <div class="note svelte-dg0mpd"> </div></div>');function Ka(b,n){Je(n,!0);let e=y(()=>n.session.account),ie=y(()=>Object.values(t(e).delegateDelegators??[]).reduce((l,i)=>l+BigInt(i.toString()),0n)),je=y(()=>n.period.kind==="proposal"?n.period.proposals.map(l=>l.proposal):[n.period.proposal]);const ze=y(()=>rt(t(e).delegateDelegators??{},t(e).delegateDelegatorsVotes??{}));let oe=y(()=>t(je).map(l=>{const i=t(ze)[l]||{yay:0n,nay:0n,pass:0n},V=t(ie)>0n?t(ie):1n;return{proposal:l,yay:i.yay,yayPercentage:Number(i.yay*100n/V),nay:i.nay,nayPercentage:Number(i.nay*100n/V),pass:i.pass,passPercentage:Number(i.pass*100n/V)}}));async function R(l,i){await n.onNewOperation(async()=>await n.session.signalVote(l,i,n.period.index))}let H=y(()=>t(e).delegateDelegatorsVotes?.[t(e).id]);var F=Oa(),le=a(F);{var Ve=l=>{var i=xa(),V=a(i);{let M=y(()=>ke());Se(V,{progress:"indeterminate",get message(){return t(M)}})}r(i),o(l,i)},we=l=>{var i=La(),V=a(i);{var M=E=>{var B=Sa(),L=s(N(B),2),K=a(L,!0);r(L),f(G=>d(K,G),[()=>et()]),o(E,B)},De=E=>{var B=Ea(),L=N(B),K=a(L,!0);r(L);var G=s(L,2),Ee=a(G,!0);r(G);var Le=s(G,2);Ze(Le,17,()=>t(oe),Qe,(Z,c)=>{const Oe=y(()=>t(c).yayPercentage||0),Q=y(()=>t(c).nayPercentage||0),de=y(()=>t(c).passPercentage||0);var ce=Da(),W=N(ce),Te=a(W);ye(Te),r(W);var ue=s(W,2),X=a(ue),$=a(X);$.__click=()=>at(t(c).proposal);var Ae=a($,!0);r($),r(X);var Ie=s(X,2);{var qe=O=>{var T=ka(),U=a(T);{let Y=y(()=>ke());Se(U,{progress:"indeterminate",get message(){return t(Y)}})}r(T),o(O,T)},Be=O=>{var T=Na(),U=N(T),Y=a(U),Ge=a(Y,!0);r(Y);var ee=s(Y,2),Ue=a(ee);r(ee);var _e=s(ee,2),ge=s(a(_e)),pe=s(ge),Ye=s(pe);r(_e),r(U);var Ce=s(U,2);{var He=S=>{var k=ja(),j=a(k),A=a(j),w=s(A);{var C=h=>{var m=ae();f(q=>d(m,q),[()=>he()]),o(h,m)},I=h=>{var m=me(),q=N(m);{var u=p=>{var v=ae();f(x=>d(v,x),[()=>be()]),o(p,v)},_=p=>{var v=me(),x=N(v);{var P=te=>{var fe=ae();f(Fe=>d(fe,Fe),[()=>xe()]),o(te,fe)};D(x,te=>{t(H).vote==="pass"&&te(P)},!0)}o(p,v)};D(q,p=>{t(H).vote==="nay"?p(u):p(_,!1)},!0)}o(h,m)};D(w,h=>{t(H).vote==="yay"?h(C):h(I,!1)})}r(j),r(k),f(h=>d(A,`${h??""}: `),[()=>Gt()]),o(S,k)},Re=S=>{var k=Pa(),j=N(k),A=a(j);ne(A,{onclick:()=>R(t(c).proposal,"nay"),children:(m,q)=>{var u=za(),_=a(u),p=a(_,!0);r(_);var v=s(_,2),x=a(v);Xe(x),r(v),r(u),f(P=>d(p,P),[()=>xt()]),o(m,u)},$$slots:{default:!0}}),r(j);var w=s(j,2),C=a(w);ne(C,{onclick:()=>R(t(c).proposal,"pass"),children:(m,q)=>{var u=Va(),_=a(u),p=a(_,!0);r(_);var v=s(_,2),x=a(v);$e(x),r(v),r(u),f(P=>d(p,P),[()=>Dt()]),o(m,u)},$$slots:{default:!0}}),r(w);var I=s(w,2),h=a(I);ne(h,{onclick:()=>R(t(c).proposal,"yay"),children:(m,q)=>{var u=wa(),_=a(u),p=a(_,!0);r(_);var v=s(_,2),x=a(v);tt(x),r(v),r(u),f(P=>d(p,P),[()=>ut()]),o(m,u)},$$slots:{default:!0}}),r(I),o(S,k)};D(Ce,S=>{t(H)?S(He):S(Re,!1)})}f((S,k,j,A,w,C,I)=>{d(Ge,S),d(Ue,`${k??""}: ${j??""} | ${A??""}
									${w??""} | ${C??""}
									${I??""}`),re(ge,"width",`${t(Q)+t(de)+t(Oe)}%`),re(pe,"width",`${t(Q)+t(de)}%`),re(Ye,"width",`${t(Q)}%`)},[()=>ra(),()=>he(),()=>se(t(c).yay,0),()=>be(),()=>se(t(c).nay,0),()=>xe(),()=>se(t(c).pass,0)]),o(O,T)};D(Ie,O=>{n.session.state.isLoadingDelegateDelegatorsVotes?O(qe):O(Be,!1)})}r(ue),f(()=>d(Ae,t(c).proposal)),o(Z,ce)}),f((Z,c)=>{d(K,Z),d(Ee,c)},[()=>Kt(),()=>ba()]),o(E,B)};D(V,E=>{t(oe).length===0?E(M):E(De,!1)})}r(i),o(l,i)};D(le,l=>{n.session.state.isLoadingDelegateDelegators?l(Ve):l(we,!1)})}var J=s(le,6),Pe=a(J);ye(Pe),r(J);var ve=s(J,2),Ne=a(ve,!0);r(ve),r(F),f(l=>d(Ne,l),[()=>We()]),o(b,F),Me()}Ke(["click"]);export{Ka as default};
