import{f as p,a as f,b as ot,t as We,c as Qe}from"../chunks/B2zTA_4_.js";import{$ as ca,af as ua,e as De,m as Bt,H as Y,M as Ce,q as a,i as r,s as v,r as s,t as U,O as C,g as Se,f as R,ap as ut,a5 as Ct,aq as fa,ar as ga,K as Xt,a2 as ha,j as ma}from"../chunks/Di_eboX7.js";import{d as ht,s as P}from"../chunks/Ds5tpewE.js";import{p as nt,i as N,s as _a,b as dt}from"../chunks/BonuB96r.js";import{b7 as yt,aG as mt,aT as ft,aE as T,aN as Le,b8 as ba,b9 as ia,ba as _t,aI as wt,aC as tt,b3 as Je,aM as kt,aD as rt,bb as It,bc as Rt,bd as Zt,aP as gt,aS as st,ax as Ft,aJ as ct,aU as Nt,aF as it,be as pa,bf as Tt,bg as ya,bh as wa,bi as et,bj as bt,bk as Pt,bl as Mt,bm as Dt,bn as ka,bo as xa,bp as Ca,b1 as Me}from"../chunks/zgDuyK8m.js";import"../chunks/CQlJw8mo.js";import{i as La}from"../chunks/DMWXuKvG.js";function Pa(t,e,i){var n=ca(t,e);n&&n.set&&(t[e]=i,ua(()=>{t[e]=null}))}function Ma(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function Da(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function na(t,...e){if(!Da(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Gt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Sa(t,e){na(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const St=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ue=(t,e)=>t<<32-e|t>>>e;function Aa(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function ra(t){return typeof t=="string"&&(t=Aa(t)),na(t),t}class za{clone(){return this._cloneInto()}}function Ba(t){const e=n=>t().update(ra(n)).digest(),i=t();return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=()=>t(),e}function Na(t,e,i,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,i,n);const o=BigInt(32),u=BigInt(4294967295),l=Number(i>>o&u),d=Number(i&u),g=n?4:0,h=n?0:4;t.setUint32(e+g,l,n),t.setUint32(e+h,d,n)}const Ta=(t,e,i)=>t&e^~t&i,Oa=(t,e,i)=>t&e^t&i^e&i;class Ea extends za{constructor(e,i,n,o){super(),this.blockLen=e,this.outputLen=i,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=St(this.buffer)}update(e){Gt(this);const{view:i,buffer:n,blockLen:o}=this;e=ra(e);const u=e.length;for(let l=0;l<u;){const d=Math.min(o-this.pos,u-l);if(d===o){const g=St(e);for(;o<=u-l;l+=o)this.process(g,l);continue}n.set(e.subarray(l,l+d),this.pos),this.pos+=d,l+=d,this.pos===o&&(this.process(i,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Gt(this),Sa(e,this),this.finished=!0;const{buffer:i,view:n,blockLen:o,isLE:u}=this;let{pos:l}=this;i[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>o-l&&(this.process(n,0),l=0);for(let c=l;c<o;c++)i[c]=0;Na(n,o-8,BigInt(this.length*8),u),this.process(n,0);const d=St(e),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=g/4,x=this.get();if(h>x.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<h;c++)d.setUint32(4*c,x[c],u)}digest(){const{buffer:e,outputLen:i}=this;this.digestInto(e);const n=e.slice(0,i);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:i,buffer:n,length:o,finished:u,destroyed:l,pos:d}=this;return e.length=o,e.pos=d,e.finished=u,e.destroyed=l,o%i&&e.buffer.set(n),e}}const Ia=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ge=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ke=new Uint32Array(64);class Ra extends Ea{constructor(){super(64,32,8,!1),this.A=Ge[0]|0,this.B=Ge[1]|0,this.C=Ge[2]|0,this.D=Ge[3]|0,this.E=Ge[4]|0,this.F=Ge[5]|0,this.G=Ge[6]|0,this.H=Ge[7]|0}get(){const{A:e,B:i,C:n,D:o,E:u,F:l,G:d,H:g}=this;return[e,i,n,o,u,l,d,g]}set(e,i,n,o,u,l,d,g){this.A=e|0,this.B=i|0,this.C=n|0,this.D=o|0,this.E=u|0,this.F=l|0,this.G=d|0,this.H=g|0}process(e,i){for(let c=0;c<16;c++,i+=4)Ke[c]=e.getUint32(i,!1);for(let c=16;c<64;c++){const b=Ke[c-15],y=Ke[c-2],k=Ue(b,7)^Ue(b,18)^b>>>3,S=Ue(y,17)^Ue(y,19)^y>>>10;Ke[c]=S+Ke[c-7]+k+Ke[c-16]|0}let{A:n,B:o,C:u,D:l,E:d,F:g,G:h,H:x}=this;for(let c=0;c<64;c++){const b=Ue(d,6)^Ue(d,11)^Ue(d,25),y=x+b+Ta(d,g,h)+Ia[c]+Ke[c]|0,S=(Ue(n,2)^Ue(n,13)^Ue(n,22))+Oa(n,o,u)|0;x=h,h=g,g=d,d=l+y|0,l=u,u=o,o=n,n=y+S|0}n=n+this.A|0,o=o+this.B|0,u=u+this.C|0,l=l+this.D|0,d=d+this.E|0,g=g+this.F|0,h=h+this.G|0,x=x+this.H|0,this.set(n,o,u,l,d,g,h,x)}roundClean(){Ke.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Kt=Ba(()=>new Ra);function Fa(t){function e(u){var l=Uint8Array.from(u),d=t(l),g=l.length+4,h=new Uint8Array(g);return h.set(l,0),h.set(d.subarray(0,4),l.length),yt.encode(h)}function i(u){var l=u.slice(0,-4),d=u.slice(-4),g=t(l);if(!(d[0]^g[0]|d[1]^g[1]|d[2]^g[2]|d[3]^g[3]))return l}function n(u){var l=yt.decodeUnsafe(u);if(l!=null)return i(l)}function o(u){var l=yt.decode(u),d=i(l);if(d==null)throw new Error("Invalid checksum");return d}return{encode:e,decode:o,decodeUnsafe:n}}function Ua(t){return Kt(Kt(t))}const Ot=Fa(Ua),Et="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Wa=34,ja=51,Va=t=>{let e=0n;for(const i of t)e*=58n,e+=BigInt(Et.indexOf(i));return e},Jt=t=>{const e=[];for(;t>0n;)e.push(Number(t%256n)),t=t/256n;return e.reverse()},qa=t=>{const e=Wa,i=Va(t),n=yt.decode(t).length+1,o=BigInt(8*(e-n+4)),u=ja-t.length;let l=i*58n**BigInt(u);l=l>>o,l+=l===l>>o<<o?0n:1n;let d=(i+1n)*58n**BigInt(u)-(1n<<o)+1n;if(d=d>>o,d>=l){const g=Uint8Array.from(Array.from({...Jt(l),length:e}).map(b=>b===void 0?0:b)),h=Ot.encode(g);if(!h.startsWith(t)||h.length!==u+t.length)return null;const x=Uint8Array.from(Array.from({...Jt(l),length:e}).map(b=>b===void 0?255:b)),c=Ot.encode(x);return!c.startsWith(t)||c.length!==u+t.length?null:g}return null},Ha=t=>{let e="Pt1";for(const n of t){if(Et.includes(n)){e+=n;continue}if(Et.includes(n.toLowerCase())){e+=n.toLowerCase();continue}}const i=qa(e);return i===null?[!1,"Can not generate protocol hash from provided message"]:[!0,Ot.encode(new Uint8Array(i))]};var Ya=p(`<div class="center svelte-sbi72s"><div class="content sl-card svelte-sbi72s"><b class="title svelte-sbi72s">New Proposal</b> <div></div> <div class="text">If you want to make a statement, write it in the <b>statement</b> field; this will generate a
				proposal hash for you.</div> <div class="text">To inject a proper protocol upgrade proposal, write the hash in the <b>new proposal</b> field and leave <b>statement</b> blank.</div> <div class="text">*<b>Please refrain from using this feature for spamming.</b></div> <div class="text">**Remember that you can propose or vote for a proposal only <b>10 times per period</b>.</div> <div></div> <!> <!> <div class="controls svelte-sbi72s"><!> <div><!></div></div></div></div>`);function Xa(t,e){De(e,!0);let i=nt(e,"open",15,!1),n=Ce(""),o=Ce("");async function u(){e.onnewproposal(a(o)),i(!1)}const l=[g=>!!g||"proposal can not be empty",g=>g.startsWith("P")||"proposal has to start with P"];Bt(()=>{i()&&(Y(n,""),Y(o,""))}),Bt(()=>{if(a(n)){const[g,h]=Ha(a(n));g&&Y(o,h,!0)}});let d=C(()=>l.every(g=>g(a(o))===!0));mt(t,{get open(){return i()},persistent:!0,children:(g,h)=>{var x=Ya(),c=r(x),b=v(r(c),14);ft(b,{label:"Statement",get value(){return a(n)},set value(E){Y(n,E,!0)}});var y=v(b,2);ft(y,{label:"New Proposal",hint:"You can provide proposal hash",get rules(){return l},get value(){return a(o)},set value(E){Y(o,E,!0)}});var k=v(y,2),S=r(k);T(S,{label:"Cancel",onclick:()=>i(!1)});var G=v(S,2);let W;var j=r(G);T(j,{label:"Inject",onclick:u}),s(G),s(k),s(c),s(x),U(E=>W=Le(G,1,"",null,W,E),[()=>({disabled:!a(d)})]),f(g,x)},$$slots:{default:!0}}),Se()}var Za=ot('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 16.6875 3 L 16.375 3.28125 L 9.59375 10 L 5 10 L 5 26 L 21.84375 26 C 23.253906 26 24.484375 25.003906 24.78125 23.625 L 26.9375 13.625 C 27.332031 11.777344 25.886719 10 24 10 L 18.25 10 L 18.4375 9.25 C 18.640625 9.09375 18.769531 9.027344 19.0625 8.625 C 19.53125 7.984375 20 6.992188 20 5.65625 C 20 4.230469 18.710938 3 17.09375 3 Z M 17.40625 5.09375 C 17.828125 5.175781 18 5.347656 18 5.65625 C 18 6.558594 17.726563 7.117188 17.46875 7.46875 C 17.210938 7.820313 17.03125 7.90625 17.03125 7.90625 L 16.6875 8.09375 L 16.5625 8.5 L 15.96875 10.75 L 15.65625 12 L 24 12 C 24.660156 12 25.105469 12.574219 24.96875 13.21875 L 22.84375 23.21875 C 22.742188 23.6875 22.320313 24 21.84375 24 L 11 24 L 11 11.40625 Z M 7 12 L 9 12 L 9 24 L 7 24 Z"></path></svg>');function Lt(t){var e=Za();f(t,e)}var Ga=ot('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 3 6 L 3 25 L 13 25 C 14.101563 25 15 25.898438 15 27 L 17 27 C 17 25.898438 17.898438 25 19 25 L 29 25 L 29 6 L 19 6 C 17.808594 6 16.734375 6.527344 16 7.359375 C 15.265625 6.527344 14.191406 6 13 6 Z M 5 8 L 13 8 C 14.101563 8 15 8.898438 15 10 L 17 10 C 17 8.898438 17.898438 8 19 8 L 27 8 L 27 23 L 19 23 C 17.808594 23 16.734375 23.527344 16 24.359375 C 15.265625 23.527344 14.191406 23 13 23 L 5 23 Z M 15 12 L 15 14 L 17 14 L 17 12 Z M 15 16 L 15 18 L 17 18 L 17 16 Z M 15 20 L 15 22 L 17 22 L 17 20 Z"></path></svg>');function Ut(t){var e=Ga();f(t,e)}var Ka=ot('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z"></path></svg>');function Wt(t){var e=Ka();f(t,e)}function Ja(t,e){if(!t)return new Date(0);const n=((t.startPosition+t.position+t.remaining??-1)-(e??t?.position??1))*ba;return new Date(Date.now()+n)}function Qa(t,e){return t?(t.startPosition+t.position+t.remaining??0)-(e??0):"N/A"}function $a(t){return(BigInt(t)/10n**6n).toLocaleString()}var ei=(t,e)=>tt(a(e).proposal),ti=p('<div class="button-content svelte-1kvhhsz"><div class="label svelte-1kvhhsz">EXPLORER</div> <div class="icon svelte-1kvhhsz"><!></div></div>'),ai=p('<div class="button-content svelte-1kvhhsz"><div class="label svelte-1kvhhsz">AGORA</div> <div class="icon svelte-1kvhhsz"><!></div></div>'),ii=p('<div class="button-content upvoted svelte-1kvhhsz"><div class="label svelte-1kvhhsz">UPVOTED</div> <div class="icon svelte-1kvhhsz"><!></div></div>'),ni=p('<div class="button-content svelte-1kvhhsz"><div class="label svelte-1kvhhsz">UPVOTE</div> <div class="icon svelte-1kvhhsz"><!></div></div>'),ri=p('<div><div class="title svelte-1kvhhsz"><button class="unstyle-button"> </button></div> <div class="upvotes svelte-1kvhhsz"> <!></div> <div class="upvote-bar svelte-1kvhhsz"><svg width="100%" height="15"><rect width="100%" y="5" height="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--progress-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--progress-color)" rx="2" ry="2"></rect></svg></div> <!> <!> <div><!></div></div>'),si=p('<!> <div class="separator svelte-1kvhhsz"><!></div>',1),oi=p('<div class="proposal-period-wrap svelte-1kvhhsz"><div class="proposal-period svelte-1kvhhsz"><!></div> <div><!></div></div> <!>',1);function vi(t,e){De(e,!0);let i=C(()=>e.session.account),n=Ce(!1);function o(m){window.open(`${It}/${m}`,"_blank")}function u(m){window.open(`${Rt}/${m}/${e.period.index}`,"_blank")}async function l(m){await e.onNewOperation(async()=>await e.session.upvote(m,e.period.index))}const d=C(()=>e.period.voters.reduce((m,M)=>m+BigInt(M.votingPower.toString()),0n));let g=C(()=>ia(e.period.voters,m=>m.pkh===a(i).id)),h=C(()=>e.period.proposals.map(m=>{const M=Number(BigInt(m.upvotes.toString())*100000n/a(d))/1e3;return{...m,upvotes:m.upvotes,upvotesFormatted:$a(m.upvotes.toString()),percentage:Math.round(M*100)/100,percentageString:`${M}%`,quorumReached:BigInt(m.upvotes.toString())>a(d)/100n*_t}}));var x=oi(),c=R(x),b=r(c),y=r(b);{var k=m=>{var M=We("no proposals");f(m,M)},S=m=>{var M=si(),A=R(M);wt(A,17,()=>a(h),kt,(w,_)=>{var z=ri();let O;var L=r(z),D=r(L);D.__click=[ei,_];var K=r(D,!0);s(D),s(L);var I=v(L,2),V=r(I),X=v(V);{var te=q=>{var Z=We();U(()=>P(Z,`(${_t??""}% reached)`)),f(q,Z)},be=q=>{var Z=We();U(()=>P(Z,`(needs ${_t??""}%)`)),f(q,Z)};N(X,q=>{a(_).quorumReached?q(te):q(be,!1)})}s(I);var ne=v(I,2),se=r(ne),de=v(r(se)),oe=v(de);s(se),s(ne);var Pe=v(ne,2);T(Pe,{onclick:()=>o(a(_).proposal),children:(q,Z)=>{var ee=ti(),ie=v(r(ee),2),he=r(ie);Wt(he),s(ie),s(ee),f(q,ee)},$$slots:{default:!0}});var ce=v(Pe,2);T(ce,{onclick:()=>u(a(_).proposal),children:(q,Z)=>{var ee=ai(),ie=v(r(ee),2),he=r(ie);Ut(he),s(ie),s(ee),f(q,ee)},$$slots:{default:!0}});var re=v(ce,2);let fe;var ve=r(re);{var ge=q=>{var Z=ii(),ee=v(r(Z),2),ie=r(ee);Lt(ie),s(ee),s(Z),f(q,Z)},we=q=>{T(q,{onclick:()=>l([a(_).proposal]),children:(Z,ee)=>{var ie=ni(),he=v(r(ie),2),pe=r(he);Lt(pe),s(he),s(ie),f(Z,ie)},$$slots:{default:!0}})};N(ve,q=>{e.period.votes&&e.period.votes[a(_).proposal].includes(a(i).id)?q(ge):q(we,!1)})}s(re),s(z),U((q,Z)=>{O=Le(z,1,"proposal svelte-1kvhhsz",null,O,q),P(K,a(_).proposal),P(V,`${a(_).upvotesFormatted??""} upvotes ~ ${a(_).percentage??""}% `),Je(de,"width",a(_).percentageString),Je(oe,"x",`${_t}%`),fe=Le(re,1,"upvote-btn svelte-1kvhhsz",null,fe,Z)},[()=>({success:a(_).quorumReached}),()=>({disabled:!!a(g)})]),f(w,z)});var F=v(A,2),J=r(F);rt(J),s(F),f(m,M)};N(y,m=>{a(h).length===0?m(k):m(S,!1)})}s(b);var G=v(b,2);let W;var j=r(G);T(j,{label:"New Proposal",onclick:()=>Y(n,!0)}),s(G),s(c);var E=v(c,2);Xa(E,{onnewproposal:m=>l([m]),get open(){return a(n)},set open(m){Y(n,m,!0)}}),U(m=>W=Le(G,1,"new-proposal",null,W,m),[()=>({disabled:!a(g)})]),f(t,x),Se()}ht(["click"]);var li=ot('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 10.15625 6 C 8.746094 6 7.515625 6.996094 7.21875 8.375 L 5.0625 18.375 C 4.667969 20.222656 6.113281 22 8 22 L 13.75 22 L 13.5625 22.75 C 13.359375 22.90625 13.230469 22.972656 12.9375 23.375 C 12.46875 24.015625 12 25.007813 12 26.34375 C 12 27.769531 13.289063 29 14.90625 29 L 15.3125 29 L 15.625 28.71875 L 22.40625 22 L 27 22 L 27 6 Z M 10.15625 8 L 21 8 L 21 20.59375 L 14.59375 26.90625 C 14.171875 26.824219 14 26.652344 14 26.34375 C 14 25.441406 14.273438 24.882813 14.53125 24.53125 C 14.789063 24.179688 14.96875 24.09375 14.96875 24.09375 L 15.3125 23.90625 L 15.4375 23.5 L 16.03125 21.25 L 16.34375 20 L 8 20 C 7.339844 20 6.894531 19.425781 7.03125 18.78125 L 9.15625 8.78125 C 9.257813 8.3125 9.679688 8 10.15625 8 Z M 23 8 L 25 8 L 25 20 L 23 20 Z"></path></svg>');function Qt(t){var e=li();f(t,e)}var di=ot('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 16 6 C 14.9375 6 14.003906 6.5625 13.46875 7.40625 C 13.03125 7.15625 12.535156 7 12 7 C 10.355469 7 9 8.355469 9 10 L 9 13.65625 L 8.875 13.8125 C 8.800781 13.898438 8.730469 13.976563 8.65625 14.0625 C 8.144531 14.660156 7.65625 15.292969 7.21875 15.9375 L 6.90625 16.34375 C 6.480469 16.894531 6.21875 17.535156 6.09375 18.1875 C 6.078125 18.261719 6.042969 18.332031 6.03125 18.40625 C 5.855469 19.652344 6.226563 20.949219 7.09375 21.9375 L 9.46875 24.625 C 10.796875 26.136719 12.707031 27 14.71875 27 L 20 27 C 23.855469 27 27 23.855469 27 20 L 27 11 C 27 9.355469 25.644531 8 24 8 C 23.464844 8 22.96875 8.15625 22.53125 8.40625 C 21.996094 7.5625 21.0625 7 20 7 C 19.464844 7 18.96875 7.15625 18.53125 7.40625 C 17.996094 6.5625 17.0625 6 16 6 Z M 16 8 C 16.566406 8 17 8.433594 17 9 L 17 11.1875 C 16.683594 11.074219 16.351563 11 16 11 L 15 11 L 15 9 C 15 8.433594 15.433594 8 16 8 Z M 12 9 C 12.566406 9 13 9.433594 13 10 L 13 11 L 11.59375 11 L 11.3125 11.28125 C 11.3125 11.28125 11.085938 11.511719 11 11.59375 L 11 10 C 11 9.433594 11.433594 9 12 9 Z M 20 9 C 20.566406 9 21 9.433594 21 10 L 21 13 C 21 13.566406 20.566406 14 20 14 C 19.433594 14 19 13.566406 19 13 L 19 10 C 19 9.433594 19.433594 9 20 9 Z M 24 10 C 24.566406 10 25 10.433594 25 11 L 25 13 C 25 13.566406 24.566406 14 24 14 C 23.433594 14 23 13.566406 23 13 L 23 11 C 23 10.433594 23.433594 10 24 10 Z M 12.4375 13 L 16 13 C 16.5625 13 17 13.4375 17 14 C 17 14.5625 16.5625 15 16 15 L 12.875 15 L 12.59375 15.375 L 10.25 18.34375 L 11.8125 19.59375 L 13.65625 17.28125 C 14.015625 17.449219 14.425781 17.699219 14.875 18.0625 C 15.941406 18.929688 17 20.347656 17 23 L 19 23 C 19 20.132813 17.855469 18.15625 16.59375 16.9375 C 17.402344 16.769531 18.101563 16.273438 18.53125 15.59375 C 18.96875 15.84375 19.464844 16 20 16 C 20.765625 16 21.46875 15.699219 22 15.21875 C 22.53125 15.699219 23.234375 16 24 16 C 24.351563 16 24.683594 15.925781 25 15.8125 L 25 20 C 25 22.773438 22.773438 25 20 25 L 14.71875 25 C 13.28125 25 11.917969 24.394531 10.96875 23.3125 L 8.59375 20.59375 C 8.164063 20.105469 7.964844 19.507813 8 18.90625 C 8 18.898438 8.027344 18.832031 8.03125 18.8125 C 8.035156 18.78125 8.027344 18.75 8.03125 18.71875 C 8.078125 18.5 8.230469 18.078125 8.5625 17.53125 C 8.605469 17.460938 8.671875 17.382813 8.71875 17.3125 L 10.1875 15.375 C 11.292969 14.082031 12.214844 13.210938 12.4375 13 Z"></path></svg>');function $t(t){var e=di();f(t,e)}const pt=43200,ea=1440,ta=Symbol.for("constructDateFrom");function jt(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&ta in t?t[ta](e):t instanceof Date?new t.constructor(e):new Date(e)}function $e(t,e){return jt(t,t)}let ci={};function ui(){return ci}function aa(t){const e=$e(t),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),+t-+i}function Vt(t,...e){const i=jt.bind(null,t||e.find(n=>typeof n=="object"));return e.map(i)}function xt(t,e){const i=+$e(t)-+$e(e);return i<0?-1:i>0?1:i}function fi(t){return jt(t,Date.now())}function gi(t,e,i){const[n,o]=Vt(i?.in,t,e),u=n.getFullYear()-o.getFullYear(),l=n.getMonth()-o.getMonth();return u*12+l}function hi(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function mi(t,e){return+$e(t)-+$e(e)}function _i(t,e){const i=$e(t);return i.setHours(23,59,59,999),i}function bi(t,e){const i=$e(t),n=i.getMonth();return i.setFullYear(i.getFullYear(),n+1,0),i.setHours(23,59,59,999),i}function pi(t,e){const i=$e(t);return+_i(i)==+bi(i)}function yi(t,e,i){const[n,o,u]=Vt(i?.in,t,t,e),l=xt(o,u),d=Math.abs(gi(o,u));if(d<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-l*d);let g=xt(o,u)===-l;pi(n)&&d===1&&xt(n,u)===1&&(g=!1);const h=l*(d-+g);return h===0?0:h}function wi(t,e,i){const n=mi(t,e)/1e3;return hi(i?.roundingMethod)(n)}const ki={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xi=(t,e,i)=>{let n;const o=ki[t];return typeof o=="string"?n=o:e===1?n=o.one:n=o.other.replace("{{count}}",e.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n};function At(t){return(e={})=>{const i=e.width?String(e.width):t.defaultWidth;return t.formats[i]||t.formats[t.defaultWidth]}}const Ci={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Li={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pi={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Mi={date:At({formats:Ci,defaultWidth:"full"}),time:At({formats:Li,defaultWidth:"full"}),dateTime:At({formats:Pi,defaultWidth:"full"})},Di={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Si=(t,e,i,n)=>Di[t];function vt(t){return(e,i)=>{const n=i?.context?String(i.context):"standalone";let o;if(n==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,d=i?.width?String(i.width):l;o=t.formattingValues[d]||t.formattingValues[l]}else{const l=t.defaultWidth,d=i?.width?String(i.width):t.defaultWidth;o=t.values[d]||t.values[l]}const u=t.argumentCallback?t.argumentCallback(e):e;return o[u]}}const Ai={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zi={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bi={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ni={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ti={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Oi={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ei=(t,e)=>{const i=Number(t),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},Ii={ordinalNumber:Ei,era:vt({values:Ai,defaultWidth:"wide"}),quarter:vt({values:zi,defaultWidth:"wide",argumentCallback:t=>t-1}),month:vt({values:Bi,defaultWidth:"wide"}),day:vt({values:Ni,defaultWidth:"wide"}),dayPeriod:vt({values:Ti,defaultWidth:"wide",formattingValues:Oi,defaultFormattingWidth:"wide"})};function lt(t){return(e,i={})=>{const n=i.width,o=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],u=e.match(o);if(!u)return null;const l=u[0],d=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],g=Array.isArray(d)?Fi(d,c=>c.test(l)):Ri(d,c=>c.test(l));let h;h=t.valueCallback?t.valueCallback(g):g,h=i.valueCallback?i.valueCallback(h):h;const x=e.slice(l.length);return{value:h,rest:x}}}function Ri(t,e){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return i}function Fi(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return i}function Ui(t){return(e,i={})=>{const n=e.match(t.matchPattern);if(!n)return null;const o=n[0],u=e.match(t.parsePattern);if(!u)return null;let l=t.valueCallback?t.valueCallback(u[0]):u[0];l=i.valueCallback?i.valueCallback(l):l;const d=e.slice(o.length);return{value:l,rest:d}}}const Wi=/^(\d+)(th|st|nd|rd)?/i,ji=/\d+/i,Vi={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qi={any:[/^b/i,/^(a|c)/i]},Hi={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Yi={any:[/1/i,/2/i,/3/i,/4/i]},Xi={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zi={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gi={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ki={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ji={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Qi={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$i={ordinalNumber:Ui({matchPattern:Wi,parsePattern:ji,valueCallback:t=>parseInt(t,10)}),era:lt({matchPatterns:Vi,defaultMatchWidth:"wide",parsePatterns:qi,defaultParseWidth:"any"}),quarter:lt({matchPatterns:Hi,defaultMatchWidth:"wide",parsePatterns:Yi,defaultParseWidth:"any",valueCallback:t=>t+1}),month:lt({matchPatterns:Xi,defaultMatchWidth:"wide",parsePatterns:Zi,defaultParseWidth:"any"}),day:lt({matchPatterns:Gi,defaultMatchWidth:"wide",parsePatterns:Ki,defaultParseWidth:"any"}),dayPeriod:lt({matchPatterns:Ji,defaultMatchWidth:"any",parsePatterns:Qi,defaultParseWidth:"any"})},en={code:"en-US",formatDistance:xi,formatLong:Mi,formatRelative:Si,localize:Ii,match:$i,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tn(t,e,i){const n=ui(),o=i?.locale??n.locale??en,u=2520,l=xt(t,e);if(isNaN(l))throw new RangeError("Invalid time value");const d=Object.assign({},i,{addSuffix:i?.addSuffix,comparison:l}),[g,h]=Vt(i?.in,...l>0?[e,t]:[t,e]),x=wi(h,g),c=(aa(h)-aa(g))/1e3,b=Math.round((x-c)/60);let y;if(b<2)return i?.includeSeconds?x<5?o.formatDistance("lessThanXSeconds",5,d):x<10?o.formatDistance("lessThanXSeconds",10,d):x<20?o.formatDistance("lessThanXSeconds",20,d):x<40?o.formatDistance("halfAMinute",0,d):x<60?o.formatDistance("lessThanXMinutes",1,d):o.formatDistance("xMinutes",1,d):b===0?o.formatDistance("lessThanXMinutes",1,d):o.formatDistance("xMinutes",b,d);if(b<45)return o.formatDistance("xMinutes",b,d);if(b<90)return o.formatDistance("aboutXHours",1,d);if(b<ea){const k=Math.round(b/60);return o.formatDistance("aboutXHours",k,d)}else{if(b<u)return o.formatDistance("xDays",1,d);if(b<pt){const k=Math.round(b/ea);return o.formatDistance("xDays",k,d)}else if(b<pt*2)return y=Math.round(b/pt),o.formatDistance("aboutXMonths",y,d)}if(y=yi(h,g),y<12){const k=Math.round(b/pt);return o.formatDistance("xMonths",k,d)}else{const k=y%12,S=Math.trunc(y/12);return k<3?o.formatDistance("aboutXYears",S,d):k<9?o.formatDistance("overXYears",S,d):o.formatDistance("almostXYears",S+1,d)}}function an(t,e){return tn(t,fi(t),e)}function zt(t){return typeof t=="bigint"&&(t=t.toString()),!t||typeof t!="string"?"N/A":t==="0"?"0 ꜩ":`${t.substring(0,t.length-6)}.${t.substring(t.length-6)} ꜩ`}var nn=(t,e)=>tt(e.period.proposal),rn=p('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">EXPLORER</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),sn=p('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">AGORA</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),on=p('<div class="existing-vote svelte-1ovz1iv">You voted: <div class="ballot svelte-1ovz1iv"> </div></div>'),vn=p('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">NAY</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),ln=p('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">PASS</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),dn=p('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">YAY</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),cn=p('<div class="nay svelte-1ovz1iv"><!></div> <div class="pass svelte-1ovz1iv"><!></div> <div class="yay svelte-1ovz1iv"><!></div>',1),un=p('<div><div class="period svelte-1ovz1iv"><div class="proposal svelte-1ovz1iv"><div class="title svelte-1ovz1iv"><button class="unstyle-button"> </button></div> <div class="vote-summary svelte-1ovz1iv"><div class="nay value svelte-1ovz1iv"> <div class="icon svelte-1ovz1iv"><!></div></div> <div class="pass value svelte-1ovz1iv"> <div class="icon svelte-1ovz1iv"><!></div></div> <div class="yay value svelte-1ovz1iv"> <div class="icon svelte-1ovz1iv"><!></div></div></div> <div class="separator svelte-1ovz1iv"><!></div> <div class="bar svelte-1ovz1iv"><div class="bar-title svelte-1ovz1iv">Quorum</div> <div class="bar-description svelte-1ovz1iv"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--quorum-color)" rx="2" ry="2"></rect></svg></div> <div class="bar svelte-1ovz1iv"><div class="bar-title svelte-1ovz1iv">Supermajority</div> <div class="bar-description svelte-1ovz1iv"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--majority-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--majority-color)" rx="2" ry="2"></rect></svg></div> <!> <!> <div class="separator svelte-1ovz1iv"><!></div> <div><!></div></div></div></div>');function fn(t,e){De(e,!0);let i=C(()=>e.session.account),n=C(()=>e.period.voters.reduce((B,H)=>B+BigInt(H.votingPower.toString()),0n)),o=C(()=>e.period.summary.yay+e.period.summary.nay||1n),u=C(()=>Math.round(Number(BigInt(e.period.summary.yay)*100000n/a(n))/10)/100),l=C(()=>Math.round(Number(BigInt(e.period.summary.nay)*100000n/a(n))/10)/100),d=C(()=>Math.round(Number(BigInt(e.period.summary.pass)*100000n/a(n))/10)/100);const g=C(()=>a(o)+BigInt(e.period.summary.pass));let h=C(()=>a(g)>a(n)*BigInt(e.period.quorum)/10000n),x=C(()=>Math.min(Number(BigInt(e.period.summary.yay+e.period.summary.nay+e.period.summary.pass)*100000n/a(n))/1e3,100)),c=Number(e.period.quorum)/100,b=C(()=>BigInt(e.period.summary.yay)>=a(o)*Zt/100n),y=C(()=>Math.round(Number(BigInt(e.period.summary.yay)*100000n/a(o))/10)/100),k=C(()=>Number(Zt));function S(){window.open(`${It}/${e.period.proposal}`,"_blank")}function G(){window.open(`${Rt}/${e.period.proposal}/${e.period.index}`,"_blank")}async function W(B){await e.onNewOperation(async()=>await e.session.vote(e.period.proposal,B,e.period.index))}let j=C(()=>e.period.ballots.find(B=>B.pkh===a(i).id)),E=C(()=>ia(e.period.voters,B=>B.pkh===a(i).id));var m=un();let M;var A=r(m),F=r(A),J=r(F),w=r(J);w.__click=[nn,e];var _=r(w,!0);s(w),s(J);var z=v(J,2),O=r(z),L=r(O),D=v(L),K=r(D);Qt(K),s(D),s(O);var I=v(O,2),V=r(I),X=v(V),te=r(X);$t(te),s(X),s(I);var be=v(I,2),ne=r(be),se=v(ne),de=r(se);Lt(de),s(se),s(be),s(z);var oe=v(z,2),Pe=r(oe);rt(Pe),s(oe);var ce=v(oe,2),re=v(r(ce),2),fe=r(re),ve=v(fe);{var ge=B=>{var H=We();U(()=>P(H,`(${c}% reached)`)),f(B,H)},we=B=>{var H=We();U(()=>P(H,`(needs ${c}%)`)),f(B,H)};N(ve,B=>{a(h)?B(ge):B(we,!1)})}s(re);var q=v(re,2),Z=v(r(q)),ee=v(Z),ie=v(ee),he=v(ie);s(q),s(ce);var pe=v(ce,2),je=v(r(pe),2),me=r(je),Te=v(me);{var Oe=B=>{var H=We();U(()=>P(H,`(${a(k)??""}% reached)`)),f(B,H)},Ve=B=>{var H=We();U(()=>P(H,`(required ${a(k)??""}%)`)),f(B,H)};N(Te,B=>{a(b)?B(Oe):B(Ve,!1)})}s(je);var $=v(je,2),ye=v(r($)),Ae=v(ye);s($),s(pe);var qe=v(pe,2);T(qe,{onclick:()=>S(),children:(B,H)=>{var Q=rn(),_e=v(r(Q),2),xe=r(_e);Wt(xe),s(_e),s(Q),f(B,Q)},$$slots:{default:!0}});var ue=v(qe,2);T(ue,{onclick:()=>G(),children:(B,H)=>{var Q=sn(),_e=v(r(Q),2),xe=r(_e);Ut(xe),s(_e),s(Q),f(B,Q)},$$slots:{default:!0}});var Ee=v(ue,2),Xe=r(Ee);rt(Xe),s(Ee);var Ie=v(Ee,2);let ke;var ze=r(Ie);{var ae=B=>{var H=on(),Q=v(r(H)),_e=r(Q,!0);s(Q),s(H),U(()=>P(_e,a(j).ballot)),f(B,H)},Be=B=>{var H=cn(),Q=R(H),_e=r(Q);T(_e,{onclick:()=>W("nay"),children:(Ne,Ze)=>{var le=vn(),Fe=v(r(le),2),Ye=r(Fe);Qt(Ye),s(Fe),s(le),f(Ne,le)},$$slots:{default:!0}}),s(Q);var xe=v(Q,2),He=r(xe);T(He,{onclick:()=>W("pass"),children:(Ne,Ze)=>{var le=ln(),Fe=v(r(le),2),Ye=r(Fe);$t(Ye),s(Fe),s(le),f(Ne,le)},$$slots:{default:!0}}),s(xe);var Re=v(xe,2),at=r(Re);T(at,{onclick:()=>W("yay"),children:(Ne,Ze)=>{var le=dn(),Fe=v(r(le),2),Ye=r(Fe);Lt(Ye),s(Fe),s(le),f(Ne,le)},$$slots:{default:!0}}),s(Re),f(B,H)};N(ze,B=>{a(j)?B(ae):B(Be,!1)})}s(Ie),s(F),s(A),s(m),U((B,H,Q,_e,xe)=>{M=Le(m,1,"period-wrap svelte-1ovz1iv",null,M,B),P(_,e.period.proposal),P(L,`${H??""} (${a(l)??""} %) `),P(V,`${Q??""} (${a(d)??""} %) `),P(ne,`${_e??""} (${a(u)??""} %) `),P(fe,`${a(x)??""} % `),Je(Z,"width",`${a(l)+a(d)+a(u)}%`),Je(ee,"width",`${a(l)+a(d)}%`),Je(ie,"width",`${a(l)}%`),Je(he,"x",`${c}%`),P(me,`${a(y)??""} `),Je(ye,"width",`${a(y)}%`),Je(Ae,"x",`${a(k)}%`),ke=Le(Ie,1,"vote-section svelte-1ovz1iv",null,ke,xe)},[()=>({"quorum-reached":a(h),"majority-reached":a(b)}),()=>zt(e.period.summary.nay),()=>zt(e.period.summary.pass),()=>zt(e.period.summary.yay),()=>({disabled:!a(E)})]),f(t,m),Se()}ht(["click"]);var gn=p('<div class="error-message svelte-1kcf8tg"> </div>'),hn=p('<div class="status svelte-1kcf8tg">CONFIRMED</div>'),mn=p('<div class="status failed svelte-1kcf8tg">FAILED</div>'),_n=p('<div class="note svelte-1kcf8tg">NOTE: You may need to confirm the transaction with your signer.</div>'),bn=p('<div class="progress svelte-1kcf8tg"><!></div> <!>',1),pn=p('<h5 class="title svelte-1kcf8tg"> </h5> <!> <!> <div><!></div>',1),yn=p('<div class="center svelte-1kcf8tg"><div class="transaction-confirmation sl-card svelte-1kcf8tg"><!> <!></div></div>');function wn(t,e){De(e,!0);let i=nt(e,"open",15),n=nt(e,"allowClose",3,!0),o=nt(e,"stage",3,"building");function u(h){switch(h){case"building":return"Building transaction...";case"confirming":return"Waiting for confirmation...";case"applied":return"CONFIRMED";case"failed":return"FAILED"}}let l=C(()=>e.explorerTemplate?e.explorerTemplate.replace("%s",e.opHash??""):void 0),d=C(()=>u(o()));const g=C(()=>o()==="building"||o()==="confirming");mt(t,{get persistent(){return a(g)},get open(){return i()},set open(h){i(h)},children:(h,x)=>{var c=yn(),b=r(c),y=r(b);{var k=j=>{var E=gn(),m=r(E,!0);s(E),U(()=>P(m,e.error)),f(j,E)},S=j=>{var E=pn(),m=R(E),M=r(m);s(m);var A=v(m,2);rt(A);var F=v(A,2);{var J=L=>{var D=hn();f(L,D)},w=(L,D)=>{{var K=V=>{var X=mn();f(V,X)},I=V=>{var X=bn(),te=R(X),be=r(te);gt(be,{get message(){return a(d)},progress:"indeterminate"}),s(te);var ne=v(te,2);{var se=de=>{var oe=_n();f(de,oe)};N(ne,de=>{o()==="building"&&de(se)})}f(V,X)};N(L,V=>{o()==="failed"?V(K):V(I,!1)},D)}};N(F,L=>{o()==="applied"?L(J):L(w,!1)})}var _=v(F,2);let z;var O=r(_);T(O,{onclick:()=>window.open(a(l),"_blank"),children:(L,D)=>{ut();var K=We("Open Explorer");f(L,K)},$$slots:{default:!0}}),s(_),U(L=>{P(M,`Transaction ${e.opHash??"~ TBD ~"??""}`),z=Le(_,1,"explore",null,z,L)},[()=>({disabled:o()==="building"})]),f(j,E)};N(y,j=>{e.error?j(k):j(S,!1)})}var G=v(y,2);{var W=j=>{T(j,{label:"close",onclick:()=>i(!1)})};N(G,j=>{(n()||o()==="applied"||o()==="failed"||e.error)&&j(W)})}s(b),s(c),f(h,c)},$$slots:{default:!0}}),Se()}var kn=ot('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 16 3 C 8.832031 3 3 8.832031 3 16 C 3 23.167969 8.832031 29 16 29 C 23.167969 29 29 23.167969 29 16 L 27 16 C 27 22.085938 22.085938 27 16 27 C 9.914063 27 5 22.085938 5 16 C 5 9.914063 9.914063 5 16 5 C 19.875 5 23.261719 6.984375 25.21875 10 L 20 10 L 20 12 L 28 12 L 28 4 L 26 4 L 26 7.71875 C 23.617188 4.84375 20.019531 3 16 3 Z"></path></svg>');function qt(t){var e=kn();f(t,e)}var xn=p('<h3 class="title svelte-4mtex8"> </h3>'),Cn=p('<p class="message svelte-4mtex8"> </p>'),Ln=p('<div class="prompt-wrap sl-card svelte-4mtex8"><!> <!> <!> <div class="controls padding-top svelte-4mtex8"><div class="control-button svelte-4mtex8"><!></div> <div><!></div></div></div>');function Ht(t,e){De(e,!0);const i={title:"Prompt",message:"",hint:"",value:"",rules:[],confirmText:"Confirm",cancelText:"Cancel"};let n=Ce(Ct(i)),o=Ce(!1),u=Ce(Ct({resolve:()=>l(),reject:()=>l()}));function l(){Y(o,!1)}async function d(h){return Y(o,!0),Y(n,{...i,...h},!0),new Promise((x,c)=>{Y(u,{resolve:b=>{l(),x(b)},reject:b=>{l(),c(b)}},!0)})}let g=C(()=>Nt(a(n).value,a(n).rules)!==!0);return mt(t,{persistent:!0,get open(){return a(o)},set open(h){Y(o,h,!0)},children:(h,x)=>{var c=Ln(),b=r(c);{var y=w=>{var _=Qe(),z=R(_);ct(z,()=>e.title,()=>a(n)),f(w,_)},k=w=>{var _=xn(),z=r(_,!0);s(_),U(()=>P(z,a(n).title)),f(w,_)};N(b,w=>{e.title?w(y):w(k,!1)})}var S=v(b,2);{var G=w=>{var _=Qe(),z=R(_);ct(z,()=>e.message,()=>a(n)),f(w,_)},W=(w,_)=>{{var z=O=>{var L=Cn(),D=r(L,!0);s(L),U(()=>P(D,a(n).message)),f(O,L)};N(w,O=>{a(n).message&&O(z)},_)}};N(S,w=>{e.message?w(G):w(W,!1)})}var j=v(S,2);ft(j,_a(()=>a(n),{no_label:!0,get value(){return a(n).value},set value(w){a(n).value=w}}));var E=v(j,2),m=r(E);st(m,"",{},{"grid-column":"1"});var M=r(m);T(M,{get label(){return a(n).cancelText},onclick:()=>a(u).reject(Ft)}),s(m);var A=v(m,2);let F;st(A,"",{},{"grid-column":"3"});var J=r(A);T(J,{get label(){return a(n).confirmText},onclick:()=>a(u).resolve(a(n).value)}),s(A),s(E),s(c),U(w=>F=Le(A,1,"control-button svelte-4mtex8",null,F,w),[()=>({disabled:a(g)})]),f(h,c)},$$slots:{default:!0}}),Se({prompt:d})}var Pn=p('<div class="row svelte-l42648"><!></div>'),Mn=p('<div class="icon svelte-l42648"><!></div>'),Dn=(t,e)=>tt(a(e).id),Sn=p('<div class="property svelte-l42648">Staked Balance:</div> <div class="value svelte-l42648"><div class="icon svelte-l42648">🧊</div> </div> <div class="action svelte-l42648"><!></div>',1),An=p('<div class="property svelte-l42648">Unstaked Balance:</div> <div class="value svelte-l42648"><div class="icon svelte-l42648">💰</div> </div> <div class="action svelte-l42648"><!></div>',1),zn=p('<div class="redo svelte-l42648"><!></div> <div class="title svelte-l42648">Account Information</div> <div class="property svelte-l42648">Address:</div> <button class="value unstyle-button address svelte-l42648"> </button> <div class="property svelte-l42648">Full Balance:</div> <div class="value svelte-l42648"><div class="icon svelte-l42648">⚖️</div> </div> <div class="property svelte-l42648">Liquid Balance:</div> <div class="value svelte-l42648"><div class="icon svelte-l42648">🌊</div> </div> <div class="action svelte-l42648"><!></div> <!> <!>',1),Bn=p('<div class="account-info svelte-l42648"><!></div> <!>',1);function Nn(t,e){De(e,!0);let i,n=C(()=>e.session.account);async function o(){const y=await i.prompt({title:"Stake",message:"Enter the amount you want to stake",value:"0",rules:pa(a(n)),confirmText:"Stake"}),k=BigInt(Math.floor(Number(y)*Tt));await e.onNewOperation(async()=>await e.session.stake(k)),await Promise.allSettled([e.session.refreshDelegate(),e.session.refreshBalance()])}async function u(){const y=await i.prompt({title:"Unstake",message:"Enter the amount you want to unstake",value:"0",rules:ya(a(n)),confirmText:"Unstake"}),k=BigInt(Math.floor(Number(y)*Tt));await e.onNewOperation(async()=>await e.session.unstake(k)),await Promise.allSettled([e.session.refreshDelegate(),e.session.refreshBalance()])}async function l(){await e.onNewOperation(async()=>await e.session.finalizeUnstake()),await Promise.allSettled([e.session.refreshDelegate(),e.session.refreshBalance()])}var d=Bn(),g=R(d),h=r(g);{var x=y=>{var k=Pn(),S=r(k);gt(S,{progress:"indeterminate",message:"Loading account information..."}),s(k),f(y,k)},c=y=>{var k=zn(),S=R(k),G=r(S);T(G,{get onclick(){return e.session.refreshBalance},children:(L,D)=>{var K=Mn(),I=r(K);qt(I),s(K),f(L,K)},$$slots:{default:!0}}),s(S);var W=v(S,6);W.__click=[Dn,n];var j=r(W,!0);s(W);var E=v(W,4),m=v(r(E));s(E);var M=v(E,4),A=v(r(M));s(M);var F=v(M,2),J=r(F);T(J,{label:"Stake",onclick:o}),s(F);var w=v(F,2);{var _=L=>{var D=Sn(),K=v(R(D),2),I=v(r(K));s(K);var V=v(K,2),X=r(V);T(X,{label:"Unstake",onclick:u}),s(V),U(te=>P(I,` ${te??""}`),[()=>it(a(n).stakedBalance)]),f(L,D)};N(w,L=>{a(n).stakedBalance>0&&L(_)})}var z=v(w,2);{var O=L=>{var D=An(),K=v(R(D),2),I=v(r(K));s(K);var V=v(K,2),X=r(V);T(X,{label:"Finalize",onclick:l}),s(V),U(te=>P(I,` ${te??""}`),[()=>it(a(n).finalizableBalance)]),f(L,D)};N(z,L=>{a(n).finalizableBalance>0&&L(O)})}U((L,D)=>{P(j,a(n).id),P(m,` ${L??""}`),P(A,` ${D??""}`)},[()=>it(a(n).fullBalance),()=>it(a(n).balance)]),f(y,k)};N(h,y=>{e.session.state.isLoadingBalance?y(x):y(c,!1)})}s(g);var b=v(g,2);dt(Ht(b,{}),y=>i=y,()=>i),f(t,d),Se()}ht(["click"]);var Tn=(t,e)=>tt(e.period.proposal),On=p('<div class="button-content svelte-7cp7l1"><div class="label svelte-7cp7l1">EXPLORER</div> <div class="icon svelte-7cp7l1"><!></div></div>'),En=p('<div class="button-content svelte-7cp7l1"><div class="label svelte-7cp7l1">AGORA</div> <div class="icon svelte-7cp7l1"><!></div></div>'),In=p('<div class="period-wrap svelte-7cp7l1"><div class="period svelte-7cp7l1"><div class="proposal svelte-7cp7l1"><div class="title svelte-7cp7l1"><button class="unstyle-button"> </button></div> <!> <!></div></div></div>');function Rn(t,e){De(e,!0);function i(){window.open(`${It}/${e.period.proposal}`,"_blank")}function n(){window.open(`${Rt}/${e.period.proposal}/${e.period.index}`,"_blank")}var o=In(),u=r(o),l=r(u),d=r(l),g=r(d);g.__click=[Tn,e];var h=r(g,!0);s(g),s(d);var x=v(d,2);T(x,{onclick:()=>i(),children:(b,y)=>{var k=On(),S=v(r(k),2),G=r(S);Wt(G),s(S),s(k),f(b,k)},$$slots:{default:!0}});var c=v(x,2);T(c,{onclick:()=>n(),children:(b,y)=>{var k=En(),S=v(r(k),2),G=r(S);Ut(G),s(S),s(k),f(b,k)},$$slots:{default:!0}}),s(l),s(u),s(o),U(()=>P(h,e.period.proposal)),f(t,o),Se()}ht(["click"]);var Fn=p('<h3 class="title svelte-1hehw4i"> </h3>'),Un=p('<p class="message svelte-1hehw4i"> </p>'),Wn=p('<p class="note svelte-1hehw4i"> </p>'),jn=p('<div class="confirm-wrap sl-card svelte-1hehw4i"><!> <!> <!> <div class="controls padding-top svelte-1hehw4i"><div class="control-button svelte-1hehw4i"><!></div> <div class="control-button svelte-1hehw4i"><!></div></div></div>');function Vn(t,e){De(e,!0);const i={title:"Confirm",message:"",note:"",confirmText:"Confirm",cancelText:"Cancel"};let n=Ce(Ct(i)),o=Ce(!1),u=Ce(Ct({resolve:()=>l(),reject:()=>l()}));function l(){Y(o,!1)}async function d(g){return Y(o,!0),Y(n,{...i,...g},!0),new Promise((h,x)=>{Y(u,{resolve:c=>{l(),h(c)},reject:c=>{l(),x(c)}},!0)})}return mt(t,{persistent:!0,get open(){return a(o)},set open(g){Y(o,g,!0)},children:(g,h)=>{var x=jn(),c=r(x);{var b=w=>{var _=Qe(),z=R(_);ct(z,()=>e.title,()=>a(n)),f(w,_)},y=w=>{var _=Fn(),z=r(_,!0);s(_),U(()=>P(z,a(n).title)),f(w,_)};N(c,w=>{e.title?w(b):w(y,!1)})}var k=v(c,2);{var S=w=>{var _=Qe(),z=R(_);ct(z,()=>e.message,()=>a(n)),f(w,_)},G=(w,_)=>{{var z=O=>{var L=Un(),D=r(L,!0);s(L),U(()=>P(D,a(n).message)),f(O,L)};N(w,O=>{a(n).message&&O(z)},_)}};N(k,w=>{e.message?w(S):w(G,!1)})}var W=v(k,2);{var j=w=>{var _=Qe(),z=R(_);ct(z,()=>e.note,()=>a(n)),f(w,_)},E=(w,_)=>{{var z=O=>{var L=Wn(),D=r(L,!0);s(L),U(()=>P(D,a(n).note)),f(O,L)};N(w,O=>{a(n).note&&O(z)},_)}};N(W,w=>{e.note?w(j):w(E,!1)})}var m=v(W,2),M=r(m);st(M,"",{},{"grid-column":"1"});var A=r(M);T(A,{get label(){return a(n).cancelText},onclick:()=>a(u).reject(Ft)}),s(M);var F=v(M,2);st(F,"",{},{"grid-column":"3"});var J=r(F);T(J,{get label(){return a(n).confirmText},onclick:()=>a(u).resolve()}),s(F),s(m),s(x),f(g,x)},$$slots:{default:!0}}),Se({request_confirmation:d})}var qn=p('<div class="prompt-wrap sl-card svelte-1igllg9"><h3 class="title svelte-1igllg9">Set Delegate Parameters</h3> <p class="message svelte-1igllg9">Set delegate staking parameters - edge and limit.</p> <!> <!> <div class="controls padding-top svelte-1igllg9"><div class="control-button svelte-1igllg9"><!></div> <div><!></div></div></div>');function Hn(t,e){De(e,!1);const i=Xt(),n={value:{edge:100,limit:1}};let o=nt(e,"state",12,n),u=nt(e,"isOpen",12,!1),l=Xt({resolve:()=>d(),reject:()=>d()});function d(){u(!1)}const g=[c=>!!c||c.toString()==="0"||"Edge is required",c=>!isNaN(Number(c))||"Edge must be a number",c=>Number(c)>=0&&Number(c)<=100||"Edge must be between 0 and 100"],h=[c=>!!c||c.toString()==="0"||"Limit is required",c=>!isNaN(Number(c))||"Limit must be a number",c=>Number(c)>=0&&Number(c)<=wa||"Limit must be between 0 and 9"];async function x(c){return u(!0),o({...n,...c}),new Promise((b,y)=>{Y(l,{resolve:k=>{d(),b(k)},reject:k=>{d(),y(k)}})})}return fa(()=>ma(o()),()=>{Y(i,Nt(o().value.limit,h)!==!0||Nt(o().value.edge,g)!==!0)}),ga(),La(),mt(t,{persistent:!0,get open(){return u()},set open(c){u(c)},children:(c,b)=>{var y=qn(),k=v(r(y),4);ft(k,{type:"number",get rules(){return g},label:"Staking Fee in %",hint:"Edge of baking over staking",get value(){return o().value.edge},set value(A){o(o().value.edge=A,!0)},$$legacy:!0});var S=v(k,2);ft(S,{type:"number",get rules(){return h},label:"Staking capacity - multiplier of your stake",hint:"Limit of staking over baking",get value(){return o().value.limit},set value(A){o(o().value.limit=A,!0)},$$legacy:!0});var G=v(S,2),W=r(G);st(W,"",{},{"grid-column":"1"});var j=r(W);T(j,{label:"Cancel",onclick:()=>a(l).reject(Ft)}),s(W);var E=v(W,2);let m;st(E,"",{},{"grid-column":"3"});var M=r(E);T(M,{label:"Set",onclick:()=>a(l).resolve(o().value)}),s(E),s(G),s(y),U(A=>m=Le(E,1,"control-button svelte-1igllg9",null,m,A),[()=>({disabled:a(i)})],ha),f(c,y)},$$slots:{default:!0},$$legacy:!0}),Pa(e,"prompt",x),Se({prompt:x})}var Yn=p('<div class="row svelte-11v2v2f"><!></div>'),Xn=p('<div class="icon svelte-11v2v2f"><!></div>'),Zn=p('<b class="account-note error svelte-11v2v2f">INACTIVE</b> <div class="action svelte-11v2v2f"><!></div>',1),Gn=p('<div class="row svelte-11v2v2f"><!></div>  <b> </b> <div> </div> <div> </div>',1),Kn=(t,e)=>tt(a(e)?.pkh??""),Jn=(t,e)=>tt(a(e)?.pkh??""),Qn=p('<div class="property svelte-11v2v2f">Pending (<b> </b>):</div> <button class="value unstyle-button address svelte-11v2v2f"> </button>',1),$n=p('<div class="property svelte-11v2v2f">Total Staked:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">❄️</div> </div> <div class="property svelte-11v2v2f">Total Delegated:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">🌊</div> </div> <div class="property svelte-11v2v2f">Available Staking Capacity:</div> <div><div class="icon svelte-11v2v2f">❄️</div> </div> <div class="property svelte-11v2v2f">Available Delegation Capacity:</div> <div><div class="icon svelte-11v2v2f">🌊</div> </div> <div class="row svelte-11v2v2f"></div> <div class="subtitle svelte-11v2v2f">Parameters</div> <div class="property svelte-11v2v2f">Staking Fee:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">💸</div> </div> <div class="property svelte-11v2v2f">Total Stake Capacity:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">❄️</div> </div> <!> <div class="action svelte-11v2v2f"><!></div> <div class="row svelte-11v2v2f"></div> <div class="subtitle svelte-11v2v2f">Consensus Key</div> <div class="property svelte-11v2v2f">ACTIVE:</div> <button class="value unstyle-button address svelte-11v2v2f"> </button> <!> <div class="action svelte-11v2v2f"><!></div>',1),er=p('<div class="redo svelte-11v2v2f"><!></div> <div class="title svelte-11v2v2f">Baker Management</div> <!>',1),tr=(t,e)=>tt(a(e).id),ar=p('<div class="property svelte-11v2v2f">Upcoming Staking Fee (<b> </b>):</div> <div class="value svelte-11v2v2f"> </div>',1),ir=p('<div class="title svelte-11v2v2f">Delegation Management</div> <div class="property svelte-11v2v2f">Baker:</div> <button class="value unstyle-button address svelte-11v2v2f"> </button> <div class="property svelte-11v2v2f">Staking Fee:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">💸</div> </div> <!> <div class="property svelte-11v2v2f">Total Stake Capacity:</div>  <div class="value svelte-11v2v2f"> </div> <div class="property svelte-11v2v2f">Available Stake Capacity:</div> <div> </div> <div class="property svelte-11v2v2f">Available Delegation Capacity:</div> <div> </div> <div class="row svelte-11v2v2f"></div> <div class="action-pair svelte-11v2v2f"><!> <!></div>',1),nr=p('<div class="title svelte-11v2v2f">Not a baker and not delegating</div> <div class="account-note svelte-11v2v2f">NOTE: You have to delegate to be able to stake.</div> <div class="action-pair svelte-11v2v2f"><!> <!></div>',1),rr=p('<div class="delegation-info svelte-11v2v2f"><!></div> <!> <!> <!>',1);function sr(t,e){De(e,!0);let i,n,o,u=C(()=>e.session.account);async function l(){await e.onNewOperation(async()=>await e.session.delegate(a(u).id)),await e.session.refreshDelegate()}async function d(){await await n.request_confirmation({title:"Become a Baker",message:"Are you sure you want to become a baker?",note:"!!! THIS OPERATION IS IRREVERSIBLE !!!",confirmText:"Yes",cancelText:"No"}),await e.onNewOperation(async()=>await e.session.delegate(a(u).id)),await e.session.refreshDelegate()}async function g(){const m=await i.prompt({title:"Delegate",message:"Enter the address you want to delegate to",value:"",rules:ka("baker"),confirmText:"Delegate"});await e.onNewOperation(async()=>await e.session.delegate(m)),await e.session.refreshDelegate()}async function h(){await e.onNewOperation(async()=>await e.session.delegate()),await e.session.refreshDelegate()}async function x(){const m=a(u).delegate?.activeStakingParameters,M=a(u).delegate?.pendingStakingParameters;let A=m?m.edge_of_baking_over_staking_billionth/1e7:0;const F=Ma(M);F&&(A=F.edge_of_baking_over_staking_billionth/1e7);let J=m?m.limit_of_staking_over_baking_millionth/1e6:0;F&&(J=F.limit_of_staking_over_baking_millionth/1e6);const{edge:w,limit:_}=await o.prompt({value:{edge:A,limit:J}});await e.onNewOperation(async()=>await e.session.setDelegateParameters(w/100,_)),await e.session.refreshDelegate()}async function c(){const m=await i.prompt({title:"Update Consensus Key",message:"Enter the new consensus key",value:"",rules:xa(),confirmText:"Update Consensus Key"});await e.onNewOperation(async()=>await e.session.updateConsensusKey(m)),await e.session.refreshDelegate()}var b=rr(),y=R(b),k=r(y);{var S=m=>{var M=Yn(),A=r(M);gt(A,{progress:"indeterminate",message:"Loading delegation information..."}),s(M),f(m,M)},G=(m,M)=>{{var A=J=>{var w=er();const _=C(()=>a(u).delegate);var z=R(w),O=r(z);T(O,{get onclick(){return e.session.refreshDelegate},children:(I,V)=>{var X=Xn(),te=r(X);qt(te),s(X),f(I,X)},$$slots:{default:!0}}),s(z);var L=v(z,4);{var D=I=>{var V=Zn(),X=v(R(V),2),te=r(X);T(te,{label:"Reactivate",onclick:l}),s(X),f(I,V)},K=I=>{var V=$n();const X=C(()=>a(_).activeStakingParameters),te=C(()=>Mt(a(_)?.stakedBalance,a(X)?.limit_of_staking_over_baking_millionth)),be=C(()=>Dt(a(X)?.limit_of_staking_over_baking_millionth)),ne=C(()=>a(te)-a(_).totalStaked),se=C(()=>a(te)-a(_).totalDelegated),de=C(()=>a(_).activeStakingParameters?.edge_of_baking_over_staking_billionth??0),oe=C(()=>a(_).pendingStakingParameters??[]),Pe=C(()=>a(_).consensusKeys?.active),ce=C(()=>a(_).consensusKeys?.pending??[]);var re=v(R(V),2),fe=v(r(re));s(re);var ve=v(re,4),ge=v(r(ve));s(ve);var we=v(ve,4);let q;var Z=v(r(we));s(we);var ee=v(we,4);let ie;var he=v(r(ee));s(ee);var pe=v(ee,8),je=v(r(pe));s(pe);var me=v(pe,4),Te=v(r(me));s(me);var Oe=v(me,2);{var Ve=ae=>{var Be=Qe(),B=R(Be);wt(B,17,()=>a(oe),kt,(H,Q,_e,xe)=>{var He=Gn();const Re=C(()=>Mt(a(_)?.stakedBalance,a(Q)?.limit_of_staking_over_baking_millionth)),at=C(()=>Dt(a(Q)?.limit_of_staking_over_baking_millionth));var Ne=R(He),Ze=r(Ne);rt(Ze),s(Ne);var le=v(Ne,2),Fe=r(le);s(le);var Ye=v(le,2),sa=r(Ye);s(Ye);var Yt=v(Ye,2),oa=r(Yt);s(Yt),U((va,la,da)=>{P(Fe,`Pending cycle ${a(Q).cycle??""}:`),P(sa,`Staking Fee: ${va??""}`),P(oa,`Total Stake Capacity: ${la??""} (mutliplier: ${da??""})`)},[()=>bt(a(Q).edge_of_baking_over_staking_billionth),()=>et(a(Re)),()=>Pt(a(at))]),f(H,He)}),f(ae,Be)};N(Oe,ae=>{a(oe)&&a(oe).length>0&&ae(Ve)})}var $=v(Oe,2),ye=r($);T(ye,{label:"Update",onclick:x}),s($);var Ae=v($,8);Ae.__click=[Kn,Pe];var qe=r(Ae,!0);s(Ae);var ue=v(Ae,2);{var Ee=ae=>{var Be=Qe(),B=R(Be);wt(B,17,()=>a(ce),kt,(H,Q,_e,xe)=>{var He=Qn(),Re=R(He),at=v(r(Re)),Ne=r(at);s(at),ut(),s(Re);var Ze=v(Re,2);Ze.__click=[Jn,Q];var le=r(Ze,!0);s(Ze),U(()=>{P(Ne,`#${a(Q).cycle??""}`),P(le,a(Q)?.pkh??"N/A")}),f(H,He)}),f(ae,Be)};N(ue,ae=>{a(ce)&&a(ce).length>0&&ae(Ee)})}var Xe=v(ue,2),Ie=r(Xe);{var ke=ae=>{T(ae,{label:"Update",onclick:c})},ze=ae=>{T(ae,{label:"Set Up",onclick:c})};N(Ie,ae=>{a(Pe)||a(ce).length>0?ae(ke):ae(ze,!1)})}s(Xe),U((ae,Be,B,H,Q,_e,xe,He,Re)=>{P(fe,` ${ae??""}`),P(ge,` ${Be??""}`),q=Le(we,1,"value svelte-11v2v2f",null,q,B),P(Z,` ${H??""}`),ie=Le(ee,1,"value svelte-11v2v2f",null,ie,Q),P(he,` ${_e??""}`),P(je,` ${xe??""}`),P(Te,` ${He??""} (multiplier: ${Re??""})`),P(qe,a(Pe)?.pkh??"N/A")},[()=>it(a(_).totalStaked),()=>it(a(_).totalDelegated),()=>({error:a(ne)<=0}),()=>et(a(ne)),()=>({error:a(se)<=0}),()=>et(a(se)),()=>bt(a(de)),()=>et(a(te)),()=>Pt(a(be))]),f(I,V)};N(L,I=>{a(_).isDeactivated?I(D):I(K,!1)})}f(J,w)},F=(J,w)=>{{var _=O=>{var L=ir();const D=C(()=>a(u).delegate),K=C(()=>a(D).activeStakingParameters?.edge_of_baking_over_staking_billionth??0),I=C(()=>a(D).pendingStakingParameters??[]),V=C(()=>a(D).activeStakingParameters),X=C(()=>Mt(a(D)?.stakedBalance,a(V)?.limit_of_staking_over_baking_millionth)),te=C(()=>Dt(a(V)?.limit_of_staking_over_baking_millionth)),be=C(()=>a(X)-a(D).totalStaked),ne=C(()=>a(X)-a(D).totalDelegated);var se=v(R(L),4);se.__click=[tr,u];var de=r(se,!0);s(se);var oe=v(se,4),Pe=v(r(oe));s(oe);var ce=v(oe,2);{var re=me=>{var Te=Qe(),Oe=R(Te);wt(Oe,17,()=>a(I),kt,(Ve,$,ye,Ae)=>{var qe=ar(),ue=R(qe),Ee=v(r(ue)),Xe=r(Ee);s(Ee),ut(),s(ue);var Ie=v(ue,2),ke=r(Ie);s(Ie),U(ze=>{P(Xe,`#${a($).cycle??""}`),P(ke,`Staking Fee: ${ze??""}`)},[()=>bt(a($).edge_of_baking_over_staking_billionth)]),f(Ve,qe)}),f(me,Te)};N(ce,me=>{a(I)&&a(I).length>0&&me(re)})}var fe=v(ce,4),ve=r(fe);s(fe);var ge=v(fe,4);let we;var q=r(ge);s(ge);var Z=v(ge,4);let ee;var ie=r(Z);s(Z);var he=v(Z,4),pe=r(he);T(pe,{label:"Cancel Delegation",onclick:h});var je=v(pe,2);T(je,{label:"Change The Baker",onclick:g}),s(he),U((me,Te,Oe,Ve,$,ye,Ae)=>{P(de,a(D).pkh),P(Pe,` ${me??""}`),P(ve,`❄️ ${Te??""} (multiplier: ${Oe??""})`),we=Le(ge,1,"value svelte-11v2v2f",null,we,Ve),P(q,`❄️ ${$??""}`),ee=Le(Z,1,"value svelte-11v2v2f",null,ee,ye),P(ie,`❄️ ${Ae??""}`)},[()=>bt(a(K)),()=>et(a(X)),()=>Pt(a(te)),()=>({error:a(be)<=0}),()=>et(a(be)),()=>({error:a(be)<=0}),()=>et(a(ne))]),f(O,L)},z=O=>{var L=nr(),D=v(R(L),4),K=r(D);T(K,{label:"Become a baker",onclick:d});var I=v(K,2);T(I,{label:"Delegate",onclick:g}),s(D),f(O,L)};N(J,O=>{a(u).delegate?O(_):O(z,!1)},w)}};N(m,J=>{a(u).delegate?.pkh===a(u).id?J(A):J(F,!1)},M)}};N(k,m=>{e.session.state.isLoadingBalance?m(S):m(G,!1)})}s(y);var W=v(y,2);dt(Ht(W,{}),m=>i=m,()=>i);var j=v(W,2);dt(Vn(j,{}),m=>n=m,()=>n);var E=v(j,2);dt(Hn(E,{}),m=>o=m,()=>o),f(t,b),Se()}ht(["click"]);var or=p('<div class="donate-btn svelte-a80gb8"><div></div> <div>🌱</div> <div>Donate to TzC / TEZGOV</div> <div>🌱</div></div>'),vr=p('<div class="donate-wrap svelte-a80gb8"><!></div> <!>',1);function lr(t,e){De(e,!0);let i,n=C(()=>e.session.account);async function o(){const h=await i.prompt({title:"Donate",message:"Enter the amount TEZ you want to donate",value:"1",rules:Ca(a(n)),confirmText:"Donate"}),x=BigInt(Number(h)*Tt);await e.onNewOperation(async()=>await e.session.donate(x)),await e.session.refreshBalance()}var u=vr(),l=R(u),d=r(l);T(d,{onclick:o,children:(h,x)=>{var c=or();f(h,c)},$$slots:{default:!0}}),s(l);var g=v(l,2);dt(Ht(g,{}),h=>i=h,()=>i),f(t,u),Se()}var dr=p('<div class="loader svelte-frt7xm"><!></div>'),cr=p('<div class="icon svelte-frt7xm"><!></div>'),ur=p("<!>votingPeriod",1),fr=p('<div class="error-message svelte-frt7xm"> </div> votingPeriod',1),gr=p('<div class="title svelte-frt7xm"><h5 class="svelte-frt7xm"> </h5></div> <div class="governance-period-header svelte-frt7xm"><div class="governance-period-number svelte-frt7xm"> </div> <div class="governance-period-remaining svelte-frt7xm"><!></div></div> <!> <!>',1),hr=p('<div class="redo svelte-frt7xm"><!></div> <!>',1),mr=p('<div class="account-overview sl-card svelte-frt7xm"><!></div> <div class="account-overview sl-card svelte-frt7xm"><!></div> <div class="account-overview sl-card svelte-frt7xm"><!></div> <div class="governance sl-card svelte-frt7xm"><div class="governance-period svelte-frt7xm"><!></div></div>',1),_r=p('<div class="home-wrap svelte-frt7xm"><!></div> <!>',1);function Lr(t,e){De(e,!0);let i=C(()=>Me.active?.state.period),n=C(()=>a(i)?.block),o=C(()=>Ja(a(i),a(n))),u=C(()=>an(a(o),{addSuffix:!0})),l=C(()=>a(o)<new Date),d=C(()=>a(i)&&Qa(a(i),a(n))),g=Ce(void 0),h=Ce("building"),x=Ce(void 0),c=Ce(!1);Bt(()=>{a(c)||(Y(g,void 0),Y(x,void 0),Y(h,"building"))});async function b(){const M=Me.active;M&&await M.refreshGovernanceState()}async function y(M){try{Y(c,!0),Y(h,"building");const A=await M(),F=await A.send();Y(x,F.ophash,!0),Y(h,"confirming"),await A.confirmation(),Y(h,"applied")}catch(A){Y(h,"failed"),Y(g,A.message,!0)}}var k=_r(),S=R(k),G=r(S);{var W=M=>{var A=dr(),F=r(A);gt(F,{progress:"indeterminate",message:"Loading account..."}),s(A),f(M,A)},j=(M,A)=>{{var F=J=>{var w=mr(),_=R(w),z=r(_);Nn(z,{get session(){return Me.active},onNewOperation:y}),s(_);var O=v(_,2),L=r(O);sr(L,{get session(){return Me.active},onNewOperation:y}),s(O);var D=v(O,2),K=r(D);lr(K,{get session(){return Me.active},onNewOperation:y}),s(D);var I=v(D,2),V=r(I),X=r(V);{var te=ne=>{gt(ne,{progress:"indeterminate",message:"Loading governance state..."})},be=ne=>{var se=hr(),de=R(se),oe=r(de);T(oe,{onclick:b,children:(re,fe)=>{var ve=cr(),ge=r(ve);qt(ge),s(ve),f(re,ve)},$$slots:{default:!0}}),s(de);var Pe=v(de,2);{var ce=re=>{var fe=gr(),ve=R(fe),ge=r(ve),we=r(ge);s(ge),s(ve);var q=v(ve,2),Z=r(q),ee=r(Z);s(Z);var ie=v(Z,2),he=r(ie);{var pe=$=>{var ye=We("ended");f($,ye)},je=$=>{var ye=We();U(()=>P(ye,`ends in ${a(d)??""} blocks ~ ${a(u)??""}`)),f($,ye)};N(he,$=>{a(l)?$(pe):$(je,!1)})}s(ie),s(q);var me=v(q,2);rt(me);var Te=v(me,2);{var Oe=$=>{vi($,{get session(){return Me.active},onNewOperation:y,get period(){return a(i)}})},Ve=($,ye)=>{{var Ae=ue=>{fn(ue,{get session(){return Me.active},onNewOperation:y,get period(){return a(i)}})},qe=(ue,Ee)=>{{var Xe=ke=>{var ze=ur(),ae=R(ze);Rn(ae,{get period(){return a(i)}}),ut(),f(ke,ze)},Ie=ke=>{var ze=fr(),ae=R(ze),Be=r(ae);s(ae),ut(),U(()=>P(Be,`${a(i).kind??""} is not supported yet`)),f(ke,ze)};N(ue,ke=>{["testing","adoption"].includes(a(i).kind)?ke(Xe):ke(Ie,!1)},Ee)}};N($,ue=>{["exploration","promotion"].includes(a(i).kind)?ue(Ae):ue(qe,!1)},ye)}};N(Te,$=>{a(i).kind==="proposal"?$(Oe):$(Ve,!1)})}U(()=>{P(we,`${a(i)?.kind??""} Period`),P(ee,`#${a(i).index??""}`)}),f(re,fe)};N(Pe,re=>{a(i)!==void 0&&re(ce)})}f(ne,se)};N(X,ne=>{Me?.active?.state.isLoadingPeriod?ne(te):ne(be,!1)})}s(V),s(I),f(J,w)};N(M,J=>{Me.active&&J(F)},A)}};N(G,M=>{Me.active&&Me.active.state.isInitializing?M(W):M(j,!1)})}s(S);var E=v(S,2);const m=C(()=>Me?.active?.account.explorer??"");wn(E,{get opHash(){return a(x)},get explorerTemplate(){return a(m)},get error(){return a(g)},allowClose:!1,get stage(){return a(h)},get open(){return a(c)},set open(M){Y(c,M,!0)}}),f(t,k),Se()}export{Lr as component};
