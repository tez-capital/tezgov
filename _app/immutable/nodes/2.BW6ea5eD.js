import{f as w,a as g,b as st,t as Ue,c as Ye}from"../chunks/B2zTA_4_.js";import{$ as da,af as ca,e as Ae,m as Bt,H as q,M as Me,q as a,i as r,s as v,r as s,t as R,O as C,g as ze,f as I,ap as ut,a5 as Ct,aq as ua,ar as fa,K as Yt,a2 as ga,j as ha}from"../chunks/Di_eboX7.js";import{d as ht,s as P}from"../chunks/Ds5tpewE.js";import{p as it,i as B,s as ma,b as dt}from"../chunks/BonuB96r.js";import{b0 as yt,ao as mt,aC as ft,am as E,av as De,b1 as _a,b2 as aa,b3 as _t,aq as wt,ak as et,aV as Je,au as kt,al as nt,b4 as It,b5 as Rt,b6 as Xt,ax as gt,aA as rt,af as Ut,ar as ct,aD as Nt,an as at,b7 as ba,b8 as Tt,b9 as pa,ba as ya,bb as $e,bc as bt,bd as Pt,be as Mt,bf as Dt,bg as wa,bh as ka,bi as xa,aU as Oe}from"../chunks/DULBIB-T.js";import"../chunks/CQlJw8mo.js";import{i as Ca}from"../chunks/DMWXuKvG.js";function La(t,e,i){var n=da(t,e);n&&n.set&&(t[e]=i,ca(()=>{t[e]=null}))}function Pa(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function Ma(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ia(t,...e){if(!Ma(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Zt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Da(t,e){ia(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const St=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Re=(t,e)=>t<<32-e|t>>>e;function Sa(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function na(t){return typeof t=="string"&&(t=Sa(t)),ia(t),t}class Aa{clone(){return this._cloneInto()}}function za(t){const e=n=>t().update(na(n)).digest(),i=t();return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=()=>t(),e}function Ba(t,e,i,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,i,n);const o=BigInt(32),u=BigInt(4294967295),l=Number(i>>o&u),d=Number(i&u),h=n?4:0,m=n?0:4;t.setUint32(e+h,l,n),t.setUint32(e+m,d,n)}const Na=(t,e,i)=>t&e^~t&i,Ta=(t,e,i)=>t&e^t&i^e&i;class Oa extends Aa{constructor(e,i,n,o){super(),this.blockLen=e,this.outputLen=i,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=St(this.buffer)}update(e){Zt(this);const{view:i,buffer:n,blockLen:o}=this;e=na(e);const u=e.length;for(let l=0;l<u;){const d=Math.min(o-this.pos,u-l);if(d===o){const h=St(e);for(;o<=u-l;l+=o)this.process(h,l);continue}n.set(e.subarray(l,l+d),this.pos),this.pos+=d,l+=d,this.pos===o&&(this.process(i,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Zt(this),Da(e,this),this.finished=!0;const{buffer:i,view:n,blockLen:o,isLE:u}=this;let{pos:l}=this;i[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>o-l&&(this.process(n,0),l=0);for(let c=l;c<o;c++)i[c]=0;Ba(n,o-8,BigInt(this.length*8),u),this.process(n,0);const d=St(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=h/4,x=this.get();if(m>x.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<m;c++)d.setUint32(4*c,x[c],u)}digest(){const{buffer:e,outputLen:i}=this;this.digestInto(e);const n=e.slice(0,i);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:i,buffer:n,length:o,finished:u,destroyed:l,pos:d}=this;return e.length=o,e.pos=d,e.finished=u,e.destroyed=l,o%i&&e.buffer.set(n),e}}const Ea=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ke=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ge=new Uint32Array(64);class Ia extends Oa{constructor(){super(64,32,8,!1),this.A=Ke[0]|0,this.B=Ke[1]|0,this.C=Ke[2]|0,this.D=Ke[3]|0,this.E=Ke[4]|0,this.F=Ke[5]|0,this.G=Ke[6]|0,this.H=Ke[7]|0}get(){const{A:e,B:i,C:n,D:o,E:u,F:l,G:d,H:h}=this;return[e,i,n,o,u,l,d,h]}set(e,i,n,o,u,l,d,h){this.A=e|0,this.B=i|0,this.C=n|0,this.D=o|0,this.E=u|0,this.F=l|0,this.G=d|0,this.H=h|0}process(e,i){for(let c=0;c<16;c++,i+=4)Ge[c]=e.getUint32(i,!1);for(let c=16;c<64;c++){const b=Ge[c-15],k=Ge[c-2],p=Re(b,7)^Re(b,18)^b>>>3,S=Re(k,17)^Re(k,19)^k>>>10;Ge[c]=S+Ge[c-7]+p+Ge[c-16]|0}let{A:n,B:o,C:u,D:l,E:d,F:h,G:m,H:x}=this;for(let c=0;c<64;c++){const b=Re(d,6)^Re(d,11)^Re(d,25),k=x+b+Na(d,h,m)+Ea[c]+Ge[c]|0,S=(Re(n,2)^Re(n,13)^Re(n,22))+Ta(n,o,u)|0;x=m,m=h,h=d,d=l+k|0,l=u,u=o,o=n,n=k+S|0}n=n+this.A|0,o=o+this.B|0,u=u+this.C|0,l=l+this.D|0,d=d+this.E|0,h=h+this.F|0,m=m+this.G|0,x=x+this.H|0,this.set(n,o,u,l,d,h,m,x)}roundClean(){Ge.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Kt=za(()=>new Ia);function Ra(t){function e(u){var l=Uint8Array.from(u),d=t(l),h=l.length+4,m=new Uint8Array(h);return m.set(l,0),m.set(d.subarray(0,4),l.length),yt.encode(m)}function i(u){var l=u.slice(0,-4),d=u.slice(-4),h=t(l);if(!(d[0]^h[0]|d[1]^h[1]|d[2]^h[2]|d[3]^h[3]))return l}function n(u){var l=yt.decodeUnsafe(u);if(l!=null)return i(l)}function o(u){var l=yt.decode(u),d=i(l);if(d==null)throw new Error("Invalid checksum");return d}return{encode:e,decode:o,decodeUnsafe:n}}function Ua(t){return Kt(Kt(t))}const Ot=Ra(Ua),Et="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Fa=34,Wa=51,ja=t=>{let e=0n;for(const i of t)e*=58n,e+=BigInt(Et.indexOf(i));return e},Gt=t=>{const e=[];for(;t>0n;)e.push(Number(t%256n)),t=t/256n;return e.reverse()},Va=t=>{const e=Fa,i=ja(t),n=yt.decode(t).length+1,o=BigInt(8*(e-n+4)),u=Wa-t.length;let l=i*58n**BigInt(u);l=l>>o,l+=l===l>>o<<o?0n:1n;let d=(i+1n)*58n**BigInt(u)-(1n<<o)+1n;if(d=d>>o,d>=l){const h=Uint8Array.from(Array.from({...Gt(l),length:e}).map(b=>b===void 0?0:b)),m=Ot.encode(h);if(!m.startsWith(t)||m.length!==u+t.length)return null;const x=Uint8Array.from(Array.from({...Gt(l),length:e}).map(b=>b===void 0?255:b)),c=Ot.encode(x);return!c.startsWith(t)||c.length!==u+t.length?null:h}return null},qa=t=>{let e="Pt1";for(const n of t){if(Et.includes(n)){e+=n;continue}if(Et.includes(n.toLowerCase())){e+=n.toLowerCase();continue}}const i=Va(e);return i===null?[!1,"Can not generate protocol hash from provided message"]:[!0,Ot.encode(new Uint8Array(i))]};var Ha=w(`<div class="center svelte-sbi72s"><div class="content sl-card svelte-sbi72s"><b class="title svelte-sbi72s">New Proposal</b> <div></div> <div class="text">If you want to make a statement, write it in the <b>statement</b> field; this will generate a
				proposal hash for you.</div> <div class="text">To inject a proper protocol upgrade proposal, write the hash in the <b>new proposal</b> field and leave <b>statement</b> blank.</div> <div class="text">*<b>Please refrain from using this feature for spamming.</b></div> <div class="text">**Remember that you can propose or vote for a proposal only <b>10 times per period</b>.</div> <div></div> <!> <!> <div class="controls svelte-sbi72s"><!> <div><!></div></div></div></div>`);function Ya(t,e){Ae(e,!0);let i=it(e,"open",15,!1),n=Me(""),o=Me("");async function u(){e.onnewproposal(a(o)),i(!1)}const l=[h=>!!h||"proposal can not be empty",h=>h.startsWith("P")||"proposal has to start with P"];Bt(()=>{i()&&(q(n,""),q(o,""))}),Bt(()=>{if(a(n)){const[h,m]=qa(a(n));h&&q(o,m,!0)}});let d=C(()=>l.every(h=>h(a(o))===!0));mt(t,{get open(){return i()},persistent:!0,children:(h,m)=>{var x=Ha(),c=r(x),b=v(r(c),14);ft(b,{label:"Statement",get value(){return a(n)},set value(O){q(n,O,!0)}});var k=v(b,2);ft(k,{label:"New Proposal",hint:"You can provide proposal hash",get rules(){return l},get value(){return a(o)},set value(O){q(o,O,!0)}});var p=v(k,2),S=r(p);E(S,{label:"Cancel",onclick:()=>i(!1)});var Y=v(S,2);let W;var U=r(Y);E(U,{label:"Inject",onclick:u}),s(Y),s(p),s(c),s(x),R(O=>W=De(Y,1,"",null,W,O),[()=>({disabled:!a(d)})]),g(h,x)},$$slots:{default:!0}}),ze()}var Xa=st('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 16.6875 3 L 16.375 3.28125 L 9.59375 10 L 5 10 L 5 26 L 21.84375 26 C 23.253906 26 24.484375 25.003906 24.78125 23.625 L 26.9375 13.625 C 27.332031 11.777344 25.886719 10 24 10 L 18.25 10 L 18.4375 9.25 C 18.640625 9.09375 18.769531 9.027344 19.0625 8.625 C 19.53125 7.984375 20 6.992188 20 5.65625 C 20 4.230469 18.710938 3 17.09375 3 Z M 17.40625 5.09375 C 17.828125 5.175781 18 5.347656 18 5.65625 C 18 6.558594 17.726563 7.117188 17.46875 7.46875 C 17.210938 7.820313 17.03125 7.90625 17.03125 7.90625 L 16.6875 8.09375 L 16.5625 8.5 L 15.96875 10.75 L 15.65625 12 L 24 12 C 24.660156 12 25.105469 12.574219 24.96875 13.21875 L 22.84375 23.21875 C 22.742188 23.6875 22.320313 24 21.84375 24 L 11 24 L 11 11.40625 Z M 7 12 L 9 12 L 9 24 L 7 24 Z"></path></svg>');function Lt(t){var e=Xa();g(t,e)}var Za=st('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 3 6 L 3 25 L 13 25 C 14.101563 25 15 25.898438 15 27 L 17 27 C 17 25.898438 17.898438 25 19 25 L 29 25 L 29 6 L 19 6 C 17.808594 6 16.734375 6.527344 16 7.359375 C 15.265625 6.527344 14.191406 6 13 6 Z M 5 8 L 13 8 C 14.101563 8 15 8.898438 15 10 L 17 10 C 17 8.898438 17.898438 8 19 8 L 27 8 L 27 23 L 19 23 C 17.808594 23 16.734375 23.527344 16 24.359375 C 15.265625 23.527344 14.191406 23 13 23 L 5 23 Z M 15 12 L 15 14 L 17 14 L 17 12 Z M 15 16 L 15 18 L 17 18 L 17 16 Z M 15 20 L 15 22 L 17 22 L 17 20 Z"></path></svg>');function Ft(t){var e=Za();g(t,e)}var Ka=st('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z"></path></svg>');function Wt(t){var e=Ka();g(t,e)}function Ga(t,e){if(!t)return new Date(0);const n=((t.startPosition+t.position+t.remaining??-1)-(e??t?.position??1))*_a;return new Date(Date.now()+n)}function Ja(t,e){return t?(t.startPosition+t.position+t.remaining??0)-(e??0):"N/A"}function Qa(t){return(BigInt(t)/10n**6n).toLocaleString()}var $a=(t,e)=>et(a(e).proposal),ei=w('<div class="button-content svelte-1kvhhsz"><div class="label svelte-1kvhhsz">EXPLORER</div> <div class="icon svelte-1kvhhsz"><!></div></div>'),ti=w('<div class="button-content svelte-1kvhhsz"><div class="label svelte-1kvhhsz">AGORA</div> <div class="icon svelte-1kvhhsz"><!></div></div>'),ai=w('<div class="button-content upvoted svelte-1kvhhsz"><div class="label svelte-1kvhhsz">UPVOTED</div> <div class="icon svelte-1kvhhsz"><!></div></div>'),ii=w('<div class="button-content svelte-1kvhhsz"><div class="label svelte-1kvhhsz">UPVOTE</div> <div class="icon svelte-1kvhhsz"><!></div></div>'),ni=w('<div><div class="title svelte-1kvhhsz"><button class="unstyle-button"> </button></div> <div class="upvotes svelte-1kvhhsz"> <!></div> <div class="upvote-bar svelte-1kvhhsz"><svg width="100%" height="15"><rect width="100%" y="5" height="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--progress-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--progress-color)" rx="2" ry="2"></rect></svg></div> <!> <!> <div><!></div></div>'),ri=w('<!> <div class="separator svelte-1kvhhsz"><!></div>',1),si=w('<div class="proposal-period-wrap svelte-1kvhhsz"><div class="proposal-period svelte-1kvhhsz"><!></div> <div><!></div></div> <!>',1);function oi(t,e){Ae(e,!0);let i=C(()=>e.session.account),n=Me(!1);function o(f){window.open(`${It}/${f}`,"_blank")}function u(f){window.open(`${Rt}/${f}/${e.period.index}`,"_blank")}async function l(f){await e.onNewOperation(async()=>await e.session.upvote(f,e.period.index))}const d=C(()=>e.period.voters.reduce((f,D)=>f+BigInt(D.votingPower.toString()),0n));let h=C(()=>aa(e.period.voters,f=>f.pkh===a(i).id)),m=C(()=>e.period.proposals.map(f=>{const D=Number(BigInt(f.upvotes.toString())*100000n/a(d))/1e3;return{...f,upvotes:f.upvotes,upvotesFormatted:Qa(f.upvotes.toString()),percentage:Math.round(D*100)/100,percentageString:`${D}%`,quorumReached:BigInt(f.upvotes.toString())>a(d)/100n*_t}}));var x=si(),c=I(x),b=r(c),k=r(b);{var p=f=>{var D=Ue("no proposals");g(f,D)},S=f=>{var D=ri(),N=I(D);wt(N,17,()=>a(m),kt,(y,_)=>{var L=ni();let z;var M=r(L),T=r(M);T.__click=[$a,_];var $=r(T,!0);s(T),s(M);var F=v(M,2),X=r(F),J=v(X);{var ae=j=>{var Z=Ue();R(()=>P(Z,`(${_t??""}% reached)`)),g(j,Z)},ie=j=>{var Z=Ue();R(()=>P(Z,`(needs ${_t??""}%)`)),g(j,Z)};B(J,j=>{a(_).quorumReached?j(ae):j(ie,!1)})}s(F);var le=v(F,2),oe=r(le),he=v(r(oe)),ne=v(he);s(oe),s(le);var ye=v(le,2);E(ye,{onclick:()=>o(a(_).proposal),children:(j,Z)=>{var Q=ei(),te=v(r(Q),2),ce=r(te);Wt(ce),s(te),s(Q),g(j,Q)},$$slots:{default:!0}});var re=v(ye,2);E(re,{onclick:()=>u(a(_).proposal),children:(j,Z)=>{var Q=ti(),te=v(r(Q),2),ce=r(te);Ft(ce),s(te),s(Q),g(j,Q)},$$slots:{default:!0}});var de=v(re,2);let we;var ke=r(de);{var me=j=>{var Z=ai(),Q=v(r(Z),2),te=r(Q);Lt(te),s(Q),s(Z),g(j,Z)},xe=j=>{E(j,{onclick:()=>l([a(_).proposal]),children:(Z,Q)=>{var te=ii(),ce=v(r(te),2),_e=r(ce);Lt(_e),s(ce),s(te),g(Z,te)},$$slots:{default:!0}})};B(ke,j=>{e.period.votes&&e.period.votes[a(_).proposal].includes(a(i).id)?j(me):j(xe,!1)})}s(de),s(L),R((j,Z)=>{z=De(L,1,"proposal svelte-1kvhhsz",null,z,j),P($,a(_).proposal),P(X,`${a(_).upvotesFormatted??""} upvotes ~ ${a(_).percentage??""}% `),Je(he,"width",a(_).percentageString),Je(ne,"x",`${_t}%`),we=De(de,1,"upvote-btn svelte-1kvhhsz",null,we,Z)},[()=>({success:a(_).quorumReached}),()=>({disabled:!a(h)})]),g(y,L)});var H=v(N,2),G=r(H);nt(G),s(H),g(f,D)};B(k,f=>{a(m).length===0?f(p):f(S,!1)})}s(b);var Y=v(b,2);let W;var U=r(Y);E(U,{label:"New Proposal",onclick:()=>q(n,!0)}),s(Y),s(c);var O=v(c,2);Ya(O,{onnewproposal:f=>l([f]),get open(){return a(n)},set open(f){q(n,f,!0)}}),R(f=>W=De(Y,1,"new-proposal",null,W,f),[()=>({disabled:!a(h)})]),g(t,x),ze()}ht(["click"]);var vi=st('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 10.15625 6 C 8.746094 6 7.515625 6.996094 7.21875 8.375 L 5.0625 18.375 C 4.667969 20.222656 6.113281 22 8 22 L 13.75 22 L 13.5625 22.75 C 13.359375 22.90625 13.230469 22.972656 12.9375 23.375 C 12.46875 24.015625 12 25.007813 12 26.34375 C 12 27.769531 13.289063 29 14.90625 29 L 15.3125 29 L 15.625 28.71875 L 22.40625 22 L 27 22 L 27 6 Z M 10.15625 8 L 21 8 L 21 20.59375 L 14.59375 26.90625 C 14.171875 26.824219 14 26.652344 14 26.34375 C 14 25.441406 14.273438 24.882813 14.53125 24.53125 C 14.789063 24.179688 14.96875 24.09375 14.96875 24.09375 L 15.3125 23.90625 L 15.4375 23.5 L 16.03125 21.25 L 16.34375 20 L 8 20 C 7.339844 20 6.894531 19.425781 7.03125 18.78125 L 9.15625 8.78125 C 9.257813 8.3125 9.679688 8 10.15625 8 Z M 23 8 L 25 8 L 25 20 L 23 20 Z"></path></svg>');function Jt(t){var e=vi();g(t,e)}var li=st('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 16 6 C 14.9375 6 14.003906 6.5625 13.46875 7.40625 C 13.03125 7.15625 12.535156 7 12 7 C 10.355469 7 9 8.355469 9 10 L 9 13.65625 L 8.875 13.8125 C 8.800781 13.898438 8.730469 13.976563 8.65625 14.0625 C 8.144531 14.660156 7.65625 15.292969 7.21875 15.9375 L 6.90625 16.34375 C 6.480469 16.894531 6.21875 17.535156 6.09375 18.1875 C 6.078125 18.261719 6.042969 18.332031 6.03125 18.40625 C 5.855469 19.652344 6.226563 20.949219 7.09375 21.9375 L 9.46875 24.625 C 10.796875 26.136719 12.707031 27 14.71875 27 L 20 27 C 23.855469 27 27 23.855469 27 20 L 27 11 C 27 9.355469 25.644531 8 24 8 C 23.464844 8 22.96875 8.15625 22.53125 8.40625 C 21.996094 7.5625 21.0625 7 20 7 C 19.464844 7 18.96875 7.15625 18.53125 7.40625 C 17.996094 6.5625 17.0625 6 16 6 Z M 16 8 C 16.566406 8 17 8.433594 17 9 L 17 11.1875 C 16.683594 11.074219 16.351563 11 16 11 L 15 11 L 15 9 C 15 8.433594 15.433594 8 16 8 Z M 12 9 C 12.566406 9 13 9.433594 13 10 L 13 11 L 11.59375 11 L 11.3125 11.28125 C 11.3125 11.28125 11.085938 11.511719 11 11.59375 L 11 10 C 11 9.433594 11.433594 9 12 9 Z M 20 9 C 20.566406 9 21 9.433594 21 10 L 21 13 C 21 13.566406 20.566406 14 20 14 C 19.433594 14 19 13.566406 19 13 L 19 10 C 19 9.433594 19.433594 9 20 9 Z M 24 10 C 24.566406 10 25 10.433594 25 11 L 25 13 C 25 13.566406 24.566406 14 24 14 C 23.433594 14 23 13.566406 23 13 L 23 11 C 23 10.433594 23.433594 10 24 10 Z M 12.4375 13 L 16 13 C 16.5625 13 17 13.4375 17 14 C 17 14.5625 16.5625 15 16 15 L 12.875 15 L 12.59375 15.375 L 10.25 18.34375 L 11.8125 19.59375 L 13.65625 17.28125 C 14.015625 17.449219 14.425781 17.699219 14.875 18.0625 C 15.941406 18.929688 17 20.347656 17 23 L 19 23 C 19 20.132813 17.855469 18.15625 16.59375 16.9375 C 17.402344 16.769531 18.101563 16.273438 18.53125 15.59375 C 18.96875 15.84375 19.464844 16 20 16 C 20.765625 16 21.46875 15.699219 22 15.21875 C 22.53125 15.699219 23.234375 16 24 16 C 24.351563 16 24.683594 15.925781 25 15.8125 L 25 20 C 25 22.773438 22.773438 25 20 25 L 14.71875 25 C 13.28125 25 11.917969 24.394531 10.96875 23.3125 L 8.59375 20.59375 C 8.164063 20.105469 7.964844 19.507813 8 18.90625 C 8 18.898438 8.027344 18.832031 8.03125 18.8125 C 8.035156 18.78125 8.027344 18.75 8.03125 18.71875 C 8.078125 18.5 8.230469 18.078125 8.5625 17.53125 C 8.605469 17.460938 8.671875 17.382813 8.71875 17.3125 L 10.1875 15.375 C 11.292969 14.082031 12.214844 13.210938 12.4375 13 Z"></path></svg>');function Qt(t){var e=li();g(t,e)}const pt=43200,$t=1440,ea=Symbol.for("constructDateFrom");function jt(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&ea in t?t[ea](e):t instanceof Date?new t.constructor(e):new Date(e)}function Qe(t,e){return jt(t,t)}let di={};function ci(){return di}function ta(t){const e=Qe(t),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),+t-+i}function Vt(t,...e){const i=jt.bind(null,t||e.find(n=>typeof n=="object"));return e.map(i)}function xt(t,e){const i=+Qe(t)-+Qe(e);return i<0?-1:i>0?1:i}function ui(t){return jt(t,Date.now())}function fi(t,e,i){const[n,o]=Vt(i?.in,t,e),u=n.getFullYear()-o.getFullYear(),l=n.getMonth()-o.getMonth();return u*12+l}function gi(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function hi(t,e){return+Qe(t)-+Qe(e)}function mi(t,e){const i=Qe(t);return i.setHours(23,59,59,999),i}function _i(t,e){const i=Qe(t),n=i.getMonth();return i.setFullYear(i.getFullYear(),n+1,0),i.setHours(23,59,59,999),i}function bi(t,e){const i=Qe(t);return+mi(i)==+_i(i)}function pi(t,e,i){const[n,o,u]=Vt(i?.in,t,t,e),l=xt(o,u),d=Math.abs(fi(o,u));if(d<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-l*d);let h=xt(o,u)===-l;bi(n)&&d===1&&xt(n,u)===1&&(h=!1);const m=l*(d-+h);return m===0?0:m}function yi(t,e,i){const n=hi(t,e)/1e3;return gi(i?.roundingMethod)(n)}const wi={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ki=(t,e,i)=>{let n;const o=wi[t];return typeof o=="string"?n=o:e===1?n=o.one:n=o.other.replace("{{count}}",e.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n};function At(t){return(e={})=>{const i=e.width?String(e.width):t.defaultWidth;return t.formats[i]||t.formats[t.defaultWidth]}}const xi={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ci={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Li={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pi={date:At({formats:xi,defaultWidth:"full"}),time:At({formats:Ci,defaultWidth:"full"}),dateTime:At({formats:Li,defaultWidth:"full"})},Mi={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Di=(t,e,i,n)=>Mi[t];function vt(t){return(e,i)=>{const n=i?.context?String(i.context):"standalone";let o;if(n==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,d=i?.width?String(i.width):l;o=t.formattingValues[d]||t.formattingValues[l]}else{const l=t.defaultWidth,d=i?.width?String(i.width):t.defaultWidth;o=t.values[d]||t.values[l]}const u=t.argumentCallback?t.argumentCallback(e):e;return o[u]}}const Si={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ai={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zi={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Bi={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ni={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ti={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Oi=(t,e)=>{const i=Number(t),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},Ei={ordinalNumber:Oi,era:vt({values:Si,defaultWidth:"wide"}),quarter:vt({values:Ai,defaultWidth:"wide",argumentCallback:t=>t-1}),month:vt({values:zi,defaultWidth:"wide"}),day:vt({values:Bi,defaultWidth:"wide"}),dayPeriod:vt({values:Ni,defaultWidth:"wide",formattingValues:Ti,defaultFormattingWidth:"wide"})};function lt(t){return(e,i={})=>{const n=i.width,o=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],u=e.match(o);if(!u)return null;const l=u[0],d=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(d)?Ri(d,c=>c.test(l)):Ii(d,c=>c.test(l));let m;m=t.valueCallback?t.valueCallback(h):h,m=i.valueCallback?i.valueCallback(m):m;const x=e.slice(l.length);return{value:m,rest:x}}}function Ii(t,e){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return i}function Ri(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return i}function Ui(t){return(e,i={})=>{const n=e.match(t.matchPattern);if(!n)return null;const o=n[0],u=e.match(t.parsePattern);if(!u)return null;let l=t.valueCallback?t.valueCallback(u[0]):u[0];l=i.valueCallback?i.valueCallback(l):l;const d=e.slice(o.length);return{value:l,rest:d}}}const Fi=/^(\d+)(th|st|nd|rd)?/i,Wi=/\d+/i,ji={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Vi={any:[/^b/i,/^(a|c)/i]},qi={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Hi={any:[/1/i,/2/i,/3/i,/4/i]},Yi={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Xi={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Zi={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ki={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gi={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ji={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Qi={ordinalNumber:Ui({matchPattern:Fi,parsePattern:Wi,valueCallback:t=>parseInt(t,10)}),era:lt({matchPatterns:ji,defaultMatchWidth:"wide",parsePatterns:Vi,defaultParseWidth:"any"}),quarter:lt({matchPatterns:qi,defaultMatchWidth:"wide",parsePatterns:Hi,defaultParseWidth:"any",valueCallback:t=>t+1}),month:lt({matchPatterns:Yi,defaultMatchWidth:"wide",parsePatterns:Xi,defaultParseWidth:"any"}),day:lt({matchPatterns:Zi,defaultMatchWidth:"wide",parsePatterns:Ki,defaultParseWidth:"any"}),dayPeriod:lt({matchPatterns:Gi,defaultMatchWidth:"any",parsePatterns:Ji,defaultParseWidth:"any"})},$i={code:"en-US",formatDistance:ki,formatLong:Pi,formatRelative:Di,localize:Ei,match:Qi,options:{weekStartsOn:0,firstWeekContainsDate:1}};function en(t,e,i){const n=ci(),o=i?.locale??n.locale??$i,u=2520,l=xt(t,e);if(isNaN(l))throw new RangeError("Invalid time value");const d=Object.assign({},i,{addSuffix:i?.addSuffix,comparison:l}),[h,m]=Vt(i?.in,...l>0?[e,t]:[t,e]),x=yi(m,h),c=(ta(m)-ta(h))/1e3,b=Math.round((x-c)/60);let k;if(b<2)return i?.includeSeconds?x<5?o.formatDistance("lessThanXSeconds",5,d):x<10?o.formatDistance("lessThanXSeconds",10,d):x<20?o.formatDistance("lessThanXSeconds",20,d):x<40?o.formatDistance("halfAMinute",0,d):x<60?o.formatDistance("lessThanXMinutes",1,d):o.formatDistance("xMinutes",1,d):b===0?o.formatDistance("lessThanXMinutes",1,d):o.formatDistance("xMinutes",b,d);if(b<45)return o.formatDistance("xMinutes",b,d);if(b<90)return o.formatDistance("aboutXHours",1,d);if(b<$t){const p=Math.round(b/60);return o.formatDistance("aboutXHours",p,d)}else{if(b<u)return o.formatDistance("xDays",1,d);if(b<pt){const p=Math.round(b/$t);return o.formatDistance("xDays",p,d)}else if(b<pt*2)return k=Math.round(b/pt),o.formatDistance("aboutXMonths",k,d)}if(k=pi(m,h),k<12){const p=Math.round(b/pt);return o.formatDistance("xMonths",p,d)}else{const p=k%12,S=Math.trunc(k/12);return p<3?o.formatDistance("aboutXYears",S,d):p<9?o.formatDistance("overXYears",S,d):o.formatDistance("almostXYears",S+1,d)}}function tn(t,e){return en(t,ui(t),e)}function zt(t){return typeof t=="bigint"&&(t=t.toString()),!t||typeof t!="string"?"N/A":t==="0"?"0 Íú©":`${t.substring(0,t.length-6)}.${t.substring(t.length-6)} Íú©`}var an=(t,e)=>et(e.period.proposal),nn=w('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">EXPLORER</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),rn=w('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">AGORA</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),sn=w('<div class="existing-vote svelte-1ovz1iv">You voted: <div class="ballot svelte-1ovz1iv"> </div></div>'),on=w('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">NAY</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),vn=w('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">PASS</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),ln=w('<div class="button-content svelte-1ovz1iv"><div class="label svelte-1ovz1iv">YAY</div> <div class="icon svelte-1ovz1iv"><!></div></div>'),dn=w('<div class="nay svelte-1ovz1iv"><!></div> <div class="pass svelte-1ovz1iv"><!></div> <div class="yay svelte-1ovz1iv"><!></div>',1),cn=w('<div><div class="period svelte-1ovz1iv"><div class="proposal svelte-1ovz1iv"><div class="title svelte-1ovz1iv"><button class="unstyle-button"> </button></div> <div class="vote-summary svelte-1ovz1iv"><div class="nay value svelte-1ovz1iv"> <div class="icon svelte-1ovz1iv"><!></div></div> <div class="pass value svelte-1ovz1iv"> <div class="icon svelte-1ovz1iv"><!></div></div> <div class="yay value svelte-1ovz1iv"> <div class="icon svelte-1ovz1iv"><!></div></div></div> <div class="separator svelte-1ovz1iv"><!></div> <div class="bar svelte-1ovz1iv"><div class="bar-title svelte-1ovz1iv">Quorum</div> <div class="bar-description svelte-1ovz1iv"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--yay-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--pass-color)" rx="2" ry="2"></rect><rect height="5" y="5" fill="var(--nay-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--quorum-color)" rx="2" ry="2"></rect></svg></div> <div class="bar svelte-1ovz1iv"><div class="bar-title svelte-1ovz1iv">Supermajority</div> <div class="bar-description svelte-1ovz1iv"> <!></div> <svg width="100%" height="15"><rect width="100%" height="5" y="5" fill="#e6e6e6" rx="2" ry="2"></rect><rect y="5" height="5" fill="var(--majority-color)" rx="2" ry="2"></rect><rect width="3" height="15" fill="var(--majority-color)" rx="2" ry="2"></rect></svg></div> <!> <!> <div class="separator svelte-1ovz1iv"><!></div> <div><!></div></div></div></div>');function un(t,e){Ae(e,!0);let i=C(()=>e.session.account),n=C(()=>e.period.voters.reduce((A,V)=>A+BigInt(V.votingPower.toString()),0n)),o=C(()=>e.period.summary.yay+e.period.summary.nay||1n),u=C(()=>Math.round(Number(BigInt(e.period.summary.yay)*100000n/a(n))/10)/100),l=C(()=>Math.round(Number(BigInt(e.period.summary.nay)*100000n/a(n))/10)/100),d=C(()=>Math.round(Number(BigInt(e.period.summary.pass)*100000n/a(n))/10)/100);const h=C(()=>a(o)+BigInt(e.period.summary.pass));let m=C(()=>a(h)>a(n)*BigInt(e.period.quorum)/10000n),x=C(()=>Math.min(Number(BigInt(e.period.summary.yay+e.period.summary.nay+e.period.summary.pass)*100000n/a(n))/1e3,100)),c=Number(e.period.quorum)/100,b=C(()=>BigInt(e.period.summary.yay)>=a(o)*Xt/100n),k=C(()=>Math.round(Number(BigInt(e.period.summary.yay)*100000n/a(o))/10)/100),p=C(()=>Number(Xt));function S(){window.open(`${It}/${e.period.proposal}`,"_blank")}function Y(){window.open(`${Rt}/${e.period.proposal}/${e.period.index}`,"_blank")}async function W(A){await e.onNewOperation(async()=>await e.session.vote(e.period.proposal,A,e.period.index))}let U=C(()=>e.period.ballots.find(A=>A.pkh===a(i).id)),O=C(()=>aa(e.period.voters,A=>A.pkh===a(i).id));var f=cn();let D;var N=r(f),H=r(N),G=r(H),y=r(G);y.__click=[an,e];var _=r(y,!0);s(y),s(G);var L=v(G,2),z=r(L),M=r(z),T=v(M),$=r(T);Jt($),s(T),s(z);var F=v(z,2),X=r(F),J=v(X),ae=r(J);Qt(ae),s(J),s(F);var ie=v(F,2),le=r(ie),oe=v(le),he=r(oe);Lt(he),s(oe),s(ie),s(L);var ne=v(L,2),ye=r(ne);nt(ye),s(ne);var re=v(ne,2),de=v(r(re),2),we=r(de),ke=v(we);{var me=A=>{var V=Ue();R(()=>P(V,`(${c}% reached)`)),g(A,V)},xe=A=>{var V=Ue();R(()=>P(V,`(needs ${c}%)`)),g(A,V)};B(ke,A=>{a(m)?A(me):A(xe,!1)})}s(de);var j=v(de,2),Z=v(r(j)),Q=v(Z),te=v(Q),ce=v(te);s(j),s(re);var _e=v(re,2),Fe=v(r(_e),2),be=r(Fe),ee=v(be);{var ue=A=>{var V=Ue();R(()=>P(V,`(${a(p)??""}% reached)`)),g(A,V)},We=A=>{var V=Ue();R(()=>P(V,`(required ${a(p)??""}%)`)),g(A,V)};B(ee,A=>{a(b)?A(ue):A(We,!1)})}s(Fe);var Ce=v(Fe,2),pe=v(r(Ce)),Be=v(pe);s(Ce),s(_e);var je=v(_e,2);E(je,{onclick:()=>S(),children:(A,V)=>{var K=nn(),ge=v(r(K),2),Pe=r(ge);Wt(Pe),s(ge),s(K),g(A,K)},$$slots:{default:!0}});var Ne=v(je,2);E(Ne,{onclick:()=>Y(),children:(A,V)=>{var K=rn(),ge=v(r(K),2),Pe=r(ge);Ft(Pe),s(ge),s(K),g(A,K)},$$slots:{default:!0}});var fe=v(Ne,2),Se=r(fe);nt(Se),s(fe);var Le=v(fe,2);let Xe;var ot=r(Le);{var se=A=>{var V=sn(),K=v(r(V)),ge=r(K,!0);s(K),s(V),R(()=>P(ge,a(U).ballot)),g(A,V)},Ve=A=>{var V=dn(),K=I(V),ge=r(K);E(ge,{onclick:()=>W("nay"),children:(Te,Ze)=>{var ve=on(),Ie=v(r(ve),2),He=r(Ie);Jt(He),s(Ie),s(ve),g(Te,ve)},$$slots:{default:!0}}),s(K);var Pe=v(K,2),qe=r(Pe);E(qe,{onclick:()=>W("pass"),children:(Te,Ze)=>{var ve=vn(),Ie=v(r(ve),2),He=r(Ie);Qt(He),s(Ie),s(ve),g(Te,ve)},$$slots:{default:!0}}),s(Pe);var Ee=v(Pe,2),tt=r(Ee);E(tt,{onclick:()=>W("yay"),children:(Te,Ze)=>{var ve=ln(),Ie=v(r(ve),2),He=r(Ie);Lt(He),s(Ie),s(ve),g(Te,ve)},$$slots:{default:!0}}),s(Ee),g(A,V)};B(ot,A=>{a(U)?A(se):A(Ve,!1)})}s(Le),s(H),s(N),s(f),R((A,V,K,ge,Pe)=>{D=De(f,1,"period-wrap svelte-1ovz1iv",null,D,A),P(_,e.period.proposal),P(M,`${V??""} (${a(l)??""} %) `),P(X,`${K??""} (${a(d)??""} %) `),P(le,`${ge??""} (${a(u)??""} %) `),P(we,`${a(x)??""} % `),Je(Z,"width",`${a(l)+a(d)+a(u)}%`),Je(Q,"width",`${a(l)+a(d)}%`),Je(te,"width",`${a(l)}%`),Je(ce,"x",`${c}%`),P(be,`${a(k)??""} `),Je(pe,"width",`${a(k)}%`),Je(Be,"x",`${a(p)}%`),Xe=De(Le,1,"vote-section svelte-1ovz1iv",null,Xe,Pe)},[()=>({"quorum-reached":a(m),"majority-reached":a(b)}),()=>zt(e.period.summary.nay),()=>zt(e.period.summary.pass),()=>zt(e.period.summary.yay),()=>({disabled:!a(O)})]),g(t,f),ze()}ht(["click"]);var fn=w('<div class="error-message svelte-1kcf8tg"> </div>'),gn=w('<div class="status svelte-1kcf8tg">CONFIRMED</div>'),hn=w('<div class="status failed svelte-1kcf8tg">FAILED</div>'),mn=w('<div class="note svelte-1kcf8tg">NOTE: You may need to confirm the transaction with your signer.</div>'),_n=w('<div class="progress svelte-1kcf8tg"><!></div> <!>',1),bn=w('<h5 class="title svelte-1kcf8tg"> </h5> <!> <!> <div><!></div>',1),pn=w('<div class="center svelte-1kcf8tg"><div class="transaction-confirmation sl-card svelte-1kcf8tg"><!> <!></div></div>');function yn(t,e){Ae(e,!0);let i=it(e,"open",15),n=it(e,"allowClose",3,!0),o=it(e,"stage",3,"building");function u(m){switch(m){case"building":return"Building transaction...";case"confirming":return"Waiting for confirmation...";case"applied":return"CONFIRMED";case"failed":return"FAILED"}}let l=C(()=>e.explorerTemplate?e.explorerTemplate.replace("%s",e.opHash??""):void 0),d=C(()=>u(o()));const h=C(()=>o()==="building"||o()==="confirming");mt(t,{get persistent(){return a(h)},get open(){return i()},set open(m){i(m)},children:(m,x)=>{var c=pn(),b=r(c),k=r(b);{var p=U=>{var O=fn(),f=r(O,!0);s(O),R(()=>P(f,e.error)),g(U,O)},S=U=>{var O=bn(),f=I(O),D=r(f);s(f);var N=v(f,2);nt(N);var H=v(N,2);{var G=M=>{var T=gn();g(M,T)},y=(M,T)=>{{var $=X=>{var J=hn();g(X,J)},F=X=>{var J=_n(),ae=I(J),ie=r(ae);gt(ie,{get message(){return a(d)},progress:"indeterminate"}),s(ae);var le=v(ae,2);{var oe=he=>{var ne=mn();g(he,ne)};B(le,he=>{o()==="building"&&he(oe)})}g(X,J)};B(M,X=>{o()==="failed"?X($):X(F,!1)},T)}};B(H,M=>{o()==="applied"?M(G):M(y,!1)})}var _=v(H,2);let L;var z=r(_);E(z,{onclick:()=>window.open(a(l),"_blank"),children:(M,T)=>{ut();var $=Ue("Open Explorer");g(M,$)},$$slots:{default:!0}}),s(_),R(M=>{P(D,`Transaction ${e.opHash??"~ TBD ~"??""}`),L=De(_,1,"explore",null,L,M)},[()=>({disabled:o()==="building"})]),g(U,O)};B(k,U=>{e.error?U(p):U(S,!1)})}var Y=v(k,2);{var W=U=>{E(U,{label:"close",onclick:()=>i(!1)})};B(Y,U=>{(n()||o()==="applied"||o()==="failed"||e.error)&&U(W)})}s(b),s(c),g(m,c)},$$slots:{default:!0}}),ze()}var wn=st('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M 16 3 C 8.832031 3 3 8.832031 3 16 C 3 23.167969 8.832031 29 16 29 C 23.167969 29 29 23.167969 29 16 L 27 16 C 27 22.085938 22.085938 27 16 27 C 9.914063 27 5 22.085938 5 16 C 5 9.914063 9.914063 5 16 5 C 19.875 5 23.261719 6.984375 25.21875 10 L 20 10 L 20 12 L 28 12 L 28 4 L 26 4 L 26 7.71875 C 23.617188 4.84375 20.019531 3 16 3 Z"></path></svg>');function kn(t){var e=wn();g(t,e)}var xn=w('<h3 class="title svelte-4mtex8"> </h3>'),Cn=w('<p class="message svelte-4mtex8"> </p>'),Ln=w('<div class="prompt-wrap sl-card svelte-4mtex8"><!> <!> <!> <div class="controls padding-top svelte-4mtex8"><div class="control-button svelte-4mtex8"><!></div> <div><!></div></div></div>');function qt(t,e){Ae(e,!0);const i={title:"Prompt",message:"",hint:"",value:"",rules:[],confirmText:"Confirm",cancelText:"Cancel"};let n=Me(Ct(i)),o=Me(!1),u=Me(Ct({resolve:()=>l(),reject:()=>l()}));function l(){q(o,!1)}async function d(m){return q(o,!0),q(n,{...i,...m},!0),new Promise((x,c)=>{q(u,{resolve:b=>{l(),x(b)},reject:b=>{l(),c(b)}},!0)})}let h=C(()=>Nt(a(n).value,a(n).rules)!==!0);return mt(t,{persistent:!0,get open(){return a(o)},set open(m){q(o,m,!0)},children:(m,x)=>{var c=Ln(),b=r(c);{var k=y=>{var _=Ye(),L=I(_);ct(L,()=>e.title,()=>a(n)),g(y,_)},p=y=>{var _=xn(),L=r(_,!0);s(_),R(()=>P(L,a(n).title)),g(y,_)};B(b,y=>{e.title?y(k):y(p,!1)})}var S=v(b,2);{var Y=y=>{var _=Ye(),L=I(_);ct(L,()=>e.message,()=>a(n)),g(y,_)},W=(y,_)=>{{var L=z=>{var M=Cn(),T=r(M,!0);s(M),R(()=>P(T,a(n).message)),g(z,M)};B(y,z=>{a(n).message&&z(L)},_)}};B(S,y=>{e.message?y(Y):y(W,!1)})}var U=v(S,2);ft(U,ma(()=>a(n),{no_label:!0,get value(){return a(n).value},set value(y){a(n).value=y}}));var O=v(U,2),f=r(O);rt(f,"",{},{"grid-column":"1"});var D=r(f);E(D,{get label(){return a(n).cancelText},onclick:()=>a(u).reject(Ut)}),s(f);var N=v(f,2);let H;rt(N,"",{},{"grid-column":"3"});var G=r(N);E(G,{get label(){return a(n).confirmText},onclick:()=>a(u).resolve(a(n).value)}),s(N),s(O),s(c),R(y=>H=De(N,1,"control-button svelte-4mtex8",null,H,y),[()=>({disabled:a(h)})]),g(m,c)},$$slots:{default:!0}}),ze({prompt:d})}var Pn=w('<div class="row svelte-u91e2c"><!></div>'),Mn=(t,e)=>et(a(e).id),Dn=w('<div class="property svelte-u91e2c">Staked Balance:</div> <div class="value svelte-u91e2c"><div class="icon svelte-u91e2c">üßä</div> </div> <div class="action svelte-u91e2c"><!></div>',1),Sn=w('<div class="property svelte-u91e2c">Unstaked Balance:</div> <div class="value svelte-u91e2c"><div class="icon svelte-u91e2c">üí∞</div> </div> <div class="action svelte-u91e2c"><!></div>',1),An=w('<div class="title svelte-u91e2c">Account Information</div> <div class="property svelte-u91e2c">Address:</div> <button class="value unstyle-button address svelte-u91e2c"> </button> <div class="property svelte-u91e2c">Full Balance:</div> <div class="value svelte-u91e2c"><div class="icon svelte-u91e2c">‚öñÔ∏è</div> </div> <div class="property svelte-u91e2c">Liquid Balance:</div> <div class="value svelte-u91e2c"><div class="icon svelte-u91e2c">üåä</div> </div> <div class="action svelte-u91e2c"><!></div> <!> <!>',1),zn=w('<div class="account-info svelte-u91e2c"><!></div> <!>',1);function Bn(t,e){Ae(e,!0);let i,n=C(()=>e.session.account);async function o(){const k=await i.prompt({title:"Stake",message:"Enter the amount you want to stake",value:"0",rules:ba(a(n)),confirmText:"Stake"}),p=BigInt(Math.floor(Number(k)*Tt));await e.onNewOperation(async()=>await e.session.stake(p)),await Promise.allSettled([e.session.refreshDelegate(),e.session.refreshBalance()])}async function u(){const k=await i.prompt({title:"Unstake",message:"Enter the amount you want to unstake",value:"0",rules:pa(a(n)),confirmText:"Unstake"}),p=BigInt(Math.floor(Number(k)*Tt));await e.onNewOperation(async()=>await e.session.unstake(p)),await Promise.allSettled([e.session.refreshDelegate(),e.session.refreshBalance()])}async function l(){await e.onNewOperation(async()=>await e.session.finalizeUnstake()),await Promise.allSettled([e.session.refreshDelegate(),e.session.refreshBalance()])}var d=zn(),h=I(d),m=r(h);{var x=k=>{var p=Pn(),S=r(p);gt(S,{progress:"indeterminate",message:"Loading account information..."}),s(p),g(k,p)},c=k=>{var p=An(),S=v(I(p),4);S.__click=[Mn,n];var Y=r(S,!0);s(S);var W=v(S,4),U=v(r(W));s(W);var O=v(W,4),f=v(r(O));s(O);var D=v(O,2),N=r(D);E(N,{label:"Stake",onclick:o}),s(D);var H=v(D,2);{var G=L=>{var z=Dn(),M=v(I(z),2),T=v(r(M));s(M);var $=v(M,2),F=r($);E(F,{label:"Unstake",onclick:u}),s($),R(X=>P(T,` ${X??""}`),[()=>at(a(n).stakedBalance)]),g(L,z)};B(H,L=>{a(n).stakedBalance>0&&L(G)})}var y=v(H,2);{var _=L=>{var z=Sn(),M=v(I(z),2),T=v(r(M));s(M);var $=v(M,2),F=r($);E(F,{label:"Finalize",onclick:l}),s($),R(X=>P(T,` ${X??""}`),[()=>at(a(n).finalizableBalance)]),g(L,z)};B(y,L=>{a(n).finalizableBalance>0&&L(_)})}R((L,z)=>{P(Y,a(n).id),P(U,` ${L??""}`),P(f,` ${z??""}`)},[()=>at(a(n).fullBalance),()=>at(a(n).balance)]),g(k,p)};B(m,k=>{e.session.state.isLoadingBalance?k(x):k(c,!1)})}s(h);var b=v(h,2);dt(qt(b,{}),k=>i=k,()=>i),g(t,d),ze()}ht(["click"]);var Nn=(t,e)=>et(e.period.proposal),Tn=w('<div class="button-content svelte-7cp7l1"><div class="label svelte-7cp7l1">EXPLORER</div> <div class="icon svelte-7cp7l1"><!></div></div>'),On=w('<div class="button-content svelte-7cp7l1"><div class="label svelte-7cp7l1">AGORA</div> <div class="icon svelte-7cp7l1"><!></div></div>'),En=w('<div class="period-wrap svelte-7cp7l1"><div class="period svelte-7cp7l1"><div class="proposal svelte-7cp7l1"><div class="title svelte-7cp7l1"><button class="unstyle-button"> </button></div> <!> <!></div></div></div>');function In(t,e){Ae(e,!0);function i(){window.open(`${It}/${e.period.proposal}`,"_blank")}function n(){window.open(`${Rt}/${e.period.proposal}/${e.period.index}`,"_blank")}var o=En(),u=r(o),l=r(u),d=r(l),h=r(d);h.__click=[Nn,e];var m=r(h,!0);s(h),s(d);var x=v(d,2);E(x,{onclick:()=>i(),children:(b,k)=>{var p=Tn(),S=v(r(p),2),Y=r(S);Wt(Y),s(S),s(p),g(b,p)},$$slots:{default:!0}});var c=v(x,2);E(c,{onclick:()=>n(),children:(b,k)=>{var p=On(),S=v(r(p),2),Y=r(S);Ft(Y),s(S),s(p),g(b,p)},$$slots:{default:!0}}),s(l),s(u),s(o),R(()=>P(m,e.period.proposal)),g(t,o),ze()}ht(["click"]);var Rn=w('<h3 class="title svelte-1hehw4i"> </h3>'),Un=w('<p class="message svelte-1hehw4i"> </p>'),Fn=w('<p class="note svelte-1hehw4i"> </p>'),Wn=w('<div class="confirm-wrap sl-card svelte-1hehw4i"><!> <!> <!> <div class="controls padding-top svelte-1hehw4i"><div class="control-button svelte-1hehw4i"><!></div> <div class="control-button svelte-1hehw4i"><!></div></div></div>');function jn(t,e){Ae(e,!0);const i={title:"Confirm",message:"",note:"",confirmText:"Confirm",cancelText:"Cancel"};let n=Me(Ct(i)),o=Me(!1),u=Me(Ct({resolve:()=>l(),reject:()=>l()}));function l(){q(o,!1)}async function d(h){return q(o,!0),q(n,{...i,...h},!0),new Promise((m,x)=>{q(u,{resolve:c=>{l(),m(c)},reject:c=>{l(),x(c)}},!0)})}return mt(t,{persistent:!0,get open(){return a(o)},set open(h){q(o,h,!0)},children:(h,m)=>{var x=Wn(),c=r(x);{var b=y=>{var _=Ye(),L=I(_);ct(L,()=>e.title,()=>a(n)),g(y,_)},k=y=>{var _=Rn(),L=r(_,!0);s(_),R(()=>P(L,a(n).title)),g(y,_)};B(c,y=>{e.title?y(b):y(k,!1)})}var p=v(c,2);{var S=y=>{var _=Ye(),L=I(_);ct(L,()=>e.message,()=>a(n)),g(y,_)},Y=(y,_)=>{{var L=z=>{var M=Un(),T=r(M,!0);s(M),R(()=>P(T,a(n).message)),g(z,M)};B(y,z=>{a(n).message&&z(L)},_)}};B(p,y=>{e.message?y(S):y(Y,!1)})}var W=v(p,2);{var U=y=>{var _=Ye(),L=I(_);ct(L,()=>e.note,()=>a(n)),g(y,_)},O=(y,_)=>{{var L=z=>{var M=Fn(),T=r(M,!0);s(M),R(()=>P(T,a(n).note)),g(z,M)};B(y,z=>{a(n).note&&z(L)},_)}};B(W,y=>{e.note?y(U):y(O,!1)})}var f=v(W,2),D=r(f);rt(D,"",{},{"grid-column":"1"});var N=r(D);E(N,{get label(){return a(n).cancelText},onclick:()=>a(u).reject(Ut)}),s(D);var H=v(D,2);rt(H,"",{},{"grid-column":"3"});var G=r(H);E(G,{get label(){return a(n).confirmText},onclick:()=>a(u).resolve()}),s(H),s(f),s(x),g(h,x)},$$slots:{default:!0}}),ze({request_confirmation:d})}var Vn=w('<div class="prompt-wrap sl-card svelte-1igllg9"><h3 class="title svelte-1igllg9">Set Delegate Parameters</h3> <p class="message svelte-1igllg9">Set delegate staking parameters - edge and limit.</p> <!> <!> <div class="controls padding-top svelte-1igllg9"><div class="control-button svelte-1igllg9"><!></div> <div><!></div></div></div>');function qn(t,e){Ae(e,!1);const i=Yt(),n={value:{edge:100,limit:1}};let o=it(e,"state",12,n),u=it(e,"isOpen",12,!1),l=Yt({resolve:()=>d(),reject:()=>d()});function d(){u(!1)}const h=[c=>!!c||c.toString()==="0"||"Edge is required",c=>!isNaN(Number(c))||"Edge must be a number",c=>Number(c)>=0&&Number(c)<=100||"Edge must be between 0 and 100"],m=[c=>!!c||c.toString()==="0"||"Limit is required",c=>!isNaN(Number(c))||"Limit must be a number",c=>Number(c)>=0&&Number(c)<=ya||"Limit must be between 0 and 9"];async function x(c){return u(!0),o({...n,...c}),new Promise((b,k)=>{q(l,{resolve:p=>{d(),b(p)},reject:p=>{d(),k(p)}})})}return ua(()=>ha(o()),()=>{q(i,Nt(o().value.limit,m)!==!0||Nt(o().value.edge,h)!==!0)}),fa(),Ca(),mt(t,{persistent:!0,get open(){return u()},set open(c){u(c)},children:(c,b)=>{var k=Vn(),p=v(r(k),4);ft(p,{type:"number",get rules(){return h},label:"Staking Fee in %",hint:"Edge of baking over staking",get value(){return o().value.edge},set value(N){o(o().value.edge=N,!0)},$$legacy:!0});var S=v(p,2);ft(S,{type:"number",get rules(){return m},label:"Staking capacity - multiplier of your stake",hint:"Limit of staking over baking",get value(){return o().value.limit},set value(N){o(o().value.limit=N,!0)},$$legacy:!0});var Y=v(S,2),W=r(Y);rt(W,"",{},{"grid-column":"1"});var U=r(W);E(U,{label:"Cancel",onclick:()=>a(l).reject(Ut)}),s(W);var O=v(W,2);let f;rt(O,"",{},{"grid-column":"3"});var D=r(O);E(D,{label:"Set",onclick:()=>a(l).resolve(o().value)}),s(O),s(Y),s(k),R(N=>f=De(O,1,"control-button svelte-1igllg9",null,f,N),[()=>({disabled:a(i)})],ga),g(c,k)},$$slots:{default:!0},$$legacy:!0}),La(e,"prompt",x),ze({prompt:x})}var Hn=w('<div class="row svelte-11v2v2f"><!></div>'),Yn=w('<div class="icon svelte-11v2v2f"><!></div>'),Xn=w('<b class="account-note error svelte-11v2v2f">INACTIVE</b> <div class="action svelte-11v2v2f"><!></div>',1),Zn=w('<div class="row svelte-11v2v2f"><!></div>  <b> </b> <div> </div> <div> </div>',1),Kn=(t,e)=>et(a(e)?.pkh??""),Gn=(t,e)=>et(a(e)?.pkh??""),Jn=w('<div class="property svelte-11v2v2f">Pending (<b> </b>):</div> <button class="value unstyle-button address svelte-11v2v2f"> </button>',1),Qn=w('<div class="property svelte-11v2v2f">Total Staked:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">‚ùÑÔ∏è</div> </div> <div class="property svelte-11v2v2f">Total Delegated:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">üåä</div> </div> <div class="property svelte-11v2v2f">Available Staking Capacity:</div> <div><div class="icon svelte-11v2v2f">‚ùÑÔ∏è</div> </div> <div class="property svelte-11v2v2f">Available Delegation Capacity:</div> <div><div class="icon svelte-11v2v2f">üåä</div> </div> <div class="row svelte-11v2v2f"></div> <div class="subtitle svelte-11v2v2f">Parameters</div> <div class="property svelte-11v2v2f">Staking Fee:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">üí∏</div> </div> <div class="property svelte-11v2v2f">Total Stake Capacity:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">‚ùÑÔ∏è</div> </div> <!> <div class="action svelte-11v2v2f"><!></div> <div class="row svelte-11v2v2f"></div> <div class="subtitle svelte-11v2v2f">Consensus Key</div> <div class="property svelte-11v2v2f">ACTIVE:</div> <button class="value unstyle-button address svelte-11v2v2f"> </button> <!> <div class="action svelte-11v2v2f"><!></div>',1),$n=w('<div class="redo svelte-11v2v2f"><!></div> <div class="title svelte-11v2v2f">Baker Management</div> <!>',1),er=(t,e)=>et(a(e).id),tr=w('<div class="property svelte-11v2v2f">Upcoming Staking Fee (<b> </b>):</div> <div class="value svelte-11v2v2f"> </div>',1),ar=w('<div class="title svelte-11v2v2f">Delegation Management</div> <div class="property svelte-11v2v2f">Baker:</div> <button class="value unstyle-button address svelte-11v2v2f"> </button> <div class="property svelte-11v2v2f">Staking Fee:</div> <div class="value svelte-11v2v2f"><div class="icon svelte-11v2v2f">üí∏</div> </div> <!> <div class="property svelte-11v2v2f">Total Stake Capacity:</div>  <div class="value svelte-11v2v2f"> </div> <div class="property svelte-11v2v2f">Available Stake Capacity:</div> <div> </div> <div class="property svelte-11v2v2f">Available Delegation Capacity:</div> <div> </div> <div class="row svelte-11v2v2f"></div> <div class="action-pair svelte-11v2v2f"><!> <!></div>',1),ir=w('<div class="title svelte-11v2v2f">Not a baker and not delegating</div> <div class="account-note svelte-11v2v2f">NOTE: You have to delegate to be able to stake.</div> <div class="action-pair svelte-11v2v2f"><!> <!></div>',1),nr=w('<div class="delegation-info svelte-11v2v2f"><!></div> <!> <!> <!>',1);function rr(t,e){Ae(e,!0);let i,n,o,u=C(()=>e.session.account);async function l(){await e.onNewOperation(async()=>await e.session.delegate(a(u).id)),await e.session.refreshDelegate()}async function d(){await await n.request_confirmation({title:"Become a Baker",message:"Are you sure you want to become a baker?",note:"!!! THIS OPERATION IS IRREVERSIBLE !!!",confirmText:"Yes",cancelText:"No"}),await e.onNewOperation(async()=>await e.session.delegate(a(u).id)),await e.session.refreshDelegate()}async function h(){const f=await i.prompt({title:"Delegate",message:"Enter the address you want to delegate to",value:"",rules:wa("baker"),confirmText:"Delegate"});await e.onNewOperation(async()=>await e.session.delegate(f)),await e.session.refreshDelegate()}async function m(){await e.onNewOperation(async()=>await e.session.delegate()),await e.session.refreshDelegate()}async function x(){const f=a(u).delegate?.activeStakingParameters,D=a(u).delegate?.pendingStakingParameters;let N=f?f.edge_of_baking_over_staking_billionth/1e7:0;const H=Pa(D);H&&(N=H.edge_of_baking_over_staking_billionth/1e7);let G=f?f.limit_of_staking_over_baking_millionth/1e6:0;H&&(G=H.limit_of_staking_over_baking_millionth/1e6);const{edge:y,limit:_}=await o.prompt({value:{edge:N,limit:G}});await e.onNewOperation(async()=>await e.session.setDelegateParameters(y/100,_)),await e.session.refreshDelegate()}async function c(){const f=await i.prompt({title:"Update Consensus Key",message:"Enter the new consensus key",value:"",rules:ka(),confirmText:"Update Consensus Key"});await e.onNewOperation(async()=>await e.session.updateConsensusKey(f)),await e.session.refreshDelegate()}var b=nr(),k=I(b),p=r(k);{var S=f=>{var D=Hn(),N=r(D);gt(N,{progress:"indeterminate",message:"Loading delegation information..."}),s(D),g(f,D)},Y=(f,D)=>{{var N=G=>{var y=$n();const _=C(()=>a(u).delegate);var L=I(y),z=r(L);E(z,{get onclick(){return e.session.refreshDelegate},children:(F,X)=>{var J=Yn(),ae=r(J);kn(ae),s(J),g(F,J)},$$slots:{default:!0}}),s(L);var M=v(L,4);{var T=F=>{var X=Xn(),J=v(I(X),2),ae=r(J);E(ae,{label:"Reactivate",onclick:l}),s(J),g(F,X)},$=F=>{var X=Qn();const J=C(()=>a(_).activeStakingParameters),ae=C(()=>Mt(a(_)?.stakedBalance,a(J)?.limit_of_staking_over_baking_millionth)),ie=C(()=>Dt(a(J)?.limit_of_staking_over_baking_millionth)),le=C(()=>a(ae)-a(_).totalStaked),oe=C(()=>a(ae)-a(_).totalDelegated),he=C(()=>a(_).activeStakingParameters?.edge_of_baking_over_staking_billionth??0),ne=C(()=>a(_).pendingStakingParameters??[]),ye=C(()=>a(_).consensusKeys?.active),re=C(()=>a(_).consensusKeys?.pending??[]);var de=v(I(X),2),we=v(r(de));s(de);var ke=v(de,4),me=v(r(ke));s(ke);var xe=v(ke,4);let j;var Z=v(r(xe));s(xe);var Q=v(xe,4);let te;var ce=v(r(Q));s(Q);var _e=v(Q,8),Fe=v(r(_e));s(_e);var be=v(_e,4),ee=v(r(be));s(be);var ue=v(be,2);{var We=se=>{var Ve=Ye(),A=I(Ve);wt(A,17,()=>a(ne),kt,(V,K,ge,Pe)=>{var qe=Zn();const Ee=C(()=>Mt(a(_)?.stakedBalance,a(K)?.limit_of_staking_over_baking_millionth)),tt=C(()=>Dt(a(K)?.limit_of_staking_over_baking_millionth));var Te=I(qe),Ze=r(Te);nt(Ze),s(Te);var ve=v(Te,2),Ie=r(ve);s(ve);var He=v(ve,2),ra=r(He);s(He);var Ht=v(He,2),sa=r(Ht);s(Ht),R((oa,va,la)=>{P(Ie,`Pending cycle ${a(K).cycle??""}:`),P(ra,`Staking Fee: ${oa??""}`),P(sa,`Total Stake Capacity: ${va??""} (mutliplier: ${la??""})`)},[()=>bt(a(K).edge_of_baking_over_staking_billionth),()=>$e(a(Ee)),()=>Pt(a(tt))]),g(V,qe)}),g(se,Ve)};B(ue,se=>{a(ne)&&a(ne).length>0&&se(We)})}var Ce=v(ue,2),pe=r(Ce);E(pe,{label:"Update",onclick:x}),s(Ce);var Be=v(Ce,8);Be.__click=[Kn,ye];var je=r(Be,!0);s(Be);var Ne=v(Be,2);{var fe=se=>{var Ve=Ye(),A=I(Ve);wt(A,17,()=>a(re),kt,(V,K,ge,Pe)=>{var qe=Jn(),Ee=I(qe),tt=v(r(Ee)),Te=r(tt);s(tt),ut(),s(Ee);var Ze=v(Ee,2);Ze.__click=[Gn,K];var ve=r(Ze,!0);s(Ze),R(()=>{P(Te,`#${a(K).cycle??""}`),P(ve,a(K)?.pkh??"N/A")}),g(V,qe)}),g(se,Ve)};B(Ne,se=>{a(re)&&a(re).length>0&&se(fe)})}var Se=v(Ne,2),Le=r(Se);{var Xe=se=>{E(se,{label:"Update",onclick:c})},ot=se=>{E(se,{label:"Set Up",onclick:c})};B(Le,se=>{a(ye)||a(re).length>0?se(Xe):se(ot,!1)})}s(Se),R((se,Ve,A,V,K,ge,Pe,qe,Ee)=>{P(we,` ${se??""}`),P(me,` ${Ve??""}`),j=De(xe,1,"value svelte-11v2v2f",null,j,A),P(Z,` ${V??""}`),te=De(Q,1,"value svelte-11v2v2f",null,te,K),P(ce,` ${ge??""}`),P(Fe,` ${Pe??""}`),P(ee,` ${qe??""} (multiplier: ${Ee??""})`),P(je,a(ye)?.pkh??"N/A")},[()=>at(a(_).totalStaked),()=>at(a(_).totalDelegated),()=>({error:a(le)<=0}),()=>$e(a(le)),()=>({error:a(oe)<=0}),()=>$e(a(oe)),()=>bt(a(he)),()=>$e(a(ae)),()=>Pt(a(ie))]),g(F,X)};B(M,F=>{a(_).isDeactivated?F(T):F($,!1)})}g(G,y)},H=(G,y)=>{{var _=z=>{var M=ar();const T=C(()=>a(u).delegate),$=C(()=>a(T).activeStakingParameters?.edge_of_baking_over_staking_billionth??0),F=C(()=>a(T).pendingStakingParameters??[]),X=C(()=>a(T).activeStakingParameters),J=C(()=>Mt(a(T)?.stakedBalance,a(X)?.limit_of_staking_over_baking_millionth)),ae=C(()=>Dt(a(X)?.limit_of_staking_over_baking_millionth)),ie=C(()=>a(J)-a(T).totalStaked),le=C(()=>a(J)-a(T).totalDelegated);var oe=v(I(M),4);oe.__click=[er,u];var he=r(oe,!0);s(oe);var ne=v(oe,4),ye=v(r(ne));s(ne);var re=v(ne,2);{var de=be=>{var ee=Ye(),ue=I(ee);wt(ue,17,()=>a(F),kt,(We,Ce,pe,Be)=>{var je=tr(),Ne=I(je),fe=v(r(Ne)),Se=r(fe);s(fe),ut(),s(Ne);var Le=v(Ne,2),Xe=r(Le);s(Le),R(ot=>{P(Se,`#${a(Ce).cycle??""}`),P(Xe,`Staking Fee: ${ot??""}`)},[()=>bt(a(Ce).edge_of_baking_over_staking_billionth)]),g(We,je)}),g(be,ee)};B(re,be=>{a(F)&&a(F).length>0&&be(de)})}var we=v(re,4),ke=r(we);s(we);var me=v(we,4);let xe;var j=r(me);s(me);var Z=v(me,4);let Q;var te=r(Z);s(Z);var ce=v(Z,4),_e=r(ce);E(_e,{label:"Cancel Delegation",onclick:m});var Fe=v(_e,2);E(Fe,{label:"Change The Baker",onclick:h}),s(ce),R((be,ee,ue,We,Ce,pe,Be)=>{P(he,a(T).pkh),P(ye,` ${be??""}`),P(ke,`‚ùÑÔ∏è ${ee??""} (multiplier: ${ue??""})`),xe=De(me,1,"value svelte-11v2v2f",null,xe,We),P(j,`‚ùÑÔ∏è ${Ce??""}`),Q=De(Z,1,"value svelte-11v2v2f",null,Q,pe),P(te,`‚ùÑÔ∏è ${Be??""}`)},[()=>bt(a($)),()=>$e(a(J)),()=>Pt(a(ae)),()=>({error:a(ie)<=0}),()=>$e(a(ie)),()=>({error:a(ie)<=0}),()=>$e(a(le))]),g(z,M)},L=z=>{var M=ir(),T=v(I(M),4),$=r(T);E($,{label:"Become a baker",onclick:d});var F=v($,2);E(F,{label:"Delegate",onclick:h}),s(T),g(z,M)};B(G,z=>{a(u).delegate?z(_):z(L,!1)},y)}};B(f,G=>{a(u).delegate?.pkh===a(u).id?G(N):G(H,!1)},D)}};B(p,f=>{e.session.state.isLoadingBalance?f(S):f(Y,!1)})}s(k);var W=v(k,2);dt(qt(W,{}),f=>i=f,()=>i);var U=v(W,2);dt(jn(U,{}),f=>n=f,()=>n);var O=v(U,2);dt(qn(O,{}),f=>o=f,()=>o),g(t,b),ze()}ht(["click"]);var sr=w('<div class="donate-btn svelte-a80gb8"><div></div> <div>üå±</div> <div>Donate to TzC / TEZGOV</div> <div>üå±</div></div>'),or=w('<div class="donate-wrap svelte-a80gb8"><!></div> <!>',1);function vr(t,e){Ae(e,!0);let i,n=C(()=>e.session.account);async function o(){const m=await i.prompt({title:"Donate",message:"Enter the amount TEZ you want to donate",value:"1",rules:xa(a(n)),confirmText:"Donate"}),x=BigInt(Number(m)*Tt);await e.onNewOperation(async()=>await e.session.donate(x)),await e.session.refreshBalance()}var u=or(),l=I(u),d=r(l);E(d,{onclick:o,children:(m,x)=>{var c=sr();g(m,c)},$$slots:{default:!0}}),s(l);var h=v(l,2);dt(qt(h,{}),m=>i=m,()=>i),g(t,u),ze()}var lr=w('<div class="loader svelte-frt7xm"><!></div>'),dr=w("<!>votingPeriod",1),cr=w('<div class="error-message svelte-frt7xm"> </div> votingPeriod',1),ur=w('<div class="title svelte-frt7xm"><h5 class="svelte-frt7xm"> </h5></div> <div class="governance-period-header svelte-frt7xm"><div class="governance-period-number svelte-frt7xm"> </div> <div class="governance-period-remaining svelte-frt7xm"><!></div></div> <!> <!>',1),fr=w('<div class="account-overview sl-card svelte-frt7xm"><!></div> <div class="account-overview sl-card svelte-frt7xm"><!></div> <div class="account-overview sl-card svelte-frt7xm"><!></div> <div class="governance sl-card svelte-frt7xm"><div class="governance-period svelte-frt7xm"><!></div></div>',1),gr=w('<div class="home-wrap svelte-frt7xm"><!></div> <!>',1);function kr(t,e){Ae(e,!0);let i=C(()=>Oe.active?.state.period),n=C(()=>a(i)?.block),o=C(()=>Ga(a(i),a(n))),u=C(()=>tn(a(o),{addSuffix:!0})),l=C(()=>a(o)<new Date),d=C(()=>a(i)&&Ja(a(i),a(n))),h=Me(void 0),m=Me("building"),x=Me(void 0),c=Me(!1);Bt(()=>{a(c)||(q(h,void 0),q(x,void 0),q(m,"building"))});async function b(f){try{q(c,!0),q(m,"building");const D=await f(),N=await D.send();q(x,N.ophash,!0),q(m,"confirming"),await D.confirmation(),q(m,"applied")}catch(D){q(m,"failed"),q(h,D.message,!0)}}var k=gr(),p=I(k),S=r(p);{var Y=f=>{var D=lr(),N=r(D);gt(N,{progress:"indeterminate",message:"Loading account..."}),s(D),g(f,D)},W=(f,D)=>{{var N=H=>{var G=fr(),y=I(G),_=r(y);Bn(_,{get session(){return Oe.active},onNewOperation:b}),s(y);var L=v(y,2),z=r(L);rr(z,{get session(){return Oe.active},onNewOperation:b}),s(L);var M=v(L,2),T=r(M);vr(T,{get session(){return Oe.active},onNewOperation:b}),s(M);var $=v(M,2),F=r($),X=r(F);{var J=ie=>{gt(ie,{progress:"indeterminate",message:"Loading governance state..."})},ae=ie=>{var le=Ye(),oe=I(le);{var he=ne=>{var ye=ur(),re=I(ye),de=r(re),we=r(de);s(de),s(re);var ke=v(re,2),me=r(ke),xe=r(me);s(me);var j=v(me,2),Z=r(j);{var Q=ee=>{var ue=Ue("ended");g(ee,ue)},te=ee=>{var ue=Ue();R(()=>P(ue,`ends in ${a(d)??""} blocks ~ ${a(u)??""}`)),g(ee,ue)};B(Z,ee=>{a(l)?ee(Q):ee(te,!1)})}s(j),s(ke);var ce=v(ke,2);nt(ce);var _e=v(ce,2);{var Fe=ee=>{oi(ee,{get session(){return Oe.active},onNewOperation:b,get period(){return a(i)}})},be=(ee,ue)=>{{var We=pe=>{un(pe,{get session(){return Oe.active},onNewOperation:b,get period(){return a(i)}})},Ce=(pe,Be)=>{{var je=fe=>{var Se=dr(),Le=I(Se);In(Le,{get period(){return a(i)}}),ut(),g(fe,Se)},Ne=fe=>{var Se=cr(),Le=I(Se),Xe=r(Le);s(Le),ut(),R(()=>P(Xe,`${a(i).kind??""} is not supported yet`)),g(fe,Se)};B(pe,fe=>{["testing","adoption"].includes(a(i).kind)?fe(je):fe(Ne,!1)},Be)}};B(ee,pe=>{["exploration","promotion"].includes(a(i).kind)?pe(We):pe(Ce,!1)},ue)}};B(_e,ee=>{a(i).kind==="proposal"?ee(Fe):ee(be,!1)})}R(()=>{P(we,`${a(i)?.kind??""} Period`),P(xe,`#${a(i).index??""}`)}),g(ne,ye)};B(oe,ne=>{a(i)!==void 0&&ne(he)})}g(ie,le)};B(X,ie=>{Oe?.active?.state.isLoadingPeriod?ie(J):ie(ae,!1)})}s(F),s($),g(H,G)};B(f,H=>{Oe.active&&H(N)},D)}};B(S,f=>{Oe.active&&Oe.active.state.isInitializing?f(Y):f(W,!1)})}s(p);var U=v(p,2);const O=C(()=>Oe?.active?.account.explorer??"");yn(U,{get opHash(){return a(x)},get explorerTemplate(){return a(O)},get error(){return a(h)},allowClose:!1,get stage(){return a(m)},get open(){return a(c)},set open(f){q(c,f,!0)}}),g(t,k),ze()}export{kr as component};
